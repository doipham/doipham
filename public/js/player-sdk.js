!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.playerSDK=t():e.playerSDK=t()}(window,(function(){return t=[function(e,t,n){var i;"undefined"!=typeof window&&(i=function(){return t=[function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),(t=i=i||{}).MEDIA_ATTACHING="hlsMediaAttaching",t.MEDIA_ATTACHED="hlsMediaAttached",t.MEDIA_DETACHING="hlsMediaDetaching",t.MEDIA_DETACHED="hlsMediaDetached",t.BUFFER_RESET="hlsBufferReset",t.BUFFER_CODECS="hlsBufferCodecs",t.BUFFER_CREATED="hlsBufferCreated",t.BUFFER_APPENDING="hlsBufferAppending",t.BUFFER_APPENDED="hlsBufferAppended",t.BUFFER_EOS="hlsBufferEos",t.BUFFER_FLUSHING="hlsBufferFlushing",t.BUFFER_FLUSHED="hlsBufferFlushed",t.MANIFEST_LOADING="hlsManifestLoading",t.MANIFEST_LOADED="hlsManifestLoaded",t.MANIFEST_PARSED="hlsManifestParsed",t.LEVEL_SWITCHING="hlsLevelSwitching",t.LEVEL_SWITCHED="hlsLevelSwitched",t.LEVEL_LOADING="hlsLevelLoading",t.LEVEL_LOADED="hlsLevelLoaded",t.LEVEL_UPDATED="hlsLevelUpdated",t.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",t.LEVELS_UPDATED="hlsLevelsUpdated",t.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",t.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",t.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",t.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",t.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",t.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",t.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",t.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",t.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",t.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",t.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",t.CUES_PARSED="hlsCuesParsed",t.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",t.INIT_PTS_FOUND="hlsInitPtsFound",t.FRAG_LOADING="hlsFragLoading",t.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",t.FRAG_LOADED="hlsFragLoaded",t.FRAG_DECRYPTED="hlsFragDecrypted",t.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",t.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",t.FRAG_PARSING_METADATA="hlsFragParsingMetadata",t.FRAG_PARSED="hlsFragParsed",t.FRAG_BUFFERED="hlsFragBuffered",t.FRAG_CHANGED="hlsFragChanged",t.FPS_DROP="hlsFpsDrop",t.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",t.ERROR="hlsError",t.DESTROYING="hlsDestroying",t.KEY_LOADING="hlsKeyLoading",t.KEY_LOADED="hlsKeyLoaded",t.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",t.BACK_BUFFER_REACHED="hlsBackBufferReached"},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return o}));var i=function(){},r={trace:i,debug:i,log:i,warn:i,info:i,error:i},a=r;function s(e){if(self.console&&!0===e||"object"==typeof e){!function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];n.forEach((function(t){var n;a[t]=e[t]?e[t].bind(e):(t=t,(n=self.console[t])?n.bind(self.console,"["+t+"] >"):i)}))}(e,"debug","log","info","warn","error");try{a.log()}catch(e){a=r}}else a=r}var o=r},function(e,t,n){"use strict";var i,r;n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return r})),(t=i=i||{}).NETWORK_ERROR="networkError",t.MEDIA_ERROR="mediaError",t.KEY_SYSTEM_ERROR="keySystemError",t.MUX_ERROR="muxError",t.OTHER_ERROR="otherError",(n=r=r||{}).KEY_SYSTEM_NO_KEYS="keySystemNoKeys",n.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",n.KEY_SYSTEM_NO_SESSION="keySystemNoSession",n.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",n.KEY_SYSTEM_NO_INIT_DATA="keySystemNoInitData",n.MANIFEST_LOAD_ERROR="manifestLoadError",n.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",n.MANIFEST_PARSING_ERROR="manifestParsingError",n.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",n.LEVEL_EMPTY_ERROR="levelEmptyError",n.LEVEL_LOAD_ERROR="levelLoadError",n.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",n.LEVEL_SWITCH_ERROR="levelSwitchError",n.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",n.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",n.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",n.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",n.FRAG_LOAD_ERROR="fragLoadError",n.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",n.FRAG_DECRYPT_ERROR="fragDecryptError",n.FRAG_PARSING_ERROR="fragParsingError",n.REMUX_ALLOC_ERROR="remuxAllocError",n.KEY_LOAD_ERROR="keyLoadError",n.KEY_LOAD_TIMEOUT="keyLoadTimeOut",n.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",n.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",n.BUFFER_APPEND_ERROR="bufferAppendError",n.BUFFER_APPENDING_ERROR="bufferAppendingError",n.BUFFER_STALLED_ERROR="bufferStalledError",n.BUFFER_FULL_ERROR="bufferFullError",n.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",n.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",n.INTERNAL_EXCEPTION="internalException",n.INTERNAL_ABORTED="aborted",n.UNKNOWN="unknown"},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)};Number.MAX_SAFE_INTEGER},function(e,t,n){"use strict";var i,r;n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r})),(t=i=i||{}).MANIFEST="manifest",t.LEVEL="level",t.AUDIO_TRACK="audioTrack",t.SUBTITLE_TRACK="subtitleTrack",(n=r=r||{}).MAIN="main",n.AUDIO="audio",n.SUBTITLE="subtitle"},function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return g})),n.d(t,"k",(function(){return p})),n.d(t,"h",(function(){return m})),n.d(t,"e",(function(){return v})),n.d(t,"d",(function(){return y})),n.d(t,"f",(function(){return b})),n.d(t,"l",(function(){return A})),n.d(t,"b",(function(){return E})),n.d(t,"j",(function(){return T})),n.d(t,"i",(function(){return w})),n.d(t,"g",(function(){return S}));var i=n(9),r=n(6),a=n(7),s=Math.pow(2,32)-1,o=[].push,u={video:1,audio:2,id3:3,text:4};function l(e){return String.fromCharCode.apply(null,e)}function c(e,t){return(t=e[t]<<8|e[t+1])<0?65536+t:t}function d(e,t){return(e=h(e,t))<0?4294967296+e:e}function h(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}function f(e,t,n){e[t]=n>>24,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n}function g(e,t){var n=[];if(t.length)for(var i=e.byteLength,r=0;r<i;){var a,s=1<(s=d(e,r))?r+s:i;l(e.subarray(r+4,r+8))===t[0]&&(1===t.length?n.push(e.subarray(r+8,s)):(a=g(e.subarray(r+8,s),t.slice(1))).length&&o.apply(n,a)),r=s}return n}function p(e){var t=[],n=e[0],i=8,r=d(e,i),a=e.length+0,s=c(e,i=(i+=4)+(0===n?8:16)+2);i+=2;for(var o=0;o<s;o++){var u=i,l=d(e,u),h=(u+=4,2147483647&l);if(1==(2147483648&l)>>>31)return console.warn("SIDX has hierarchical references (not supported)"),null;l=d(e,u),u+=4,t.push({referenceSize:h,subsegmentDuration:l,info:{duration:l/r,start:a,end:a+h-1}}),a+=h,i=u+=4}return{earliestPresentationTime:0,timescale:r,version:n,referencesCount:s,references:t}}function m(e){for(var t=[],n=g(e,["moov","trak"]),i=0;i<n.length;i++){var a,s,o,u=n[i],c=g(u,["tkhd"])[0];c&&(c=d(c,0===c[0]?12:20),a=g(u,["mdia","mdhd"])[0])&&(a=d(a,0===a[0]?12:20),s=g(u,["mdia","hdlr"])[0])&&(s=l(s.subarray(8,12)),s={soun:r.a.AUDIO,vide:r.a.VIDEO}[s])&&(o=void 0,(u=g(u,["mdia","minf","stbl","stsd"])[0])&&(o=l(u.subarray(12,16))),t[c]={timescale:a,type:s},t[s]={timescale:a,id:c,codec:o})}return g(e,["moov","mvex","trex"]).forEach((function(e){var n=d(e,4);(n=t[n])&&(n.default={duration:d(e,12),flags:d(e,20)})})),t}function v(e,t){return g(t,["moof","traf"]).reduce((function(t,n){var i=g(n,["tfdt"])[0],r=i[0];return null!==(n=g(n,["tfhd"]).reduce((function(t,n){if(n=d(n,4),n=e[n]){var a=d(i,4);a=(a=1===r?(a*=Math.pow(2,32))+d(i,8):a)/(n.timescale||9e4);if(isFinite(a)&&(null===t||a<t))return a}return t}),null))&&isFinite(n)&&(null===t||n<t)?n:t}),null)||0}function y(e,t){for(var n=0,i=0,a=0,s=g(e,["moof","traf"]),o=0;o<s.length;o++){var u=s[o],l=g(u,["tfhd"])[0],c=t[d(l,4)];if(c){var h=c.default,f=d(l,0)|(null==h?void 0:h.flags),m=null==h?void 0:h.duration;8&f&&(m=d(l,2&f?12:8));for(var v=c.timescale||9e4,y=g(u,["trun"]),b=0;b<y.length;b++)!(n=function(e){var t=d(e,0),n=8;1&t&&(n+=4),4&t&&(n+=4);for(var i=0,r=d(e,4),a=0;a<r;a++)256&t&&(i+=d(e,n),n+=4),512&t&&(n+=4),1024&t&&(n+=4),2048&t&&(n+=4);return i}(y[b]))&&m&&(n=m*d(y[b],4)),c.type===r.a.VIDEO?i+=n/v:c.type===r.a.AUDIO&&(a+=n/v)}}if(0!==i||0!==a)return i||a;for(var A=0,E=g(e,["sidx"]),T=0;T<E.length;T++){var w=p(E[T]);null!=w&&w.references&&(A+=w.references.reduce((function(e,t){return e+t.info.duration||0}),0))}return A}function b(e,t,n){g(t,["moof","traf"]).forEach((function(t){g(t,["tfhd"]).forEach((function(i){var r;i=d(i,4);(i=e[i])&&(r=i.timescale||9e4,g(t,["tfdt"]).forEach((function(e){var t=e[0],i=d(e,4);0===t?(i-=n*r,f(e,4,i=Math.max(i,0))):(i=(i=(i*=Math.pow(2,32))+d(e,8))-n*r,i=Math.max(i,0),t=Math.floor(i/(s+1)),i=Math.floor(i%(s+1)),f(e,4,t),f(e,8,i))})))}))}))}function A(e){var t={valid:null,remainder:null},n=g(e,["moof"]);return n&&(n.length<2?t.remainder=e:(n=n[n.length-1],t.valid=Object(i.a)(e,0,n.byteOffset-8),t.remainder=Object(i.a)(e,n.byteOffset-8))),t}function E(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function T(e,t){var n=[],i=t.samples,a=t.timescale,s=t.id,o=!1;return g(i,["moof"]).map((function(u){var l=u.byteOffset-8;g(u,["traf"]).map((function(u){var c=g(u,["tfdt"]).map((function(e){var t=e[0],n=d(e,4);return(n=1===t?(n*=Math.pow(2,32))+d(e,8):n)/a}))[0];return void 0!==c&&(e=c),g(u,["tfhd"]).map((function(c){var f=d(c,4),p=16777215&d(c,0),m=0,v=0,y=8;f===s&&(0!=(1&p)&&(y+=8),0!=(2&p)&&(y+=4),0!=(8&p)&&(m=d(c,y),y+=4),0!=(16&p)&&(v=d(c,y),y+=4),0!=(32&p)&&(y+=4),"video"===t.type&&(f=t.codec,o=!!f&&("hvc1"===(c=(c=f.indexOf("."))<0?f:f.substring(0,c))||"hev1"===c||"dvh1"===c||"dvhe"===c)),g(u,["trun"]).map((function(s){var u=s[0],c=16777215&d(s,0),f=0,g=0!=(256&c),p=0,y=0!=(512&c),b=0,A=0!=(1024&c),E=0!=(2048&c),T=0,S=d(s,4),C=8;0!=(1&c)&&(f=d(s,C),C+=4),0!=(4&c)&&(C+=4);for(var x=f+l,k=0;k<S;k++){if(g?(p=d(s,C),C+=4):p=m,y?(b=d(s,C),C+=4):b=v,A&&(C+=4),E&&(T=(0===u?d:h)(s,C),C+=4),t.type===r.a.VIDEO)for(var I=0;I<b;){var L=d(i,x),R=31&i[x+=4];R=R,(o?39===R||40===R:6===R)&&w(i.subarray(x,x+L),e+T/a,n),x+=L,I+=L+4}e+=p/a}})))}))}))})),n}function w(e,t,n){var i=function(e){for(var t=e.byteLength,n=[],i=1;i<t-2;)0===e[i]&&0===e[i+1]&&3===e[i+2]?(n.push(i+2),i+=2):i++;if(0===n.length)return e;var r=t-n.length,a=new Uint8Array(r),s=0;for(i=0;i<r;s++,i++)s===n[0]&&(s++,n.shift()),a[i]=e[s];return a}(e),r=0;r++;for(var s=0,o=0,u=!1,l=0;r<i.length;){for(s=0;!(r>=i.length)&&(s+=l=i[r++],255===l););for(o=0;!(r>=i.length)&&(o+=l=i[r++],255===l););var h=i.length-r;if(!u&&4===s&&r<i.length){if(u=!0,181===i[r++]){var f=c(i,r);if(r+=2,49===f&&(f=d(i,r),r+=4,1195456820===f&&3===(f=i[r++]))){var g=i[r++],p=64&g,m=p?2+3*(31&g):0,v=new Uint8Array(m);if(p){v[0]=g;for(var y=1;y<m;y++)v[y]=i[r++]}n.push({type:f,payloadType:s,pts:t,bytes:v})}}}else if(5===s&&o<h){if(u=!0,16<o){for(var b=[],A=0;A<16;A++){var E=i[r++].toString(16);b.push(1==E.length?"0"+E:E),3!==A&&5!==A&&7!==A&&9!==A||b.push("-")}for(var T=o-16,w=new Uint8Array(T),S=0;S<T;S++)w[S]=i[r++];n.push({payloadType:s,pts:t,uuid:b.join(""),userData:Object(a.f)(w),userDataBytes:w})}}else if(o<h)r+=o;else if(h<o)break}}function S(e){var t="",n="",i=0,r=0,a=0,s=0,o=0,u=0;if(0===(c=e[0])){for(;"\0"!==l(e.subarray(u,u+1));)t+=l(e.subarray(u,u+1)),u+=1;for(t+=l(e.subarray(u,u+1)),u+=1;"\0"!==l(e.subarray(u,u+1));)n+=l(e.subarray(u,u+1)),u+=1;n+=l(e.subarray(u,u+1)),u+=1,i=d(e,12),r=d(e,16),s=d(e,20),o=d(e,24),u=28}else if(1===c){i=d(e,u+=4);var c=d(e,u+=4),h=d(e,u+=4);for(u+=4,a=Math.pow(2,32)*c+h,Number.isSafeInteger(a)||(a=Number.MAX_SAFE_INTEGER,console.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),s=d(e,u),o=d(e,u+=4),u+=4;"\0"!==l(e.subarray(u,u+1));)t+=l(e.subarray(u,u+1)),u+=1;for(t+=l(e.subarray(u,u+1)),u+=1;"\0"!==l(e.subarray(u,u+1));)n+=l(e.subarray(u,u+1)),u+=1;n+=l(e.subarray(u,u+1)),u+=1}return{schemeIdUri:t,value:n,timeScale:i,presentationTime:a,presentationTimeDelta:r,eventDuration:s,id:o,payload:e.subarray(u,e.byteLength)}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return g})),n.d(t,"c",(function(){return p}));var i,r=n(3),a=n(12),s=n(1),o=n(17),u=n(14);function l(e,t){e.prototype=Object.create(t.prototype),function(e,t){(Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}(e.prototype.constructor=e,t)}function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function d(e,t,n){t&&c(e.prototype,t),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(t=i=i||{}).AUDIO="audio",t.VIDEO="video",t.AUDIOVIDEO="audiovideo",y.prototype.setByteRange=function(e,t){var n=[];1===(e=e.split("@",2)).length?n[0]=t?t.byteRangeEndOffset:0:n[0]=parseInt(e[1]),n[1]=parseInt(e[0])+n[0],this._byteRange=n},d(y,[{key:"byteRange",get:function(){return this._byteRange||[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"url",get:function(){return!this._url&&this.baseurl&&this.relurl&&(this._url=Object(a.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""},set:function(e){this._url=e}}]);var h,f,g=(l(v,f=n=y),(t=v.prototype).createInitializationVector=function(e){for(var t=new Uint8Array(16),n=12;n<16;n++)t[n]=e>>8*(15-n)&255;return t},t.setDecryptDataFromLevelKey=function(e,t){var n=e;return"AES-128"===(null==e?void 0:e.method)&&e.uri&&!e.iv&&((n=o.a.fromURI(e.uri)).method=e.method,n.iv=this.createInitializationVector(t),n.keyFormat="identity"),n},t.setElementaryStreamInfo=function(e,t,n,i,r,a){void 0===a&&(a=!1);var s=this.elementaryStreams,o=s[e];o?(o.startPTS=Math.min(o.startPTS,t),o.endPTS=Math.max(o.endPTS,n),o.startDTS=Math.min(o.startDTS,i),o.endDTS=Math.max(o.endDTS,r)):s[e]={startPTS:t,endPTS:n,startDTS:i,endDTS:r,partial:a}},t.clearElementaryStreamInfo=function(){var e=this.elementaryStreams;e[i.AUDIO]=null,e[i.VIDEO]=null,e[i.AUDIOVIDEO]=null},d(v,[{key:"decryptdata",get:function(){var e;return this.levelkey||this._decryptdata?(!this._decryptdata&&this.levelkey&&("number"!=typeof(e=this.sn)&&(this.levelkey&&"AES-128"===this.levelkey.method&&!this.levelkey.iv&&s.b.warn('missing IV for initialization segment with method="'+this.levelkey.method+'" - compliance issue'),e=0),this._decryptdata=this.setDecryptDataFromLevelKey(this.levelkey,e)),this._decryptdata):null}},{key:"end",get:function(){return this.start+this.duration}},{key:"endProgramDateTime",get:function(){var e;return null!==this.programDateTime&&Object(r.a)(this.programDateTime)?(e=Object(r.a)(this.duration)?this.duration:0,this.programDateTime+1e3*e):null}},{key:"encrypted",get:function(){var e;return!(null==(e=this.decryptdata)||!e.keyFormat||!this.decryptdata.uri)}}]),v),p=(l(m,h=n),d(m,[{key:"start",get:function(){return this.fragment.start+this.fragOffset}},{key:"end",get:function(){return this.start+this.duration}},{key:"loaded",get:function(){var e=this.elementaryStreams;return!!(e.audio||e.video||e.audiovideo)}}]),m);function m(e,t,n,i,r){return(n=h.call(this,n)||this).fragOffset=0,n.duration=0,n.gap=!1,n.independent=!1,n.relurl=void 0,n.fragment=void 0,n.index=void 0,n.stats=new u.a,n.duration=e.decimalFloatingPoint("DURATION"),n.gap=e.bool("GAP"),n.independent=e.bool("INDEPENDENT"),n.relurl=e.enumeratedString("URI"),n.fragment=t,n.index=i,(t=e.enumeratedString("BYTERANGE"))&&n.setByteRange(t,r),r&&(n.fragOffset=r.fragOffset+r.duration),n}function v(e,t){return(t=f.call(this,t)||this)._decryptdata=null,t.rawProgramDateTime=null,t.programDateTime=null,t.tagList=[],t.duration=0,t.sn=0,t.levelkey=void 0,t.type=void 0,t.loader=null,t.level=-1,t.cc=0,t.startPTS=void 0,t.endPTS=void 0,t.appendedPTS=void 0,t.startDTS=void 0,t.endDTS=void 0,t.start=0,t.deltaPTS=void 0,t.maxStartPTS=void 0,t.minEndPTS=void 0,t.stats=new u.a,t.urlId=0,t.data=void 0,t.bitrateTest=!1,t.title=null,t.initSegment=null,t.type=e,t}function y(e){var t;this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams=((t={})[i.AUDIO]=null,t[i.VIDEO]=null,t[i.AUDIOVIDEO]=null,t),this.baseurl=e}},function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return u})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return c})),n.d(t,"c",(function(){return d})),n.d(t,"f",(function(){return v}));var i,r=function(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},a=function(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},s=function(e,t){for(var n=t,i=0;r(e,t);)i=(i+=10)+o(e,t+6),a(e,t+10)&&(i+=10),t+=i;if(0<i)return e.subarray(n,n+i)},o=function(e,t){var n=0;n=(127&e[t])<<21;return(n=(n|=(127&e[t+1])<<14)|(127&e[t+2])<<7)|127&e[t+3]},u=function(e,t){return r(e,t)&&o(e,t+6)+10<=e.length-t},l=function(e){for(var t=d(e),n=0;n<t.length;n++){var i=t[n];if(c(i))return m(i)}},c=function(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info},d=function(e){for(var t,n=0,i=[];r(e,n);){for(var s=o(e,n+6),u=(n+=10)+s;n+8<u;){t=e.subarray(n),c=l=void 0;var l={type:l=String.fromCharCode(t[0],t[1],t[2],t[3]),size:c=o(t,4),data:t.subarray(10,10+c)},c=h(l);c&&i.push(c),n+=l.size+10}a(e,n)&&(n+=10)}return i},h=function(e){return("PRIV"===e.type?f:"W"===e.type[0]?p:g)(e)},f=function(e){var t,n;if(!(e.size<2))return t=v(e.data,!0),n=new Uint8Array(e.data.subarray(t.length+1)),{key:e.type,info:t,data:n.buffer}},g=function(e){var t,n;if(!(e.size<2))return"TXXX"===e.type?(t=1,t+=(n=v(e.data.subarray(1),!0)).length+1,t=v(e.data.subarray(t)),{key:e.type,info:n,data:t}):(n=v(e.data.subarray(1)),{key:e.type,data:n})},p=function(e){var t,n;return"WXXX"===e.type?e.size<2?void 0:(t=1,t+=(n=v(e.data.subarray(1),!0)).length+1,t=v(e.data.subarray(t)),{key:e.type,info:n,data:t}):(n=v(e.data),{key:e.type,data:n})},m=function(e){var t;if(8===e.data.byteLength)return t=1&(e=new Uint8Array(e.data))[3],e=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7],e/=45,t&&(e+=47721858.84),Math.round(e)},v=function(e,t){var n,r;if(void 0===t&&(t=!1),i=i||void 0===self.TextDecoder?i:new self.TextDecoder("utf-8"))return n=i.decode(e),t?-1!==(r=n.indexOf("\0"))?n.substring(0,r):n:n.replace(/\0/g,"");for(var a,s,o,u=e.length,l="",c=0;c<u;){if(0===(a=e[c++])&&t)return l;if(0!==a&&3!==a)switch(a>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:l+=String.fromCharCode(a);break;case 12:case 13:s=e[c++],l+=String.fromCharCode((31&a)<<6|63&s);break;case 14:s=e[c++],o=e[c++],l+=String.fromCharCode((15&a)<<12|(63&s)<<6|(63&o)<<0)}}return l}},function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),(t=i=i||{}).audioId3="org.id3",t.dateRange="com.apple.quicktime.HLS",t.emsg="https://aomedia.org/emsg/ID3"},function(e,t,n){"use strict";function i(e,t,n){return Uint8Array.prototype.slice?e.slice(t,n):new Uint8Array(Array.prototype.slice.call(e,t,n))}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";n.d(t,"c",(function(){return se})),n.d(t,"d",(function(){return le})),n.d(t,"a",(function(){return ce})),n.d(t,"b",(function(){return de}));var i=n(0),r=n(2),a=n(16),s=n(3),o=n(7),u=n(8);function l(e,t){return{type:e=void 0===e?"":e,id:-1,pid:-1,inputTimeScale:t=void 0===t?9e4:t,sequenceNumber:-1,samples:[],dropped:0}}var c=n(5),d=n(9);(t=g.prototype).resetInitSegment=function(e,t,n,i){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}},t.resetTimeStamp=function(e){this.initPTS=e,this.resetContiguity()},t.resetContiguity=function(){this.basePTS=null,this.frameIndex=0},t.canParse=function(e,t){return!1},t.appendFrame=function(e,t,n){},t.demux=function(e,t){this.cachedData&&(e=Object(c.b)(this.cachedData,e),this.cachedData=null);var n,i,r,a=o.b(e,0),f=a?a.length:0,g=this._audioTrack,p=this._id3Track,m=a?o.d(a):void 0,v=e.length;for((null===this.basePTS||0===this.frameIndex&&Object(s.a)(m))&&(this.basePTS=h(m,t,this.initPTS)),a&&0<a.length&&p.samples.push({pts:this.basePTS,dts:this.basePTS,data:a,type:u.a.audioId3}),i=this.basePTS;f<v;)this.canParse(e,f)?(r=this.appendFrame(g,e,f))?(this.frameIndex++,i=r.sample.pts,n=f+=r.length):f=v:o.a(e,f)?(a=o.b(e,f),p.samples.push({pts:i,dts:i,data:a,type:u.a.audioId3}),n=f+=a.length):f++,f===v&&n!==v&&(r=Object(d.a)(e,n),this.cachedData?this.cachedData=Object(c.b)(this.cachedData,r):this.cachedData=r);return{audioTrack:g,videoTrack:l(),id3Track:p,textTrack:l()}},t.demuxSampleAes=function(e,t,n){return Promise.reject(new Error("["+this+"] This demuxer does not support Sample-AES decryption"))},t.flush=function(e){var t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),{audioTrack:this._audioTrack,videoTrack:l(),id3Track:this._id3Track,textTrack:l()}},t.destroy=function(){};var h=function(e,t,n){return Object(s.a)(e)?90*e:9e4*t+(n||0)},f=(t=g,n(1));function g(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null}function p(e,t){return 255===e[t]&&240==(246&e[t+1])}function m(e,t){return 1&e[t+1]?7:9}function v(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function y(e,t){return t+1<e.length&&p(e,t)}function b(e,t,n,a,s){var o,u,l,c,d,h;!e.samplerate&&(t=t,n=n,a=a,s=s,u=navigator.userAgent.toLowerCase(),l=s,c=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],d=1+((192&n[a+2])>>>6),h=(60&n[a+2])>>>2,n=c.length-1<h?void t.trigger(i.a.ERROR,{type:r.b.MEDIA_ERROR,details:r.a.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+h}):(t=(1&n[a+2])<<2,t|=(192&n[a+3])>>>6,f.b.log("manifest codec:"+s+", ADTS type:"+d+", samplingIndex:"+h),a=/firefox/i.test(u)?6<=h?(d=5,o=new Array(4),h-3):(d=2,o=new Array(2),h):-1!==u.indexOf("android")?(d=2,o=new Array(2),h):(d=5,o=new Array(4),s&&(-1!==s.indexOf("mp4a.40.29")||-1!==s.indexOf("mp4a.40.5"))||!s&&6<=h?h-3:((s&&-1!==s.indexOf("mp4a.40.2")&&(6<=h&&1==t||/vivaldi/i.test(u))||!s&&1==t)&&(d=2,o=new Array(2)),h)),o[0]=d<<3,o[0]|=(14&h)>>1,o[1]|=(1&h)<<7,o[1]|=t<<3,5===d&&(o[1]|=(14&a)>>1,o[2]=(1&a)<<7,o[2]|=8,o[3]=0),{config:o,samplerate:c[h],channelCount:t,codec:"mp4a.40."+d,manifestCodec:l}))&&(e.config=n.config,e.samplerate=n.samplerate,e.channelCount=n.channelCount,e.codec=n.codec,e.manifestCodec=n.manifestCodec,f.b.log("parsed codec:"+e.codec+", rate:"+n.samplerate+", channels:"+n.channelCount))}function A(e){return 9216e4/e}function E(e,t,n,i,r){var a,s,o;i+=r*A(e.samplerate);return(r=function(){var e=m(t,n);if(n+e<=t.length){var i=v(t,n)-e;if(0<i)return{headerLength:e,frameLength:i}}}())?(s=r.frameLength,s=(r=r.headerLength)+s,(o=Math.max(0,n+s-t.length))?(a=new Uint8Array(s-r)).set(t.subarray(n+r,t.length),0):a=t.subarray(n+r,n+s),r={unit:a,pts:i},o||e.samples.push(r),{sample:r,length:s,missing:o}):(e=t.length-n,(a=new Uint8Array(e)).set(t.subarray(n,t.length),0),{sample:{unit:a,pts:i},length:e,missing:-1})}function T(e,t){return(T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}S=w=t,(W=M).prototype=Object.create(S.prototype),T(W.prototype.constructor=W,S),(W=M.prototype).resetInitSegment=function(e,t,n,i){w.prototype.resetInitSegment.call(this,e,t,n,i),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:t,duration:i,inputTimeScale:9e4,dropped:0}},M.probe=function(e){if(e)for(var t,n,i,r,a=(o.b(e,0)||[]).length,s=e.length;a<s;a++)if(r=i=void 0,!y(t=e,n=a)||n+(r=m(t,n))>=t.length?void 0:!((i=v(t,n))<=r)&&((r=n+i)===t.length||y(t,r)))return f.b.log("ADTS sync word found !"),!0;return!1},W.canParse=function(e,t){return(t=t)+5<(e=e).length&&p(e,t)&&v(e,t)<=e.length-t},W.appendFrame=function(e,t,n){if(b(e,this.observer,t,n,e.manifestCodec),(e=E(e,t,n,this.basePTS,this.frameIndex))&&0===e.missing)return e};var w,S=M,C=/\/emsg[-/]ID3/i,x=((W=_.prototype).resetTimeStamp=function(){},W.resetInitSegment=function(e,t,n,i){e=Object(c.h)(e);var r,a,s,o=this.videoTrack=l("video",1),u=this.audioTrack=l("audio",1),d=this.txtTrack=l("text",1);this.id3Track=l("id3",1),this.timeOffset=0,e.video&&(r=(s=e.video).id,a=s.timescale,s=s.codec,o.id=r,o.timescale=d.timescale=a,o.codec=s),e.audio&&(a=(r=e.audio).id,s=r.timescale,e=r.codec,u.id=a,u.timescale=s,u.codec=e),d.id=c.a.text,o.sampleDuration=0,o.duration=u.duration=i},W.resetContiguity=function(){},_.probe=function(e){return e=16384<e.length?e.subarray(0,16384):e,0<Object(c.c)(e,["moof"]).length},W.demux=function(e,t){this.timeOffset=t;var n=e,i=this.videoTrack,r=this.txtTrack;this.config.progressive?(this.remainderData&&(n=Object(c.b)(this.remainderData,e)),e=Object(c.l)(n),this.remainderData=e.remainder,i.samples=e.valid||new Uint8Array):i.samples=n,e=this.extractID3Track(i,t);return r.samples=Object(c.j)(t,i),{videoTrack:i,audioTrack:this.audioTrack,id3Track:e,textTrack:this.txtTrack}},W.flush=function(){var e=this.timeOffset,t=this.videoTrack,n=this.txtTrack,i=(t.samples=this.remainderData||new Uint8Array,this.remainderData=null,this.extractID3Track(t,this.timeOffset));return n.samples=Object(c.j)(e,t),{videoTrack:t,audioTrack:l(),id3Track:i,textTrack:l()}},W.extractID3Track=function(e,t){var n=this.id3Track;return e.samples.length&&(e=Object(c.c)(e.samples,["emsg"]))&&e.forEach((function(e){var i;e=Object(c.g)(e);C.test(e.schemeIdUri)&&(i=Object(s.a)(e.presentationTime)?e.presentationTime/e.timeScale:t+e.presentationTimeDelta/e.timeScale,e=e.payload,n.samples.push({data:e,len:e.byteLength,dts:i,pts:i,type:u.a.emsg}))})),n},W.demuxSampleAes=function(e,t,n){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))},W.destroy=function(){},_),k=null,I=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],L=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],R=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],D=[0,1,1,4];function _(e,t){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=t}function M(e,t){var n;return(n=w.call(this)||this).observer=void 0,n.config=void 0,n.observer=e,n.config=t,n}function O(e,t,n,i,r){if(!(n+24>t.length)){var a=P(t,n);if(a&&n+a.frameLength<=t.length)return i+=r*(9e4*a.samplesPerFrame/a.sampleRate),r={unit:t.subarray(n,n+a.frameLength),pts:i,dts:i},e.config=[],e.channelCount=a.channelCount,e.samplerate=a.sampleRate,e.samples.push(r),{sample:r,length:a.frameLength,missing:0}}}function P(e,t){var n,i,r,a,s,o=e[t+1]>>3&3,u=e[t+1]>>1&3,l=e[t+2]>>4&15,c=e[t+2]>>2&3;if(1!=o&&0!=l&&15!=l&&3!=c)return s=e[t+2]>>1&1,n=e[t+3]>>6,l=1e3*I[14*(3==o?3-u:3==u?3:4)+l-1],c=L[3*(3==o?0:2==o?1:2)+c],i=3==n?1:2,a=8*(o=R[o][u])*(r=D[u]),o=Math.floor(o*l/c+s)*r,null===k&&(s=(navigator.userAgent||"").match(/Chrome\/(\d+)/i),k=s?parseInt(s[1]):0),k&&k<=87&&2==u&&224e3<=l&&0==n&&(e[t+3]=128|e[t+3]),{sampleRate:c,channelCount:i,frameLength:o,samplesPerFrame:a}}function N(e,t){return 255===e[t]&&224==(224&e[t+1])&&0!=(6&e[t+1])}function B(e,t){return t+1<e.length&&N(e,t)}(W=G.prototype).loadWord=function(){var e=this.data,t=this.bytesAvailable,n=e.byteLength-t,i=new Uint8Array(4);if(0===(t=Math.min(4,t)))throw new Error("no bytes available");i.set(e.subarray(n,n+t)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=8*t,this.bytesAvailable-=t},W.skipBits=function(e){var t;this.bitsAvailable>e||(e=(e-=this.bitsAvailable)-((t=e>>3)>>3),this.bytesAvailable-=t,this.loadWord()),this.word<<=e,this.bitsAvailable-=e},W.readBits=function(e){var t=Math.min(this.bitsAvailable,e),n=this.word>>>32-t;return 32<e&&f.b.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,0<this.bitsAvailable?this.word<<=t:0<this.bytesAvailable&&this.loadWord(),0<(t=e-t)&&this.bitsAvailable?n<<t|this.readBits(t):n},W.skipLZ=function(){for(var e=0;e<this.bitsAvailable;++e)if(0!=(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},W.skipUEG=function(){this.skipBits(1+this.skipLZ())},W.skipEG=function(){this.skipBits(1+this.skipLZ())},W.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},W.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},W.readBoolean=function(){return 1===this.readBits(1)},W.readUByte=function(){return this.readBits(8)},W.readUShort=function(){return this.readBits(16)},W.readUInt=function(){return this.readBits(32)},W.skipScalingList=function(e){for(var t=8,n=8,i=0;i<e;i++)t=0===(n=0!==n?(t+this.readEG()+256)%256:n)?t:n},W.readSPS=function(){var e,t,n,i=0,r=0,a=0,s=0,o=this.readUByte.bind(this),u=this.readBits.bind(this),l=this.readUEG.bind(this),c=this.readBoolean.bind(this),d=this.skipBits.bind(this),h=this.skipEG.bind(this),f=this.skipUEG.bind(this),g=this.skipScalingList.bind(this),p=(o(),o());if(u(5),d(3),o(),f(),(100===p||110===p||122===p||244===p||44===p||83===p||86===p||118===p||128===p)&&(3===(p=l())&&d(1),f(),f(),d(1),c()))for(t=3!==p?8:12,n=0;n<t;n++)c()&&g(n<6?16:64);if(f(),0===(p=l()))l();else if(1===p)for(d(1),h(),h(),e=l(),n=0;n<e;n++)h();f(),d(1);p=l(),f=l();var m=(0===(u=u(1))&&d(1),d(1),c()&&(i=l(),r=l(),a=l(),s=l()),[1,1]);if(c()&&c())switch(o()){case 1:m=[1,1];break;case 2:m=[12,11];break;case 3:m=[10,11];break;case 4:m=[16,11];break;case 5:m=[40,33];break;case 6:m=[24,11];break;case 7:m=[20,11];break;case 8:m=[32,11];break;case 9:m=[80,33];break;case 10:m=[18,11];break;case 11:m=[15,11];break;case 12:m=[64,33];break;case 13:m=[160,99];break;case 14:m=[4,3];break;case 15:m=[3,2];break;case 16:m=[2,1];break;case 255:m=[o()<<8|o(),o()<<8|o()]}return{width:Math.ceil(16*(p+1)-2*i-2*r),height:(2-u)*(f+1)*16-(u?2:4)*(a+s),pixelRatio:m}},W.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()};var F=G,U=((W=j.prototype).decryptBuffer=function(e,t){this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer,t)},W.decryptAacSample=function(e,t,n,i){var r,a,s=e[t].unit;s.length<=16||(r=(r=s.subarray(16,s.length-s.length%16)).buffer.slice(r.byteOffset,r.byteOffset+r.length),(a=this).decryptBuffer(r,(function(r){r=new Uint8Array(r),s.set(r,16),i||a.decryptAacSamples(e,t+1,n)})))},W.decryptAacSamples=function(e,t,n){for(;;t++){if(t>=e.length)return void n();if(!(e[t].unit.length<32)){var i=this.decrypter.isSync();if(this.decryptAacSample(e,t,n,i),!i)return}}},W.getAvcEncryptedData=function(e){for(var t=16*Math.floor((e.length-48)/160)+16,n=new Int8Array(t),i=0,r=32;r<e.length-16;r+=160,i+=16)n.set(e.subarray(r,r+16),i);return n},W.getAvcDecryptedUnit=function(e,t){for(var n=new Uint8Array(t),i=0,r=32;r<e.length-16;r+=160,i+=16)e.set(n.subarray(i,i+16),r);return e},W.decryptAvcSample=function(e,t,n,i,r,a){var s=z(r.data),o=this.getAvcEncryptedData(s),u=this;this.decryptBuffer(o.buffer,(function(o){r.data=u.getAvcDecryptedUnit(s,o),a||u.decryptAvcSamples(e,t,n+1,i)}))},W.decryptAvcSamples=function(e,t,n,i){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,n=0){if(t>=e.length)return void i();for(var r=e[t].units;!(n>=r.length);n++){var a=r[n];if(!(a.data.length<=48||1!==a.type&&5!==a.type)){var s=this.decrypter.isSync();if(this.decryptAvcSample(e,t,n,i,a,s),!s)return}}}},j);function j(e,t,n){this.keyData=void 0,this.decrypter=void 0,this.keyData=n,this.decrypter=new a.a(e,t,{removePKCS7Padding:!1})}function G(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}function H(){return(H=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n,i=arguments[t];for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function V(e,t,n,i){return{key:e,frame:!1,pts:t,dts:n,units:[],debug:i,length:0}}function K(e){var t,n,i,r,a=0,s=e.data;if(!e||0===e.size)return null;for(;s[0].length<19&&1<s.length;){var o=new Uint8Array(s[0].length+s[1].length);o.set(s[0]),o.set(s[1],s[0].length),s[0]=o,s.splice(1,1)}if(1!==((t=s[0])[0]<<16)+(t[1]<<8)+t[2])return null;if((n=(t[4]<<8)+t[5])&&n>e.size-6)return null;var u=t[7],l=(192&u&&(i=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2,64&u?54e5<i-(r=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2)&&(f.b.warn(Math.round((i-r)/9e4)+"s delta between PTS and DTS, align them"),i=r):r=i),(u=t[8])+9);if(e.size<=l)return null;e.size-=l;for(var c=new Uint8Array(e.size),d=0,h=s.length;d<h;d++){var g=(t=s[d]).byteLength;if(l){if(g<l){l-=g;continue}t=t.subarray(l),g-=l,l=0}c.set(t,a),a+=g}return n&&(n-=u+3),{data:c,pts:i,dts:r,len:n}}function q(e,t){if(e.units.length&&e.frame){if(void 0===e.pts){var n=t.samples,i=n.length;if(!i)return t.dropped++;i=n[i-1],e.pts=i.pts,e.dts=i.dts}t.samples.push(e)}e.debug.length&&f.b.log(e.pts+"/"+e.dts+":"+e.debug)}function z(e){for(var t=e.byteLength,n=[],i=1;i<t-2;)0===e[i]&&0===e[i+1]&&3===e[i+2]?(n.push(i+2),i+=2):i++;if(0===n.length)return e;var r=t-n.length,a=new Uint8Array(r),s=0;for(i=0;i<r;s++,i++)s===n[0]&&(s++,n.shift()),a[i]=e[s];return a}Y.probe=function(e){return 71===e[0]&&71===e[188]},Y.createTrack=function(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:c.a[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:"audio"===e?t:void 0}},(W=Y.prototype).resetInitSegment=function(e,t,n,i){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=Y.createTrack("video"),this._audioTrack=Y.createTrack("audio",i),this._id3Track=Y.createTrack("id3"),this._txtTrack=Y.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.audioCodec=t,this.videoCodec=n,this._duration=i},W.resetTimeStamp=function(){},W.resetContiguity=function(){var e=this._audioTrack,t=this._avcTrack,n=this._id3Track;e&&(e.pesData=null),t&&(t.pesData=null),n&&(n.pesData=null),this.aacOverFlow=null},W.demux=function(e,t,n,a){void 0===a&&(a=!1),(n=void 0!==n&&n)||(this.sampleAes=null);var s,o=this._avcTrack,u=this._audioTrack,l=this._id3Track,d=this._txtTrack,h=o.pid,g=o.pesData,p=u.pid,m=l.pid,v=u.pesData,y=l.pesData,b=null,A=this.pmtParsed,E=this._pmtId,T=e.length;if(this.remainderData&&(T=(e=Object(c.b)(this.remainderData,e)).length,this.remainderData=null),T<188&&!a)return this.remainderData=e,{audioTrack:u,videoTrack:o,id3Track:l,textTrack:d};(T-=T%188)<e.byteLength&&!a&&(this.remainderData=new Uint8Array(e.buffer,T,e.buffer.byteLength-T));for(var w,S=0,C=0;C<T;C+=188)if(71===e[C]){var x=!!(64&e[C+1]),k=((31&e[C+1])<<8)+e[C+2],I=void 0;if(1<(48&e[C+3])>>4){if((I=C+5+e[C+4])===C+188)continue}else I=C+4;switch(k){case h:x&&(g&&(s=K(g))&&this.parseAVCPES(o,d,s,!1),g={data:[],size:0}),g&&(g.data.push(e.subarray(I,C+188)),g.size+=C+188-I);break;case p:if(x){if(v&&(s=K(v)))switch(u.segmentCodec){case"aac":this.parseAACPES(u,s);break;case"mp3":this.parseMPEGPES(u,s)}v={data:[],size:0}}v&&(v.data.push(e.subarray(I,C+188)),v.size+=C+188-I);break;case m:x&&(y&&(s=K(y))&&this.parseID3PES(l,s),y={data:[],size:0}),y&&(y.data.push(e.subarray(I,C+188)),y.size+=C+188-I);break;case 0:x&&(I+=e[I]+1),E=this._pmtId=(31&(w=e)[(L=I)+10])<<8|w[L+11];break;case E:x&&(I+=e[I]+1);var L=function(e,t,n,i){var r={audio:-1,avc:-1,id3:-1,segmentCodec:"aac"},a=t+3+((15&e[t+1])<<8|e[t+2])-4;for(t+=12+((15&e[t+10])<<8|e[t+11]);t<a;){var s=(31&e[t+1])<<8|e[t+2];switch(e[t]){case 207:if(!i){f.b.log("ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:-1===r.audio&&(r.audio=s);break;case 21:-1===r.id3&&(r.id3=s);break;case 219:if(!i){f.b.log("H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:-1===r.avc&&(r.avc=s);break;case 3:case 4:!0!==n.mpeg&&!0!==n.mp3?f.b.log("MPEG audio found, not supported in this browser"):-1===r.audio&&(r.audio=s,r.segmentCodec="mp3");break;case 36:f.b.warn("Unsupported HEVC stream type found")}t+=5+((15&e[t+3])<<8|e[t+4])}return r}(e,I,this.typeSupported,n);0<(h=L.avc)&&(o.pid=h),0<(p=L.audio)&&(u.pid=p,u.segmentCodec=L.segmentCodec),0<(m=L.id3)&&(l.pid=m),null===b||A||(f.b.log("unknown PID '"+b+"' in TS found"),b=null),A=this.pmtParsed=!0;break;case 17:case 8191:break;default:b=k}}else S++;0<S&&this.observer.emit(i.a.ERROR,i.a.ERROR,{type:r.b.MEDIA_ERROR,details:r.a.FRAG_PARSING_ERROR,fatal:!1,reason:"Found "+S+" TS packet/s that do not start with 0x47"}),o.pesData=g,u.pesData=v,l.pesData=y;var R={audioTrack:u,videoTrack:o,id3Track:l,textTrack:d};return a&&this.extractRemainingSamples(R),R},W.flush=function(){var e=this.remainderData;return this.remainderData=null,e=e?this.demux(e,-1,!1,!0):{videoTrack:this._avcTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(e),this.sampleAes?this.decrypt(e,this.sampleAes):e},W.extractRemainingSamples=function(e){var t,n=e.audioTrack,i=e.videoTrack,r=e.id3Track,a=(e=e.textTrack,i.pesData),s=n.pesData,o=r.pesData;if(a&&(t=K(a))?(this.parseAVCPES(i,e,t,!0),i.pesData=null):i.pesData=a,s&&(t=K(s))){switch(n.segmentCodec){case"aac":this.parseAACPES(n,t);break;case"mp3":this.parseMPEGPES(n,t)}n.pesData=null}else null!=s&&s.size&&f.b.log("last AAC PES packet truncated,might overlap between fragments"),n.pesData=s;o&&(t=K(o))?(this.parseID3PES(r,t),r.pesData=null):r.pesData=o},W.demuxSampleAes=function(e,t,n){return e=this.demux(e,n,!0,!this.config.progressive),n=this.sampleAes=new U(this.observer,this.config,t),this.decrypt(e,n)},W.decrypt=function(e,t){return new Promise((function(n){var i=e.audioTrack,r=e.videoTrack;i.samples&&"aac"===i.segmentCodec?t.decryptAacSamples(i.samples,0,(function(){r.samples?t.decryptAvcSamples(r.samples,0,0,(function(){n(e)})):n(e)})):r.samples&&t.decryptAvcSamples(r.samples,0,0,(function(){n(e)}))}))},W.destroy=function(){this._duration=0},W.parseAVCPES=function(e,t,n,i){var r,a=this,s=this.parseAVCNALu(e,n.data),o=this.avcSample,u=!1;n.data=null,o&&s.length&&!e.audFound&&(q(o,e),o=this.avcSample=V(!1,n.pts,n.dts,"")),s.forEach((function(i){switch(i.type){case 1:r=!0,(o=o||(a.avcSample=V(!0,n.pts,n.dts,""))).frame=!0;var s=i.data;u&&4<s.length&&(2!==(s=new F(s).readSliceType())&&4!==s&&7!==s&&9!==s||(o.key=!0));break;case 5:r=!0,(o=o||(a.avcSample=V(!0,n.pts,n.dts,""))).key=!0,o.frame=!0;break;case 6:r=!0,Object(c.i)(z(i.data),n.pts,t.samples);break;case 7:if(u=r=!0,!e.sps){s=new F(i.data).readSPS(),e.width=s.width,e.height=s.height,e.pixelRatio=s.pixelRatio,e.sps=[i.data],e.duration=a._duration;for(var l=i.data.subarray(1,4),d="avc1.",h=0;h<3;h++){var f=l[h].toString(16);d+=f=f.length<2?"0"+f:f}e.codec=d}break;case 8:r=!0,e.pps||(e.pps=[i.data]);break;case 9:r=!1,e.audFound=!0,o&&q(o,e),o=a.avcSample=V(!1,n.pts,n.dts,"");break;case 12:r=!0;break;default:r=!1,o&&(o.debug+="unknown NAL "+i.type+" ")}o&&r&&o.units.push(i)})),i&&o&&(q(o,e),this.avcSample=null)},W.getLastNalUnit=function(e){var t,n=this.avcSample;return null!=(e=n=n&&0!==n.units.length?n:e[e.length-1])&&e.units?(e=n.units)[e.length-1]:t},W.parseAVCNALu=function(e,t){var n,i,r,a,s,o,u=t.byteLength,l=e.naluState||0,c=l,d=[],h=0,f=-1,g=0;for(-1===l&&(g=31&t[f=0],l=0,h=1);h<u;)n=t[h++],l=l?1!==l?n?1===n?(0<=f?(r={data:t.subarray(f,h-l-1),type:g},d.push(r)):(r=this.getLastNalUnit(e.samples))&&(c&&h<=4-c&&r.state&&(r.data=r.data.subarray(0,r.data.byteLength-c)),0<(i=h-l-1))&&((a=new Uint8Array(r.data.byteLength+i)).set(r.data,0),a.set(t.subarray(0,i),r.data.byteLength),r.data=a,r.state=0),h<u?(g=31&t[f=h],0):-1):0:3:n?0:2:n?0:1;return 0<=f&&0<=l&&(s={data:t.subarray(f,u),type:g,state:l},d.push(s)),0===d.length&&(s=this.getLastNalUnit(e.samples))&&((o=new Uint8Array(s.data.byteLength+t.byteLength)).set(s.data,0),o.set(t,s.data.byteLength),s.data=o),e.naluState=l,d},W.parseAACPES=function(e,t){var n,a,s,o,u,l=0,c=this.aacOverFlow,d=t.data;for(c&&(this.aacOverFlow=null,h=c.missing,o=c.sample.unit.byteLength,-1===h?((u=new Uint8Array(o+d.byteLength)).set(c.sample.unit,0),u.set(d,o),d=u):(u=o-h,c.sample.unit.set(d.subarray(0,h),u),e.samples.push(c.sample),l=c.missing)),n=l,a=d.length;n<a-1&&!y(d,n);n++);if(n===l||(o=n<a-1?(s="AAC PES did not start with ADTS header,offset:"+n,!1):(s="no ADTS header found in AAC PES",!0),f.b.warn("parsing error:"+s),this.observer.emit(i.a.ERROR,i.a.ERROR,{type:r.b.MEDIA_ERROR,details:r.a.FRAG_PARSING_ERROR,fatal:o,reason:s}),!o)){if(b(e,this.observer,d,n,this.audioCodec),void 0!==t.pts)g=t.pts;else{if(!c)return void f.b.warn("[tsdemuxer]: AAC PES unknown PTS");var h=A(e.samplerate),g=c.sample.pts+h}for(var p,m=0;n<a;){if(n+=(p=E(e,d,n,g,m)).length,p.missing){this.aacOverFlow=p;break}for(m++;n<a-1&&!y(d,n);n++);}}},W.parseMPEGPES=function(e,t){var n=t.data,i=n.length,r=0,a=0,s=t.pts;if(void 0!==s)for(;a<i;)if(B(n,a)){var o=O(e,n,a,s,r);if(!o)break;a+=o.length,r++}else a++;else f.b.warn("[tsdemuxer]: MPEG PES unknown PTS")},W.parseID3PES=function(e,t){void 0!==t.pts?(t=H({},t,{type:this._avcTrack?u.a.emsg:u.a.audioId3}),e.samples.push(t)):f.b.warn("[tsdemuxer]: ID3 PES unknown PTS")};var W=Y;function Y(e,t,n){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._avcTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.observer=e,this.config=t,this.typeSupported=n}function X(e,t){return(X=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}t=Q=t,(ne=J).prototype=Object.create(t.prototype),X(ne.prototype.constructor=ne,t),(ne=J.prototype).resetInitSegment=function(e,t,n,i){Q.prototype.resetInitSegment.call(this,e,t,n,i),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:t,duration:i,inputTimeScale:9e4,dropped:0}},J.probe=function(e){if(e)for(var t=(o.b(e,0)||[]).length,n=e.length;t<n;t++)if(function(e,t){var n;if(t+1<e.length&&N(e,t))return n=4,(t+=n=null!=(t=P(e,t))&&t.frameLength?t.frameLength:n)===e.length||B(e,t)}(e,t))return f.b.log("MPEG Audio sync word found !"),!0;return!1},ne.canParse=function(e,t){return N(e,t)&&4<=e.length-t},ne.appendFrame=function(e,t,n){if(null!==this.basePTS)return O(e,t,n,this.basePTS,this.frameIndex)};t=J;var Q,$=n(13),Z=n(6);function J(){return Q.apply(this,arguments)||this}function ee(e,t){return(e=null==e?void 0:e.codec)&&4<e.length?e:"hvc1"===e||"hev1"===e?"hvc1.1.c.L120.90":"av01"===e?"av01.0.04M.08":"avc1"===e||t===Z.a.VIDEO?"avc1.42e01e":"mp4a.40.5"}(ne=re.prototype).destroy=function(){},ne.resetTimeStamp=function(e){this.initPTS=e,this.lastEndTime=null},ne.resetNextTimestamp=function(){this.lastEndTime=null},ne.resetInitSegment=function(e,t,n){this.audioCodec=t,this.videoCodec=n,this.generateInitSegment(e),this.emitInitSegment=!0},ne.generateInitSegment=function(e){var t,n,i=this.audioCodec,r=this.videoCodec;e&&e.byteLength?(t=this.initData=Object(c.h)(e),i=i||ee(t.audio,Z.a.AUDIO),r=r||ee(t.video,Z.a.VIDEO),n={},t.audio&&t.video?n.audiovideo={container:"video/mp4",codec:i+","+r,initSegment:e,id:"main"}:t.audio?n.audio={container:"audio/mp4",codec:i,initSegment:e,id:"audio"}:t.video?n.video={container:"video/mp4",codec:r,initSegment:e,id:"main"}:f.b.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=n):(this.initTracks=void 0,this.initData=void 0)},ne.remux=function(e,t,n,i,r){var a,o,u,l=this.initPTS,d=this.lastEndTime,h={audio:void 0,video:void 0,text:i,id3:n,initSegment:void 0};return(t=(Object(s.a)(d)||(d=this.lastEndTime=r||0),t.samples))&&t.length&&(a={initPTS:void 0,timescale:1},(u=this.initData)&&u.length||(this.generateInitSegment(t),u=this.initData),u&&u.length?(this.emitInitSegment&&(a.tracks=this.initTracks,this.emitInitSegment=!1),o=Object(c.e)(u,t),Object(s.a)(l)||(this.initPTS=a.initPTS=l=o-r),d=(e=e?o-l:d)+(o=Object(c.d)(t,u)),Object(c.f)(u,t,l),0<o?this.lastEndTime=d:(f.b.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp()),l="",(o=!!u.audio)&&(l+="audio"),(u=!!u.video)&&(l+="video"),h.audio="audio"===(t={data1:t,startPTS:e,startDTS:e,endPTS:d,endDTS:d,type:l,hasAudio:o,hasVideo:u,nb:1,dropped:0}).type?t:void 0,h.video="audio"!==t.type?t:void 0,h.initSegment=a,d=null!=(e=this.initPTS)?e:0,h.id3=Object($.b)(n,r,d,d),i.samples.length&&(h.text=Object($.c)(i,r,d))):f.b.warn("[passthrough-remuxer.ts]: Failed to generate initSegment.")),h};var te,ne,ie=re;function re(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=void 0,this.initTracks=void 0,this.lastEndTime=null}try{te=self.performance.now.bind(self.performance)}catch(e){f.b.debug("Unable to use Performance API on this environment"),te=self.Date.now}var ae=[{demux:W,remux:$.a},{demux:x,remux:ie},{demux:S,remux:$.a},{demux:t,remux:$.a}],se=((n=oe.prototype).configure=function(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()},n.push=function(e,t,n,i){var r=this,a=n.transmuxing,s=(e=(a.executeStart=te(),new Uint8Array(e)),this.config),o=this.currentTransmuxState,u=this.transmuxConfig,l=(o=(i=(i&&(this.currentTransmuxState=i),i||o)).contiguous,i.discontinuity),c=i.trackSwitch,d=i.accurateTimeOffset,h=i.timeOffset,f=(i=i.initSegmentChange,u.audioCodec),g=u.videoCodec,p=u.defaultInitPts,m=u.duration,v=u.initSegmentData;if((f=((l||c||i)&&this.resetInitSegment(v,f,g,m),(l||i)&&this.resetInitialTimestamp(p),o||this.resetContiguity(),v=null,v=0<e.byteLength&&null!=t&&null!=t.key&&null!==t.iv&&null!=t.method?t:v))&&"AES-128"===f.method){if(g=this.getDecrypter(),!s.enableSoftwareAES)return this.decryptionPromise=g.webCryptoDecrypt(e,f.key.buffer,f.iv.buffer).then((function(e){return e=r.push(e,null,n),r.decryptionPromise=null,e})),this.decryptionPromise;if(!(m=g.softwareDecrypt(e,f.key.buffer,f.iv.buffer)))return a.executeEnd=te(),ue(n);e=new Uint8Array(m)}return this.needsProbing(e,l,c)&&this.configureTransmuxer(e,u),i=this.transmux(e,f,h,d,n),(p=this.currentTransmuxState).contiguous=!0,p.discontinuity=!1,p.trackSwitch=!1,a.executeEnd=te(),i},n.flush=function(e){var t,n=this,a=e.transmuxing,s=(a.executeStart=te(),this.decrypter),o=this.currentTransmuxState,u=this.decryptionPromise;return u?u.then((function(){return n.flush(e)})):(t=[],u=o.timeOffset,s&&(o=s.flush())&&t.push(this.push(o,null,e)),s=this.demuxer,o=this.remuxer,s&&o?le(o=s.flush(u))?o.then((function(i){return n.flushRemux(t,i,e),t})):(this.flushRemux(t,o,e),t):(this.observer.emit(i.a.ERROR,i.a.ERROR,{type:r.b.MEDIA_ERROR,details:r.a.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"}),a.executeEnd=te(),[ue(e)]))},n.flushRemux=function(e,t,n){var i=t.audioTrack,r=t.videoTrack,a=t.id3Track,s=(t=t.textTrack,(o=this.currentTransmuxState).accurateTimeOffset),o=o.timeOffset;f.b.log("[transmuxer.ts]: Flushed fragment "+n.sn+(-1<n.part?" p: "+n.part:"")+" of level "+n.level),i=this.remuxer.remux(i,r,a,t,o,s,!0,this.id);e.push({remuxResult:i,chunkMeta:n}),n.transmuxing.executeEnd=te()},n.resetInitialTimestamp=function(e){var t=this.demuxer,n=this.remuxer;t&&n&&(t.resetTimeStamp(e),n.resetTimeStamp(e))},n.resetContiguity=function(){var e=this.demuxer,t=this.remuxer;e&&t&&(e.resetContiguity(),t.resetNextTimestamp())},n.resetInitSegment=function(e,t,n,i){var r=this.demuxer,a=this.remuxer;r&&a&&(r.resetInitSegment(e,t,n,i),a.resetInitSegment(e,t,n))},n.destroy=function(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)},n.transmux=function(e,t,n,i,r){return t&&"SAMPLE-AES"===t.method?this.transmuxSampleAes(e,t,n,i,r):this.transmuxUnencrypted(e,n,i,r)},n.transmuxUnencrypted=function(e,t,n,i){var r=(e=this.demuxer.demux(e,t,!1,!this.config.progressive)).audioTrack,a=e.videoTrack,s=e.id3Track;e=e.textTrack;return{remuxResult:this.remuxer.remux(r,a,s,e,t,n,!1,this.id),chunkMeta:i}},n.transmuxSampleAes=function(e,t,n,i,r){var a=this;return this.demuxer.demuxSampleAes(e,t,n).then((function(e){return{remuxResult:a.remuxer.remux(e.audioTrack,e.videoTrack,e.id3Track,e.textTrack,n,i,!1,a.id),chunkMeta:r}}))},n.configureTransmuxer=function(e,t){for(var n,i=this.config,r=this.observer,a=this.typeSupported,s=this.vendor,o=t.audioCodec,u=t.defaultInitPts,l=t.duration,c=t.initSegmentData,d=(t=t.videoCodec,0),h=ae.length;d<h;d++)if(ae[d].demux.probe(e)){n=ae[d];break}n||(f.b.warn("Failed to find demuxer by probing frag, treating as mp4 passthrough"),n={demux:x,remux:ie});var g=this.demuxer,p=this.remuxer,m=n.remux,v=n.demux;p&&p instanceof m||(this.remuxer=new m(r,i,a,s)),g&&g instanceof v||(this.demuxer=new v(r,i,a),this.probe=v.probe),this.resetInitSegment(c,o,t,l),this.resetInitialTimestamp(u)},n.needsProbing=function(e,t,n){return!this.demuxer||!this.remuxer||t||n},n.getDecrypter=function(){return this.decrypter||(this.decrypter=new a.a(this.observer,this.config))},oe);function oe(e,t,n,i,r){this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=t,this.config=n,this.vendor=i,this.id=r}var ue=function(e){return{remuxResult:{},chunkMeta:e}};function le(e){return"then"in e&&e.then instanceof Function}var ce=function(e,t,n,i,r){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=n,this.duration=i,this.defaultInitPts=r},de=function(e,t,n,i,r,a){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=n,this.trackSwitch=i,this.timeOffset=r,this.initSegmentChange=a}},function(e,t,n){"use strict";function i(e,t,n,i){return e=e*t*(n=void 0===n?1:n),(i=void 0!==i&&i)?Math.round(e):e}function r(e,t,n,r){return i(e,t,1/(n=void 0===n?1:n),r=void 0!==r&&r)}function a(e,t){return i(e,1e3,1/9e4,t=void 0!==t&&t)}function s(e,t){return i(e,9e4,1/(t=void 0===t?1:t))}n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return s}))},function(e,t,n){var i=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,r=/^(?=([^\/?#]*))\1([^]*)$/,a=/(?:\/|^)\.(?=\/)/g,s=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,o={buildAbsoluteURL:function(e,t,n){if(n=n||{},e=e.trim(),!(t=t.trim())){if(!n.alwaysNormalize)return e;var i=o.parseURL(e);if(i)return i.path=o.normalizePath(i.path),o.buildURLFromParts(i);throw new Error("Error trying to parse base URL.")}if(!(i=o.parseURL(t)))throw new Error("Error trying to parse relative URL.");if(i.scheme)return n.alwaysNormalize?(i.path=o.normalizePath(i.path),o.buildURLFromParts(i)):t;if(!(t=o.parseURL(e)))throw new Error("Error trying to parse base URL.");!t.netLoc&&t.path&&"/"!==t.path[0]&&(e=r.exec(t.path),t.netLoc=e[1],t.path=e[2]),t.netLoc&&!t.path&&(t.path="/");var a;e={scheme:t.scheme,netLoc:i.netLoc,path:null,params:i.params,query:i.query,fragment:i.fragment};return i.netLoc||(e.netLoc=t.netLoc,"/"===i.path[0])||(i.path?(a=(a=t.path).substring(0,a.lastIndexOf("/")+1)+i.path,e.path=o.normalizePath(a)):(e.path=t.path,i.params||(e.params=t.params,i.query)||(e.query=t.query))),null===e.path&&(e.path=n.alwaysNormalize?o.normalizePath(i.path):i.path),o.buildURLFromParts(e)},parseURL:function(e){return(e=i.exec(e))?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(a,"");e.length!==(e=e.replace(s,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};e.exports=o},function(e,t,n){"use strict";n.d(t,"a",(function(){return v})),n.d(t,"d",(function(){return b})),n.d(t,"b",(function(){return A})),n.d(t,"c",(function(){return E}));var i=n(3),r=(o.getSilentFrame=function(e,t){return"mp4a.40.2"===e?1===t?new Uint8Array([0,200,0,128,35,128]):2===t?new Uint8Array([33,0,73,144,2,25,0,35,128]):3===t?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]):4===t?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]):5===t?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]):6===t?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]):void 0:1===t?new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]):2===t||3===t?new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]):void 0},o),a=Math.pow(2,32)-1;function s(){}function o(){}(t=(s.init=function(){for(var e in s.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]})s.types.hasOwnProperty(e)&&(s.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),i=(t=(s.HDLR_TYPES={video:t,audio:n},new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1])),n=new Uint8Array([0,0,0,0,0,0,0,0]),n=(s.STTS=s.STSC=s.STCO=n,s.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),s.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),s.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),s.STSD=new Uint8Array([0,0,0,0,0,0,0,1]),new Uint8Array([105,115,111,109])),new Uint8Array([97,118,99,49])),r=new Uint8Array([0,0,0,1]);s.FTYP=s.box(s.types.ftyp,n,r,n,i),s.DINF=s.box(s.types.dinf,s.box(s.types.dref,t))},s.box=function(e){for(var t=8,n=arguments.length,i=new Array(1<n?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];for(var a=i.length,s=a;a--;)t+=i[a].byteLength;var o=new Uint8Array(t);for(o[0]=t>>24&255,o[1]=t>>16&255,o[2]=t>>8&255,o[3]=255&t,o.set(e,4),a=0,t=8;a<s;a++)o.set(i[a],t),t+=i[a].byteLength;return o},s.hdlr=function(e){return s.box(s.types.hdlr,s.HDLR_TYPES[e])},s.mdat=function(e){return s.box(s.types.mdat,e)},s.mdhd=function(e,t){t*=e;var n=Math.floor(t/(1+a));t=Math.floor(t%(1+a));return s.box(s.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,n>>24,n>>16&255,n>>8&255,255&n,t>>24,t>>16&255,t>>8&255,255&t,85,196,0,0]))},s.mdia=function(e){return s.box(s.types.mdia,s.mdhd(e.timescale,e.duration),s.hdlr(e.type),s.minf(e))},s.mfhd=function(e){return s.box(s.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))},s.minf=function(e){return"audio"===e.type?s.box(s.types.minf,s.box(s.types.smhd,s.SMHD),s.DINF,s.stbl(e)):s.box(s.types.minf,s.box(s.types.vmhd,s.VMHD),s.DINF,s.stbl(e))},s.moof=function(e,t,n){return s.box(s.types.moof,s.mfhd(e),s.traf(n,t))},s.moov=function(e){for(var t=e.length,n=[];t--;)n[t]=s.trak(e[t]);return s.box.apply(null,[s.types.moov,s.mvhd(e[0].timescale,e[0].duration)].concat(n).concat(s.mvex(e)))},s.mvex=function(e){for(var t=e.length,n=[];t--;)n[t]=s.trex(e[t]);return s.box.apply(null,[s.types.mvex].concat(n))},s.mvhd=function(e,t){t*=e;var n=Math.floor(t/(1+a));t=Math.floor(t%(1+a)),e=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,n>>24,n>>16&255,n>>8&255,255&n,t>>24,t>>16&255,t>>8&255,255&t,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return s.box(s.types.mvhd,e)},s.sdtp=function(e){for(var t,n=e.samples||[],i=new Uint8Array(4+n.length),r=0;r<n.length;r++)t=n[r].flags,i[r+4]=t.dependsOn<<4|t.isDependedOn<<2|t.hasRedundancy;return s.box(s.types.sdtp,i)},s.stbl=function(e){return s.box(s.types.stbl,s.stsd(e),s.box(s.types.stts,s.STTS),s.box(s.types.stsc,s.STSC),s.box(s.types.stsz,s.STSZ),s.box(s.types.stco,s.STCO))},s.avc1=function(e){for(var t,n,i=[],r=[],a=0;a<e.sps.length;a++)n=(t=e.sps[a]).byteLength,i.push(n>>>8&255),i.push(255&n),i=i.concat(Array.prototype.slice.call(t));for(a=0;a<e.pps.length;a++)n=(t=e.pps[a]).byteLength,r.push(n>>>8&255),r.push(255&n),r=r.concat(Array.prototype.slice.call(t));var o=s.box(s.types.avcC,new Uint8Array([1,i[3],i[4],i[5],255,224|e.sps.length].concat(i).concat([e.pps.length]).concat(r))),u=e.width,l=e.height,c=e.pixelRatio[0],d=e.pixelRatio[1];return s.box(s.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,u>>8&255,255&u,l>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,s.box(s.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),s.box(s.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,d>>24,d>>16&255,d>>8&255,255&d])))},s.esds=function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))},s.mp4a=function(e){var t=e.samplerate;return s.box(s.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,t>>8&255,255&t,0,0]),s.box(s.types.esds,s.esds(e)))},s.mp3=function(e){var t=e.samplerate;return s.box(s.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,t>>8&255,255&t,0,0]))},s.stsd=function(e){return"audio"===e.type?"mp3"===e.segmentCodec&&"mp3"===e.codec?s.box(s.types.stsd,s.STSD,s.mp3(e)):s.box(s.types.stsd,s.STSD,s.mp4a(e)):s.box(s.types.stsd,s.STSD,s.avc1(e))},s.tkhd=function(e){var t=e.id,n=e.duration*e.timescale,i=e.width,r=(e=e.height,Math.floor(n/(1+a)));n=Math.floor(n%(1+a));return s.box(s.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,n>>24,n>>16&255,n>>8&255,255&n,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,255&i,0,0,e>>8&255,255&e,0,0]))},s.traf=function(e,t){var n=s.sdtp(e),i=e.id,r=Math.floor(t/(1+a));t=Math.floor(t%(1+a));return s.box(s.types.traf,s.box(s.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i])),s.box(s.types.tfdt,new Uint8Array([1,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,t>>24,t>>16&255,t>>8&255,255&t])),s.trun(e,n.length+16+20+8+16+8+8),n)},s.trak=function(e){return e.duration=e.duration||4294967295,s.box(s.types.trak,s.tkhd(e),s.mdia(e))},s.trex=function(e){return e=e.id,s.box(s.types.trex,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},s.trun=function(e,t){var n,i,r,a,o,u=e.samples||[],l=u.length,c=12+16*l,d=new Uint8Array(c);for(d.set(["video"===e.type?1:0,0,15,1,l>>>24&255,l>>>16&255,l>>>8&255,255&l,(t+=8+c)>>>24&255,t>>>16&255,t>>>8&255,255&t],0),n=0;n<l;n++)i=(o=u[n]).duration,r=o.size,a=o.flags,o=o.cts,d.set([i>>>24&255,i>>>16&255,i>>>8&255,255&i,r>>>24&255,r>>>16&255,r>>>8&255,255&r,a.isLeading<<2|a.dependsOn,a.isDependedOn<<6|a.hasRedundancy<<4|a.paddingValue<<1|a.isNonSync,61440&a.degradPrio,15&a.degradPrio,o>>>24&255,o>>>16&255,o>>>8&255,255&o],12+16*n);return s.box(s.types.trun,d)},s.initSegment=function(e){s.types||s.init();e=s.moov(e);var t=new Uint8Array(s.FTYP.byteLength+e.byteLength);return t.set(s.FTYP),t.set(e,s.FTYP.byteLength),t},s)).types=void 0,t.HDLR_TYPES=void 0,t.STTS=void 0,t.STSC=void 0,t.STCO=void 0,t.STSZ=void 0,t.VMHD=void 0,t.SMHD=void 0,t.STSD=void 0,t.FTYP=void 0,t.DINF=void 0;var u=t,l=n(0),c=n(2),d=n(1),h=n(4),f=n(11);function g(){return(g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n,i=arguments[t];for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}var p=null,m=null,v=((t=y.prototype).destroy=function(){},t.resetTimeStamp=function(e){d.b.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=e},t.resetNextTimestamp=function(){d.b.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1},t.resetInitSegment=function(){d.b.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1},t.getVideoStartPts=function(e){var t=!1;e=e.reduce((function(e,n){var i=n.pts-e;return i<-4294967296?(t=!0,b(e,n.pts)):0<i?e:n.pts}),e[0].pts);return t&&d.b.debug("PTS rollover detected"),e},t.remux=function(e,t,n,i,r,a,s,o){var u,l,c,f,g,p,m,v=r,y=r,T=-1<e.pid,w=-1<t.pid,S=t.samples.length,C=0<e.samples.length,x=s&&0<S||1<S;return(T&&!C||w&&!x)&&!this.ISGenerated&&!s||(this.ISGenerated||(c=this.generateIS(e,t,r)),T=this.isVideoContiguous,s=-1,x&&(s=function(e){for(var t=0;t<e.length;t++)if(e[t].key)return t;return-1}(t.samples),!T)&&this.config.forceKeyFrameOnDiscontinuity&&(p=!0,0<s?(d.b.warn("[mp4-remuxer]: Dropped "+s+" out of "+S+" video samples due to a missing keyframe"),m=this.getVideoStartPts(t.samples),t.samples=t.samples.slice(s),t.dropped+=s,m=y+=(t.samples[0].pts-m)/t.inputTimeScale):-1===s&&(d.b.warn("[mp4-remuxer]: No keyframe found out of "+S+" video samples"),p=!1)),this.ISGenerated&&(C&&x&&(S=this.getVideoStartPts(t.samples),S=(b(e.samples[0].pts,S)-S)/t.inputTimeScale,v+=Math.max(0,S),y+=Math.max(0,-S)),C?(e.samplerate||(d.b.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),c=this.generateIS(e,t,r)),l=this.remuxAudio(e,v,this.isAudioContiguous,a,w||x||o===h.b.AUDIO?y:void 0),x&&(S=l?l.endPTS-l.startPTS:0,t.inputTimeScale||(d.b.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),c=this.generateIS(e,t,r)),u=this.remuxVideo(t,y,T,S))):x&&(u=this.remuxVideo(t,y,T,0)),u)&&(u.firstKeyFrame=s,u.independent=-1!==s,u.firstKeyFramePTS=m)),{audio:l,video:u,initSegment:c,independent:p,text:f=this.ISGenerated&&(n.samples.length&&(g=A(n,r,this._initPTS,this._initDTS)),i.samples.length)?E(i,r,this._initPTS):f,id3:g}},t.generateIS=function(e,t,n){var r,a,s,o=e.samples,l=t.samples,c=this.typeSupported,d={},h=!Object(i.a)(this._initPTS),f="audio/mp4";if(h&&(s=a=1/0),e.config&&o.length&&("mp3"===(e.timescale=e.samplerate,e.segmentCodec)&&(c.mpeg?(f="audio/mpeg",e.codec=""):c.mp3&&(e.codec="mp3")),d.audio={id:"audio",container:f,codec:e.codec,initSegment:"mp3"===e.segmentCodec&&c.mpeg?new Uint8Array(0):u.initSegment([e]),metadata:{channelCount:e.channelCount}},h)&&(r=e.inputTimeScale,s=a=o[0].pts-Math.round(r*n)),t.sps&&t.pps&&l.length&&(t.timescale=t.inputTimeScale,d.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:u.initSegment([t]),metadata:{width:t.width,height:t.height}},h)&&(r=t.inputTimeScale,f=this.getVideoStartPts(l),c=Math.round(r*n),a=Math.min(a,b(l[0].dts,f)-c),s=Math.min(s,f-c)),Object.keys(d).length)return this.ISGenerated=!0,h&&(this._initPTS=s,this._initDTS=a),{tracks:d,initPTS:s,timescale:r}},t.remuxVideo=function(e,t,n,i){var r=e.inputTimeScale,a=e.samples,s=[],o=a.length,h=this._initPTS,v=this.nextAvcDts,y=8,A=this.videoSampleDuration,E=Number.POSITIVE_INFINITY,w=Number.NEGATIVE_INFINITY,S=!1;n&&null!==v||(v=t*r-(a[0].pts-b(a[0].dts,a[0].pts)));for(var C=0;C<o;C++){var x=a[C];x.pts=b(x.pts-h,v),x.dts=b(x.dts-h,v),x.dts<a[0<C?C-1:C].dts&&(S=!0)}S&&a.sort((function(e,t){var n=e.dts-t.dts;e=e.pts-t.pts;return n||e})),k=a[0].dts;var k,I=(t=a[a.length-1].dts-k)?Math.round(t/(o-1)):A||e.inputTimeScale/30;n&&((n=I<(t=k-v))||t<-1)&&(n?d.b.warn("AVC: "+Object(f.b)(t,!0)+" ms ("+t+"dts) hole between fragments detected, filling it"):d.b.warn("AVC: "+Object(f.b)(-t,!0)+" ms ("+t+"dts) overlapping between fragments detected"),k=v,n=a[0].pts-t,a[0].dts=k,a[0].pts=n,d.b.log("Video: First PTS/DTS adjusted: "+Object(f.b)(n,!0)+"/"+Object(f.b)(k,!0)+", delta: "+Object(f.b)(t,!0)+" ms")),k=Math.max(0,k);for(var L=0,R=0,D=0;D<o;D++){for(var _=a[D],M=_.units,O=M.length,P=0,N=0;N<O;N++)P+=M[N].data.length;R+=P,L+=O,_.length=P,_.dts=Math.max(_.dts,k),E=Math.min(_.pts,E),w=Math.max(_.pts,w)}var B;n=a[o-1].dts,t=R+4*L+8;try{B=new Uint8Array(t)}catch(e){return void this.observer.emit(l.a.ERROR,l.a.ERROR,{type:c.b.MUX_ERROR,details:c.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:t,reason:"fail allocating video mdat "+t})}var F=new DataView(B.buffer);F.setUint32(0,t),B.set(u.types.mdat,4);for(var U=!1,j=Number.POSITIVE_INFINITY,G=Number.POSITIVE_INFINITY,H=Number.NEGATIVE_INFINITY,V=Number.NEGATIVE_INFINITY,K=0;K<o;K++){for(var q=a[K],z=q.units,W=0,Y=0,X=z.length;Y<X;Y++){var Q=($=z[Y]).data,$=$.data.byteLength;F.setUint32(y,$),y+=4,B.set(Q,y),y+=$,W+=4+$}var Z,J=void 0,ee=(K<o-1?(A=a[K+1].dts-q.dts,J=a[K+1].pts-q.pts):(ee=this.config,Z=0<K?q.dts-a[K-1].dts:I,J=0<K?q.pts-a[K-1].pts:I,ee.stretchShortVideoTrack&&null!==this.nextAudioPts&&Math.floor(ee.maxBufferHole*r)<(ee=(i?E+i*r:this.nextAudioPts)-q.pts)?((A=ee-Z)<0?A=Z:U=!0,d.b.log("[mp4-remuxer]: It is approximately "+ee/90+" ms to the next segment; using duration "+A/90+" ms for the last video frame.")):A=Z),Math.round(q.pts-q.dts));j=Math.min(j,A),H=Math.max(H,A),G=Math.min(G,J),V=Math.max(V,J);s.push(new T(q.key,A,W,ee))}if(s.length)if(p)p<70&&((t=s[0].flags).dependsOn=2,t.isNonSync=0);else if(m&&V-G<H-j&&I/H<.025&&0===s[0].cts){d.b.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");for(var te=k,ne=0,ie=s.length;ne<ie;ne++){var re,ae=te+s[ne].duration,se=te+s[ne].cts;ne<ie-1?(re=ae+s[ne+1].cts,s[ne].duration=re-se):s[ne].duration=ne?s[ne-1].duration:I,s[ne].cts=0,te=ae}}return this.nextAvcDts=v=n+(A=U||!A?I:A),this.videoSampleDuration=A,this.isVideoContiguous=!0,t={data1:u.moof(e.sequenceNumber++,k,g({},e,{samples:s})),data2:B,startPTS:E/r,endPTS:(w+A)/r,startDTS:k/r,endDTS:v/r,type:"video",hasAudio:!1,hasVideo:!0,nb:s.length,dropped:e.dropped},e.samples=[],e.dropped=0,t},t.remuxAudio=function(e,t,n,i,a){var s=e.inputTimeScale,o=s/(e.samplerate||s),h="aac"===e.segmentCodec?1024:1152,f=h*o,p=this._initPTS,m="mp3"===e.segmentCodec&&this.typeSupported.mpeg,v=[],y=void 0!==a,A=e.samples,E=m?0:8,w=this.nextAudioPts||-1,S=t*s;if(this.isAudioContiguous=n=n||A.length&&0<w&&(i&&Math.abs(S-w)<9e3||Math.abs(b(A[0].pts-p,S)-w)<20*f),A.forEach((function(e){e.pts=b(e.pts-p,S)})),!n||w<0){if(!(A=A.filter((function(e){return 0<=e.pts}))).length)return;w=0===a?0:i&&!y?Math.max(0,S):A[0].pts}if("aac"===e.segmentCodec)for(var C=this.config.maxAudioFramesDrift,x=0,k=w;x<A.length;x++){var I=A[x],L=I.pts,R=L-k,D=Math.abs(1e3*R/s);if(R<=-C*f&&y)0===x&&(d.b.warn("Audio frame @ "+(L/s).toFixed(3)+"s overlaps nextAudioPts by "+Math.round(1e3*R/s)+" ms."),this.nextAudioPts=w=k=L);else if(C*f<=R&&D<1e4&&y){var _=Math.round(R/f);(k=L-_*f)<0&&(_--,k+=f),0===x&&(this.nextAudioPts=w=k),d.b.warn("[mp4-remuxer]: Injecting "+_+" audio frame @ "+(k/s).toFixed(3)+"s due to "+Math.round(1e3*R/s)+" ms gap.");for(var M=0;M<_;M++){var O=Math.max(k,0),P=r.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);P||(d.b.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),P=I.unit.subarray()),A.splice(x,0,{unit:P,pts:O}),k+=f,x++}}I.pts=k,k+=f}for(var N,B=null,F=null,U=0,j=A.length;j--;)U+=A[j].unit.byteLength;for(var G=0,H=A.length;G<H;G++){var V=(K=A[G]).unit,K=K.pts;if(null!==F)v[G-1].duration=Math.round((K-F)/o);else{if(B=K=n&&"aac"===e.segmentCodec?w:K,!(0<U))return;U+=E;try{N=new Uint8Array(U)}catch(e){return void this.observer.emit(l.a.ERROR,l.a.ERROR,{type:c.b.MUX_ERROR,details:c.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:U,reason:"fail allocating audio mdat "+U})}m||(new DataView(N.buffer).setUint32(0,U),N.set(u.types.mdat,4))}N.set(V,E),E+=V=V.byteLength,v.push(new T(!0,h,V,0)),F=K}if(t=v.length)return this.nextAudioPts=w=F+o*v[v.length-1].duration,a={data1:m?new Uint8Array(0):u.moof(e.sequenceNumber++,B/o,g({},e,{samples:v})),data2:N,startPTS:a=B/s,endPTS:i=w/s,startDTS:a,endDTS:i,type:"audio",hasAudio:!0,hasVideo:!(e.samples=[]),nb:t},this.isAudioContiguous=!0,a},t.remuxEmptyAudio=function(e,t,n,i){var a=e.inputTimeScale,s=a/(e.samplerate||a),o=(null!==(u=this.nextAudioPts)?u:i.startDTS*a)+this._initDTS,u=i.endDTS*a+this._initDTS,l=1024*s,c=Math.ceil((u-o)/l),h=r.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(d.b.warn("[mp4-remuxer]: remux empty Audio"),h){for(var f=[],g=0;g<c;g++){var p=o+g*l;f.push({unit:h,pts:p,dts:p})}return e.samples=f,this.remuxAudio(e,t,n,!1)}d.b.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec")},y);function y(e,t,n,i){void 0===i&&(i=""),this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=void 0,this._initDTS=void 0,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.observer=e,this.config=t,this.typeSupported=n,this.ISGenerated=!1,null===p&&(i=(navigator.userAgent||"").match(/Chrome\/(\d+)/i),p=i?parseInt(i[1]):0),null===m&&(e=navigator.userAgent.match(/Safari\/(\d+)/i),m=e?parseInt(e[1]):0)}function b(e,t){var n;if(null!==t)for(n=t<e?-8589934592:8589934592;4294967296<Math.abs(e-t);)e+=n;return e}function A(e,t,n,i){var r=e.samples.length;if(r){for(var a=e.inputTimeScale,s=0;s<r;s++){var o=e.samples[s];o.pts=b(o.pts-n,t*a)/a,o.dts=b(o.dts-i,t*a)/a}var u=e.samples;return e.samples=[],{samples:u}}}function E(e,t,n){var i=e.samples.length;if(i){for(var r=e.inputTimeScale,a=0;a<i;a++){var s=e.samples[a];s.pts=b(s.pts-n,t*r)/r}e.samples.sort((function(e,t){return e.pts-t.pts}));var o=e.samples;return e.samples=[],{samples:o}}}var T=function(e,t,n,i){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=t,this.size=n,this.cts=i,this.flags=new w(e)},w=function(e){this.isLeading=0,this.isDependedOn=0,this.hasRedundancy=0,this.degradPrio=0,this.dependsOn=1,this.isNonSync=1,this.dependsOn=e?2:1,this.isNonSync=e?0:1}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}},function(e,t,n){"use strict";var i=Object.prototype.hasOwnProperty,r="~";function a(){}function s(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,n,i,a){if("function"!=typeof n)throw new TypeError("The listener must be a function");return n=new s(n,i||e,a),i=r?r+t:t,e._events[i]?e._events[i].fn?e._events[i]=[e._events[i],n]:e._events[i].push(n):(e._events[i]=n,e._eventsCount++),e}function u(e,t){0==--e._eventsCount?e._events=new a:delete e._events[t]}function l(){this._events=new a,this._eventsCount=0}Object.create&&(a.prototype=Object.create(null),(new a).__proto__||(r=!1)),l.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)i.call(e,t)&&n.push(r?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},l.prototype.listeners=function(e){e=r?r+e:e;var t=this._events[e];if(!t)return[];if(t.fn)return[t.fn];for(var n=0,i=t.length,a=new Array(i);n<i;n++)a[n]=t[n].fn;return a},l.prototype.listenerCount=function(e){return e=r?r+e:e,(e=this._events[e])?e.fn?1:e.length:0},l.prototype.emit=function(e,t,n,i,a,s){var o=r?r+e:e;if(!this._events[o])return!1;var u,l=this._events[o],c=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),c){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,i),!0;case 5:return l.fn.call(l.context,t,n,i,a),!0;case 6:return l.fn.call(l.context,t,n,i,a,s),!0}for(f=1,u=new Array(c-1);f<c;f++)u[f-1]=arguments[f];l.fn.apply(l.context,u)}else for(var d,h=l.length,f=0;f<h;f++)switch(l[f].once&&this.removeListener(e,l[f].fn,void 0,!0),c){case 1:l[f].fn.call(l[f].context);break;case 2:l[f].fn.call(l[f].context,t);break;case 3:l[f].fn.call(l[f].context,t,n);break;case 4:l[f].fn.call(l[f].context,t,n,i);break;default:if(!u)for(d=1,u=new Array(c-1);d<c;d++)u[d-1]=arguments[d];l[f].fn.apply(l[f].context,u)}return!0},l.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},l.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},l.prototype.removeListener=function(e,t,n,i){if(e=r?r+e:e,this._events[e])if(t){var a=this._events[e];if(a.fn)a.fn!==t||i&&!a.once||n&&a.context!==n||u(this,e);else{for(var s=0,o=[],l=a.length;s<l;s++)(a[s].fn!==t||i&&!a[s].once||n&&a[s].context!==n)&&o.push(a[s]);o.length?this._events[e]=1===o.length?o[0]:o:u(this,e)}}else u(this,e);return this},l.prototype.removeAllListeners=function(e){return e?(e=r?r+e:e,this._events[e]&&u(this,e)):(this._events=new a,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,e.exports=l.EventEmitter=l},function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),o.prototype.decrypt=function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)};var i=o,r=(s.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},s),a=n(9);function s(e,t){this.subtle=void 0,this.key=void 0,this.subtle=e,this.key=t}function o(e,t){this.subtle=void 0,this.aesIV=void 0,this.subtle=e,this.aesIV=t}(t=f.prototype).uint8ArrayToUint32Array_=function(e){for(var t=new DataView(e),n=new Uint32Array(4),i=0;i<4;i++)n[i]=t.getUint32(4*i);return n},t.initTable=function(){var e,t=this.sBox,n=this.invSBox,i=(e=this.subMix)[0],r=e[1],a=e[2],s=e[3],o=(e=this.invSubMix)[0],u=e[1],l=e[2],c=e[3],d=new Uint32Array(256),h=0,f=0,g=0;for(g=0;g<256;g++)d[g]=g<128?g<<1:g<<1^283;for(g=0;g<256;g++){var p=f^f<<1^f<<2^f<<3^f<<4,m=(t[h]=p=p>>>8^255&p^99,d[n[p]=h]),v=d[m],y=d[v],b=257*d[p]^16843008*p;i[h]=b<<24|b>>>8,r[h]=b<<16|b>>>16,a[h]=b<<8|b>>>24,s[h]=b,o[p]=(b=16843009*y^65537*v^257*m^16843008*h)<<24|b>>>8,u[p]=b<<16|b>>>16,l[p]=b<<8|b>>>24,c[p]=b,h?(h=m^d[d[d[y^m]]],f^=d[d[f]]):h=f=1}},t.expandKey=function(e){for(var t=this.uint8ArrayToUint32Array_(e),n=!0,i=0;i<t.length&&n;)n=t[i]===this.key[i],i++;if(!n){this.key=t;var r=this.keySize=t.length;if(4!==r&&6!==r&&8!==r)throw new Error("Invalid aes key size="+r);for(var a,s,o,u=this.ksRows=4*(r+6+1),l=this.keySchedule=new Uint32Array(u),c=this.invKeySchedule=new Uint32Array(u),d=this.sBox,h=this.rcon,f=(e=this.invSubMix)[0],g=e[1],p=e[2],m=e[3],v=0;v<u;v++)v<r?s=l[v]=t[v]:(o=s,v%r==0?(o=d[(o=o<<8|o>>>24)>>>24]<<24|d[o>>>16&255]<<16|d[o>>>8&255]<<8|d[255&o],o^=h[v/r|0]<<24):6<r&&v%r==4&&(o=d[o>>>24]<<24|d[o>>>16&255]<<16|d[o>>>8&255]<<8|d[255&o]),l[v]=s=(l[v-r]^o)>>>0);for(a=0;a<u;a++)v=u-a,o=3&a?l[v]:l[v-4],c[a]=a<4||v<=4?o:f[d[o>>>24]]^g[d[o>>>16&255]]^p[d[o>>>8&255]]^m[d[255&o]],c[a]=c[a]>>>0}},t.networkToHostOrderSwap=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},t.decrypt=function(e,t,n){for(var i,r,a,s,o,u,l,c,d,h,f,g,p,m,v,y=this.keySize+6,b=this.invKeySchedule,A=this.invSBox,E=(v=this.invSubMix)[0],T=v[1],w=v[2],S=v[3],C=(v=this.uint8ArrayToUint32Array_(n))[0],x=v[1],k=v[2],I=v[3],L=new Int32Array(e),R=new Int32Array(L.length),D=this.networkToHostOrderSwap;t<L.length;){for(d=D(L[t]),h=D(L[t+1]),f=D(L[t+2]),g=D(L[t+3]),o=d^b[0],u=g^b[1],l=f^b[2],c=h^b[3],p=4,m=1;m<y;m++)i=E[o>>>24]^T[u>>16&255]^w[l>>8&255]^S[255&c]^b[p],r=E[u>>>24]^T[l>>16&255]^w[c>>8&255]^S[255&o]^b[p+1],a=E[l>>>24]^T[c>>16&255]^w[o>>8&255]^S[255&u]^b[p+2],s=E[c>>>24]^T[o>>16&255]^w[u>>8&255]^S[255&l]^b[p+3],o=i,u=r,l=a,c=s,p+=4;i=A[o>>>24]<<24^A[u>>16&255]<<16^A[l>>8&255]<<8^A[255&c]^b[p],r=A[u>>>24]<<24^A[l>>16&255]<<16^A[c>>8&255]<<8^A[255&o]^b[p+1],a=A[l>>>24]<<24^A[c>>16&255]<<16^A[o>>8&255]<<8^A[255&u]^b[p+2],s=A[c>>>24]<<24^A[o>>16&255]<<16^A[u>>8&255]<<8^A[255&l]^b[p+3],R[t]=D(i^C),R[t+1]=D(s^x),R[t+2]=D(a^k),R[t+3]=D(r^I),C=d,x=h,k=f,I=g,t+=4}return R.buffer};var u=f,l=n(1),c=n(5),d=((t=h.prototype).destroy=function(){this.observer=null},t.isSync=function(){return this.config.enableSoftwareAES},t.flush=function(){var e,t,n,i=this.currentResult;if(i)return i=new Uint8Array(i),this.reset(),this.removePKCS7Padding?(n=(t=(e=i).byteLength)&&new DataView(e.buffer).getUint8(t-1))?Object(a.a)(e,0,t-n):e:i;this.reset()},t.reset=function(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)},t.decrypt=function(e,t,n,i){var r;this.config.enableSoftwareAES?(this.softwareDecrypt(new Uint8Array(e),t,n),(r=this.flush())&&i(r.buffer)):this.webCryptoDecrypt(new Uint8Array(e),t,n).then(i)},t.softwareDecrypt=function(e,t,n){var i=this.currentIV,r=this.currentResult,s=this.remainderData;return(s=(this.logOnce("JS AES decrypt"),s&&(e=Object(c.b)(s,e),this.remainderData=null),this.getValidChunk(e))).length?(i&&(n=i),(e=(e=this.softwareDecrypter)||(this.softwareDecrypter=new u)).expandKey(t),i=r,this.currentResult=e.decrypt(s.buffer,0,n),this.currentIV=Object(a.a)(s,-16).buffer,i||null):null},t.webCryptoDecrypt=function(e,t,n){var a=this,s=this.subtle;return this.key===t&&this.fastAesKey||(this.key=t,this.fastAesKey=new r(s,t)),this.fastAesKey.expandKey().then((function(t){return s?new i(s,n).decrypt(e.buffer,t):Promise.reject(new Error("web crypto not initialized"))})).catch((function(i){return a.onWebCryptoError(i,e,t,n)}))},t.onWebCryptoError=function(e,t,n,i){return l.b.warn("[decrypter.ts]: WebCrypto Error, disable WebCrypto API:",e),this.config.enableSoftwareAES=!0,this.logEnabled=!0,this.softwareDecrypt(t,n,i)},t.getValidChunk=function(e){var t=e,n=e.length-e.length%16;return n!==e.length&&(t=Object(a.a)(e,0,n),this.remainderData=Object(a.a)(e,n)),t},t.logOnce=function(e){this.logEnabled&&(l.b.log("[decrypter.ts]: "+e),this.logEnabled=!1)},h);function h(e,t,n){if(n=void 0===(n=(void 0===n?{}:n).removePKCS7Padding)||n,this.logEnabled=!0,this.observer=void 0,this.config=void 0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.observer=e,this.config=t,this.removePKCS7Padding=n)try{var i=self.crypto;i&&(this.subtle=i.subtle||i.webkitSubtle)}catch(e){}null===this.subtle&&(this.config.enableSoftwareAES=!0)}function f(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(12);a.fromURL=function(e,t){return new a(e,t)},a.fromURI=function(e){return new a(e)},function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}((t=a).prototype,[{key:"uri",get:function(){return this._uri}}]),Object.defineProperty(t,"prototype",{writable:!1});var r=a;function a(e,t){this._uri=null,this.method=null,this.keyFormat=null,this.keyFormatVersions=null,this.keyID=null,this.key=null,this.iv=null,this._uri=t?Object(i.buildAbsoluteURL)(e,t,{alwaysNormalize:!0}):e}},function(e,t,n){function i(e){var t={};function n(i){var r;return(t[i]||(r=t[i]={i:i,l:!1,exports:{}},e[i].call(r.exports,r,r.exports,n),r.l=!0,r)).exports}n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n.oe=function(e){throw console.error(e),e};var i=n(n.s=ENTRY_MODULE);return i.default||i}function r(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}e.exports=function(e,t){var a={main:n.m},s=(t=t||{}).all?{main:Object.keys(a.main)}:function(t){for(var i={main:[e]},a={main:[]},s={main:{}};function(e){return Object.keys(e).reduce((function(t,n){return t||0<e[n].length}),!1)}(i);)for(var o=Object.keys(i),u=0;u<o.length;u++){var l=o[u],c=i[l].pop();if(s[l]=s[l]||{},!s[l][c]&&t[l][c]){s[l][c]=!0,a[l]=a[l]||[],a[l].push(c);for(var d=function(e,t,i){var a={},s=(a[i]=[],t.toString());if(t=s.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/)){t=t[1];for(var o,u=new RegExp("(\\\\n|\\W)"+r(t)+"\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)","g");o=u.exec(s);)"dll-reference"!==o[3]&&a[i].push(o[3]);for(u=new RegExp("\\("+r(t)+'\\("(dll-reference\\s([\\.|\\-|\\+|\\w|/|@]+))"\\)\\)\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)',"g");o=u.exec(s);)e[o[2]]||(a[i].push(o[1]),e[o[2]]=n(o[1]).m),a[o[2]]=a[o[2]]||[],a[o[2]].push(o[4]);for(var l,c=Object.keys(a),d=0;d<c.length;d++)for(var h=0;h<a[c[d]].length;h++)l=a[c[d]][h],isNaN(+l)||(a[c[d]][h]=+a[c[d]][h])}return a}(t,t[l][c],l),h=Object.keys(d),f=0;f<h.length;f++)i[h[f]]=i[h[f]]||[],i[h[f]]=i[h[f]].concat(d[h[f]])}}return a}(a),o="",u=(Object.keys(s).filter((function(e){return"main"!==e})).forEach((function(e){for(var t=0;s[e][t];)t++;s[e].push(t),a[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",o=o+"var "+e+" = ("+i.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+s[e].map((function(t){return JSON.stringify(t)+": "+a[e][t].toString()})).join(",")+"});\n"})),o=o+"new (("+i.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+s.main.map((function(e){return JSON.stringify(e)+": "+a.main[e].toString()})).join(",")+"}))(self);",new window.Blob([o],{type:"text/javascript"}));return t.bare||(t=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(u),(u=new window.Worker(t)).objectURL=t),u}},function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return o}));var i=n(10),r=n(0),a=n(1),s=n(15);function o(e){var t=new s.EventEmitter,n=function(t,n){e.postMessage({event:t,data:n})};t.on(r.a.FRAG_DECRYPTED,n),t.on(r.a.ERROR,n),e.addEventListener("message",(function(r){var s=r.data;switch(s.cmd){case"init":var o,l=JSON.parse(s.config);for(o in e.transmuxer=new i.c(t,s.typeSupported,l,s.vendor,s.id),Object(a.a)(l.debug),a.b)!function(e){a.b[e]=function(t){n("workerLog",{logType:e,message:t})}}(o);n("init",null);break;case"configure":e.transmuxer.configure(s.config);break;case"demux":l=e.transmuxer.push(s.data,s.decryptdata,s.chunkMeta,s.state),Object(i.d)(l)?l.then((function(t){u(e,t)})):u(e,l);break;case"flush":var d=s.chunkMeta;l=e.transmuxer.flush(d);Object(i.d)(l)?l.then((function(t){c(e,t,d)})):c(e,l,d)}}))}function u(e,t){var n,i,r;return!!((n=t.remuxResult).audio||n.video||n.text||n.id3||n.initSegment)&&(n=[],i=(r=t.remuxResult).audio,r=r.video,i&&l(n,i),r&&l(n,r),e.postMessage({event:"transmuxComplete",data:t},n),!0)}function l(e,t){t.data1&&e.push(t.data1.buffer),t.data2&&e.push(t.data2.buffer)}function c(e,t,n){t.reduce((function(t,n){return u(e,n)||t}),!1)||e.postMessage({event:"transmuxComplete",data:t[0]}),e.postMessage({event:"flush",data:n})}},function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return Wi}));var i,r=n(12),a=n(3),s=n(0),o=n(2),u=n(1),l=n(5),c=/^(\d+)x(\d+)$/,d=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,h=((t=f.prototype).decimalInteger=function(e){return(e=parseInt(this[e],10))>Number.MAX_SAFE_INTEGER?1/0:e},t.hexadecimalInteger=function(e){if(this[e]){for(var t=(1&(t=(this[e]||"0x").slice(2)).length?"0":"")+t,n=new Uint8Array(t.length/2),i=0;i<t.length/2;i++)n[i]=parseInt(t.slice(2*i,2*i+2),16);return n}return null},t.hexadecimalIntegerAsNumber=function(e){return(e=parseInt(this[e],16))>Number.MAX_SAFE_INTEGER?1/0:e},t.decimalFloatingPoint=function(e){return parseFloat(this[e])},t.optionalFloat=function(e,t){return(e=this[e])?parseFloat(e):t},t.enumeratedString=function(e){return this[e]},t.bool=function(e){return"YES"===this[e]},t.decimalResolution=function(e){if(null!==(e=c.exec(this[e])))return{width:parseInt(e[1],10),height:parseInt(e[2],10)}},f.parseAttrList=function(e){var t,n={};for(d.lastIndex=0;null!==(t=d.exec(e));){var i=t[2];0===i.indexOf('"')&&i.lastIndexOf('"')===i.length-1&&(i=i.slice(1,-1)),n[t[1]]=i}return n},f);function f(e){for(var t in e="string"==typeof e?f.parseAttrList(e):e)e.hasOwnProperty(t)&&(this[t]=e[t])}function g(){return(g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n,i=arguments[t];for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}(t=i=i||{}).ID="ID",t.CLASS="CLASS",t.START_DATE="START-DATE",t.DURATION="DURATION",t.END_DATE="END-DATE",t.END_ON_NEXT="END-ON-NEXT",t.PLANNED_DURATION="PLANNED-DURATION",t.SCTE35_OUT="SCTE35-OUT",t.SCTE35_IN="SCTE35-IN",function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}((t=v).prototype,[{key:"id",get:function(){return this.attr.ID}},{key:"class",get:function(){return this.attr.CLASS}},{key:"startDate",get:function(){return this._startDate}},{key:"endDate",get:function(){var e;return this._endDate||(null!==(e=this.duration)?new Date(this._startDate.getTime()+1e3*e):null)}},{key:"duration",get:function(){if(i.DURATION in this.attr){var e=this.attr.decimalFloatingPoint(i.DURATION);if(Object(a.a)(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}},{key:"plannedDuration",get:function(){return i.PLANNED_DURATION in this.attr?this.attr.decimalFloatingPoint(i.PLANNED_DURATION):null}},{key:"endOnNext",get:function(){return this.attr.bool(i.END_ON_NEXT)}},{key:"isValid",get:function(){return!!this.id&&!this._badValueForSameId&&Object(a.a)(this.startDate.getTime())&&(null===this.duration||0<=this.duration)&&(!this.endOnNext||!!this.class)}}]),Object.defineProperty(t,"prototype",{writable:!1});var p=v,m=n(6);function v(e,t){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,t){var n,r=t.attr;for(n in r)if(Object.prototype.hasOwnProperty.call(e,n)&&e[n]!==r[n]){u.b.warn('DATERANGE tag attribute: "'+n+'" does not match for tags with ID: "'+e.ID+'"'),this._badValueForSameId=n;break}e=g(new h({}),r,e)}this.attr=e,this._startDate=new Date(e[i.START_DATE]),i.END_DATE in this.attr&&(t=new Date(this.attr[i.END_DATE]),Object(a.a)(t.getTime()))&&(this._endDate=t)}E.prototype.reloaded=function(e){var t,n;e?(t=this.lastPartSn-e.lastPartSn,n=this.lastPartIndex-e.lastPartIndex,this.updated=this.endSN!==e.endSN||!!n||!!t,this.advanced=this.endSN>e.endSN||0<t||0==t&&0<n,this.updated||this.advanced?this.misses=Math.floor(.6*e.misses):this.misses=e.misses+1,this.availabilityDelay=e.availabilityDelay):(this.advanced=!0,this.updated=!0)},function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}((t=E).prototype,[{key:"hasProgramDateTime",get:function(){return!!this.fragments.length&&Object(a.a)(this.fragments[this.fragments.length-1].programDateTime)}},{key:"levelTargetDuration",get:function(){return this.averagetargetduration||this.targetduration||10}},{key:"drift",get:function(){var e=this.driftEndTime-this.driftStartTime;return 0<e?1e3*(this.driftEnd-this.driftStart)/e:1}},{key:"edge",get:function(){return this.partEnd||this.fragmentEnd}},{key:"partEnd",get:function(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}},{key:"fragmentEnd",get:function(){var e;return null!=(e=this.fragments)&&e.length?this.fragments[this.fragments.length-1].end:0}},{key:"age",get:function(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}},{key:"lastPartIndex",get:function(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].index:-1}},{key:"lastPartSn",get:function(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}]),Object.defineProperty(t,"prototype",{writable:!1});var y=E,b=n(17),A={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,av01:!0,drac:!0,dva1:!0,dvav:!0,dvh1:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0},text:{stpp:!0,wvtt:!0}};function E(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.fragments=[],this.dateRanges={},this.url=e}function T(e,t){return MediaSource.isTypeSupported((t||"video")+'/mp4;codecs="'+e+'"')}var w=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-SESSION-DATA:([^\r\n]*)[\r\n]+/g,S=/#EXT-X-MEDIA:(.*)/g,C=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),x=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|")),k=/\.(mp4|m4s|m4v|m4a)$/i,I=(L.findGroup=function(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(i.id===t)return i}},L.convertAVC1ToAVCOTI=function(e){var t,n=e.split(".");return 2<n.length?(t=n.shift()+".",(t+=parseInt(n.shift()).toString(16))+("000"+parseInt(n.shift()).toString(16)).slice(-4)):e},L.resolve=function(e,t){return r.buildAbsoluteURL(t,e,{alwaysNormalize:!0})},L.parseMasterPlaylist=function(e,t){var n,i,r,a,s=[],o=[],u={},l=!1;for(w.lastIndex=0;null!=(n=w.exec(e));)n[1]?(i={attrs:a=new h(n[1]),bitrate:a.decimalInteger("AVERAGE-BANDWIDTH")||a.decimalInteger("BANDWIDTH"),name:a.NAME,url:L.resolve(n[2],t)},(r=a.decimalResolution("RESOLUTION"))&&(i.width=r.width,i.height=r.height),function(e,t){["video","audio","text"].forEach((function(n){var i,r=e.filter((function(e){return e=e,!!(t=A[n])&&!0===t[e.slice(0,4)];var t}));r.length&&(i=r.filter((function(e){return 0===e.lastIndexOf("avc1",0)||0===e.lastIndexOf("mp4a",0)})),t[n+"Codec"]=(0<i.length?i:r)[0],e=e.filter((function(e){return-1===r.indexOf(e)})))})),t.unknownCodecs=e}((a.CODECS||"").split(/[ ,]+/).filter((function(e){return e})),i),i.videoCodec&&-1!==i.videoCodec.indexOf("avc1")&&(i.videoCodec=L.convertAVC1ToAVCOTI(i.videoCodec)),null!=(r=i.unknownCodecs)&&r.length||o.push(i),s.push(i)):n[3]&&(a=new h(n[3]))["DATA-ID"]&&(l=!0,u[a["DATA-ID"]]=a);return{levels:0<o.length&&o.length<s.length?o:s,sessionData:l?u:null}},L.parseMasterPlaylistMedia=function(e,t,n,i){void 0===i&&(i=[]);var r=[],a=0;for(S.lastIndex=0;null!==(o=S.exec(e));){var s,o=new h(o[1]);o.TYPE===n&&(o={attrs:o,bitrate:0,id:a++,groupId:o["GROUP-ID"],instreamId:o["INSTREAM-ID"],name:o.NAME||o.LANGUAGE||"",type:n,default:o.bool("DEFAULT"),autoselect:o.bool("AUTOSELECT"),forced:o.bool("FORCED"),lang:o.LANGUAGE,url:o.URI?L.resolve(o.URI,t):""},i.length&&(R(o,s=L.findGroup(i,o.groupId)||i[0],"audioCodec"),R(o,s,"textCodec")),r.push(o))}return r},L.parseLevelPlaylist=function(e,t,n,i,s){var o,l,c,d=new y(t),f=d.fragments,g=null,v=0,A=0,E=0,T=0,w=null,S=new m.b(i,t),I=-1,L=!1;for(C.lastIndex=0,d.m3u8=e;null!==(o=C.exec(e));){L&&(L=!1,(S=new m.b(i,t)).start=E,S.sn=v,S.cc=T,S.level=n,g)&&(S.initSegment=g,S.rawProgramDateTime=g.rawProgramDateTime,g.rawProgramDateTime=null);var R=o[1];if(R){S.duration=parseFloat(R);var M=(" "+o[2]).slice(1);S.title=M||null,S.tagList.push(M?["INF",R,M]:["INF",R])}else if(o[3])Object(a.a)(S.duration)&&(S.start=E,c&&(S.levelkey=c),S.sn=v,S.level=n,S.cc=T,S.urlId=s,f.push(S),S.relurl=(" "+o[3]).slice(1),D(S,w),E+=(w=S).duration,v++,L=!(A=0));else if(o[4])M=(" "+o[4]).slice(1),w?S.setByteRange(M,w):S.setByteRange(M);else if(o[5])S.rawProgramDateTime=(" "+o[5]).slice(1),S.tagList.push(["PROGRAM-DATE-TIME",S.rawProgramDateTime]),-1===I&&(I=f.length);else if(o=o[0].match(x)){for(l=1;l<o.length&&void 0===o[l];l++);var O=(" "+o[l]).slice(1),P=(" "+o[l+1]).slice(1),N=o[l+2]?(" "+o[l+2]).slice(1):"";switch(O){case"PLAYLIST-TYPE":d.type=P.toUpperCase();break;case"MEDIA-SEQUENCE":v=d.startSN=parseInt(P);break;case"SKIP":var B=new h(P),F=B.decimalInteger("SKIPPED-SEGMENTS");if(Object(a.a)(F)){for(var U=d.skippedSegments=F;U--;)f.unshift(null);v+=F}(F=B.enumeratedString("RECENTLY-REMOVED-DATERANGES"))&&(d.recentlyRemovedDateranges=F.split("\t"));break;case"TARGETDURATION":d.targetduration=parseFloat(P);break;case"VERSION":d.version=parseInt(P);break;case"EXTM3U":break;case"ENDLIST":d.live=!1;break;case"#":(P||N)&&S.tagList.push(N?[P,N]:[P]);break;case"DISCONTINUITY":T++,S.tagList.push(["DIS"]);break;case"GAP":S.tagList.push([O]);break;case"BITRATE":S.tagList.push([O,P]);break;case"DATERANGE":B=new h(P),(F=new p(B,d.dateRanges[B.ID])).isValid||d.skippedSegments?d.dateRanges[F.id]=F:u.b.warn('Ignoring invalid DATERANGE tag: "'+P+'"'),S.tagList.push(["EXT-X-DATERANGE",P]);break;case"DISCONTINUITY-SEQUENCE":T=parseInt(P);break;case"KEY":var j=(q=new h(P)).enumeratedString("METHOD"),G=q.URI,H=q.hexadecimalInteger("IV"),V=q.enumeratedString("KEYFORMATVERSIONS"),K=q.enumeratedString("KEYID"),q=null!=(q=q.enumeratedString("KEYFORMAT"))?q:"identity";-1<["com.apple.streamingkeydelivery","com.microsoft.playready","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","com.widevine"].indexOf(q)?u.b.warn("Keyformat "+q+" is not supported from the manifest"):"identity"===q&&j&&(c=b.a.fromURL(t,G),G)&&0<=["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(j)&&(c.method=j,c.keyFormat=q,K&&(c.keyID=K),V&&(c.keyFormatVersions=V),c.iv=H);break;case"START":G=new h(P).decimalFloatingPoint("TIME-OFFSET"),Object(a.a)(G)&&(d.startTimeOffset=G);break;case"MAP":j=new h(P),S.duration?(_(q=new m.b(i,t),j,n,c),(S.initSegment=g=q).rawProgramDateTime&&!S.rawProgramDateTime&&(S.rawProgramDateTime=g.rawProgramDateTime)):(_(S,j,n,c),g=S,L=!0);break;case"SERVER-CONTROL":K=new h(P),d.canBlockReload=K.bool("CAN-BLOCK-RELOAD"),d.canSkipUntil=K.optionalFloat("CAN-SKIP-UNTIL",0),d.canSkipDateRanges=0<d.canSkipUntil&&K.bool("CAN-SKIP-DATERANGES"),d.partHoldBack=K.optionalFloat("PART-HOLD-BACK",0),d.holdBack=K.optionalFloat("HOLD-BACK",0);break;case"PART-INF":V=new h(P),d.partTarget=V.decimalFloatingPoint("PART-TARGET");break;case"PART":H=(H=d.partList)||(d.partList=[]);var z=0<A?H[H.length-1]:void 0,W=A++;W=new m.c(new h(P),S,t,W,z);H.push(W),S.duration+=W.duration;break;case"PRELOAD-HINT":z=new h(P),d.preloadHint=z;break;case"RENDITION-REPORT":W=new h(P),d.renditionReports=d.renditionReports||[],d.renditionReports.push(W);break;default:u.b.warn("line parsed but not handled: "+o)}}else u.b.warn("No matches on slow regex match for level playlist!")}w&&!w.relurl?(f.pop(),E-=w.duration,d.partList&&(d.fragmentHint=w)):d.partList&&(D(S,w),S.cc=T,d.fragmentHint=S);var Y=f.length,X=f[0],Q=f[Y-1];return 0<(E+=d.skippedSegments*d.targetduration)&&Y&&Q?(d.averagetargetduration=E/Y,Y=Q.sn,d.endSN="initSegment"!==Y?Y:0,X&&(d.startCC=X.cc,X.initSegment||d.fragments.every((function(e){return e.relurl&&(e=e.relurl,k.test(null!=(e=null==(e=r.parseURL(e))?void 0:e.path)?e:""))}))&&(u.b.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(S=new m.b(i,t)).relurl=Q.relurl,S.level=n,S.sn="initSegment",X.initSegment=S,d.needSidxRanges=!0))):(d.endSN=0,d.startCC=0),d.fragmentHint&&(E+=d.fragmentHint.duration),d.totalduration=E,d.endCC=T,0<I&&function(e,t){for(var n=e[t],i=t;i--;){var r=e[i];if(!r)return;r.programDateTime=n.programDateTime-1e3*r.duration,n=r}}(f,I),d},L);function L(){}function R(e,t,n){(t=t[n])&&(e[n]=t)}function D(e,t){e.rawProgramDateTime?e.programDateTime=Date.parse(e.rawProgramDateTime):null!=t&&t.programDateTime&&(e.programDateTime=t.endProgramDateTime),Object(a.a)(e.programDateTime)||(e.programDateTime=null,e.rawProgramDateTime=null)}function _(e,t,n,i){e.relurl=t.URI,t.BYTERANGE&&e.setByteRange(t.BYTERANGE),e.level=n,e.sn="initSegment",i&&(e.levelkey=i),e.initSegment=null}var M=n(4);function O(e,t){return void 0!==(e=e.url)&&0!==e.indexOf("data:")?e:t.url}(t=F.prototype).startLoad=function(e){},t.stopLoad=function(){this.destroyInternalLoaders()},t.registerListeners=function(){var e=this.hls;e.on(s.a.MANIFEST_LOADING,this.onManifestLoading,this),e.on(s.a.LEVEL_LOADING,this.onLevelLoading,this),e.on(s.a.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(s.a.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},t.unregisterListeners=function(){var e=this.hls;e.off(s.a.MANIFEST_LOADING,this.onManifestLoading,this),e.off(s.a.LEVEL_LOADING,this.onLevelLoading,this),e.off(s.a.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(s.a.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},t.createInternalLoader=function(e){var t=this.hls.config,n=t.pLoader,i=t.loader;n=new(n||i)(t);return e.loader=n,this.loaders[e.type]=n},t.getInternalLoader=function(e){return this.loaders[e.type]},t.resetInternalLoader=function(e){this.loaders[e]&&delete this.loaders[e]},t.destroyInternalLoaders=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}},t.destroy=function(){this.unregisterListeners(),this.destroyInternalLoaders()},t.onManifestLoading=function(e,t){t=t.url,this.load({id:null,groupId:null,level:0,responseType:"text",type:M.a.MANIFEST,url:t,deliveryDirectives:null})},t.onLevelLoading=function(e,t){var n=t.id,i=t.level,r=t.url;t=t.deliveryDirectives;this.load({id:n,groupId:null,level:i,responseType:"text",type:M.a.LEVEL,url:r,deliveryDirectives:t})},t.onAudioTrackLoading=function(e,t){var n=t.id,i=t.groupId,r=t.url;t=t.deliveryDirectives;this.load({id:n,groupId:i,level:null,responseType:"text",type:M.a.AUDIO_TRACK,url:r,deliveryDirectives:t})},t.onSubtitleTrackLoading=function(e,t){var n=t.id,i=t.groupId,r=t.url;t=t.deliveryDirectives;this.load({id:n,groupId:i,level:null,responseType:"text",type:M.a.SUBTITLE_TRACK,url:r,deliveryDirectives:t})},t.load=function(e){var t,n,i,r,a=this.hls.config;if(s=this.getInternalLoader(e)){if((o=s.context)&&o.url===e.url)return void u.b.trace("[playlist-loader]: playlist request ongoing");u.b.log("[playlist-loader]: aborting previous loader for type: "+e.type),s.abort()}switch(e.type){case M.a.MANIFEST:t=a.manifestLoadingMaxRetry,n=a.manifestLoadingTimeOut,i=a.manifestLoadingRetryDelay,r=a.manifestLoadingMaxRetryTimeout;break;case M.a.LEVEL:case M.a.AUDIO_TRACK:case M.a.SUBTITLE_TRACK:t=0,n=a.levelLoadingTimeOut;break;default:t=a.levelLoadingMaxRetry,n=a.levelLoadingTimeOut,i=a.levelLoadingRetryDelay,r=a.levelLoadingMaxRetryTimeout}var s=this.createInternalLoader(e),o=(null!=(o=e.deliveryDirectives)&&o.part&&(e.type===M.a.LEVEL&&null!==e.level?l=this.hls.levels[e.level].details:e.type===M.a.AUDIO_TRACK&&null!==e.id?l=this.hls.audioTracks[e.id].details:e.type===M.a.SUBTITLE_TRACK&&null!==e.id&&(l=this.hls.subtitleTracks[e.id].details),l)&&(o=l.partTarget,l=l.targetduration,o&&l&&(n=Math.min(1e3*Math.max(3*o,.8*l),n))),{timeout:n,maxRetry:t,retryDelay:i,maxRetryDelay:r,highWaterMark:0}),l={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};s.load(e,o,l)},t.loadsuccess=function(e,t,n,i){var r;void 0===i&&(i=null),n.isSidxRequest?(this.handleSidxRequest(e,n),this.handlePlaylistLoaded(e,t,n,i)):(this.resetInternalLoader(n.type),0===(r=e.data).indexOf("#EXTM3U")?(t.parsing.start=performance.now(),0<r.indexOf("#EXTINF:")||0<r.indexOf("#EXT-X-TARGETDURATION:")?this.handleTrackOrLevelPlaylist(e,t,n,i):this.handleMasterPlaylist(e,t,n,i)):this.handleManifestParsingError(e,n,"no EXTM3U delimiter",i))},t.loaderror=function(e,t,n){this.handleNetworkError(t,n=void 0===n?null:n,!1,e)},t.loadtimeout=function(e,t,n){this.handleNetworkError(t,n=void 0===n?null:n,!0)},t.handleMasterPlaylist=function(e,t,n,i){var r,a,o=this.hls,l=e.data,c=O(e,n),d=(f=I.parseMasterPlaylist(l,c)).levels,f=f.sessionData;d.length?(r=d.map((function(e){return{id:e.attrs.AUDIO,audioCodec:e.audioCodec}})),a=d.map((function(e){return{id:e.attrs.SUBTITLES,textCodec:e.textCodec}})),r=I.parseMasterPlaylistMedia(l,c,"AUDIO",r),a=I.parseMasterPlaylistMedia(l,c,"SUBTITLES",a),l=I.parseMasterPlaylistMedia(l,c,"CLOSED-CAPTIONS"),r.length&&!r.some((function(e){return!e.url}))&&d[0].audioCodec&&!d[0].attrs.AUDIO&&(u.b.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),r.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new h({}),bitrate:0,url:""})),o.trigger(s.a.MANIFEST_LOADED,{levels:d,audioTracks:r,subtitles:a,captions:l,url:c,stats:t,networkDetails:i,sessionData:f})):this.handleManifestParsingError(e,n,"no level found in manifest",i)},t.handleTrackOrLevelPlaylist=function(e,t,n,i){var r=this.hls,u=n.id,l=n.level,c=n.type,d=O(e,n),f=Object(a.a)(u)?u:0,g=Object(a.a)(l)?l:f,p=function(){switch(n.type){case M.a.AUDIO_TRACK:return M.b.AUDIO;case M.a.SUBTITLE_TRACK:return M.b.SUBTITLE;default:return M.b.MAIN}}();(g=I.parseLevelPlaylist(e.data,d,g,p,f)).fragments.length?(c===M.a.MANIFEST&&(p={attrs:new h({}),bitrate:0,details:g,name:"",url:d},r.trigger(s.a.MANIFEST_LOADED,{levels:[p],audioTracks:[],url:d,stats:t,networkDetails:i,sessionData:null})),t.parsing.end=performance.now(),g.needSidxRanges?(p=null==(f=g.fragments[0].initSegment)?void 0:f.url,this.load({url:p,isSidxRequest:!0,type:c,level:l,levelDetails:g,id:u,groupId:null,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer",deliveryDirectives:null})):(n.levelDetails=g,this.handlePlaylistLoaded(e,t,n,i))):r.trigger(s.a.ERROR,{type:o.b.NETWORK_ERROR,details:o.a.LEVEL_EMPTY_ERROR,fatal:!1,url:d,reason:"no fragments found in level",level:"number"==typeof n.level?n.level:void 0})},t.handleSidxRequest=function(e,t){var n,i=new Uint8Array(e.data);(e=Object(l.c)(i,["sidx"])[0])&&(e=Object(l.k)(e))&&(e=e.references,n=t.levelDetails,e.forEach((function(e,t){e=e.info;0===(t=n.fragments[t]).byteRange.length&&t.setByteRange(String(1+e.end-e.start)+"@"+String(e.start)),t.initSegment&&(e=(e=Object(l.c)(i,["moov"])[0])?e.length:null,t.initSegment.setByteRange(String(e)+"@0"))})))},t.handleManifestParsingError=function(e,t,n,i){this.hls.trigger(s.a.ERROR,{type:o.b.NETWORK_ERROR,details:o.a.MANIFEST_PARSING_ERROR,fatal:t.type===M.a.MANIFEST,url:e.url,reason:n,response:e,context:t,networkDetails:i})},t.handleNetworkError=function(e,t,n,i){u.b.warn("[playlist-loader]: A network "+((n=void 0!==n&&n)?"timeout":"error")+" occurred while loading "+e.type+" level: "+e.level+" id: "+e.id+' group-id: "'+e.groupId+'"');var r=o.a.UNKNOWN,a=!1,l=this.getInternalLoader(e);switch(e.type){case M.a.MANIFEST:r=n?o.a.MANIFEST_LOAD_TIMEOUT:o.a.MANIFEST_LOAD_ERROR,a=!0;break;case M.a.LEVEL:r=n?o.a.LEVEL_LOAD_TIMEOUT:o.a.LEVEL_LOAD_ERROR,a=!1;break;case M.a.AUDIO_TRACK:r=n?o.a.AUDIO_TRACK_LOAD_TIMEOUT:o.a.AUDIO_TRACK_LOAD_ERROR,a=!1;break;case M.a.SUBTITLE_TRACK:r=n?o.a.SUBTITLE_TRACK_LOAD_TIMEOUT:o.a.SUBTITLE_LOAD_ERROR,a=!1}l&&this.resetInternalLoader(e.type),l={type:o.b.NETWORK_ERROR,details:r,fatal:a,url:e.url,loader:l,context:e,networkDetails:t},i&&(l.response=i),this.hls.trigger(s.a.ERROR,l)},t.handlePlaylistLoaded=function(e,t,n,i){var r=n.type,a=n.level,o=n.id,u=n.groupId,l=n.loader,c=n.levelDetails,d=n.deliveryDirectives;if(null!=c&&c.targetduration){if(l)switch(c.live&&(l.getCacheAge&&(c.ageHeader=l.getCacheAge()||0),l.getCacheAge&&!isNaN(c.ageHeader)||(c.ageHeader=0)),r){case M.a.MANIFEST:case M.a.LEVEL:this.hls.trigger(s.a.LEVEL_LOADED,{details:c,level:a||0,id:o||0,stats:t,networkDetails:i,deliveryDirectives:d});break;case M.a.AUDIO_TRACK:this.hls.trigger(s.a.AUDIO_TRACK_LOADED,{details:c,id:o||0,groupId:u||"",stats:t,networkDetails:i,deliveryDirectives:d});break;case M.a.SUBTITLE_TRACK:this.hls.trigger(s.a.SUBTITLE_TRACK_LOADED,{details:c,id:o||0,groupId:u||"",stats:t,networkDetails:i,deliveryDirectives:d})}}else this.handleManifestParsingError(e,n,"invalid target duration",i)};var P=F,N=((t=B.prototype).startLoad=function(e){},t.stopLoad=function(){this.destroyInternalLoaders()},t.registerListeners=function(){this.hls.on(s.a.KEY_LOADING,this.onKeyLoading,this)},t.unregisterListeners=function(){this.hls.off(s.a.KEY_LOADING,this.onKeyLoading)},t.destroyInternalLoaders=function(){for(var e in this.loaders)(e=this.loaders[e])&&e.destroy();this.loaders={}},t.destroy=function(){this.unregisterListeners(),this.destroyInternalLoaders()},t.onKeyLoading=function(e,t){var n,i,r=(t=t.frag).type,a=this.loaders[r];t.decryptdata?(n=t.decryptdata.uri)!==this.decrypturl||null===this.decryptkey?(i=this.hls.config,a&&(u.b.warn("abort previous key loader for type:"+r),a.abort()),n?(a=i.loader,r=t.loader=this.loaders[r]=new a(i),this.decrypturl=n,this.decryptkey=null,a={url:n,frag:t,responseType:"arraybuffer"},n={timeout:i.fragLoadingTimeOut,maxRetry:0,retryDelay:i.fragLoadingRetryDelay,maxRetryDelay:i.fragLoadingMaxRetryTimeout,highWaterMark:0},i={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},r.load(a,n,i)):u.b.warn("key uri is falsy")):this.decryptkey&&(t.decryptdata.key=this.decryptkey,this.hls.trigger(s.a.KEY_LOADED,{frag:t})):u.b.warn("Missing decryption data on fragment in onKeyLoading")},t.loadsuccess=function(e,t,n){(n=n.frag).decryptdata?(this.decryptkey=n.decryptdata.key=new Uint8Array(e.data),n.loader=null,delete this.loaders[n.type],this.hls.trigger(s.a.KEY_LOADED,{frag:n})):u.b.error("after key load, decryptdata unset")},t.loaderror=function(e,t){var n=(t=t.frag).loader;n&&n.abort(),delete this.loaders[t.type],this.hls.trigger(s.a.ERROR,{type:o.b.NETWORK_ERROR,details:o.a.KEY_LOAD_ERROR,fatal:!1,frag:t,response:e})},t.loadtimeout=function(e,t){var n=(t=t.frag).loader;n&&n.abort(),delete this.loaders[t.type],this.hls.trigger(s.a.ERROR,{type:o.b.NETWORK_ERROR,details:o.a.KEY_LOAD_TIMEOUT,fatal:!1,frag:t})},B);function B(e){this.hls=void 0,this.loaders={},this.decryptkey=null,this.decrypturl=null,this.hls=e,this.registerListeners()}function F(e){this.hls=void 0,this.loaders=Object.create(null),this.hls=e,this.registerListeners()}function U(e,t){var n;try{n=new Event("addtrack")}catch(e){(n=document.createEvent("Event")).initEvent("addtrack",!1,!1)}n.track=e,t.dispatchEvent(n)}function j(e,t){var n;if("disabled"===(n=e.mode)&&(e.mode="hidden"),e.cues&&!e.cues.getCueById(t.id))try{if(e.addCue(t),!e.cues.getCueById(t.id))throw new Error("addCue is failed for: "+t)}catch(n){u.b.debug("[texttrack-utils]: "+n);var i=new self.TextTrackCue(t.startTime,t.endTime,t.text);i.id=t.id,e.addCue(i)}"disabled"===n&&(e.mode=n)}function G(e){var t=e.mode;if("disabled"===t&&(e.mode="hidden"),e.cues)for(var n=e.cues.length;n--;)e.removeCue(e.cues[n]);"disabled"===t&&(e.mode=t)}function H(e,t,n,i){var r=e.mode;if("disabled"===r&&(e.mode="hidden"),e.cues&&0<e.cues.length)for(var a=function(e,t,n){var i=[],r=function(e,t){if(t<e[0].startTime)return 0;var n=e.length-1;if(t>e[n].endTime)return-1;for(var i=0,r=n;i<=r;){var a=Math.floor((r+i)/2);if(t<e[a].startTime)r=a-1;else{if(!(t>e[a].startTime&&i<n))return a;i=a+1}}return e[i].startTime-t<t-e[r].startTime?i:r}(e,t);if(-1<r)for(var a=r,s=e.length;a<s;a++){var o=e[a];if(o.startTime>=t&&o.endTime<=n)i.push(o);else if(o.startTime>n)return i}return i}(e.cues,t,n),s=0;s<a.length;s++)i&&!i(a[s])||e.removeCue(a[s]);"disabled"===r&&(e.mode=r)}var V=n(7),K=n(8);function q(){return self.WebKitDataCue||self.VTTCue||self.TextTrackCue}function z(e,t){return e.getTime()/1e3-t}(t=Y.prototype).destroy=function(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null},t._registerListeners=function(){var e=this.hls;e.on(s.a.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(s.a.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(s.a.MANIFEST_LOADING,this.onManifestLoading,this),e.on(s.a.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(s.a.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(s.a.LEVEL_UPDATED,this.onLevelUpdated,this)},t._unregisterListeners=function(){var e=this.hls;e.off(s.a.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(s.a.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(s.a.MANIFEST_LOADING,this.onManifestLoading,this),e.off(s.a.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(s.a.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(s.a.LEVEL_UPDATED,this.onLevelUpdated,this)},t.onMediaAttached=function(e,t){this.media=t.media},t.onMediaDetaching=function(){this.id3Track&&(G(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})},t.onManifestLoading=function(){this.dateRangeCuesAppended={}},t.createTrack=function(e){return(e=this.getID3Track(e.textTracks)).mode="hidden",e},t.getID3Track=function(e){if(this.media){for(var t=0;t<e.length;t++){var n=e[t];if("metadata"===n.kind&&"id3"===n.label)return U(n,this.media),n}return this.media.addTextTrack("metadata","id3")}},t.onFragParsingMetadata=function(e,t){if(this.media){var n=(r=this.hls.config).enableEmsgMetadataCues,i=r.enableID3MetadataCues;if(n||i){var r=t.frag,a=t.samples;t=t.details;this.id3Track||(this.id3Track=this.createTrack(this.media));for(var s=t.edge||r.end,o=q(),u=!1,l={},c=0;c<a.length;c++){var d=a[c].type;if((d!==K.a.emsg||n)&&i){var h=V.c(a[c].data);if(h){var f=a[c].pts,g=s;s-f<=0&&(g=f+.25);for(var p=0;p<h.length;p++){var m,v=h[p];V.e(v)||((m=new o(f,g,"")).value=v,d&&(m.type=d),this.id3Track.addCue(m),u=!(l[v.key]=null))}}}}u&&this.updateId3CueEnds(l)}}},t.updateId3CueEnds=function(e){var t,n=null==(t=this.id3Track)?void 0:t.cues;if(n)for(var i=n.length;i--;){var r,a=n[i],s=null==(s=a.value)?void 0:s.key;s&&s in e&&((r=e[s])&&a.endTime!==r&&(a.endTime=r),e[s]=a.startTime)}},t.onBufferFlushing=function(e,t){var n,i,r=t.startOffset,a=t.endOffset,s=(t=t.type,this.id3Track),o=this.hls;o&&(o=o.config,n=o.enableEmsgMetadataCues,i=o.enableID3MetadataCues,s)&&(n||i)&&H(s,r,a,"audio"===t?function(e){return e.type===K.a.audioId3&&i}:"video"===t?function(e){return e.type===K.a.emsg&&n}:function(e){return e.type===K.a.audioId3&&i||e.type===K.a.emsg&&n})},t.onLevelUpdated=function(e,t){var n=this;t=t.details;if(this.media&&t.hasProgramDateTime&&this.hls.config.enableDateRangeMetadataCues){var r=this.dateRangeCuesAppended,s=this.id3Track,o=t.dateRanges,u=Object.keys(o);if(s)for(var l=Object.keys(r).filter((function(e){return!u.includes(e)})),c=l.length;c--;)!function(e){var t=l[e];Object.keys(r[t].cues).forEach((function(e){s.removeCue(r[t].cues[e])})),delete r[t]}(c);var d=t.fragments[t.fragments.length-1];if(0!==u.length&&Object(a.a)(null==d?void 0:d.programDateTime)){this.id3Track||(this.id3Track=this.createTrack(this.media));for(var h=d.programDateTime/1e3-d.start,f=t.edge||d.end,g=q(),p=0;p<u.length;p++)!function(e){e=u[e];var t=o[e],a=r[e],s=(null==a?void 0:a.cues)||{},l=(null==a?void 0:a.durationKnown)||!1,c=z(t.startDate,h),d=f,p=t.endDate;p?(d=z(p,h),l=!0):t.endOnNext&&!l&&(p=u.reduce((function(e,n){var i=o[n];return i.class===t.class&&i.id!==n&&i.startDate>t.startDate&&e.push(i),e}),[]).sort((function(e,t){return e.startDate.getTime()-t.startDate.getTime()}))[0])&&(d=z(p.startDate,h),l=!0);for(var m,v=Object.keys(t.attr),y=0;y<v.length;y++){var b,A,E=v[y];E!==i.ID&&E!==i.CLASS&&E!==i.START_DATE&&E!==i.DURATION&&E!==i.END_DATE&&E!==i.END_ON_NEXT&&((A=s[E])?l&&!a.durationKnown&&(A.endTime=d):(b=t.attr[E],A=new g(c,d,""),E!==i.SCTE35_OUT&&E!==i.SCTE35_IN||(m=b,b=Uint8Array.from(m.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer),A.value={key:E,data:b},A.type=K.a.dateRange,n.id3Track.addCue(A),s[E]=A))}r[e]={cues:s,dateRange:t,durationKnown:l}}(p)}}};var W=Y;function Y(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=e,this._registerListeners()}(t=$.prototype).destroy=function(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null},t.registerListeners=function(){this.hls.on(s.a.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(s.a.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(s.a.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(s.a.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(s.a.ERROR,this.onError,this)},t.unregisterListeners=function(){this.hls.off(s.a.MEDIA_ATTACHED,this.onMediaAttached),this.hls.off(s.a.MEDIA_DETACHING,this.onMediaDetaching),this.hls.off(s.a.MANIFEST_LOADING,this.onManifestLoading),this.hls.off(s.a.LEVEL_UPDATED,this.onLevelUpdated),this.hls.off(s.a.ERROR,this.onError)},t.onMediaAttached=function(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)},t.onMediaDetaching=function(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)},t.onManifestLoading=function(){this.levelDetails=null,this._latency=null,this.stallCount=0},t.onLevelUpdated=function(e,t){t=t.details,(this.levelDetails=t).advanced&&this.timeupdate(),!t.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)},t.onError=function(e,t){t.details===o.a.BUFFER_STALLED_ERROR&&(this.stallCount++,u.b.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))},t.timeupdate=function(){var e,t,n,i=this.media,r=this.levelDetails;i&&r&&(this.currentTime=i.currentTime,null!==(t=this.computeLatency()))&&(this._latency=t,n=(e=this.config).lowLatencyMode,e=e.maxLiveSyncPlaybackRate,n)&&1!==e&&null!==(n=this.targetLatency)&&(n=(t-=n)<Math.min(this.maxLatency,n+r.targetduration),r.live&&n&&.05<t&&1<this.forwardBufferLength?(r=Math.min(2,Math.max(1,e)),n=Math.round(2/(1+Math.exp(-.75*t-this.edgeStalled))*20)/20,i.playbackRate=Math.min(r,Math.max(1,n))):1!==i.playbackRate&&0!==i.playbackRate&&(i.playbackRate=1))},t.estimateLiveEdge=function(){var e=this.levelDetails;return null===e?null:e.edge+e.age},t.computeLatency=function(){var e=this.estimateLiveEdge();return null===e?null:e-this.currentTime},function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}((t=$).prototype,[{key:"latency",get:function(){return this._latency||0}},{key:"maxLatency",get:function(){var e=this.config,t=this.levelDetails;return void 0!==e.liveMaxLatencyDuration?e.liveMaxLatencyDuration:t?e.liveMaxLatencyDurationCount*t.targetduration:0}},{key:"targetLatency",get:function(){var e,t,n,i,r,a=this.levelDetails;return null===a?null:(e=a.holdBack,i=a.partHoldBack,a=a.targetduration,t=(r=this.config).liveSyncDuration,n=r.liveSyncDurationCount,r=r.lowLatencyMode&&i||e,(r=(i=this.hls.userConfig).liveSyncDuration||i.liveSyncDurationCount||0===r?void 0!==t?t:n*a:r)+Math.min(+this.stallCount,a))}},{key:"liveSyncPosition",get:function(){var e,t=this.estimateLiveEdge(),n=this.targetLatency,i=this.levelDetails;return null===t||null===n||null===i?null:(e=i.edge,t=t-n-this.edgeStalled,n=e-i.totalduration,e-=this.config.lowLatencyMode&&i.partTarget||i.targetduration,Math.min(Math.max(n,t),e))}},{key:"drift",get:function(){var e=this.levelDetails;return null===e?1:e.drift}},{key:"edgeStalled",get:function(){var e,t=this.levelDetails;return null===t?0:(e=3*(this.config.lowLatencyMode&&t.partTarget||t.targetduration),Math.max(t.age-e,0))}},{key:"forwardBufferLength",get:function(){var e,t=this.media,n=this.levelDetails;return t&&n?((e=t.buffered.length)?t.buffered.end(e-1):n.edge)-this.currentTime:0}}]),Object.defineProperty(t,"prototype",{writable:!1});var X,Q=$;function $(e){var t=this;this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=function(){return t.timeupdate()},this.hls=e,this.config=e.config,this.registerListeners()}(t=X=X||{}).No="",t.Yes="YES",t.v2="v2",te.prototype.addDirectives=function(e){return e=new self.URL(e),void 0!==this.msn&&e.searchParams.set("_HLS_msn",this.msn.toString()),void 0!==this.part&&e.searchParams.set("_HLS_part",this.part.toString()),this.skip&&e.searchParams.set("_HLS_skip",this.skip),e.toString()};var Z=te,J=(function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}((t=ee).prototype,[{key:"maxBitrate",get:function(){return Math.max(this.realBitrate,this.bitrate)}},{key:"uri",get:function(){return this.url[this._urlId]||""}},{key:"urlId",get:function(){return this._urlId},set:function(e){e%=this.url.length,this._urlId!==e&&(this.details=void 0,this._urlId=e)}}]),Object.defineProperty(t,"prototype",{writable:!1}),ee);function ee(e){this.attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.unknownCodecs=void 0,this.audioGroupIds=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.textGroupIds=void 0,this.url=void 0,this._urlId=0,this.url=[e.url],this.attrs=e.attrs,this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.unknownCodecs=e.unknownCodecs,this.codecSet=[e.videoCodec,e.audioCodec].filter((function(e){return e})).join(",").replace(/\.[^.,]+/g,"")}function te(e,t,n){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=n}function ne(){return(ne=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n,i=arguments[t];for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function ie(e,t,n){switch(t){case"audio":e.audioGroupIds||(e.audioGroupIds=[]),e.audioGroupIds.push(n);break;case"text":e.textGroupIds||(e.textGroupIds=[]),e.textGroupIds.push(n)}}function re(e){var t={};e.forEach((function(e){var n=e.groupId||"";e.id=t[n]=t[n]||0,t[n]++}))}function ae(e,t){var n,i=t.startPTS;Object(a.a)(i)?(n=0,(i=t.sn>e.sn?(n=i-e.start,e):(n=e.start-i,t)).duration!==n&&(i.duration=n)):t.sn>e.sn?e.cc===t.cc&&e.minEndPTS?t.start=e.start+(e.minEndPTS-e.start):t.start=e.start+e.duration:t.start=Math.max(e.start-t.duration,0)}function se(e,t,n,i,r,s){i-n<=0&&(u.b.warn("Fragment should have a positive duration",t),i=n+t.duration,s=r+t.duration);var o=n,l=i,c=t.startPTS,d=t.endPTS,h=(Object(a.a)(c)&&(h=Math.abs(c-n),Object(a.a)(t.deltaPTS)?t.deltaPTS=Math.max(h,t.deltaPTS):t.deltaPTS=h,o=Math.max(n,c),n=Math.min(n,c),r=Math.min(r,t.startDTS),l=Math.min(i,d),i=Math.max(i,d),s=Math.max(s,t.endDTS)),t.duration=i-n,n-t.start);t.appendedPTS=i,t.start=t.startPTS=n,t.maxStartPTS=o,t.startDTS=r,t.endPTS=i,t.minEndPTS=l,t.endDTS=s;var f;c=t.sn;if(!e||c<e.startSN||c>e.endSN)return 0;d=c-e.startSN;var g=e.fragments;for(g[d]=t,f=d;0<f;f--)ae(g[f],g[f-1]);for(f=d;f<g.length-1;f++)ae(g[f],g[f+1]);return e.fragmentHint&&ae(g[g.length-1],e.fragmentHint),e.PTSKnown=e.alignedSliding=!0,h}function oe(e,t){var n=t.startSN+t.skippedSegments-e.startSN;e=e.fragments;n<0||n>=e.length||ue(t,e[n].start)}function ue(e,t){if(t){for(var n=e.fragments,i=e.skippedSegments;i<n.length;i++)n[i].start+=t;e.fragmentHint&&(e.fragmentHint.start+=t)}}function le(e,t){this.hls=void 0,this.timer=-1,this.canLoad=!1,this.retryCount=0,this.log=void 0,this.warn=void 0,this.log=u.b.log.bind(u.b,t+":"),this.warn=u.b.warn.bind(u.b,t+":"),this.hls=e}function ce(){return(ce=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n,i=arguments[t];for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function de(e,t){return(de=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}(t=le.prototype).destroy=function(){this.clearTimer(),this.hls=this.log=this.warn=null},t.onError=function(e,t){t.fatal&&t.type===o.b.NETWORK_ERROR&&this.clearTimer()},t.clearTimer=function(){clearTimeout(this.timer),this.timer=-1},t.startLoad=function(){this.canLoad=!0,this.retryCount=0,this.loadPlaylist()},t.stopLoad=function(){this.canLoad=!1,this.clearTimer()},t.switchParams=function(e,t){var n=null==t?void 0:t.renditionReports;if(n)for(var i=0;i<n.length;i++){if((s=""+(o=n[i]).URI)===e.slice(-s.length)){var r,s=parseInt(o["LAST-MSN"]),o=parseInt(o["LAST-PART"]);if(t&&this.hls.config.lowLatencyMode&&(r=Math.min(t.age-t.partTarget,t.targetduration),void 0!==o)&&r>t.partTarget&&(o+=1),Object(a.a)(s))return new Z(s,Object(a.a)(o)?o:void 0,X.No)}}},t.loadPlaylist=function(e){},t.shouldLoadTrack=function(e){return this.canLoad&&e&&!!e.url&&(!e.details||e.details.live)},t.playlistLoaded=function(e,t,n){var i,r=this,s=t.details,o=t.stats,l=o.loading.end?Math.max(0,self.performance.now()-o.loading.end):0;if(s.advancedDateTime=Date.now()-l,s.live||null!=n&&n.live){if(s.reloaded(n),n&&this.log("live playlist "+e+" "+(s.advanced?"REFRESHED "+s.lastPartSn+"-"+s.lastPartIndex:"MISSED")),n&&0<s.fragments.length&&function(e,t){for(var n=null,i=e.fragments,r=i.length-1;0<=r;r--){var s=i[r].initSegment;if(s){n=s;break}}e.fragmentHint&&delete e.fragmentHint.endPTS;for(var o,l,c,d=0,h=e,f=t,g=f.skippedSegments,m=Math.max(h.startSN,f.startSN)-f.startSN,v=(h.fragmentHint?1:0)+(g?f.endSN:Math.min(h.endSN,f.endSN))-f.startSN,y=f.startSN-h.startSN,b=f.fragmentHint?f.fragments.concat(f.fragmentHint):f.fragments,A=h.fragmentHint?h.fragments.concat(h.fragmentHint):h.fragments,E=m;E<=v;E++){var T=A[y+E],w=b[E];g&&!w&&E<g&&(w=f.fragments[E]=T),T&&w&&(w=w,(T=T).relurl&&(d=T.cc-w.cc),Object(a.a)(T.startPTS)&&Object(a.a)(T.endPTS)&&(w.start=w.startPTS=T.startPTS,w.startDTS=T.startDTS,w.appendedPTS=T.appendedPTS,w.maxStartPTS=T.maxStartPTS,w.endPTS=T.endPTS,w.endDTS=T.endDTS,w.minEndPTS=T.minEndPTS,w.duration=T.endPTS-T.startPTS,w.duration&&(o=w),t.PTSKnown=t.alignedSliding=!0),w.elementaryStreams=T.elementaryStreams,w.loader=T.loader,w.stats=T.stats,w.urlId=T.urlId,T.initSegment)&&(w.initSegment=T.initSegment,n=T.initSegment)}if(n&&(t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments).forEach((function(e){var t;e.initSegment&&e.initSegment.relurl!==(null==(t=n)?void 0:t.relurl)||(e.initSegment=n)})),t.skippedSegments)if(t.deltaUpdateFailed=t.fragments.some((function(e){return!e})),t.deltaUpdateFailed){u.b.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(var S=t.skippedSegments;S--;)t.fragments.shift();t.startSN=t.fragments[0].sn,t.startCC=t.fragments[0].cc}else t.canSkipDateRanges&&(t.dateRanges=(h=e.dateRanges,l=t.dateRanges,m=t.recentlyRemovedDateranges,c=ne({},h),m&&m.forEach((function(e){delete c[e]})),Object.keys(l).forEach((function(e){var t=new p(l[e].attr,c[e]);t.isValid?c[e]=t:u.b.warn('Ignoring invalid Playlist Delta Update DATERANGE tag: "'+JSON.stringify(l[e].attr)+'"')})),c));var C=t.fragments;if(d){u.b.warn("discontinuity sliding from playlist, take drift into account");for(var x=0;x<C.length;x++)C[x].cc+=d}t.skippedSegments&&(t.startCC=t.fragments[0].cc);var k=e.partList,I=t.partList;if(k&&I)for(var L=0,R=0,D=k.length;R<=D;R++){var _=k[R],M=I[R+L];_&&M&&_.index===M.index&&_.fragment.sn===M.fragment.sn?(_=_,(M=M).elementaryStreams=_.elementaryStreams,M.stats=_.stats):L--}o?se(t,o,o.startPTS,o.endPTS,o.startDTS,o.endDTS):oe(e,t),C.length&&(t.totalduration=t.edge-C[0].start),t.driftStartTime=e.driftStartTime,t.driftStart=e.driftStart,h=t.advancedDateTime,t.advanced&&h?(m=t.edge,t.driftStart||(t.driftStartTime=h,t.driftStart=m),t.driftEndTime=h,t.driftEnd=m):(t.driftEndTime=e.driftEndTime,t.driftEnd=e.driftEnd,t.advancedDateTime=e.advancedDateTime)}(n,s),this.canLoad&&s.live){l=void 0;var c,d=void 0;if(s.canBlockReload&&s.endSN&&s.advanced){var h,f,g=this.hls.config.lowLatencyMode,m=(h=s.lastPartSn)===(f=s.endSN),v=(h=(-1!==(v=s.lastPartIndex)?(l=m?f+1:h,d=m?g?0:v:v+1):l=f+1,s.age))+s.ageHeader;if(0<(f=Math.min(v-s.partTarget,1.5*s.targetduration))&&(n&&f>n.tuneInGoal?(this.warn("CDN Tune-in goal increased from: "+n.tuneInGoal+" to: "+f+" with playlist age: "+s.age),f=0):(l+=v=Math.floor(f/s.targetduration),void 0!==d&&(d+=Math.round(f%s.targetduration/s.partTarget)),this.log("CDN Tune-in age: "+s.ageHeader+"s last advanced "+h.toFixed(2)+"s goal: "+f+" skip sn "+v+" to part "+d)),s.tuneInGoal=f),c=this.getDeliveryDirectives(s,t.deliveryDirectives,l,d),g||!m)return void this.loadPlaylist(c)}else c=this.getDeliveryDirectives(s,t.deliveryDirectives,l,d);v=(h=1e3*(n=s).levelTargetDuration)/2,g=0<(f=n.age)&&f<3*h,m=o.loading.end-o.loading.start,t=n.availabilityDelay,!1===n.updated?g?(i=333*n.misses,i=Math.max(Math.min(v,2*m),i),n.availabilityDelay=(n.availabilityDelay||0)+i):i=v:i=g?(t=Math.min(t||h/2,f),(n.availabilityDelay=t)+h-f):h-m,d=Math.round(i),void 0!==l&&s.canBlockReload&&(d-=s.partTarget||1),this.log("reload live playlist "+e+" in "+Math.round(d)+" ms"),this.timer=self.setTimeout((function(){return r.loadPlaylist(c)}),d)}}else this.clearTimer()},t.getDeliveryDirectives=function(e,t,n,i){o=n,r=e.canSkipUntil,a=e.canSkipDateRanges,s=e.endSN;var r,a,s,o=r&&(void 0!==o?o-s:0)<r?a?X.v2:X.Yes:X.No;return null!=t&&t.skip&&e.deltaUpdateFailed&&(n=t.msn,i=t.part,o=X.No),new Z(n,i,o)},t.retryLoadingOrFail=function(e){var t,n=this,i=this.hls.config,r=this.retryCount<i.levelLoadingMaxRetry;return r?(this.retryCount++,-1<e.details.indexOf("LoadTimeOut")&&null!=(t=e.context)&&t.deliveryDirectives?(this.warn("retry playlist loading #"+this.retryCount+' after "'+e.details+'"'),this.loadPlaylist()):(t=Math.min(Math.pow(2,this.retryCount)*i.levelLoadingRetryDelay,i.levelLoadingMaxRetryTimeout),this.timer=self.setTimeout((function(){return n.loadPlaylist()}),t),this.warn("retry playlist loading #"+this.retryCount+" in "+t+' ms after "'+e.details+'"'))):(this.warn('cannot recover from error "'+e.details+'"'),this.clearTimer(),e.fatal=!0),r},t=le;var he,fe,ge=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),pe=(Ee=fe=t,(Ct=me).prototype=Object.create(Ee.prototype),de(Ct.prototype.constructor=Ct,Ee),(Ct=me.prototype)._registerListeners=function(){var e=this.hls;e.on(s.a.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(s.a.LEVEL_LOADED,this.onLevelLoaded,this),e.on(s.a.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(s.a.FRAG_LOADED,this.onFragLoaded,this),e.on(s.a.ERROR,this.onError,this)},Ct._unregisterListeners=function(){var e=this.hls;e.off(s.a.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(s.a.LEVEL_LOADED,this.onLevelLoaded,this),e.off(s.a.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(s.a.FRAG_LOADED,this.onFragLoaded,this),e.off(s.a.ERROR,this.onError,this)},Ct.destroy=function(){this._unregisterListeners(),this.manualLevelIndex=-1,this._levels.length=0,fe.prototype.destroy.call(this)},Ct.startLoad=function(){this._levels.forEach((function(e){e.loadError=0})),fe.prototype.startLoad.call(this)},Ct.onManifestLoaded=function(e,t){var n,i,r=[],a=[],u=[],l={},c=!1,d=!1,h=!1;if(t.levels.forEach((function(e){var t=e.attrs,n=(c=c||!(!e.width||!e.height),d=d||!!e.videoCodec,h=h||!!e.audioCodec,ge&&e.audioCodec&&-1!==e.audioCodec.indexOf("mp4a.40.34")&&(e.audioCodec=void 0),e.bitrate+"-"+e.attrs.RESOLUTION+"-"+e.attrs.CODECS);(i=l[n])?i.url.push(e.url):(i=new J(e),l[n]=i,r.push(i)),t&&(t.AUDIO&&ie(i,"audio",t.AUDIO),t.SUBTITLES)&&ie(i,"text",t.SUBTITLES)})),r=(r=(c||d)&&h?r.filter((function(e){var t=e.videoCodec,n=e.width;e=e.height;return!!t||!(!n||!e)})):r).filter((function(e){var t=e.audioCodec;e=e.videoCodec;return(!t||T(t,"audio"))&&(!e||T(e,"video"))})),t.audioTracks&&re(a=t.audioTracks.filter((function(e){return!e.audioCodec||T(e.audioCodec,"audio")}))),t.subtitles&&re(u=t.subtitles),0<r.length){n=r[0].bitrate,r.sort((function(e,t){return e.bitrate-t.bitrate})),this._levels=r;for(var f=0;f<r.length;f++)if(r[f].bitrate===n){this._firstLevel=f,this.log("manifest loaded, "+r.length+" level(s) found, first bitrate: "+n);break}var g=h&&!d;u={levels:r,audioTracks:a,subtitleTracks:u,firstLevel:this._firstLevel,stats:t.stats,audio:h,video:d,altAudio:!g&&a.some((function(e){return!!e.url}))};this.hls.trigger(s.a.MANIFEST_PARSED,u),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}else this.hls.trigger(s.a.ERROR,{type:o.b.MEDIA_ERROR,details:o.a.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,reason:"no level with compatible codecs found in manifest"})},Ct.onError=function(e,t){if(fe.prototype.onError.call(this,e,t),!t.fatal){var n=t.context;e=this._levels[this.currentLevelIndex];if(n&&(n.type===M.a.AUDIO_TRACK&&e.audioGroupIds&&n.groupId===e.audioGroupIds[e.urlId]||n.type===M.a.SUBTITLE_TRACK&&e.textGroupIds&&n.groupId===e.textGroupIds[e.urlId]))this.redundantFailover(this.currentLevelIndex);else{var i,r,a,s=!1,u=!0;switch(t.details){case o.a.FRAG_LOAD_ERROR:case o.a.FRAG_LOAD_TIMEOUT:case o.a.KEY_LOAD_ERROR:case o.a.KEY_LOAD_TIMEOUT:t.frag&&(r=t.frag.type===M.b.MAIN?t.frag.level:this.currentLevelIndex,!(a=this._levels[r])||(a.fragmentError++,a.fragmentError>this.hls.config.fragLoadingMaxRetry))&&(i=r);break;case o.a.LEVEL_LOAD_ERROR:case o.a.LEVEL_LOAD_TIMEOUT:n&&(n.deliveryDirectives&&(u=!1),i=n.level),s=!0;break;case o.a.REMUX_ALLOC_ERROR:i=null!=(a=t.level)?a:this.currentLevelIndex,s=!0}void 0!==i&&this.recoverLevel(t,i,s,u)}}},Ct.recoverLevel=function(e,t,n,i){var r=e.details,a=this._levels[t];if(a.loadError++,n){if(!this.retryLoadingOrFail(e))return void(this.currentLevelIndex=-1);e.levelRetry=!0}if(i)if(1<(n=a.url.length)&&a.loadError<n)e.levelRetry=!0,this.redundantFailover(t);else if(-1===this.manualLevelIndex){for(var s=-1,o=this._levels,u=o.length;u--;){var l=(u+this.currentLevelIndex)%o.length;if(l!==this.currentLevelIndex&&0===o[l].loadError){s=l;break}}-1<s&&this.currentLevelIndex!==s&&(this.warn(r+": switch to "+s),e.levelRetry=!0,this.hls.nextAutoLevel=s)}},Ct.redundantFailover=function(e){var t,n=this._levels[e],i=n.url.length;1<i&&(t=(n.urlId+1)%i,this.warn("Switching to redundant URL-id "+t),this._levels.forEach((function(e){e.urlId=t})),this.level=e)},Ct.onFragLoaded=function(e,t){void 0!==(t=t.frag)&&t.type===M.b.MAIN&&void 0!==(t=this._levels[t.level])&&(t.fragmentError=0,t.loadError=0)},Ct.onLevelLoaded=function(e,t){var n=t.level,i=t.details,r=this._levels[n];r?n===this.currentLevelIndex?(0===r.fragmentError&&(r.loadError=0,this.retryCount=0),this.playlistLoaded(n,t,r.details)):null!=(r=t.deliveryDirectives)&&r.skip&&(i.deltaUpdateFailed=!0):(this.warn("Invalid level index "+n),null!=(r=t.deliveryDirectives)&&r.skip&&(i.deltaUpdateFailed=!0))},Ct.onAudioTrackSwitched=function(e,t){var n=this.hls.levels[this.currentLevelIndex];if(n&&n.audioGroupIds){for(var i=-1,r=this.hls.audioTracks[t.id].groupId,a=0;a<n.audioGroupIds.length;a++)if(n.audioGroupIds[a]===r){i=a;break}i!==n.urlId&&(n.urlId=i,this.startLoad())}},Ct.loadPlaylist=function(e){var t=this.currentLevelIndex,n=this._levels[t];if(this.canLoad&&n&&0<n.url.length){var i=n.urlId;n=n.url[i];if(e)try{n=e.addDirectives(n)}catch(e){this.warn("Could not construct new URL with HLS Delivery Directives: "+e)}this.log("Attempt loading level index "+t+(e?" at sn "+e.msn+" part "+e.part:"")+" with URL-id "+i+" "+n),this.clearTimer(),this.hls.trigger(s.a.LEVEL_LOADING,{url:n,level:t,id:i,deliveryDirectives:e||null})}},Ct.removeLevel=function(e,t){var n=function(e,n){return n!==t},i=this._levels.filter((function(i,r){return r!==e||1<i.url.length&&void 0!==t&&(i.url=i.url.filter(n),i.audioGroupIds&&(i.audioGroupIds=i.audioGroupIds.filter(n)),i.textGroupIds&&(i.textGroupIds=i.textGroupIds.filter(n)),!(i.urlId=0))})).map((function(e,t){var n=e.details;return null!=n&&n.fragments&&n.fragments.forEach((function(e){e.level=t})),e}));this._levels=i,this.hls.trigger(s.a.LEVELS_UPDATED,{levels:i})},function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}((Ee=me).prototype,[{key:"levels",get:function(){return 0===this._levels.length?null:this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(e){if(0!==(i=this._levels).length&&(this.currentLevelIndex!==e||null==(t=i[e])||!t.details)){if(e<0||e>=i.length){var t=e<0;if(this.hls.trigger(s.a.ERROR,{type:o.b.OTHER_ERROR,details:o.a.LEVEL_SWITCH_ERROR,level:e,fatal:t,reason:"invalid level idx"}),t)return;e=Math.min(e,i.length-1)}this.clearTimer();var n=i[t=this.currentLevelIndex],i=i[e];(e=(delete(t=(this.log("switching to level "+e+" from "+t),ce({},i,{level:this.currentLevelIndex=e,maxBitrate:i.maxBitrate,uri:i.uri,urlId:i.urlId})))._urlId,this.hls.trigger(s.a.LEVEL_SWITCHING,t),i.details))&&!e.live||(t=this.switchParams(i.uri,null==n?void 0:n.details),this.loadPlaylist(t))}}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(e){this._firstLevel=e}},{key:"startLevel",get:function(){var e;return void 0===this._startLevel?void 0!==(e=this.hls.config.startLevel)?e:this._firstLevel:this._startLevel},set:function(e){this._startLevel=e}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)}}]),Object.defineProperty(Ee,"prototype",{writable:!1}),me);function me(e){return(e=fe.call(this,e,"[level-controller]")||this)._levels=[],e._firstLevel=-1,e._startLevel=void 0,e.currentLevelIndex=-1,e.manualLevelIndex=-1,e.onParsedComplete=void 0,e._registerListeners(),e}(Ct=he=he||{}).NOT_LOADED="NOT_LOADED",Ct.APPENDING="APPENDING",Ct.PARTIAL="PARTIAL",Ct.OK="OK",(Ee=ye.prototype)._registerListeners=function(){var e=this.hls;e.on(s.a.BUFFER_APPENDED,this.onBufferAppended,this),e.on(s.a.FRAG_BUFFERED,this.onFragBuffered,this),e.on(s.a.FRAG_LOADED,this.onFragLoaded,this)},Ee._unregisterListeners=function(){var e=this.hls;e.off(s.a.BUFFER_APPENDED,this.onBufferAppended,this),e.off(s.a.FRAG_BUFFERED,this.onFragBuffered,this),e.off(s.a.FRAG_LOADED,this.onFragLoaded,this)},Ee.destroy=function(){this._unregisterListeners(),this.fragments=this.timeRanges=null},Ee.getAppendedFrag=function(e,t){if(t===M.b.MAIN){var n=this.activeFragment,i=this.activeParts;if(!n)return null;if(i)for(var r=i.length;r--;){var a=i[r],s=a?a.end:n.appendedPTS;if(a.start<=e&&void 0!==s&&e<=s)return 9<r&&(this.activeParts=i.slice(r-9)),a}else if(n.start<=e&&void 0!==n.appendedPTS&&e<=n.appendedPTS)return n}return this.getBufferedFrag(e,t)},Ee.getBufferedFrag=function(e,t){for(var n=this.fragments,i=Object.keys(n),r=i.length;r--;){var a=n[i[r]];if((null==a?void 0:a.body.type)===t&&a.buffered&&(a=a.body).start<=e&&e<=a.end)return a}return null},Ee.detectEvictedFragments=function(e,t,n){var i=this;Object.keys(this.fragments).forEach((function(r){var a=i.fragments[r];a&&(a.buffered?(r=a.range[e])&&r.time.some((function(e){return(e=!i.isTimeBuffered(e.startPTS,e.endPTS,t))&&i.removeFragment(a.body),e})):a.body.type===n&&i.removeFragment(a.body))}))},Ee.detectPartialFragments=function(e){var t,n=this,i=this.timeRanges,r=e.frag,a=e.part;i&&"initSegment"!==r.sn&&(e=Ae(r),t=this.fragments[e])&&(Object.keys(i).forEach((function(e){var s,o=r.elementaryStreams[e];o&&(s=i[e],o=null!==a||!0===o.partial,t.range[e]=n.getBufferedTimes(r,a,o,s))})),t.loaded=null,Object.keys(t.range).length?t.buffered=!0:this.removeFragment(t.body))},Ee.fragBuffered=function(e){e=Ae(e),(e=this.fragments[e])&&(e.loaded=null,e.buffered=!0)},Ee.getBufferedTimes=function(e,t,n,i){for(var r={time:[],partial:n},a=(t||e).start,s=(t||e).end,o=e.minEndPTS||s,u=e.maxStartPTS||a,l=0;l<i.length;l++){var c=i.start(l)-this.bufferPadding,d=i.end(l)+this.bufferPadding;if(c<=u&&o<=d){r.time.push({startPTS:Math.max(a,i.start(l)),endPTS:Math.min(s,i.end(l))});break}if(a<d&&c<s)r.partial=!0,r.time.push({startPTS:Math.max(a,i.start(l)),endPTS:Math.min(s,i.end(l))});else if(s<=c)break}return r},Ee.getPartialFragment=function(e){var t,n,i=null,r=0,a=this.bufferPadding,s=this.fragments;return Object.keys(s).forEach((function(o){(o=s[o])&&be(o)&&(t=o.body.start-a,n=o.body.end+a,t<=e)&&e<=n&&(t=Math.min(e-t,n-e),r<=t)&&(i=o.body,r=t)})),i},Ee.getState=function(e){return e=Ae(e),(e=this.fragments[e])?e.buffered?be(e)?he.PARTIAL:he.OK:he.APPENDING:he.NOT_LOADED},Ee.isTimeBuffered=function(e,t,n){for(var i,r,a=0;a<n.length;a++){if(i=n.start(a)-this.bufferPadding,r=n.end(a)+this.bufferPadding,i<=e&&t<=r)return!0;if(t<=i)return!1}return!1},Ee.onFragLoaded=function(e,t){var n=t.frag,i=t.part;"initSegment"===n.sn||n.bitrateTest||i||(i=Ae(n),this.fragments[i]={body:n,loaded:t,buffered:!1,range:Object.create(null)})},Ee.onBufferAppended=function(e,t){var n=this,i=t.frag,r=t.part,a=t.timeRanges;i.type===M.b.MAIN&&(this.activeFragment=i,r?((t=this.activeParts)||(this.activeParts=t=[]),t.push(r)):this.activeParts=null),this.timeRanges=a,Object.keys(a).forEach((function(e){var t=a[e];if(n.detectEvictedFragments(e,t),!r)for(var s=0;s<t.length;s++)i.appendedPTS=Math.max(t.end(s),i.appendedPTS||0)}))},Ee.onFragBuffered=function(e,t){this.detectPartialFragments(t)},Ee.hasFragment=function(e){return e=Ae(e),!!this.fragments[e]},Ee.removeFragmentsInRange=function(e,t,n){var i=this;Object.keys(this.fragments).forEach((function(r){(r=i.fragments[r])&&r.buffered&&(r=r.body).type===n&&r.start<t&&r.end>e&&i.removeFragment(r)}))},Ee.removeFragment=function(e){var t=Ae(e);e.stats.loaded=0,e.clearElementaryStreamInfo(),delete this.fragments[t]},Ee.removeAllFragments=function(){this.fragments=Object.create(null),this.activeFragment=null,this.activeParts=null};var ve=ye;function ye(e){this.activeFragment=null,this.activeParts=null,this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hls=e,this._registerListeners()}function be(e){var t;return e.buffered&&(null!=(t=e.range.video)&&t.partial||null!=(t=e.range.audio)&&t.partial)}function Ae(e){return e.type+"_"+e.level+"_"+e.urlId+"_"+e.sn}(Ct=xe.prototype).destroy=function(){this.onHandlerDestroying(),this.onHandlerDestroyed()},Ct.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},Ct.onHandlerDestroyed=function(){},Ct.hasInterval=function(){return!!this._tickInterval},Ct.hasNextTick=function(){return!!this._tickTimer},Ct.setInterval=function(e){return!this._tickInterval&&(this._tickInterval=self.setInterval(this._boundTick,e),!0)},Ct.clearInterval=function(){return!(!this._tickInterval||(self.clearInterval(this._tickInterval),this._tickInterval=null))},Ct.clearNextTick=function(){return!(!this._tickTimer||(self.clearTimeout(this._tickTimer),this._tickTimer=null))},Ct.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),1<this._tickCallCount&&this.tickImmediate(),this._tickCallCount=0)},Ct.tickImmediate=function(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)},Ct.doTick=function(){};var Ee=xe,Te={length:0,start:function(){return 0},end:function(){return 0}},we=(Ce.isBuffered=function(e,t){try{if(e)for(var n=Ce.getBuffered(e),i=0;i<n.length;i++)if(t>=n.start(i)&&t<=n.end(i))return!0}catch(e){}return!1},Ce.bufferInfo=function(e,t,n){try{if(e){for(var i=Ce.getBuffered(e),r=[],a=0;a<i.length;a++)r.push({start:i.start(a),end:i.end(a)});return this.bufferedInfo(r,t,n)}}catch(e){}return{len:0,start:t,end:t,nextStart:void 0}},Ce.bufferedInfo=function(e,t,n){t=Math.max(0,t),e.sort((function(e,t){return e.start-t.start||t.end-e.end}));var i=[];if(n)for(var r=0;r<e.length;r++){var a,s=i.length;s&&(a=i[s-1].end,e[r].start-a<n)?e[r].end>a&&(i[s-1].end=e[r].end):i.push(e[r])}else i=e;for(var o,u=0,l=t,c=t,d=0;d<i.length;d++){var h=i[d].start,f=i[d].end;if(h<=t+n&&t<f)l=h,u=(c=f)-t;else if(t+n<h){o=h;break}}return{len:u,start:l||0,end:c||0,nextStart:o}},Ce.getBuffered=function(e){try{return e.buffered}catch(e){return u.b.log("failed to get media.buffered",e),Te}},Ce),Se=function(e,t,n,i,r,a){void 0===i&&(i=0),void 0===r&&(r=-1),void 0===a&&(a=!1),this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing={start:0,executeStart:0,executeEnd:0,end:0},this.buffering={audio:{start:0,executeStart:0,executeEnd:0,end:0},video:{start:0,executeStart:0,executeEnd:0,end:0},audiovideo:{start:0,executeStart:0,executeEnd:0,end:0}},this.level=e,this.sn=t,this.id=n,this.size=i,this.part=r,this.partial=a};function Ce(){}function xe(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}function ke(e,t){e&&(t=e.start+t,e.start=e.startPTS=t,e.endPTS=t+e.duration)}function Ie(e,t){for(var n=t.fragments,i=0,r=n.length;i<r;i++)ke(n[i],e);t.fragmentHint&&ke(t.fragmentHint,e),t.alignedSliding=!0}function Le(e,t){var n=e.programDateTime;n&&(e.start=e.startPTS=n=(n-t)/1e3,e.endPTS=n+e.duration)}function Re(e,t){var n;t.fragments.length&&e.hasProgramDateTime&&t.hasProgramDateTime&&(n=t.fragments[0].programDateTime-1e3*t.fragments[0].start,e.fragments.forEach((function(e){Le(e,n)})),e.fragmentHint&&Le(e.fragmentHint,n),e.alignedSliding=!0)}var De=function(e,t){for(var n,i,r=0,a=e.length-1;r<=a;){var s=t(i=e[n=(r+a)/2|0]);if(0<s)r=1+n;else{if(!(s<0))return i;a=n-1}}return null};function _e(e,t,n,i){void 0===n&&(n=0),void 0===i&&(i=0);var r=null;return e?r=t[e.sn-t[0].sn+1]||null:0===n&&0===t[0].start&&(r=t[0]),(!r||0!==Me(n,i,r))&&De(t,Me.bind(null,n,i))||r}function Me(e,t,n){return void 0===e&&(e=0),void 0===t&&(t=0),t=Math.min(t,n.duration+(n.deltaPTS||0)),n.start+n.duration-t<=e?1:n.start-t>e&&n.start?-1:0}function Oe(e,t,n){return(Oe=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),1}catch(e){}}}()?Reflect.construct.bind():function(e,t,n){var i=[null];i.push.apply(i,t),t=new(Function.bind.apply(e,i));return n&&Pe(t,n.prototype),t}).apply(null,arguments)}function Pe(e,t){return(Pe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ne(e){return(Ne=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Be=Math.pow(2,17),Fe=((Ct=Ue.prototype).destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},Ct.abort=function(){this.loader&&this.loader.abort()},Ct.load=function(e,t){var n=this,i=e.url;if(!i)return Promise.reject(new He({type:o.b.NETWORK_ERROR,details:o.a.FRAG_LOAD_ERROR,fatal:!1,frag:e,networkDetails:null},"Fragment does not have a "+(i?"part list":"url")));this.abort();var r=this.config,a=r.fLoader,s=r.loader;return new Promise((function(i,u){n.loader&&n.loader.destroy();var l=n.loader=e.loader=new(a||s)(r),c=je(e),d={timeout:r.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:r.fragLoadingMaxRetryTimeout,highWaterMark:"initSegment"===e.sn?1/0:Be};e.stats=l.stats,l.load(c,d,{onSuccess:function(t,r,a,s){n.resetLoader(e,l),i({frag:e,part:null,payload:t.data,networkDetails:s})},onError:function(t,i,r){n.resetLoader(e,l),u(new He({type:o.b.NETWORK_ERROR,details:o.a.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:t,networkDetails:r}))},onAbort:function(t,i,r){n.resetLoader(e,l),u(new He({type:o.b.NETWORK_ERROR,details:o.a.INTERNAL_ABORTED,fatal:!1,frag:e,networkDetails:r}))},onTimeout:function(t,i,r){n.resetLoader(e,l),u(new He({type:o.b.NETWORK_ERROR,details:o.a.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,networkDetails:r}))},onProgress:function(n,i,r,a){t&&t({frag:e,part:null,payload:r,networkDetails:a})}})}))},Ct.loadPart=function(e,t,n){var i=this,r=(this.abort(),this.config),a=r.fLoader,s=r.loader;return new Promise((function(u,l){i.loader&&i.loader.destroy();var c=i.loader=e.loader=new(a||s)(r),d=je(e,t),h={timeout:r.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:r.fragLoadingMaxRetryTimeout,highWaterMark:Be};t.stats=c.stats,c.load(d,h,{onSuccess:function(r,a,s,o){i.resetLoader(e,c),i.updateStatsFromPart(e,t),r={frag:e,part:t,payload:r.data,networkDetails:o},n(r),u(r)},onError:function(n,r,a){i.resetLoader(e,c),l(new He({type:o.b.NETWORK_ERROR,details:o.a.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:t,response:n,networkDetails:a}))},onAbort:function(n,r,a){e.stats.aborted=t.stats.aborted,i.resetLoader(e,c),l(new He({type:o.b.NETWORK_ERROR,details:o.a.INTERNAL_ABORTED,fatal:!1,frag:e,part:t,networkDetails:a}))},onTimeout:function(n,r,a){i.resetLoader(e,c),l(new He({type:o.b.NETWORK_ERROR,details:o.a.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:t,networkDetails:a}))}})}))},Ct.updateStatsFromPart=function(e,t){var n=e.stats,i=t.stats,r=i.total;n.loaded+=i.loaded,r?(r=((e=Math.round(e.duration/t.duration))-(t=Math.min(Math.round(n.loaded/r),e)))*Math.round(n.loaded/t),n.total=n.loaded+r):n.total=Math.max(n.loaded,n.total),e=n.loading,t=i.loading;e.start?e.first+=t.first-t.start:(e.start=t.start,e.first=t.first),e.end=t.end},Ct.resetLoader=function(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()},Ue);function Ue(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}function je(e,t){var n=(t=void 0===t?null:t)||e;e={frag:e,part:t,responseType:"arraybuffer",url:n.url,headers:{},rangeStart:0,rangeEnd:0},t=n.byteRangeStartOffset,n=n.byteRangeEndOffset;return Object(a.a)(t)&&Object(a.a)(n)&&(e.rangeStart=t,e.rangeEnd=n),e}Ct=Ge=function(e){var t="function"==typeof Map?new Map:void 0;return function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Oe(e,arguments,Ne(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Pe(n,e)}(e)}(Error),(_t=Ke).prototype=Object.create(Ct.prototype),Pe(_t.prototype.constructor=_t,Ct);var Ge,He=Ke,Ve=n(16);function Ke(e){for(var t,n=arguments.length,i=new Array(1<n?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return(t=Ge.call.apply(Ge,[this].concat(i))||this).data=void 0,t.data=e,t}function qe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ze(e,t){return(ze=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var We,Ye="STOPPED",Xe="IDLE",Qe="KEY_LOADING",$e="FRAG_LOADING",Ze="FRAG_LOADING_WAITING_RETRY",Je="WAITING_TRACK",et="PARSING",tt="PARSED",nt="ENDED",it="ERROR",rt="WAITING_INIT_PTS",at="WAITING_LEVEL";_t=We=Ee,(Ct=st).prototype=Object.create(_t.prototype),ze(Ct.prototype.constructor=Ct,_t),(Ct=st.prototype).doTick=function(){this.onTickEnd()},Ct.onTickEnd=function(){},Ct.startLoad=function(e){},Ct.stopLoad=function(){this.fragmentLoader.abort();var e=this.fragCurrent;e&&this.fragmentTracker.removeFragment(e),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=Ye},Ct._streamEnded=function(e,t){var n=this.fragCurrent,i=this.fragmentTracker;return!(!(!t.live&&n&&this.media&&n.sn>=t.endSN)||e.nextStart)&&(null!=(e=t.partList)&&e.length?(t=e[e.length-1],we.isBuffered(this.media,t.start+t.duration/2)):(e=i.getState(n))===he.PARTIAL||e===he.OK)},Ct.onMediaAttached=function(e,t){t=this.media=this.mediaBuffer=t.media,this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("ended",this.onvended),t=this.config,this.levels&&t.autoStartLoad&&this.state===Ye&&this.startLoad(t.startPosition)},Ct.onMediaDetaching=function(){var e=this.media;null!=e&&e.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&this.onvseeking&&this.onvended&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},Ct.onMediaSeeking=function(){var e=this.config,t=this.fragCurrent,n=this.media,i=this.mediaBuffer,r=this.state,s=n?n.currentTime:0;i=we.bufferInfo(i||n,s,e.maxBufferHole);this.log("media seeking to "+(Object(a.a)(s)?s.toFixed(3):s)+", state: "+r),r===nt?this.resetLoadingState():t&&!i.len&&(r=e.maxFragLookUpTolerance,e=t.start-r,r=s>t.start+t.duration+r,s<e||r)&&(r&&t.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),t.loader.abort()),this.resetLoadingState()),n&&(this.lastCurrentTime=s),this.loadedmetadata||i.len||(this.nextLoadPosition=this.startPosition=s),this.tickImmediate()},Ct.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},Ct.onKeyLoaded=function(e,t){var n;this.state===Qe&&t.frag===this.fragCurrent&&this.levels&&(this.state=Xe,n=this.levels[t.frag.level].details)&&this.loadFragment(t.frag,n,t.frag.start)},Ct.onLevelSwitching=function(e,t){this.fragLoadError=0},Ct.onHandlerDestroying=function(){this.stopLoad(),We.prototype.onHandlerDestroying.call(this)},Ct.onHandlerDestroyed=function(){this.state=Ye,this.hls.off(s.a.KEY_LOADED,this.onKeyLoaded,this),this.hls.off(s.a.LEVEL_SWITCHING,this.onLevelSwitching,this),this.fragmentLoader&&this.fragmentLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.fragmentLoader=this.fragmentTracker=null,We.prototype.onHandlerDestroyed.call(this)},Ct.loadKey=function(e,t){this.log("Loading key for "+e.sn+" of ["+t.startSN+"-"+t.endSN+"], "+("[stream-controller]"===this.logPrefix?"level":"track")+" "+e.level),this.state=Qe,this.fragCurrent=e,this.hls.trigger(s.a.KEY_LOADING,{frag:e})},Ct.loadFragment=function(e,t,n){this._loadFragForPlayback(e,t,n)},Ct._loadFragForPlayback=function(e,t,n){var i=this;this._doFragLoad(e,t,n,(function(t){i.fragContextChanged(e)?(i.warn("Fragment "+e.sn+(t.part?" p: "+t.part.index:"")+" of level "+e.level+" was dropped during download."),i.fragmentTracker.removeFragment(e)):(e.stats.chunkCount++,i._handleFragmentLoadProgress(t))})).then((function(t){var n;t&&(i.fragLoadError=0,n=i.state,i.fragContextChanged(e)?n!==$e&&(i.fragCurrent||n!==et)||(i.fragmentTracker.removeFragment(e),i.state=Xe):("payload"in t&&(i.log("Loaded fragment "+e.sn+" of level "+e.level),i.hls.trigger(s.a.FRAG_LOADED,t)),i._handleFragmentLoadComplete(t)))})).catch((function(t){i.state!==Ye&&i.state!==it&&(i.warn(t),i.resetFragmentLoading(e))}))},Ct.flushMainBuffer=function(e,t,n){void 0===n&&(n=null),e-t&&(e={startOffset:e,endOffset:t,type:n},this.fragLoadError=0,this.hls.trigger(s.a.BUFFER_FLUSHING,e))},Ct._loadInitSegment=function(e){var t=this;this._doFragLoad(e).then((function(n){if(n&&!t.fragContextChanged(e)&&t.levels)return n;throw new Error("init load aborted")})).then((function(n){var i,r=t.hls,a=n.payload,o=e.decryptdata;return a&&0<a.byteLength&&o&&o.key&&o.iv&&"AES-128"===o.method?(i=self.performance.now(),t.decrypter.webCryptoDecrypt(new Uint8Array(a),o.key.buffer,o.iv.buffer).then((function(t){var a=self.performance.now();return r.trigger(s.a.FRAG_DECRYPTED,{frag:e,payload:t,stats:{tstart:i,tdecrypt:a}}),n.payload=t,n}))):n})).then((function(n){var i=t.fragCurrent,r=t.hls,a=t.levels;if(!a)throw new Error("init load aborted, missing levels");a[e.level].details,a=e.stats,t.state=Xe,t.fragLoadError=0,e.data=new Uint8Array(n.payload),a.parsing.start=a.buffering.start=self.performance.now(),a.parsing.end=a.buffering.end=self.performance.now(),n.frag===i&&r.trigger(s.a.FRAG_BUFFERED,{stats:a,frag:i,part:null,id:e.type}),t.tick()})).catch((function(n){t.state!==Ye&&t.state!==it&&(t.warn(n),t.resetFragmentLoading(e))}))},Ct.fragContextChanged=function(e){var t=this.fragCurrent;return!e||!t||e.level!==t.level||e.sn!==t.sn||e.urlId!==t.urlId},Ct.fragBufferedComplete=function(e,t){var n=this.mediaBuffer||this.media;this.log("Buffered "+e.type+" sn: "+e.sn+(t?" part: "+t.index:"")+" of "+("[stream-controller]"===this.logPrefix?"level":"track")+" "+e.level+" "+(n?function(e){for(var t="",n=e.length,i=0;i<n;i++)t+="["+e.start(i).toFixed(3)+","+e.end(i).toFixed(3)+"]";return t}(we.getBuffered(n)):"(detached)")),this.state=Xe,n&&(!this.loadedmetadata&&n.buffered.length&&this.fragCurrent===this.fragPrevious&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())},Ct.seekToStartPos=function(){},Ct._handleFragmentLoadComplete=function(e){var t,n,i=this.transmuxer;i&&(n=e.frag,t=e.part,e=!(e=e.partsLoaded)||0===e.length||e.some((function(e){return!e})),n=new Se(n.level,n.sn,n.stats.chunkCount+1,0,t?t.index:-1,!e),i.flush(n))},Ct._handleFragmentLoadProgress=function(e){},Ct._doFragLoad=function(e,t,n,i){var r=this;if(void 0===n&&(n=null),!this.levels)throw new Error("frag load aborted, missing levels");if(n=Math.max(e.start,n||0),this.config.lowLatencyMode&&t){var o=t.partList;if(o&&i){n>e.end&&t.fragmentHint&&(e=t.fragmentHint);var u,l=this.getNextPart(o,e,n);if(-1<l)return u=o[l],this.log("Loading part sn: "+e.sn+" p: "+u.index+" cc: "+e.cc+" of playlist ["+t.startSN+"-"+t.endSN+"] parts [0-"+l+"-"+(o.length-1)+"] "+("[stream-controller]"===this.logPrefix?"level":"track")+": "+e.level+", target: "+parseFloat(n.toFixed(3))),this.nextLoadPosition=u.start+u.duration,this.state=$e,this.hls.trigger(s.a.FRAG_LOADING,{frag:e,part:o[l],targetBufferTime:n}),this.doFragPartsLoad(e,o,l,i).catch((function(e){return r.handleFragLoadError(e)}));if(!e.url||this.loadedEndOfParts(o,n))return Promise.resolve(null)}}return this.log("Loading fragment "+e.sn+" cc: "+e.cc+" "+(t?"of ["+t.startSN+"-"+t.endSN+"] ":"")+("[stream-controller]"===this.logPrefix?"level":"track")+": "+e.level+", target: "+parseFloat(n.toFixed(3))),Object(a.a)(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=$e,this.hls.trigger(s.a.FRAG_LOADING,{frag:e,targetBufferTime:n}),this.fragmentLoader.load(e,i).catch((function(e){return r.handleFragLoadError(e)}))},Ct.doFragPartsLoad=function(e,t,n,i){var r=this;return new Promise((function(a,o){var u=[];!function n(l){var c=t[l];r.fragmentLoader.loadPart(e,c,i).then((function(i){var o=(u[c.index]=i).part;if(!(i=(r.hls.trigger(s.a.FRAG_LOADED,i),t[l+1]))||i.fragment!==e)return a({frag:e,part:o,partsLoaded:u});n(l+1)})).catch(o)}(n)}))},Ct.handleFragLoadError=function(e){return(e=e.data)&&e.details===o.a.INTERNAL_ABORTED?this.handleFragLoadAborted(e.frag,e.part):this.hls.trigger(s.a.ERROR,e),null},Ct._handleTransmuxerFlush=function(e){var t,n,i,r=this.getCurrentContext(e);r&&this.state===et?(t=r.frag,n=r.part,r=r.level,i=self.performance.now(),t.stats.parsing.end=i,n&&(n.stats.parsing.end=i),this.updateLevelTiming(t,n,r,e.partial)):this.fragCurrent||(this.state=Xe)},Ct.getCurrentContext=function(e){var t,n,i,r=this.levels,a=e.level,s=e.sn;e=e.part;return r&&r[a]?(r=r[a],(i=(e=-1<e?function(e,t,n){if(e&&e.details){var i=e.details.partList;if(i)for(var r=i.length;r--;){var a=i[r];if(a.index===n&&a.fragment.sn===t)return a}}return null}(r,s,e):null)?e.fragment:(t=this.fragCurrent,r&&r.details?(n=r.details).fragments[s-n.startSN]||((i=n.fragmentHint)&&i.sn===s?i:s<n.startSN&&t&&t.sn===s?t:null):null))?{frag:i,part:e,level:r}:null):(this.warn("Levels object was unset while buffering fragment "+s+" of level "+a+". The current chunk will not be buffered."),null)},Ct.bufferFragmentData=function(e,t,n,i){var r,a,o;e&&this.state===et&&(o=e.data1,r=e.data2,a=(a=o)&&r?Object(l.b)(o,r):a)&&a.length&&(o={type:e.type,frag:t,part:n,chunkMeta:i,parent:t.type,data:a},this.hls.trigger(s.a.BUFFER_APPENDING,o),e.dropped)&&e.independent&&!n&&this.flushBufferGap(t)},Ct.flushBufferGap=function(e){var t,n,i=this.media;i&&(we.isBuffered(i,i.currentTime)?(t=i.currentTime,i=we.bufferInfo(i,t,0),n=e.duration,n=Math.min(2*this.config.maxFragLookUpTolerance,.25*n),i=Math.max(Math.min(e.start-n,i.end-n),t+n),e.start-i>n&&this.flushMainBuffer(i,e.start)):this.flushMainBuffer(0,e.start))},Ct.getFwdBufferInfo=function(e,t){var n=this.config,i=this.getLoadPosition();if(!Object(a.a)(i))return null;var r=we.bufferInfo(e,i,n.maxBufferHole);return 0===r.len&&void 0!==r.nextStart&&(t=this.fragmentTracker.getBufferedFrag(i,t))&&r.nextStart<t.end?we.bufferInfo(e,i,Math.max(r.nextStart,n.maxBufferHole)):r},Ct.getMaxBufferLength=function(e){var t=this.config;e=e?Math.max(8*t.maxBufferSize/e,t.maxBufferLength):t.maxBufferLength;return Math.min(e,t.maxMaxBufferLength)},Ct.reduceMaxBufferLength=function(e){var t=this.config;e=e||t.maxBufferLength;return t.maxMaxBufferLength>=e&&(t.maxMaxBufferLength/=2,this.warn("Reduce max buffer length to "+t.maxMaxBufferLength+"s"),!0)},Ct.getNextFragment=function(e,t){var n=t.fragments,i=n.length;if(!i)return null;var r,a=this.config,s=n[0].start;if(t.live){var o=a.initialLiveManifestSize;if(i<o)return this.warn("Not enough fragments to start playback (have: "+i+", need: "+o+")"),null;t.PTSKnown||this.startFragRequested||-1!==this.startPosition||(r=this.getInitialLiveFragment(t,n),this.startPosition=r?this.hls.liveSyncPosition||r.start:e)}else e<=s&&(r=n[0]);return r||(i=a.lowLatencyMode?t.partEnd:t.fragmentEnd,r=this.getFragmentAtPosition(e,i,t)),this.mapToInitFragWhenRequired(r)},Ct.mapToInitFragWhenRequired=function(e){return null==e||!e.initSegment||null!=e&&e.initSegment.data||this.bitrateTest?e:e.initSegment},Ct.getNextPart=function(e,t,n){for(var i=-1,r=!1,a=!0,s=0,o=e.length;s<o;s++){var u=e[s];a=a&&!u.independent;if(-1<i&&n<u.start)break;var l=u.loaded;!l&&(r||u.independent||a)&&u.fragment===t&&(i=s),r=l}return i},Ct.loadedEndOfParts=function(e,t){return(e=e[e.length-1])&&t>e.start&&e.loaded},Ct.getInitialLiveFragment=function(e,t){var n,i,r=this.fragPrevious,s=null;return r?(e.hasProgramDateTime&&(this.log("Live playlist, switching playlist, load frag with same PDT: "+r.programDateTime),s=function(e,t,n){if(null!==t&&Array.isArray(e)&&e.length&&Object(a.a)(t)&&!(t<(e[0].programDateTime||0)||t>=(e[e.length-1].endProgramDateTime||0))){n=n||0;for(var i,r,s,o=0;o<e.length;++o){var u=e[o];if(i=t,n,s=u,r=1e3*Math.min(n,s.duration+(s.deltaPTS||0)),(s.endProgramDateTime||0)-r>i)return u}}return null}(t,r.endProgramDateTime,this.config.maxFragLookUpTolerance)),s||((n=r.sn+1)>=e.startSN&&n<=e.endSN&&(n=t[n-e.startSN],r.cc===n.cc)&&this.log("Live playlist, switching playlist, load frag with next SN: "+(s=n).sn),!s&&(i=r.cc,s=De(t,(function(e){return e.cc<i?1:e.cc>i?-1:0})))&&this.log("Live playlist, switching playlist, load frag with same CC: "+s.sn))):null!==(n=this.hls.liveSyncPosition)&&(s=this.getFragmentAtPosition(n,this.bitrateTest?e.fragmentEnd:e.edge,e)),s},Ct.getFragmentAtPosition=function(e,t,n){var i=this.config,r=this.fragPrevious,a=n.fragments,s=n.endSN,o=n.fragmentHint,u=i.maxFragLookUpTolerance;return(i=!!(i.lowLatencyMode&&n.partList&&o))&&o&&!this.bitrateTest&&(a=a.concat(o),s=o.sn),(o=e<t?_e(r,a,e,t-u<e?0:u):a[a.length-1])&&(t=o.sn-n.startSN,r)&&o.sn===r.sn&&!i&&r&&o.level===r.level&&(e=a[1+t],o=o.sn<s&&this.fragmentTracker.getState(e)!==he.OK?(this.log("SN "+o.sn+" just loaded, load next one: "+e.sn),e):null),o},Ct.synchronizeToLiveEdge=function(e){var t,n,i,r,a=this.config,s=this.media;s&&(t=this.hls.liveSyncPosition,n=s.currentTime,r=e.fragments[0].start,i=e.edge,r=n>=r-a.maxFragLookUpTolerance&&n<=i,null!==t)&&s.duration>t&&(n<t||!r)&&(a=void 0!==a.liveMaxLatencyDuration?a.liveMaxLatencyDuration:a.liveMaxLatencyDurationCount*e.targetduration,!r&&s.readyState<4||n<i-a)&&(this.loadedmetadata||(this.nextLoadPosition=t),s.readyState)&&(this.warn("Playback: "+n.toFixed(3)+" is located too far from the end of live sliding playlist: "+i+", reset currentTime to : "+t.toFixed(3)),s.currentTime=t)},Ct.alignPlaylists=function(e,t){var n,i,r,s,o,l,c,d,h=this.levels,f=this.levelLastLoaded,g=this.fragPrevious;f=null!==f?h[f]:null;return(h=e.fragments.length)?(n=e.fragments[0].start,i=!t,r=e.alignedSliding&&Object(a.a)(n),i||!r&&!n?(i=g,r=e,(f=f)&&(i=i,c=r,(d=f).details&&(c.endCC>c.startCC||i&&i.cc<c.startCC)&&(i=function(){var e=d.details.fragments,t=c.fragments;if(t.length&&e.length){if((e=function(e,t){for(var n=null,i=0,r=e.length;i<r;i++){var a=e[i];if(a&&a.cc===t){n=a;break}}return n}(e,t[0].cc))&&(!e||e.startPTS))return e;u.b.log("No frag in previous level to align on")}else u.b.log("No fragments to align")}())&&Object(a.a)(i.start)&&(u.b.log("Adjusting PTS using last level due to CC increase within current level "+c.url),Ie(i.start,c)),!r.alignedSliding&&f.details&&(i=r,(s=f.details).fragments.length&&i.hasProgramDateTime&&s.hasProgramDateTime&&(o=s.fragments[0].programDateTime,s=((l=i.fragments[0].programDateTime)-o)/1e3+s.fragments[0].start)&&Object(a.a)(s)&&(u.b.log("Adjusting PTS using programDateTime delta "+(l-o)+"ms, sliding:"+s.toFixed(3)+" "+i.url+" "),Ie(s,i))),r.alignedSliding||!f.details||r.skippedSegments||oe(f.details,r)),l=e.fragments[0].start,this.log("Live playlist sliding: "+l.toFixed(2)+" start-sn: "+(t?t.startSN:"na")+"->"+e.startSN+" prev-sn: "+(g?g.sn:"na")+" fragments: "+h),l):n):(this.warn("No fragments in live playlist"),0)},Ct.waitForCdnTuneIn=function(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,3*e.partTarget)},Ct.setStartPosition=function(e,t){var n,i=this.startPosition;-1!==(i=i<t?-1:i)&&-1!==this.lastCurrentTime||(n=e.startTimeOffset,Object(a.a)(n)?(i=t+n,n<0&&(i+=e.totalduration),i=Math.min(Math.max(t,i),t+e.totalduration),this.log("Start time offset "+n+" found in playlist, adjust startPosition to "+i),this.startPosition=i):e.live?i=this.hls.liveSyncPosition||t:this.startPosition=i=0,this.lastCurrentTime=i),this.nextLoadPosition=i},Ct.getLoadPosition=function(){var e=this.media,t=0;return this.loadedmetadata&&e?t=e.currentTime:this.nextLoadPosition&&(t=this.nextLoadPosition),t},Ct.handleFragLoadAborted=function(e,t){this.transmuxer&&"initSegment"!==e.sn&&e.stats.aborted&&(this.warn("Fragment "+e.sn+(t?" part"+t.index:"")+" of level "+e.level+" was aborted"),this.resetFragmentLoading(e))},Ct.resetFragmentLoading=function(e){this.fragCurrent&&(this.fragContextChanged(e)||this.state===Ze)||(this.state=Xe)},Ct.onFragmentOrKeyLoadError=function(e,t){var n,i;t.fatal||(n=t.frag)&&n.type===e&&(this.fragCurrent,i=this.config,this.fragLoadError+1<=i.fragLoadingMaxRetry?(this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),i=Math.min(Math.pow(2,this.fragLoadError)*i.fragLoadingRetryDelay,i.fragLoadingMaxRetryTimeout),this.warn("Fragment "+n.sn+" of "+e+" "+n.level+" failed to load, retrying in "+i+"ms"),this.retryDate=self.performance.now()+i,this.fragLoadError++,this.state=Ze):t.levelRetry?(e===M.b.AUDIO&&(this.fragCurrent=null),this.fragLoadError=0,this.state=Xe):(u.b.error(t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.hls.stopLoad(),this.state=it))},Ct.afterBufferFlushed=function(e,t,n){e&&(e=we.getBuffered(e),this.fragmentTracker.detectEvictedFragments(t,e,n),this.state===nt)&&this.resetLoadingState()},Ct.resetLoadingState=function(){this.fragCurrent=null,this.fragPrevious=null,this.state=Xe},Ct.resetStartWhenNotLoaded=function(e){this.loadedmetadata||(this.startFragRequested=!1,null!=(e=this.levels?this.levels[e].details:null)&&e.live?(this.startPosition=-1,this.setStartPosition(e,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition)},Ct.updateLevelTiming=function(e,t,n,i){var r=this,a=n.details;Object.keys(e.elementaryStreams).reduce((function(t,o){var u,l=e.elementaryStreams[o];return l?(u=l.endPTS-l.startPTS)<=0?(r.warn("Could not parse fragment "+e.sn+" "+o+" duration reliably ("+u+")"),t||!1):(u=i?0:se(a,e,l.startPTS,l.endPTS,l.startDTS,l.endDTS),r.hls.trigger(s.a.LEVEL_PTS_UPDATED,{details:a,level:n,drift:u,type:o,frag:e,start:l.startPTS,end:l.endPTS}),!0):t}),!1)||(this.warn("Found no media in fragment "+e.sn+" of level "+n.id+" resetting transmuxer to fallback to playlist timing"),this.resetTransmuxer()),this.state=tt,this.hls.trigger(s.a.FRAG_PARSED,{frag:e,part:t})},Ct.resetTransmuxer=function(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)},function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}((_t=st).prototype,[{key:"state",get:function(){return this._state},set:function(e){var t=this._state;t!==e&&(this._state=e,this.log(t+"->"+e))}}]),Object.defineProperty(_t,"prototype",{writable:!1}),Ee=st;function st(e,t,n){var i;return(i=We.call(this)||this).hls=void 0,i.fragPrevious=null,i.fragCurrent=null,i.fragmentTracker=void 0,i.transmuxer=null,i._state=Ye,i.media=null,i.mediaBuffer=null,i.config=void 0,i.bitrateTest=!1,i.lastCurrentTime=0,i.nextLoadPosition=0,i.startPosition=0,i.loadedmetadata=!1,i.fragLoadError=0,i.retryDate=0,i.levels=null,i.fragmentLoader=void 0,i.levelLastLoaded=null,i.startFragRequested=!1,i.decrypter=void 0,i.initPTS=[],i.onvseeking=null,i.onvended=null,i.logPrefix="",i.log=void 0,i.warn=void 0,i.logPrefix=n,i.log=u.b.log.bind(u.b,n+":"),i.warn=u.b.warn.bind(u.b,n+":"),i.hls=e,i.fragmentLoader=new Fe(e.config),i.fragmentTracker=t,i.config=e.config,i.decrypter=new Ve.a(e,e.config),e.on(s.a.KEY_LOADED,i.onKeyLoaded,qe(i)),e.on(s.a.LEVEL_SWITCHING,i.onLevelSwitching,qe(i)),i}function ot(){return self.MediaSource||self.WebKitMediaSource}function ut(){return self.SourceBuffer||self.WebKitSourceBuffer}var lt=n(18),ct=n(10),dt=n(15),ht=ot()||{isTypeSupported:function(){return!1}},ft=((Ct=mt.prototype).destroy=function(){var e;(e=((e=this.worker)?(e.removeEventListener("message",this.onwmsg),e.terminate(),this.worker=null,this.onwmsg=void 0):(e=this.transmuxer)&&(e.destroy(),this.transmuxer=null),this.observer))&&e.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null},Ct.push=function(e,t,n,i,r,a,s,o,l,c){var d=this,h=(l.transmuxing.start=self.performance.now(),this.transmuxer),f=this.worker,g=(a||r).start,p=r.decryptdata,m=this.frag,v=!(m&&r.cc===m.cc),y=!(m&&l.level===m.level),b=m?l.sn-m.sn:-1,A=this.part?l.part-this.part.index:-1,E=0==b&&1<l.id&&l.id===(null==m?void 0:m.stats.chunkCount),T=(E=!y&&(1==b||0==b&&(1==A||E&&A<=0)),self.performance.now());(y||b||0===r.stats.parsing.start)&&(r.stats.parsing.start=T),!a||!A&&E||(a.stats.parsing.start=T),T=!(m&&(null==(b=r.initSegment)?void 0:b.url)===(null==(A=m.initSegment)?void 0:A.url)),b=new ct.b(v,E,o,y,g,T);E&&!v&&!T||(u.b.log("[transmuxer-interface, "+r.type+"]: Starting new transmux session for sn: "+l.sn+" p: "+l.part+" level: "+l.level+" id: "+l.id+"\n        discontinuity: "+v+"\n        trackSwitch: "+y+"\n        contiguous: "+E+"\n        accurateTimeOffset: "+o+"\n        timeOffset: "+g+"\n        initSegmentChange: "+T),m=new ct.a(n,i,t,s,c),this.configureTransmuxer(m)),this.frag=r,this.part=a,f?f.postMessage({cmd:"demux",data:e,decryptdata:p,chunkMeta:l,state:b},e instanceof ArrayBuffer?[e]:[]):h&&(A=h.push(e,p,l,b),Object(ct.d)(A)?A.then((function(e){d.handleTransmuxComplete(e)})):this.handleTransmuxComplete(A))},Ct.flush=function(e){var t=this,n=(e.transmuxing.start=self.performance.now(),this.transmuxer),i=this.worker;i?i.postMessage({cmd:"flush",chunkMeta:e}):n&&(i=n.flush(e),Object(ct.d)(i)?i.then((function(n){t.handleFlushResult(n,e)})):this.handleFlushResult(i,e))},Ct.handleFlushResult=function(e,t){var n=this;e.forEach((function(e){n.handleTransmuxComplete(e)})),this.onFlush(t)},Ct.onWorkerMessage=function(e){var t=e.data,n=this.hls;switch(t.event){case"init":self.URL.revokeObjectURL(this.worker.objectURL);break;case"transmuxComplete":this.handleTransmuxComplete(t.data);break;case"flush":this.onFlush(t.data);break;case"workerLog":u.b[t.data.logType]&&u.b[t.data.logType](t.data.message);break;default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,n.trigger(t.event,t.data)}},Ct.configureTransmuxer=function(e){var t=this.worker,n=this.transmuxer;t?t.postMessage({cmd:"configure",config:e}):n&&n.configure(e)},Ct.handleTransmuxComplete=function(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)},mt),gt=((_t=pt.prototype).destroy=function(){this.media=null,this.hls=this.fragmentTracker=null},_t.poll=function(e,t){var n=this.config,i=this.media,r=this.stalled;if(null!==i){var a=i.currentTime,s=i.seeking,o=this.seeking&&!s,l=!this.seeking&&s;if(this.seeking=s,a===e){if((l||o)&&(this.stalled=null),!(i.paused&&!s||i.ended||0===i.playbackRate)&&we.getBuffered(i).length&&(l=0<(e=we.bufferInfo(i,a,0)).len,o=e.nextStart||0,l||o)){if(s){if(l=2<e.len,t=!o||t&&t.start<=a||2<o-a&&!this.fragmentTracker.getPartialFragment(a),l||t)return;this.moved=!1}if(!this.moved&&null!==this.stalled&&(l=Math.max(o,e.start||0)-a,o=null!=(t=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null)&&null!=(o=t.details)&&o.live?2*t.details.targetduration:2,0<l&&l<=o))return void this._trySkipBufferHole(null);t=self.performance.now(),null!==r?(l=t-r,!s&&250<=l&&(this._reportStall(e),!this.media)||(o=we.bufferInfo(i,a,n.maxBufferHole),this._tryFixBufferStall(o,l))):this.stalled=t}}else this.moved=!0,null!==r&&(this.stallReported&&(s=self.performance.now()-r,u.b.warn("playback not stuck anymore @"+a+", after "+Math.round(s)+"ms"),this.stallReported=!1),this.stalled=null,this.nudgeRetry=0)}},_t._tryFixBufferStall=function(e,t){var n=this.config,i=this.fragmentTracker,r=this.media;null!==r&&(r=r.currentTime,!(r=i.getPartialFragment(r))||!this._trySkipBufferHole(r)&&this.media)&&e.len>n.maxBufferHole&&t>1e3*n.highBufferWatchdogPeriod&&(u.b.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())},_t._reportStall=function(e){var t=this.hls,n=this.media;!this.stallReported&&n&&(this.stallReported=!0,u.b.warn("Playback stalling at @"+n.currentTime+" due to low buffer ("+JSON.stringify(e)+")"),t.trigger(s.a.ERROR,{type:o.b.MEDIA_ERROR,details:o.a.BUFFER_STALLED_ERROR,fatal:!1,buffer:e.len}))},_t._trySkipBufferHole=function(e){var t=this.config,n=this.hls,i=this.media;if(null!==i)for(var r=i.currentTime,a=0,l=we.getBuffered(i),c=0;c<l.length;c++){var d=l.start(c);if(r+t.maxBufferHole>=a&&r<d)return d=Math.max(d+.05,i.currentTime+.1),u.b.warn("skipping hole, adjusting currentTime from "+r+" to "+d),this.moved=!0,this.stalled=null,i.currentTime=d,e&&n.trigger(s.a.ERROR,{type:o.b.MEDIA_ERROR,details:o.a.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+r+" to "+d,frag:e}),d;a=l.end(c)}return 0},_t._tryNudgeBuffer=function(){var e,t=this.config,n=this.hls,i=this.media,r=this.nudgeRetry;null!==i&&(e=i.currentTime,this.nudgeRetry++,r<t.nudgeMaxRetry?(r=e+(r+1)*t.nudgeOffset,u.b.warn("Nudging 'currentTime' from "+e+" to "+r),i.currentTime=r,n.trigger(s.a.ERROR,{type:o.b.MEDIA_ERROR,details:o.a.BUFFER_NUDGE_ON_STALL,fatal:!1})):(u.b.error("Playhead still not moving while enough data buffered @"+e+" after "+t.nudgeMaxRetry+" nudges"),n.trigger(s.a.ERROR,{type:o.b.MEDIA_ERROR,details:o.a.BUFFER_STALLED_ERROR,fatal:!0})))},pt);function pt(e,t,n,i){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=e,this.media=t,this.fragmentTracker=n,this.hls=i}function mt(e,t,n,i){var r,a=this,l=(n=(this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.worker=void 0,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.hls=e,this.id=t,this.onTransmuxComplete=n,this.onFlush=i,e.config),i=function(t,n){(n=n||{}).frag=a.frag,n.id=a.id,e.trigger(t,n)},i=(this.observer=new dt.EventEmitter,this.observer.on(s.a.FRAG_DECRYPTED,i),this.observer.on(s.a.ERROR,i),{mp4:ht.isTypeSupported("video/mp4"),mpeg:ht.isTypeSupported("audio/mpeg"),mp3:ht.isTypeSupported('audio/mp4; codecs="mp3"')}),navigator.vendor);if(n.enableWorker&&"undefined"!=typeof Worker){u.b.log("demuxing in webworker");try{r=this.worker=lt(19),this.onwmsg=this.onWorkerMessage.bind(this),r.addEventListener("message",this.onwmsg),r.onerror=function(t){e.trigger(s.a.ERROR,{type:o.b.OTHER_ERROR,details:o.a.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",error:new Error(t.message+"  ("+t.filename+":"+t.lineno+")")})},r.postMessage({cmd:"init",typeSupported:i,vendor:l,id:t,config:JSON.stringify(n)})}catch(e){u.b.warn("Error in worker:",e),u.b.error("Error while initializing DemuxerWorker, fallback to inline"),r&&self.URL.revokeObjectURL(r.objectURL),this.transmuxer=new ct.c(this.observer,i,n,l,t),this.worker=null}}else this.transmuxer=new ct.c(this.observer,i,n,l,t)}function vt(e,t){return(vt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}Ct=yt=Ee,(_t=St).prototype=Object.create(Ct.prototype),vt(_t.prototype.constructor=_t,Ct),(_t=St.prototype)._registerListeners=function(){var e=this.hls;e.on(s.a.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(s.a.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(s.a.MANIFEST_LOADING,this.onManifestLoading,this),e.on(s.a.MANIFEST_PARSED,this.onManifestParsed,this),e.on(s.a.LEVEL_LOADING,this.onLevelLoading,this),e.on(s.a.LEVEL_LOADED,this.onLevelLoaded,this),e.on(s.a.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(s.a.ERROR,this.onError,this),e.on(s.a.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(s.a.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(s.a.BUFFER_CREATED,this.onBufferCreated,this),e.on(s.a.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(s.a.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(s.a.FRAG_BUFFERED,this.onFragBuffered,this)},_t._unregisterListeners=function(){var e=this.hls;e.off(s.a.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(s.a.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(s.a.MANIFEST_LOADING,this.onManifestLoading,this),e.off(s.a.MANIFEST_PARSED,this.onManifestParsed,this),e.off(s.a.LEVEL_LOADED,this.onLevelLoaded,this),e.off(s.a.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(s.a.ERROR,this.onError,this),e.off(s.a.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(s.a.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(s.a.BUFFER_CREATED,this.onBufferCreated,this),e.off(s.a.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(s.a.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(s.a.FRAG_BUFFERED,this.onFragBuffered,this)},_t.onHandlerDestroying=function(){this._unregisterListeners(),this.onMediaDetaching()},_t.startLoad=function(e){var t,n,i;this.levels?(t=this.lastCurrentTime,n=this.hls,this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,this.startFragRequested||(-1===(i=n.startLevel)&&(n.config.testBandwidth&&1<this.levels.length?this.bitrateTest=!(i=0):i=n.nextAutoLevel),this.level=n.nextLoadLevel=i,this.loadedmetadata=!1),0<t&&-1===e&&(this.log("Override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=Xe,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()):(this._forceStartLoad=!0,this.state=Ye)},_t.stopLoad=function(){this._forceStartLoad=!1,yt.prototype.stopLoad.call(this)},_t.doTick=function(){switch(this.state){case Xe:this.doTickIdle();break;case at:var e=this.levels,t=this.level;if((e=null==e||null==(t=e[t])?void 0:t.details)&&(!e.live||this.levelLastLoaded===this.level)){if(this.waitForCdnTuneIn(e))break;this.state=Xe}break;case Ze:t=self.performance.now(),(!(e=this.retryDate)||e<=t||null!=(e=this.media)&&e.seeking)&&(this.log("retryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded(this.level),this.state=Xe)}this.onTickEnd()},_t.onTickEnd=function(){yt.prototype.onTickEnd.call(this),this.checkBuffer(),this.checkFragmentChanged()},_t.doTickIdle=function(){var e=this.hls,t=this.levelLastLoaded,n=this.levels,i=this.media,r=e.config,a=e.nextLoadLevel;null===t||!(i||!this.startFragRequested&&r.startFragPrefetch)||this.altAudio&&this.audioOnly||!n||!n[a]||(t=n[a],this.level=e.nextLoadLevel=a,!(r=t.details)||this.state===at||r.live&&this.levelLastLoaded!==a?this.state=at:null===(n=this.getMainFwdBufferInfo())||n.len>=this.getMaxBufferLength(t.maxBitrate)||(this._streamEnded(n,r)?(e={},this.altAudio&&(e.type="video"),this.hls.trigger(s.a.BUFFER_EOS,e),this.state=nt):(this.backtrackFragment&&this.backtrackFragment.start>n.end&&(this.backtrackFragment=null),a=this.backtrackFragment?this.backtrackFragment.start:n.end,t=this.getNextFragment(a,r),this.couldBacktrack&&!this.fragPrevious&&t&&"initSegment"!==t.sn&&this.fragmentTracker.getState(t)!==he.OK?(e=(null!=(e=this.backtrackFragment)?e:t).sn-r.startSN,(e=r.fragments[e-1])&&t.cc===e.cc&&this.fragmentTracker.removeFragment(t=e)):this.backtrackFragment&&n.len&&(this.backtrackFragment=null),t&&this.fragmentTracker.getState(t)===he.OK&&this.nextLoadPosition>a&&(e=this.audioOnly&&!this.altAudio?m.a.AUDIO:m.a.VIDEO,i&&this.afterBufferFlushed(i,e,M.b.MAIN),t=this.getNextFragment(this.nextLoadPosition,r)),t&&("identity"!==(null==(n=(t=!t.initSegment||t.initSegment.data||this.bitrateTest?t:t.initSegment).decryptdata)?void 0:n.keyFormat)||null!=(i=t.decryptdata)&&i.key?this.loadFragment(t,r,a):this.loadKey(t,r)))))},_t.loadFragment=function(e,t,n){var i=this.fragmentTracker.getState(e);this.fragCurrent=e,i===he.NOT_LOADED?"initSegment"===e.sn?this._loadInitSegment(e):this.bitrateTest?(this.log("Fragment "+e.sn+" of level "+e.level+" is being downloaded to test bitrate and will not be buffered"),this._loadBitrateTestFrag(e)):(this.startFragRequested=!0,yt.prototype.loadFragment.call(this,e,t,n)):i===he.APPENDING?this.reduceMaxBufferLength(e.duration)&&this.fragmentTracker.removeFragment(e):0===(null==(t=this.media)?void 0:t.buffered.length)&&this.fragmentTracker.removeAllFragments()},_t.getAppendedFrag=function(e){return(e=this.fragmentTracker.getAppendedFrag(e,M.b.MAIN))&&"fragment"in e?e.fragment:e},_t.getBufferedFrag=function(e){return this.fragmentTracker.getBufferedFrag(e,M.b.MAIN)},_t.followingBufferedFrag=function(e){return e?this.getBufferedFrag(e.end+.5):null},_t.immediateLevelSwitch=function(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},_t.nextLevelSwitch=function(){var e,t=this.levels,n=this.media;null!=n&&n.readyState&&((e=this.getAppendedFrag(n.currentTime))&&1<e.start&&this.flushMainBuffer(0,e.start-1),e=!n.paused&&t&&(e=t[this.hls.nextLoadLevel],t=this.fragLastKbps)&&this.fragCurrent?this.fragCurrent.duration*e.maxBitrate/(1e3*t)+1:0,t=this.getBufferedFrag(n.currentTime+e))&&(n=this.followingBufferedFrag(t))&&(this.abortCurrentFrag(),e=n.maxStartPTS||n.start,n=n.duration,t=Math.max(t.end,e+Math.min(Math.max(n-this.config.maxFragLookUpTolerance,.5*n),.75*n)),this.flushMainBuffer(t,Number.POSITIVE_INFINITY))},_t.abortCurrentFrag=function(){var e=this.fragCurrent;switch(this.fragCurrent=null,(this.backtrackFragment=null)!=e&&e.loader&&e.loader.abort(),this.state){case Qe:case $e:case Ze:case et:case tt:this.state=Xe}this.nextLoadPosition=this.getLoadPosition()},_t.flushMainBuffer=function(e,t){yt.prototype.flushMainBuffer.call(this,e,t,this.altAudio?"video":null)},_t.onMediaAttached=function(e,t){yt.prototype.onMediaAttached.call(this,e,t),e=t.media,this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),e.addEventListener("playing",this.onvplaying),e.addEventListener("seeked",this.onvseeked),this.gapController=new gt(this.config,e,this.fragmentTracker,this.hls)},_t.onMediaDetaching=function(){var e=this.media;e&&this.onvplaying&&this.onvseeked&&(e.removeEventListener("playing",this.onvplaying),e.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),yt.prototype.onMediaDetaching.call(this)},_t.onMediaPlaying=function(){this.tick()},_t.onMediaSeeked=function(){var e=(e=this.media)?e.currentTime:null;Object(a.a)(e)&&this.log("Media seeked to "+e.toFixed(3)),this.tick()},_t.onManifestLoading=function(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(s.a.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=!1,this.startPosition=this.lastCurrentTime=0,this.fragPlaying=null,this.backtrackFragment=null},_t.onManifestParsed=function(e,t){var n,i,r=!1,a=!1;t.levels.forEach((function(e){(n=e.audioCodec)&&(-1!==n.indexOf("mp4a.40.2")&&(r=!0),-1!==n.indexOf("mp4a.40.5"))&&(a=!0)})),this.audioCodecSwitch=r&&a&&!("function"==typeof(null==(i=ut())||null==(i=i.prototype)?void 0:i.changeType)),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1},_t.onLevelLoading=function(e,t){var n=this.levels;n&&this.state===Xe&&(!(n=n[t.level]).details||n.details.live&&this.levelLastLoaded!==t.level||this.waitForCdnTuneIn(n.details))&&(this.state=at)},_t.onLevelLoaded=function(e,t){var n=this.levels,i=t.level,r=t.details,a=r.totalduration;if(n){if(this.log("Level "+i+" loaded ["+r.startSN+","+r.endSN+"], cc ["+r.startCC+", "+r.endCC+"] duration:"+a),!(a=this.fragCurrent)||this.state!==$e&&this.state!==Ze||a.level!==t.level&&a.loader&&(this.state=Xe,this.backtrackFragment=null,a.loader.abort()),t=n[i],a=0,r.live||null!=(n=t.details)&&n.live){if(r.fragments[0]||(r.deltaUpdateFailed=!0),r.deltaUpdateFailed)return;a=this.alignPlaylists(r,t.details)}if(t.details=r,this.levelLastLoaded=i,this.hls.trigger(s.a.LEVEL_UPDATED,{details:r,level:i}),this.state===at){if(this.waitForCdnTuneIn(r))return;this.state=Xe}this.startFragRequested?r.live&&this.synchronizeToLiveEdge(r):this.setStartPosition(r,a),this.tick()}else this.warn("Levels were reset while loading level "+i)},_t._handleFragmentLoadProgress=function(e){var t,n,i,r,a,s,o,u=e.frag,l=e.part,c=(e=e.payload,this.levels);c?(t=(c=c[u.level]).details)?(n=c.videoCodec,i=t.PTSKnown||!t.live,r=null==(r=u.initSegment)?void 0:r.data,c=this._getAudioCodec(c),a=this.transmuxer=this.transmuxer||new ft(this.hls,M.b.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),s=l?l.index:-1,s=new Se(u.level,u.sn,u.stats.chunkCount,e.byteLength,s,-1!==s),o=this.initPTS[u.cc],a.push(e,r,c,n,u,l,t.totalduration,i,s,o)):this.warn("Dropping fragment "+u.sn+" of level "+u.level+" after level details were reset"):this.warn("Levels were reset while fragment load was in progress. Fragment "+u.sn+" of level "+u.level+" will not be buffered")},_t.onAudioTrackSwitching=function(e,t){var n=this.altAudio,i=!!t.url;t=t.id;i||(this.mediaBuffer!==this.media?(this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media,null!=(i=this.fragCurrent)&&i.loader&&(this.log("Switching to main audio track, cancel main fragment load"),i.loader.abort()),this.resetTransmuxer(),this.resetLoadingState()):this.audioOnly&&this.resetTransmuxer(),i=this.hls,n&&i.trigger(s.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),i.trigger(s.a.AUDIO_TRACK_SWITCHED,{id:t}))},_t.onAudioTrackSwitched=function(e,t){var n;t=t.id;(t=!!this.hls.audioTracks[t].url)&&(n=this.videoBuffer)&&this.mediaBuffer!==n&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=n),this.altAudio=t,this.tick()},_t.onBufferCreated=function(e,t){var n,i=t.tracks,r=!1;for(n in i){var a,s,o=i[n];"main"===o.id?(s=o,"video"===(a=n)&&(o=i[n])&&(this.videoBuffer=o.buffer)):r=!0}r&&s?(this.log("Alternate track found, use "+a+".buffered to schedule main fragment loading"),this.mediaBuffer=s.buffer):this.mediaBuffer=this.media},_t.onFragBuffered=function(e,t){var n,i=t.frag;t=t.part;i&&i.type!==M.b.MAIN||(this.fragContextChanged(i)?(this.warn("Fragment "+i.sn+(t?" p: "+t.index:"")+" of level "+i.level+" finished buffering, but was aborted. state: "+this.state),this.state===tt&&(this.state=Xe)):(n=(t||i).stats,this.fragLastKbps=Math.round(8*n.total/(n.buffering.end-n.loading.first)),"initSegment"!==i.sn&&(this.fragPrevious=i),this.fragBufferedComplete(i,t)))},_t.onError=function(e,t){switch(t.details){case o.a.FRAG_LOAD_ERROR:case o.a.FRAG_LOAD_TIMEOUT:case o.a.KEY_LOAD_ERROR:case o.a.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(M.b.MAIN,t);break;case o.a.LEVEL_LOAD_ERROR:case o.a.LEVEL_LOAD_TIMEOUT:this.state!==it&&(t.fatal?(this.warn(""+t.details),this.state=it):t.levelRetry||this.state!==at||(this.state=Xe));break;case o.a.BUFFER_FULL_ERROR:var n,i;"main"!==t.parent||this.state!==et&&this.state!==tt||(n=!0,(n=(i=this.getFwdBufferInfo(this.media,M.b.MAIN))&&.5<i.len?!this.reduceMaxBufferLength(i.len):n)&&(this.warn("buffer full error also media.currentTime is not buffered, flush main"),this.immediateLevelSwitch()),this.resetLoadingState())}},_t.checkBuffer=function(){var e,t=this.media,n=this.gapController;t&&n&&t.readyState&&(!this.loadedmetadata&&we.getBuffered(t).length||(e=this.state!==Xe?this.fragCurrent:null,n.poll(this.lastCurrentTime,e)),this.lastCurrentTime=t.currentTime)},_t.onFragLoadEmergencyAborted=function(){this.state=Xe,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()},_t.onBufferFlushed=function(e,t){var n;((t=t.type)!==m.a.AUDIO||this.audioOnly&&!this.altAudio)&&(n=(t===m.a.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media,this.afterBufferFlushed(n,t,M.b.MAIN))},_t.onLevelsUpdated=function(e,t){this.levels=t.levels},_t.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},_t.seekToStartPos=function(){var e,t,n,i=this.media;i&&(e=i.currentTime,0<=(t=this.startPosition))&&e<t&&(i.seeking?this.log("could not seek to "+t+", already seeking at "+e):(0<(n=((n=we.getBuffered(i)).length?n.start(0):0)-t)&&(n<this.config.maxBufferHole||n<this.config.maxFragLookUpTolerance)&&(this.log("adjusting start position by "+n+" to match buffer start"),this.startPosition=t+=n),this.log("seek to target start position "+t+" from current time "+e),i.currentTime=t))},_t._getAudioCodec=function(e){return e=this.config.defaultAudioCodec||e.audioCodec,this.audioCodecSwap&&e&&(this.log("Swapping audio codec"),e=-1!==e.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),e},_t._loadBitrateTestFrag=function(e){var t=this;e.bitrateTest=!0,this._doFragLoad(e).then((function(n){var i,r=t.hls;!n||r.nextLoadLevel||t.fragContextChanged(e)||(t.fragLoadError=0,t.state=Xe,t.startFragRequested=!1,t.bitrateTest=!1,(i=e.stats).parsing.start=i.parsing.end=i.buffering.start=i.buffering.end=self.performance.now(),r.trigger(s.a.FRAG_LOADED,n),e.bitrateTest=!1)}))},_t._handleTransmuxComplete=function(e){var t="main",n=this.hls,i=e.remuxResult;e=e.chunkMeta;if(u=this.getCurrentContext(e)){var r=u.frag,o=u.part,u=u.level,l=i.video,c=i.text,d=i.id3,h=i.initSegment,f=u.details,g=this.altAudio?void 0:i.audio;if(!this.fragContextChanged(r)){if(this.state=et,h&&(h.tracks&&(this._bufferInitSegment(u,h.tracks,r,e),n.trigger(s.a.FRAG_PARSING_INIT_SEGMENT,{frag:r,id:t,tracks:h.tracks})),u=h.initPTS,h=h.timescale,Object(a.a)(u))&&(this.initPTS[r.cc]=u,n.trigger(s.a.INIT_PTS_FOUND,{frag:r,id:t,initPTS:u,timescale:h})),l&&!1!==i.independent){if(f){u=l.startPTS,h=l.endPTS;var p=l.startDTS,v=l.endDTS;if(o)o.elementaryStreams[l.type]={startPTS:u,endPTS:h,startDTS:p,endDTS:v};else if(l.firstKeyFrame&&l.independent&&(this.couldBacktrack=!0),l.dropped&&l.independent){var y=this.getMainFwdBufferInfo();if((y?y.end:this.getLoadPosition())+this.config.maxBufferHole<(l.firstKeyFramePTS||u)-this.config.maxBufferHole)return void this.backtrack(r);r.setElementaryStreamInfo(l.type,r.start,h,r.start,v,!0)}r.setElementaryStreamInfo(l.type,u,h,p,v),this.backtrackFragment&&(this.backtrackFragment=r),this.bufferFragmentData(l,r,o,e)}}else if(!1===i.independent)return void this.backtrack(r);g&&(y=g.startPTS,u=g.endPTS,h=g.startDTS,p=g.endDTS,o&&(o.elementaryStreams[m.a.AUDIO]={startPTS:y,endPTS:u,startDTS:h,endDTS:p}),r.setElementaryStreamInfo(m.a.AUDIO,y,u,h,p),this.bufferFragmentData(g,r,o,e)),f&&null!=d&&null!=(v=d.samples)&&v.length&&(l={id:t,frag:r,details:f,samples:d.samples},n.trigger(s.a.FRAG_PARSING_METADATA,l)),f&&c&&(i={id:t,frag:r,details:f,samples:c.samples},n.trigger(s.a.FRAG_PARSING_USERDATA,i))}}else this.warn("The loading context changed while buffering fragment "+e.sn+" of level "+e.level+". This chunk will not be buffered."),this.resetStartWhenNotLoaded(e.level)},_t._bufferInitSegment=function(e,t,n,i){var r,a,o,u,l,c=this;this.state===et&&(this.audioOnly=!!t.audio&&!t.video,this.altAudio&&!this.audioOnly&&delete t.audio,r=t.audio,a=t.video,o=t.audiovideo,r&&(u=e.audioCodec,l=navigator.userAgent.toLowerCase(),this.audioCodecSwitch&&(u=u&&(-1!==u.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),1!==r.metadata.channelCount)&&-1===l.indexOf("firefox")&&(u="mp4a.40.5"),-1!==l.indexOf("android")&&"audio/mpeg"!==r.container&&this.log("Android: force audio codec to "+(u="mp4a.40.2")),e.audioCodec&&e.audioCodec!==u&&this.log('Swapping manifest audio codec "'+e.audioCodec+'" for "'+u+'"'),r.levelCodec=u,r.id="main",this.log("Init audio buffer, container:"+r.container+", codecs[selected/level/parsed]=["+(u||"")+"/"+(e.audioCodec||"")+"/"+r.codec+"]")),a&&(a.levelCodec=e.videoCodec,a.id="main",this.log("Init video buffer, container:"+a.container+", codecs[level/parsed]=["+(e.videoCodec||"")+"/"+a.codec+"]")),o&&this.log("Init audiovideo buffer, container:"+o.container+", codecs[level/parsed]=["+(e.attrs.CODECS||"")+"/"+o.codec+"]"),this.hls.trigger(s.a.BUFFER_CODECS,t),Object.keys(t).forEach((function(e){var r=t[e].initSegment;null!=r&&r.byteLength&&c.hls.trigger(s.a.BUFFER_APPENDING,{type:e,data:r,frag:n,part:null,chunkMeta:i,parent:n.type})})),this.tick())},_t.getMainFwdBufferInfo=function(){return this.getFwdBufferInfo(this.mediaBuffer||this.media,M.b.MAIN)},_t.backtrack=function(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=Xe},_t.checkFragmentChanged=function(){var e,t=this.media,n=null;t&&1<t.readyState&&!1===t.seeking&&(e=t.currentTime,we.isBuffered(t,e)?n=this.getAppendedFrag(e):we.isBuffered(t,e+.1)&&(n=this.getAppendedFrag(e+.1)),n)&&(this.backtrackFragment=null,t=this.fragPlaying,e=n.level,t&&n.sn===t.sn&&t.level===e&&n.urlId===t.urlId||(this.hls.trigger(s.a.FRAG_CHANGED,{frag:n}),t&&t.level===e||this.hls.trigger(s.a.LEVEL_SWITCHED,{level:e}),this.fragPlaying=n))},function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}((Ct=St).prototype,[{key:"nextLevel",get:function(){var e=this.nextBufferedFrag;return e?e.level:-1}},{key:"currentFrag",get:function(){var e=this.media;return e?this.fragPlaying||this.getAppendedFrag(e.currentTime):null}},{key:"currentProgramDateTime",get:function(){if(e=this.media){var e=e.currentTime,t=this.currentFrag;if(t&&Object(a.a)(e)&&Object(a.a)(t.programDateTime))return e=t.programDateTime+1e3*(e-t.start),new Date(e)}return null}},{key:"currentLevel",get:function(){var e=this.currentFrag;return e?e.level:-1}},{key:"nextBufferedFrag",get:function(){var e=this.currentFrag;return e?this.followingBufferedFrag(e):null}},{key:"forceStartLoad",get:function(){return this._forceStartLoad}}]),Object.defineProperty(Ct,"prototype",{writable:!1});var yt,bt=St,At=((_t=wt.prototype).sample=function(e,t){var n=Math.pow(this.alpha_,e);this.estimate_=t*(1-n)+n*this.estimate_,this.totalWeight_+=e},_t.getTotalWeight=function(){return this.totalWeight_},_t.getEstimate=function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_},wt),Et=((Ct=Tt.prototype).update=function(e,t){var n=this.slow_,i=this.fast_;this.slow_.halfLife!==e&&(this.slow_=new At(e,n.getEstimate(),n.getTotalWeight())),this.fast_.halfLife!==t&&(this.fast_=new At(t,i.getEstimate(),i.getTotalWeight()))},Ct.sample=function(e,t){t=8*t/(e=(e=Math.max(e,this.minDelayMs_))/1e3),this.fast_.sample(e,t),this.slow_.sample(e,t)},Ct.canEstimate=function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_},Ct.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},Ct.destroy=function(){},Tt);function Tt(e,t,n){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultEstimate_=n,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new At(e),this.fast_=new At(t)}function wt(e,t,n){void 0===t&&(t=0),void 0===n&&(n=0),this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=n}function St(e,t){return(e=yt.call(this,e,t,"[stream-controller]")||this).audioCodecSwap=!1,e.gapController=null,e.level=-1,e._forceStartLoad=!1,e.altAudio=!1,e.audioOnly=!1,e.fragPlaying=null,e.onvplaying=null,e.onvseeked=null,e.fragLastKbps=0,e.couldBacktrack=!1,e.backtrackFragment=null,e.audioCodecSwitch=!1,e.videoBuffer=null,e._registerListeners(),e}(_t=It.prototype).registerListeners=function(){var e=this.hls;e.on(s.a.FRAG_LOADING,this.onFragLoading,this),e.on(s.a.FRAG_LOADED,this.onFragLoaded,this),e.on(s.a.FRAG_BUFFERED,this.onFragBuffered,this),e.on(s.a.LEVEL_LOADED,this.onLevelLoaded,this),e.on(s.a.ERROR,this.onError,this)},_t.unregisterListeners=function(){var e=this.hls;e.off(s.a.FRAG_LOADING,this.onFragLoading,this),e.off(s.a.FRAG_LOADED,this.onFragLoaded,this),e.off(s.a.FRAG_BUFFERED,this.onFragBuffered,this),e.off(s.a.LEVEL_LOADED,this.onLevelLoaded,this),e.off(s.a.ERROR,this.onError,this)},_t.destroy=function(){this.unregisterListeners(),this.clearTimer(),this.hls=this.onCheck=null,this.fragCurrent=this.partCurrent=null},_t.onFragLoading=function(e,t){var n=t.frag;n.type!==M.b.MAIN||this.timer||(this.fragCurrent=n,this.partCurrent=null!=(n=t.part)?n:null,this.timer=self.setInterval(this.onCheck,100))},_t.onLevelLoaded=function(e,t){var n=this.hls.config;t.details.live?this.bwEstimator.update(n.abrEwmaSlowLive,n.abrEwmaFastLive):this.bwEstimator.update(n.abrEwmaSlowVoD,n.abrEwmaFastVoD)},_t._abandonRulesCheck=function(){var e=this.fragCurrent,t=this.partCurrent,n=this.hls,i=n.autoLevelEnabled,r=(n.config,n.media);if(e&&r){var o=(t||e).stats,l=(t||e).duration;if(o.aborted||o.loaded&&o.loaded===o.total||0===e.level)this.clearTimer(),this._nextAutoLevel=-1;else if(i&&!r.paused&&r.playbackRate&&r.readyState&&null!==(i=n.mainForwardBufferInfo)){var c=performance.now()-o.loading.start;if(!(c<=500*l/(r=Math.abs(r.playbackRate)))){var d=o.loaded&&o.loading.first,h=this.bwEstimator.getEstimate(),f=n.levels,g=n.minAutoLevel,p=f[e.level],m=(p=o.total||Math.max(o.loaded,Math.round(l*p.maxBitrate/8)),d?1e3*o.loaded/c:0),v=(p=m?(p-o.loaded)/m:8*p/h,i.len/r);if(!(p<=v)){for(var y=Number.POSITIVE_INFINITY,b=e.level-1;g<b;b--){var A=f[b].maxBitrate;if((y=m?l*A/(6.4*m):l*A/h)<v)break}p<=y||(u.b.warn("Fragment "+e.sn+(t?" part "+t.index:"")+" of level "+e.level+" is loading too slowly and will cause an underbuffer; aborting and switching to level "+b+"\n      Current BW estimate: "+(Object(a.a)(h)?(h/1024).toFixed(3):"Unknown")+" Kb/s\n      Estimated load time for current fragment: "+p.toFixed(3)+" s\n      Estimated load time for the next fragment: "+y.toFixed(3)+" s\n      Time to underbuffer: "+v.toFixed(3)+" s"),n.nextLoadLevel=b,d&&this.bwEstimator.sample(c,o.loaded),this.clearTimer(),e.loader&&(this.fragCurrent=this.partCurrent=null,e.loader.abort()),n.trigger(s.a.FRAG_LOAD_EMERGENCY_ABORTED,{frag:e,part:t,stats:o}))}}}}},_t.onFragLoaded=function(e,t){var n,i,r,o,u=t.frag;t=t.part;u.type===M.b.MAIN&&Object(a.a)(u.sn)&&(n=(t||u).stats,r=(t||u).duration,this.clearTimer(),this.lastLoadedFragLevel=u.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate&&(i=((o=this.hls.levels[u.level]).loaded?o.loaded.bytes:0)+n.loaded,r=(o.loaded?o.loaded.duration:0)+r,o.loaded={bytes:i,duration:r},o.realBitrate=Math.round(8*i/r)),u.bitrateTest)&&(o={stats:n,frag:u,part:t,id:u.type},this.onFragBuffered(s.a.FRAG_BUFFERED,o))},_t.onFragBuffered=function(e,t){var n,i=t.frag;(t=((t=t.part)||i).stats).aborted||i.type!==M.b.MAIN||"initSegment"===i.sn||(n=t.parsing.end-t.loading.start,this.bwEstimator.sample(n,t.loaded),t.bwEstimate=this.bwEstimator.getEstimate(),i.bitrateTest?this.bitrateTestDelay=n/1e3:this.bitrateTestDelay=0)},_t.onError=function(e,t){switch(t.details){case o.a.FRAG_LOAD_ERROR:case o.a.FRAG_LOAD_TIMEOUT:this.clearTimer()}},_t.clearTimer=function(){self.clearInterval(this.timer),this.timer=void 0},_t.getNextABRAutoLevel=function(){var e=this.fragCurrent,t=this.partCurrent,n=(s=this.hls).maxAutoLevel,i=s.config,r=s.minAutoLevel,a=s.media,s=(t=t?t.duration:e?e.duration:0,e=(a&&a.currentTime,a&&0!==a.playbackRate?Math.abs(a.playbackRate):1),a=this.bwEstimator?this.bwEstimator.getEstimate():i.abrEwmaDefaultEstimate,((s=s.mainForwardBufferInfo)?s.len:0)/e);if(0<=(e=this.findBestLevel(a,r,n,s,i.abrBandWidthFactor,i.abrBandWidthUpFactor)))return e;u.b.trace((s?"rebuffering expected":"buffer is empty")+", finding optimal quality level");var o,l=t?Math.min(t,i.maxStarvationDelay):i.maxStarvationDelay,c=i.abrBandWidthFactor,d=i.abrBandWidthUpFactor;return s||(o=this.bitrateTestDelay)&&(l=(t?Math.min(t,i.maxLoadingDelay):i.maxLoadingDelay)-o,u.b.trace("bitrate test took "+Math.round(1e3*o)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*l)+" ms"),c=d=1),e=this.findBestLevel(a,r,n,s+l,c,d),Math.max(e,0)},_t.findBestLevel=function(e,t,n,i,r,s){for(var o,l=this.fragCurrent,c=this.partCurrent,d=this.lastLoadedFragLevel,h=this.hls.levels,f=h[d],g=!(null==f||null==(o=f.details)||!o.live),p=null==f?void 0:f.codecSet,m=c?c.duration:l?l.duration:0,v=n;t<=v;v--){if((b=h[v])&&(!p||b.codecSet===p)){var y,b=b.details,A=(b=(c?null==b?void 0:b.partTarget:null==b?void 0:b.averagetargetduration)||m,h[v].maxBitrate),E=A*b/(y=v<=d?r*e:s*e);if(u.b.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+v+"/"+Math.round(y)+"/"+A+"/"+b+"/"+i+"/"+E),A<y&&(0==E||!Object(a.a)(E)||g&&!this.bitrateTestDelay||E<i))return v}}return-1},function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}((_t=It).prototype,[{key:"nextAutoLevel",get:function(){var e=this._nextAutoLevel,t=this.bwEstimator;return-1!==e&&!t.canEstimate()||(t=this.getNextABRAutoLevel(),-1!==e&&this.hls.levels[t].loadError)?e:-1!==e?Math.min(e,t):t},set:function(e){this._nextAutoLevel=e}}]),Object.defineProperty(_t,"prototype",{writable:!1});var Ct=It,xt=((_t=kt.prototype).push=function(e){this.chunks.push(e),this.dataLength+=e.length},_t.flush=function(){var e=this.chunks,t=this.dataLength;return e.length?(e=1===e.length?e[0]:function(e){for(var n=new Uint8Array(t),i=0,r=0;r<e.length;r++){var a=e[r];n.set(a,i),i+=a.length}return n}(e),this.reset(),e):new Uint8Array(0)},_t.reset=function(){this.chunks.length=0,this.dataLength=0},kt);function kt(){this.chunks=[],this.dataLength=0}function It(e){this.hls=void 0,this.lastLoadedFragLevel=0,this._nextAutoLevel=-1,this.timer=void 0,this.onCheck=this._abandonRulesCheck.bind(this),this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,e=(this.hls=e).config,this.bwEstimator=new Et(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate),this.registerListeners()}function Lt(){return(Lt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n,i=arguments[t];for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function Rt(e,t){return(Rt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}_t=Dt=Ee,(Xt=Mt).prototype=Object.create(_t.prototype),Rt(Xt.prototype.constructor=Xt,_t),(Xt=Mt.prototype).onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},Xt._registerListeners=function(){var e=this.hls;e.on(s.a.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(s.a.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(s.a.MANIFEST_LOADING,this.onManifestLoading,this),e.on(s.a.LEVEL_LOADED,this.onLevelLoaded,this),e.on(s.a.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(s.a.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(s.a.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(s.a.ERROR,this.onError,this),e.on(s.a.BUFFER_RESET,this.onBufferReset,this),e.on(s.a.BUFFER_CREATED,this.onBufferCreated,this),e.on(s.a.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(s.a.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(s.a.FRAG_BUFFERED,this.onFragBuffered,this)},Xt._unregisterListeners=function(){var e=this.hls;e.off(s.a.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(s.a.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(s.a.MANIFEST_LOADING,this.onManifestLoading,this),e.off(s.a.LEVEL_LOADED,this.onLevelLoaded,this),e.off(s.a.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(s.a.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(s.a.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(s.a.ERROR,this.onError,this),e.off(s.a.BUFFER_RESET,this.onBufferReset,this),e.off(s.a.BUFFER_CREATED,this.onBufferCreated,this),e.off(s.a.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(s.a.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(s.a.FRAG_BUFFERED,this.onFragBuffered,this)},Xt.onInitPtsFound=function(e,t){var n=t.frag,i=t.id;t=t.initPTS;"main"===i&&(i=n.cc,this.initPTS[n.cc]=t,this.log("InitPTS for cc: "+i+" found from main: "+t),this.videoTrackCC=i,this.state===rt)&&this.tick()},Xt.startLoad=function(e){var t;this.levels?(t=this.lastCurrentTime,this.stopLoad(),this.setInterval(100),(this.fragLoadError=0)<t&&-1===e?(this.log("Override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t,this.state=Xe):(this.loadedmetadata=!1,this.state=Je),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()):(this.startPosition=e,this.state=Ye)},Xt.doTick=function(){switch(this.state){case Xe:this.doTickIdle();break;case Je:var e=this.levels,t=this.trackId;if(e=null==e||null==(t=e[t])?void 0:t.details){if(this.waitForCdnTuneIn(e))break;this.state=rt}break;case Ze:t=performance.now(),(!(e=this.retryDate)||e<=t||null!=(e=this.media)&&e.seeking)&&(this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded(this.trackId),this.state=Xe);break;case rt:var n,i;(t=this.waitingData)?(e=t.frag,n=t.part,i=t.cache,t=t.complete,void 0!==this.initPTS[e.cc]?(this.waitingData=null,this.waitingVideoCC=-1,this.state=$e,n={frag:e,part:n,payload:i.flush(),networkDetails:null},this._handleFragmentLoadProgress(n),t&&Dt.prototype._handleFragmentLoadComplete.call(this,n)):this.videoTrackCC!==this.waitingVideoCC?(this.log("Waiting fragment cc ("+e.cc+") cancelled because video is at cc "+this.videoTrackCC),this.clearWaitingFragment()):(i=this.getLoadPosition(),Me((t=we.bufferInfo(this.mediaBuffer,i,this.config.maxBufferHole)).end,this.config.maxFragLookUpTolerance,e)<0&&(this.log("Waiting fragment cc ("+e.cc+") @ "+e.start+" cancelled because another fragment at "+t.end+" is needed"),this.clearWaitingFragment()))):this.state=Xe}this.onTickEnd()},Xt.clearWaitingFragment=function(){var e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=Xe)},Xt.resetLoadingState=function(){this.clearWaitingFragment(),Dt.prototype.resetLoadingState.call(this)},Xt.onTickEnd=function(){var e,t=this.media;t&&t.readyState&&(e=(this.mediaBuffer||t).buffered,!this.loadedmetadata&&e.length&&(this.loadedmetadata=!0),this.lastCurrentTime=t.currentTime)},Xt.doTickIdle=function(){var e,t,n,i=this.hls,r=this.levels,a=this.media,o=this.trackId,u=i.config;r&&r[o]&&(a||!this.startFragRequested&&u.startFragPrefetch)&&(!(u=r[o].details)||u.live&&this.levelLastLoaded!==o||this.waitForCdnTuneIn(u)?this.state=Je:(r=this.mediaBuffer||this.media,this.bufferFlushed&&r&&(this.bufferFlushed=!1,this.afterBufferFlushed(r,m.a.AUDIO,M.b.AUDIO)),null!==(o=this.getFwdBufferInfo(r,M.b.AUDIO))&&(r=this.getFwdBufferInfo(this.videoBuffer||this.media,M.b.MAIN),t=o.len,e=this.getMaxBufferLength(null==r?void 0:r.len),n=this.audioSwitch,e<=t&&!n||(!n&&this._streamEnded(o,u)?(i.trigger(s.a.BUFFER_EOS,{type:"audio"}),this.state=nt):(e=u.fragments[0].start,t=o.end,n&&a&&(t=i=this.getLoadPosition(),u.PTSKnown)&&i<e&&(o.end>e||o.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),a.currentTime=e+.05),r&&t>r.end+u.targetduration||!(r&&r.len||!o.len)||((n=this.getNextFragment(t,u))?"identity"!==(null==(i=n.decryptdata)?void 0:i.keyFormat)||null!=(a=n.decryptdata)&&a.key?this.loadFragment(n,u,t):this.loadKey(n,u):this.bufferFlushed=!0))))))},Xt.getMaxBufferLength=function(e){var t=Dt.prototype.getMaxBufferLength.call(this);return e?Math.max(t,e):t},Xt.onMediaDetaching=function(){this.videoBuffer=null,Dt.prototype.onMediaDetaching.call(this)},Xt.onAudioTracksUpdated=function(e,t){t=t.audioTracks,this.resetTransmuxer(),this.levels=t.map((function(e){return new J(e)}))},Xt.onAudioTrackSwitching=function(e,t){var n=!!t.url;null!=(t=(this.trackId=t.id,this.fragCurrent))&&t.loader&&t.loader.abort(),this.fragCurrent=null,this.clearWaitingFragment(),n?this.setInterval(100):this.resetTransmuxer(),n?(this.audioSwitch=!0,this.state=Xe):this.state=Ye,this.tick()},Xt.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=!1},Xt.onLevelLoaded=function(e,t){this.mainDetails=t.details,null!==this.cachedTrackLoadedData&&(this.hls.trigger(s.a.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)},Xt.onAudioTrackLoaded=function(e,t){if(null!=this.mainDetails){var n=this.levels,i=t.details,r=t.id;if(n){this.log("Track "+r+" loaded ["+i.startSN+","+i.endSN+"],duration:"+i.totalduration);n=n[r];var a=0;if(i.live||null!=(s=n.details)&&s.live){var s=this.mainDetails;if(i.fragments[0]||(i.deltaUpdateFailed=!0),i.deltaUpdateFailed||!s)return;a=!n.details&&i.hasProgramDateTime&&s.hasProgramDateTime?(Re(i,s),i.fragments[0].start):this.alignPlaylists(i,n.details)}n.details=i,this.levelLastLoaded=r,this.startFragRequested||!this.mainDetails&&i.live||this.setStartPosition(n.details,a),this.state!==Je||this.waitForCdnTuneIn(i)||(this.state=Xe),this.tick()}else this.warn("Audio tracks were reset while loading level "+r)}else this.cachedTrackLoadedData=t},Xt._handleFragmentLoadProgress=function(e){var t,n,i,r,a=e.frag,s=e.part,o=(e=e.payload,this.config),u=this.trackId,l=this.levels;l?(t=(l=l[u]).details,o=o.defaultAudioCodec||l.audioCodec||"mp4a.40.2",l=(l=this.transmuxer)||(this.transmuxer=new ft(this.hls,M.b.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this))),n=this.initPTS[a.cc],i=null==(i=a.initSegment)?void 0:i.data,void 0!==n?(r=s?s.index:-1,r=new Se(a.level,a.sn,a.stats.chunkCount,e.byteLength,r,-1!==r),l.push(e,i,o,"",a,s,t.totalduration,!1,r,n)):(this.log("Unknown video PTS for cc "+a.cc+", waiting for video PTS before demuxing audio frag "+a.sn+" of ["+t.startSN+" ,"+t.endSN+"],track "+u),(this.waitingData=this.waitingData||{frag:a,part:s,cache:new xt,complete:!1}).cache.push(new Uint8Array(e)),this.waitingVideoCC=this.videoTrackCC,this.state=rt)):this.warn("Audio tracks were reset while fragment load was in progress. Fragment "+a.sn+" of level "+a.level+" will not be buffered")},Xt._handleFragmentLoadComplete=function(e){this.waitingData?this.waitingData.complete=!0:Dt.prototype._handleFragmentLoadComplete.call(this,e)},Xt.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},Xt.onBufferCreated=function(e,t){var n=t.tracks.audio;n&&(this.mediaBuffer=n.buffer||null),t.tracks.video&&(this.videoBuffer=t.tracks.video.buffer||null)},Xt.onFragBuffered=function(e,t){var n=t.frag;t=t.part;n.type===M.b.AUDIO&&(this.fragContextChanged(n)?this.warn("Fragment "+n.sn+(t?" p: "+t.index:"")+" of level "+n.level+" finished buffering, but was aborted. state: "+this.state+", audioSwitch: "+this.audioSwitch):("initSegment"!==n.sn&&(this.fragPrevious=n,this.audioSwitch)&&(this.audioSwitch=!1,this.hls.trigger(s.a.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.fragBufferedComplete(n,t)))},Xt.onError=function(e,t){switch(t.details){case o.a.FRAG_LOAD_ERROR:case o.a.FRAG_LOAD_TIMEOUT:case o.a.KEY_LOAD_ERROR:case o.a.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(M.b.AUDIO,t);break;case o.a.AUDIO_TRACK_LOAD_ERROR:case o.a.AUDIO_TRACK_LOAD_TIMEOUT:this.state!==it&&this.state!==Ye&&(this.state=t.fatal?it:Xe,this.warn(t.details+" while loading frag, switching to "+this.state+" state"));break;case o.a.BUFFER_FULL_ERROR:var n,i;"audio"!==t.parent||this.state!==et&&this.state!==tt||(n=!0,(n=(i=this.getFwdBufferInfo(this.mediaBuffer,M.b.AUDIO))&&.5<i.len?!this.reduceMaxBufferLength(i.len):n)&&(this.warn("Buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,Dt.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.resetLoadingState())}},Xt.onBufferFlushed=function(e,t){t.type===m.a.AUDIO&&(this.bufferFlushed=!0)},Xt._handleTransmuxComplete=function(e){var t,n,i,r,a,o,u,l,c=this.hls,d=e.remuxResult,h=(e=e.chunkMeta,this.getCurrentContext(e));h?(t=h.frag,n=h.part,h=h.level.details,i=d.audio,r=d.text,a=d.id3,d=d.initSegment,!this.fragContextChanged(t)&&h&&(this.state=et,this.audioSwitch&&i&&this.completeAudioSwitch(),null!=d&&d.tracks&&(this._bufferInitSegment(d.tracks,t,e),c.trigger(s.a.FRAG_PARSING_INIT_SEGMENT,{frag:t,id:"audio",tracks:d.tracks})),i&&(d=i.startPTS,u=i.endPTS,l=i.startDTS,o=i.endDTS,n&&(n.elementaryStreams[m.a.AUDIO]={startPTS:d,endPTS:u,startDTS:l,endDTS:o}),t.setElementaryStreamInfo(m.a.AUDIO,d,u,l,o),this.bufferFragmentData(i,t,n,e)),null!=a&&null!=(d=a.samples)&&d.length&&(u=Lt({id:"audio",frag:t,details:h},a),c.trigger(s.a.FRAG_PARSING_METADATA,u)),r)&&(l=Lt({id:"audio",frag:t,details:h},r),c.trigger(s.a.FRAG_PARSING_USERDATA,l))):(this.warn("The loading context changed while buffering fragment "+e.sn+" of level "+e.level+". This chunk will not be buffered."),this.resetStartWhenNotLoaded(e.level))},Xt._bufferInitSegment=function(e,t,n){var i;this.state===et&&(e.video&&delete e.video,i=e.audio)&&(i.levelCodec=i.codec,i.id="audio",this.log("Init audio buffer, container:"+i.container+", codecs[parsed]=["+i.codec+"]"),this.hls.trigger(s.a.BUFFER_CODECS,e),null!=(e=i.initSegment)&&e.byteLength&&(i={type:"audio",frag:t,part:null,chunkMeta:n,parent:t.type,data:e},this.hls.trigger(s.a.BUFFER_APPENDING,i)),this.tick())},Xt.loadFragment=function(e,t,n){var i=this.fragmentTracker.getState(e);this.fragCurrent=e,!this.audioSwitch&&i!==he.NOT_LOADED&&i!==he.PARTIAL||("initSegment"===e.sn?this._loadInitSegment(e):t.live&&!Object(a.a)(this.initPTS[e.cc])?(this.log("Waiting for video PTS in continuity counter "+e.cc+" of live stream before loading audio fragment "+e.sn+" of level "+this.trackId),this.state=rt):(this.startFragRequested=!0,Dt.prototype.loadFragment.call(this,e,t,n)))},Xt.completeAudioSwitch=function(){var e=this.hls,t=this.media,n=this.trackId;t&&(this.log("Switching audio track : flushing all audio"),Dt.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.audioSwitch=!1,e.trigger(s.a.AUDIO_TRACK_SWITCHED,{id:n})};var Dt,_t=Mt;function Mt(e,t){return(e=Dt.call(this,e,t,"[audio-stream-controller]")||this).videoBuffer=null,e.videoTrackCC=-1,e.waitingVideoCC=-1,e.audioSwitch=!1,e.trackId=-1,e.waitingData=null,e.mainDetails=null,e.bufferFlushed=!1,e.cachedTrackLoadedData=null,e._registerListeners(),e}function Ot(e,t){return(Ot=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}Xt=Pt=t,(Nt=Bt).prototype=Object.create(Xt.prototype),Ot(Nt.prototype.constructor=Nt,Xt),(Nt=Bt.prototype).registerListeners=function(){var e=this.hls;e.on(s.a.MANIFEST_LOADING,this.onManifestLoading,this),e.on(s.a.MANIFEST_PARSED,this.onManifestParsed,this),e.on(s.a.LEVEL_LOADING,this.onLevelLoading,this),e.on(s.a.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(s.a.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(s.a.ERROR,this.onError,this)},Nt.unregisterListeners=function(){var e=this.hls;e.off(s.a.MANIFEST_LOADING,this.onManifestLoading,this),e.off(s.a.MANIFEST_PARSED,this.onManifestParsed,this),e.off(s.a.LEVEL_LOADING,this.onLevelLoading,this),e.off(s.a.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(s.a.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(s.a.ERROR,this.onError,this)},Nt.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,Pt.prototype.destroy.call(this)},Nt.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.trackName="",this.selectDefaultTrack=!0},Nt.onManifestParsed=function(e,t){this.tracks=t.audioTracks||[]},Nt.onAudioTrackLoaded=function(e,t){var n,i=t.id,r=t.details,a=this.tracksInGroup[i];a?(n=a.details,a.details=t.details,this.log("audioTrack "+i+" loaded ["+r.startSN+"-"+r.endSN+"]"),i===this.trackId&&(this.retryCount=0,this.playlistLoaded(i,t,n))):this.warn("Invalid audio track id "+i)},Nt.onLevelLoading=function(e,t){this.switchLevel(t.level)},Nt.onLevelSwitching=function(e,t){this.switchLevel(t.level)},Nt.switchLevel=function(e){var t,n;null!=(e=this.hls.levels[e])&&e.audioGroupIds&&(t=e.audioGroupIds[e.urlId],this.groupId!==t)&&(this.groupId=t,e=this.tracks.filter((function(e){return!t||e.groupId===t})),this.selectDefaultTrack&&!e.some((function(e){return e.default}))&&(this.selectDefaultTrack=!1),n={audioTracks:this.tracksInGroup=e},this.log("Updating audio tracks, "+e.length+' track(s) found in "'+t+'" group-id'),this.hls.trigger(s.a.AUDIO_TRACKS_UPDATED,n),this.selectInitialTrack())},Nt.onError=function(e,t){Pt.prototype.onError.call(this,e,t),!t.fatal&&t.context&&t.context.type===M.a.AUDIO_TRACK&&t.context.id===this.trackId&&t.context.groupId===this.groupId&&this.retryLoadingOrFail(t)},Nt.setAudioTrack=function(e){var t,n,i,r,a,o,u=this.tracksInGroup;e<0||e>=u.length?this.warn("Invalid id passed to audio-track controller"):(this.clearTimer(),t=u[this.trackId],this.log("Now switching to audio-track index "+e),n=(u=u[e]).id,i=void 0===(i=u.groupId)?"":i,r=u.name,a=u.type,o=u.url,this.trackId=e,this.trackName=r,this.selectDefaultTrack=!1,this.hls.trigger(s.a.AUDIO_TRACK_SWITCHING,{id:n,groupId:i,name:r,type:a,url:o}),u.details&&!u.details.live||(e=this.switchParams(u.url,null==t?void 0:t.details),this.loadPlaylist(e)))},Nt.selectInitialTrack=function(){this.tracksInGroup;var e=this.trackName;-1!==(e=this.findTrackId(e)||this.findTrackId())?this.setAudioTrack(e):(this.warn("No track found for running audio group-ID: "+this.groupId),this.hls.trigger(s.a.ERROR,{type:o.b.MEDIA_ERROR,details:o.a.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))},Nt.findTrackId=function(e){for(var t=this.tracksInGroup,n=0;n<t.length;n++){var i=t[n];if((!this.selectDefaultTrack||i.default)&&(!e||e===i.name))return i.id}return-1},Nt.loadPlaylist=function(e){var t=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(t)){var n=t.id,i=t.groupId;t=t.url;if(e)try{t=e.addDirectives(t)}catch(e){this.warn("Could not construct new URL with HLS Delivery Directives: "+e)}this.log("loading audio-track playlist for id: "+n),this.clearTimer(),this.hls.trigger(s.a.AUDIO_TRACK_LOADING,{url:t,id:n,groupId:i,deliveryDirectives:e||null})}},function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}((Xt=Bt).prototype,[{key:"audioTracks",get:function(){return this.tracksInGroup}},{key:"audioTrack",get:function(){return this.trackId},set:function(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}}]),Object.defineProperty(Xt,"prototype",{writable:!1});var Pt,Nt=Bt;function Bt(e){return(e=Pt.call(this,e,"[audio-track-controller]")||this).tracks=[],e.groupId=null,e.tracksInGroup=[],e.trackId=-1,e.trackName="",e.selectDefaultTrack=!0,e.registerListeners(),e}function Ft(e,t){return(Ft=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}Xt=Ut=Ee,(Ee=Gt).prototype=Object.create(Xt.prototype),Ft(Ee.prototype.constructor=Ee,Xt),(Ee=Gt.prototype).onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},Ee._registerListeners=function(){var e=this.hls;e.on(s.a.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(s.a.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(s.a.MANIFEST_LOADING,this.onManifestLoading,this),e.on(s.a.LEVEL_LOADED,this.onLevelLoaded,this),e.on(s.a.ERROR,this.onError,this),e.on(s.a.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(s.a.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(s.a.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(s.a.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(s.a.BUFFER_FLUSHING,this.onBufferFlushing,this)},Ee._unregisterListeners=function(){var e=this.hls;e.off(s.a.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(s.a.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(s.a.MANIFEST_LOADING,this.onManifestLoading,this),e.off(s.a.LEVEL_LOADED,this.onLevelLoaded,this),e.off(s.a.ERROR,this.onError,this),e.off(s.a.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(s.a.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(s.a.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(s.a.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(s.a.BUFFER_FLUSHING,this.onBufferFlushing,this)},Ee.startLoad=function(){this.stopLoad(),this.state=Xe,this.setInterval(500),this.tick()},Ee.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()},Ee.onLevelLoaded=function(e,t){this.mainDetails=t.details},Ee.onSubtitleFragProcessed=function(e,t){var n=t.frag;t=t.success;if(this.fragPrevious=n,this.state=Xe,t){var i=this.tracksBuffered[this.currentTrackId];if(i){for(var r,a=n.start,s=0;s<i.length;s++)if(a>=i[s].start&&a<=i[s].end){r=i[s];break}t=n.start+n.duration,r?r.end=t:i.push(r={start:a,end:t}),this.fragmentTracker.fragBuffered(n)}}},Ee.onBufferFlushing=function(e,t){var n,i,r,a=t.startOffset,s=t.endOffset;0===a&&s!==Number.POSITIVE_INFINITY&&(n=this.currentTrackId,(i=this.levels).length)&&i[n]&&i[n].details&&((r=s-i[n].details.targetduration)<=0||(t.endOffsetSubtitles=Math.max(0,r),this.tracksBuffered.forEach((function(e){for(var t=0;t<e.length;)if(e[t].end<=r)e.shift();else{if(!(e[t].start<r))break;e[t].start=r,t++}})),this.fragmentTracker.removeFragmentsInRange(a,r,M.b.SUBTITLE)))},Ee.onError=function(e,t){(t=t.frag)&&t.type===M.b.SUBTITLE&&(null!=(t=this.fragCurrent)&&t.loader&&this.fragCurrent.loader.abort(),this.state=Xe)},Ee.onSubtitleTracksUpdated=function(e,t){var n=this;t=t.subtitleTracks;this.tracksBuffered=[],this.levels=t.map((function(e){return new J(e)})),this.fragmentTracker.removeAllFragments(),this.fragPrevious=null,this.levels.forEach((function(e){n.tracksBuffered[e.id]=[]})),this.mediaBuffer=null},Ee.onSubtitleTrackSwitch=function(e,t){this.currentTrackId=t.id,this.levels.length&&-1!==this.currentTrackId?(null!=(t=this.levels[this.currentTrackId])&&t.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,t&&this.setInterval(500)):this.clearInterval()},Ee.onSubtitleTrackLoaded=function(e,t){var n=t.details,i=(t=t.id,this.currentTrackId),r=this.levels;if(r.length){var a=r[i];if(!(t>=r.length||t!==i)&&a){if(this.mediaBuffer=this.mediaBufferTimeRanges,n.live||null!=(r=a.details)&&r.live){if(i=this.mainDetails,n.deltaUpdateFailed||!i)return;r=i.fragments[0],a.details?0===this.alignPlaylists(n,a.details)&&r&&ue(n,r.start):n.hasProgramDateTime&&i.hasProgramDateTime?Re(n,i):r&&ue(n,r.start)}a.details=n,this.levelLastLoaded=t,this.tick(),!n.live||this.fragCurrent||!this.media||this.state!==Xe||_e(null,n.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),a.details=void 0)}}},Ee._handleFragmentLoadComplete=function(e){var t,n=e.frag,i=(e=e.payload,n.decryptdata),r=this.hls;!this.fragContextChanged(n)&&e&&0<e.byteLength&&i&&i.key&&i.iv&&"AES-128"===i.method&&(t=performance.now(),this.decrypter.webCryptoDecrypt(new Uint8Array(e),i.key.buffer,i.iv.buffer).then((function(e){var i=performance.now();r.trigger(s.a.FRAG_DECRYPTED,{frag:n,payload:e,stats:{tstart:t,tdecrypt:i}})})))},Ee.doTick=function(){var e,t,n,i,r,a,s,o;this.media?this.state===Xe&&(e=this.currentTrackId,(a=this.levels).length)&&a[e]&&a[e].details&&(a=(e=a[e].details).targetduration,t=this.config,r=this.media,n=(r=we.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],r.currentTime-a,t.maxBufferHole)).end,r.len>this.getMaxBufferLength()+a||(a=(r=e.fragments).length,o=e.edge,s=this.fragPrevious,n<o?(o=t.maxFragLookUpTolerance,!(i=_e(s,r,Math.max(r[0].start,n),o))&&s&&s.start<r[0].start&&(i=r[0])):i=r[a-1],(i=this.mapToInitFragWhenRequired(i))&&this.fragmentTracker.getState(i)===he.NOT_LOADED&&(i.encrypted?this.loadKey(i,e):this.loadFragment(i,e,n)))):this.state=Xe},Ee.loadFragment=function(e,t,n){"initSegment"===(this.fragCurrent=e).sn?this._loadInitSegment(e):Ut.prototype.loadFragment.call(this,e,t,n)},function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}((Xt=Gt).prototype,[{key:"mediaBufferTimeRanges",get:function(){return new jt(this.tracksBuffered[this.currentTrackId]||[])}}]),Object.defineProperty(Xt,"prototype",{writable:!1});Ee=Gt;var Ut,jt=function(e){this.buffered=void 0;var t=function(t,n,i){if((n>>>=0)>i-1)throw new DOMException("Failed to execute '"+t+"' on 'TimeRanges': The index provided ("+n+") is greater than the maximum bound ("+i+")");return e[n][t]};this.buffered={get length(){return e.length},end:function(n){return t("end",n,e.length)},start:function(n){return t("start",n,e.length)}}};function Gt(e,t){return(e=Ut.call(this,e,t,"[subtitle-stream-controller]")||this).levels=[],e.currentTrackId=-1,e.tracksBuffered=[],e.mainDetails=null,e._registerListeners(),e}function Ht(e,t){return(Ht=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Vt(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];"subtitles"===i.kind&&i.label&&t.push(e[n])}return t}Xt=qt=t,(t=sn).prototype=Object.create(Xt.prototype),Ht(t.prototype.constructor=t,Xt),(t=sn.prototype).destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.trackChangeListener=this.asyncPollTrackChange=null,qt.prototype.destroy.call(this)},t.registerListeners=function(){var e=this.hls;e.on(s.a.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(s.a.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(s.a.MANIFEST_LOADING,this.onManifestLoading,this),e.on(s.a.MANIFEST_PARSED,this.onManifestParsed,this),e.on(s.a.LEVEL_LOADING,this.onLevelLoading,this),e.on(s.a.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(s.a.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(s.a.ERROR,this.onError,this)},t.unregisterListeners=function(){var e=this.hls;e.off(s.a.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(s.a.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(s.a.MANIFEST_LOADING,this.onManifestLoading,this),e.off(s.a.MANIFEST_PARSED,this.onManifestParsed,this),e.off(s.a.LEVEL_LOADING,this.onLevelLoading,this),e.off(s.a.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(s.a.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(s.a.ERROR,this.onError,this)},t.onMediaAttached=function(e,t){this.media=t.media,this.media&&(-1<this.queuedDefaultTrack&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))},t.pollTrackChange=function(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.trackChangeListener,e)},t.onMediaDetaching=function(){this.media&&(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),-1<this.trackId&&(this.queuedDefaultTrack=this.trackId),Vt(this.media.textTracks).forEach((function(e){G(e)})),this.subtitleTrack=-1,this.media=null)},t.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0},t.onManifestParsed=function(e,t){this.tracks=t.subtitleTracks},t.onSubtitleTrackLoaded=function(e,t){var n,i=t.id,r=t.details,a=this.trackId;(a=this.tracksInGroup[a])?(n=a.details,a.details=t.details,this.log("subtitle track "+i+" loaded ["+r.startSN+"-"+r.endSN+"]"),i===this.trackId&&(this.retryCount=0,this.playlistLoaded(i,t,n))):this.warn("Invalid subtitle track id "+i)},t.onLevelLoading=function(e,t){this.switchLevel(t.level)},t.onLevelSwitching=function(e,t){this.switchLevel(t.level)},t.switchLevel=function(e){var t,n,i,r;null!=(e=this.hls.levels[e])&&e.textGroupIds&&(t=e.textGroupIds[e.urlId],this.groupId!==t)&&(e=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0,n=this.tracks.filter((function(e){return!t||e.groupId===t})),this.tracksInGroup=n,i=this.findTrackId(null==e?void 0:e.name)||this.findTrackId(),this.groupId=t,r={subtitleTracks:n},this.log("Updating subtitle tracks, "+n.length+' track(s) found in "'+t+'" group-id'),this.hls.trigger(s.a.SUBTITLE_TRACKS_UPDATED,r),-1!==i)&&this.setSubtitleTrack(i,e)},t.findTrackId=function(e){for(var t=this.tracksInGroup,n=0;n<t.length;n++){var i=t[n];if((!this.selectDefaultTrack||i.default)&&(!e||e===i.name))return i.id}return-1},t.onError=function(e,t){qt.prototype.onError.call(this,e,t),!t.fatal&&t.context&&t.context.type===M.a.SUBTITLE_TRACK&&t.context.id===this.trackId&&t.context.groupId===this.groupId&&this.retryLoadingOrFail(t)},t.loadPlaylist=function(e){var t=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(t)){var n=t.id,i=t.groupId;t=t.url;if(e)try{t=e.addDirectives(t)}catch(e){this.warn("Could not construct new URL with HLS Delivery Directives: "+e)}this.log("Loading subtitle playlist for id "+n),this.hls.trigger(s.a.SUBTITLE_TRACK_LOADING,{url:t,id:n,groupId:i,deliveryDirectives:e||null})}},t.toggleTrackModes=function(e){var t,n=this,i=this.media,r=this.trackId;i&&(t=(i=Vt(i.textTracks)).filter((function(e){return e.groupId===n.groupId})),-1===e?[].slice.call(i).forEach((function(e){e.mode="disabled"})):(i=t[r])&&(i.mode="disabled"),r=t[e])&&(r.mode=this.subtitleDisplay?"showing":"hidden")},t.setSubtitleTrack=function(e,t){var n,i,r,a,o,u=this.tracksInGroup;this.media?(this.trackId!==e&&this.toggleTrackModes(e),this.trackId===e&&(-1===e||null!=(n=u[e])&&n.details)||e<-1||e>=u.length||(this.clearTimer(),n=u[e],this.log("Switching to subtitle track "+e),this.trackId=e,n?(u=n.id,i=n.groupId,r=n.name,a=n.type,o=n.url,this.hls.trigger(s.a.SUBTITLE_TRACK_SWITCH,{id:u,groupId:void 0===i?"":i,name:r,type:a,url:o}),u=this.switchParams(n.url,null==t?void 0:t.details),this.loadPlaylist(u)):this.hls.trigger(s.a.SUBTITLE_TRACK_SWITCH,{id:e}))):this.queuedDefaultTrack=e},t.onTextTracksChanged=function(){if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),this.media&&this.hls.config.renderTextTracksNatively){for(var e=-1,t=Vt(this.media.textTracks),n=0;n<t.length;n++)if("hidden"===t[n].mode)e=n;else if("showing"===t[n].mode){e=n;break}this.subtitleTrack!==e&&(this.subtitleTrack=e)}},function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}((Xt=sn).prototype,[{key:"subtitleDisplay",get:function(){return this._subtitleDisplay},set:function(e){this._subtitleDisplay=e,-1<this.trackId&&this.toggleTrackModes(this.trackId)}},{key:"subtitleTracks",get:function(){return this.tracksInGroup}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(e){this.selectDefaultTrack=!1;var t=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0;this.setSubtitleTrack(e,t)}}]),Object.defineProperty(Xt,"prototype",{writable:!1});t=sn;var Kt,qt,zt=((Xt=an.prototype).append=function(e,t){var n=this.queues[t];n.push(e),1===n.length&&this.buffers[t]&&this.executeNext(t)},Xt.insertAbort=function(e,t){this.queues[t].unshift(e),this.executeNext(t)},Xt.appendBlocker=function(e){var t,n=new Promise((function(e){t=e})),i={execute:t,onStart:function(){},onComplete:function(){},onError:function(){}};return this.append(i,e),n},Xt.executeNext=function(e){var t=this.buffers,n=this.queues,i=t[e];if((n=n[e]).length){var r=n[0];try{r.execute()}catch(t){u.b.warn("[buffer-operation-queue]: Unhandled exception executing the current operation"),r.onError(t),i&&i.updating||(n.shift(),this.executeNext(e))}}},Xt.shiftAndExecuteNext=function(e){this.queues[e].shift(),this.executeNext(e)},Xt.current=function(e){return this.queues[e][0]},an),Wt=ot(),Yt=/([ha]vc.)(?:\.[^.,]+)+/,Xt=((Xt=rn.prototype).hasSourceTypes=function(){return 0<this.getSourceBufferTypes().length||0<Object.keys(this.pendingTracks).length},Xt.destroy=function(){this.unregisterListeners(),this.details=null},Xt.registerListeners=function(){var e=this.hls;e.on(s.a.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(s.a.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(s.a.MANIFEST_PARSED,this.onManifestParsed,this),e.on(s.a.BUFFER_RESET,this.onBufferReset,this),e.on(s.a.BUFFER_APPENDING,this.onBufferAppending,this),e.on(s.a.BUFFER_CODECS,this.onBufferCodecs,this),e.on(s.a.BUFFER_EOS,this.onBufferEos,this),e.on(s.a.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(s.a.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(s.a.FRAG_PARSED,this.onFragParsed,this),e.on(s.a.FRAG_CHANGED,this.onFragChanged,this)},Xt.unregisterListeners=function(){var e=this.hls;e.off(s.a.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(s.a.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(s.a.MANIFEST_PARSED,this.onManifestParsed,this),e.off(s.a.BUFFER_RESET,this.onBufferReset,this),e.off(s.a.BUFFER_APPENDING,this.onBufferAppending,this),e.off(s.a.BUFFER_CODECS,this.onBufferCodecs,this),e.off(s.a.BUFFER_EOS,this.onBufferEos,this),e.off(s.a.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(s.a.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(s.a.FRAG_PARSED,this.onFragParsed,this),e.off(s.a.FRAG_CHANGED,this.onFragChanged,this)},Xt._initSourceBuffer=function(){this.sourceBuffer={},this.operationQueue=new zt(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]}},Xt.onManifestParsed=function(e,t){var n=2;(!t.audio||t.video)&&t.altAudio||(n=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=n,this.details=null,u.b.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},Xt.onMediaAttaching=function(e,t){var n;(t=this.media=t.media)&&Wt&&((n=this.mediaSource=new Wt).addEventListener("sourceopen",this._onMediaSourceOpen),n.addEventListener("sourceended",this._onMediaSourceEnded),n.addEventListener("sourceclose",this._onMediaSourceClose),t.src=self.URL.createObjectURL(n),this._objectUrl=t.src)},Xt.onMediaDetaching=function(){var e=this.media,t=this.mediaSource,n=this._objectUrl;if(t){if(u.b.log("[buffer-controller]: media source detaching"),"open"===t.readyState)try{t.endOfStream()}catch(e){u.b.warn("[buffer-controller]: onMediaDetaching: "+e.message+" while calling endOfStream")}this.onBufferReset(),t.removeEventListener("sourceopen",this._onMediaSourceOpen),t.removeEventListener("sourceended",this._onMediaSourceEnded),t.removeEventListener("sourceclose",this._onMediaSourceClose),e&&(n&&self.URL.revokeObjectURL(n),e.src===n?(e.removeAttribute("src"),e.load()):u.b.warn("[buffer-controller]: media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(s.a.MEDIA_DETACHED,void 0)},Xt.onBufferReset=function(){var e=this;this.getSourceBufferTypes().forEach((function(t){var n=e.sourceBuffer[t];try{n&&(e.removeBufferListeners(t),e.mediaSource&&e.mediaSource.removeSourceBuffer(n),e.sourceBuffer[t]=void 0)}catch(e){u.b.warn("[buffer-controller]: Failed to reset the "+t+" buffer",e)}})),this._initSourceBuffer()},Xt.onBufferCodecs=function(e,t){var n=this,i=this.getSourceBufferTypes().length;Object.keys(t).forEach((function(e){var r,a,s,o,l,c,d,h;i?(r=n.tracks[e])&&"function"==typeof r.buffer.changeType&&(a=(c=t[e]).id,s=c.codec,o=c.levelCodec,l=c.container,c=c.metadata,(d=(r.levelCodec||r.codec).replace(Yt,"$1"))!==(h=(o||s).replace(Yt,"$1")))&&(n.appendChangeType(e,l+";codecs="+(o||s)),u.b.log("[buffer-controller]: switching codec "+d+" to "+h),n.tracks[e]={buffer:r.buffer,codec:s,container:l,levelCodec:o,metadata:c,id:a}):n.pendingTracks[e]=t[e]})),i||(this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())},Xt.appendChangeType=function(e,t){var n=this,i=this.operationQueue;i.append({execute:function(){var r=n.sourceBuffer[e];r&&(u.b.log("[buffer-controller]: changing "+e+" sourceBuffer type to "+t),r.changeType(t)),i.shiftAndExecuteNext(e)},onStart:function(){},onComplete:function(){},onError:function(t){u.b.warn("[buffer-controller]: Failed to change "+e+" SourceBuffer type",t)}},e)},Xt.onBufferAppending=function(e,t){var n=this,i=this.hls,r=this.operationQueue,a=this.tracks,l=t.data,c=t.type,d=t.frag,h=t.part,f=t.chunkMeta,g=f.buffering[c],p=(t=self.performance.now(),g.start=t,d.stats.buffering),m=h?h.stats.buffering:null,v=(t=(0===p.start&&(p.start=t),m&&0===m.start&&(m.start=t),a.audio),"audio"===c&&1===f.id&&"audio/mpeg"===(null==t?void 0:t.container));r.append({execute:function(){var e,t;g.executeStart=self.performance.now(),v&&(e=n.sourceBuffer[c])&&(t=d.start-e.timestampOffset,.1<=Math.abs(t))&&(u.b.log("[buffer-controller]: Updating audio SourceBuffer timestampOffset to "+d.start+" (delta: "+t+") sn: "+d.sn+")"),e.timestampOffset=d.start),n.appendExecutor(l,c)},onStart:function(){},onComplete:function(){var e,t=self.performance.now(),i=(g.executeEnd=g.end=t,0===p.first&&(p.first=t),m&&0===m.first&&(m.first=t),n.sourceBuffer),r={};for(e in i)r[e]=we.getBuffered(i[e]);n.appendError=0,n.hls.trigger(s.a.BUFFER_APPENDED,{type:c,frag:d,part:h,chunkMeta:f,parent:d.type,timeRanges:r})},onError:function(e){u.b.error("[buffer-controller]: Error encountered while trying to append to the "+c+" SourceBuffer",e);var t={type:o.b.MEDIA_ERROR,parent:d.type,details:o.a.BUFFER_APPEND_ERROR,err:e,fatal:!1};e.code===DOMException.QUOTA_EXCEEDED_ERR?t.details=o.a.BUFFER_FULL_ERROR:(n.appendError++,t.details=o.a.BUFFER_APPEND_ERROR,n.appendError>i.config.appendErrorMaxRetry&&(u.b.error("[buffer-controller]: Failed "+i.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),t.fatal=!0,i.stopLoad())),i.trigger(s.a.ERROR,t)}},c)},Xt.onBufferFlushing=function(e,t){var n=this,i=this.operationQueue,r=function(e){return{execute:n.removeExecutor.bind(n,e,t.startOffset,t.endOffset),onStart:function(){},onComplete:function(){n.hls.trigger(s.a.BUFFER_FLUSHED,{type:e})},onError:function(t){u.b.warn("[buffer-controller]: Failed to remove from "+e+" SourceBuffer",t)}}};t.type?i.append(r(t.type),t.type):this.getSourceBufferTypes().forEach((function(e){i.append(r(e),e)}))},Xt.onFragParsed=function(e,t){var n=this,i=t.frag,r=t.part,a=(t=[],(r||i).elementaryStreams);a[m.a.AUDIOVIDEO]?t.push("audiovideo"):(a[m.a.AUDIO]&&t.push("audio"),a[m.a.VIDEO]&&t.push("video")),0===t.length&&u.b.warn("Fragments must have at least one ElementaryStreamType set. type: "+i.type+" level: "+i.level+" sn: "+i.sn),this.blockBuffers((function(){var e=self.performance.now();i.stats.buffering.end=e,r&&(r.stats.buffering.end=e),e=(r||i).stats;n.hls.trigger(s.a.FRAG_BUFFERED,{frag:i,part:r,stats:e,id:i.type})}),t)},Xt.onFragChanged=function(e,t){this.flushBackBuffer()},Xt.onBufferEos=function(e,t){var n=this;this.getSourceBufferTypes().reduce((function(e,i){var r=n.sourceBuffer[i];return t.type&&t.type!==i||r&&!r.ended&&(r.ended=!0,u.b.log("[buffer-controller]: "+i+" sourceBuffer now EOS")),e&&!(r&&!r.ended)}),!0)&&this.blockBuffers((function(){var e=n.mediaSource;e&&"open"===e.readyState&&e.endOfStream()}))},Xt.onLevelUpdated=function(e,t){(t=t.details).fragments.length&&(this.details=t,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())},Xt.flushBackBuffer=function(){var e,t,n,i,r=this.hls,o=this.details,u=this.media,l=this.sourceBuffer;u&&null!==o&&(e=this.getSourceBufferTypes()).length&&(n=o.live&&null!==r.config.liveBackBufferLength?r.config.liveBackBufferLength:r.config.backBufferLength,!Object(a.a)(n)||n<0||(u=u.currentTime,t=o.levelTargetDuration,n=Math.max(n,t),i=Math.floor(u/t)*t-n,e.forEach((function(e){var t=l[e];t&&0<(t=we.getBuffered(t)).length&&i>t.start(0)&&(r.trigger(s.a.BACK_BUFFER_REACHED,{bufferEnd:i}),o.live&&r.trigger(s.a.LIVE_BACK_BUFFER_REACHED,{bufferEnd:i}),r.trigger(s.a.BUFFER_FLUSHING,{startOffset:0,endOffset:i,type:e}))}))))},Xt.updateMediaElementDuration=function(){var e,t,n,i,r,s;this.details&&this.media&&this.mediaSource&&"open"===this.mediaSource.readyState&&(e=this.details,t=this.hls,r=this.media,n=this.mediaSource,i=e.fragments[0].start+e.totalduration,r=r.duration,s=Object(a.a)(n.duration)?n.duration:0,e.live&&t.config.liveDurationInfinity?(u.b.log("[buffer-controller]: Media Source duration is set to Infinity"),n.duration=1/0,this.updateSeekableRange(e)):(s<i&&r<i||!Object(a.a)(r))&&(u.b.log("[buffer-controller]: Updating Media Source duration to "+i.toFixed(3)),n.duration=i))},Xt.updateSeekableRange=function(e){var t=this.mediaSource,n=e.fragments;n.length&&e.live&&null!=t&&t.setLiveSeekableRange&&(n=Math.max(0,n[0].start),e=Math.max(n,n+e.totalduration),t.setLiveSeekableRange(n,e))},Xt.checkPendingTracks=function(){var e=this.bufferCodecEventsExpected,t=this.operationQueue,n=this.pendingTracks,i=Object.keys(n).length;(i&&!e||2===i)&&(this.createSourceBuffers(n),this.pendingTracks={},0===(e=this.getSourceBufferTypes()).length?this.hls.trigger(s.a.ERROR,{type:o.b.MEDIA_ERROR,details:o.a.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,reason:"could not create source buffer for media codec(s)"}):e.forEach((function(e){t.executeNext(e)})))},Xt.createSourceBuffers=function(e){var t=this.sourceBuffer,n=this.mediaSource;if(!n)throw Error("createSourceBuffers called when mediaSource was null");var i,r=0;for(i in e)if(!t[i]){var a=e[i];if(!a)throw Error("source buffer exists for track "+i+", however track does not");var l=a.levelCodec||a.codec,c=a.container+";codecs="+l;u.b.log("[buffer-controller]: creating sourceBuffer("+c+")");try{var d=t[i]=n.addSourceBuffer(c),h=i;this.addBufferListener(h,"updatestart",this._onSBUpdateStart),this.addBufferListener(h,"updateend",this._onSBUpdateEnd),this.addBufferListener(h,"error",this._onSBUpdateError),this.tracks[i]={buffer:d,codec:l,container:a.container,levelCodec:a.levelCodec,metadata:a.metadata,id:a.id},r++}catch(e){u.b.error("[buffer-controller]: error while trying to add sourceBuffer: "+e.message),this.hls.trigger(s.a.ERROR,{type:o.b.MEDIA_ERROR,details:o.a.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:e,mimeType:c})}}r&&this.hls.trigger(s.a.BUFFER_CREATED,{tracks:this.tracks})},Xt._onSBUpdateStart=function(e){this.operationQueue.current(e).onStart()},Xt._onSBUpdateEnd=function(e){var t=this.operationQueue;t.current(e).onComplete(),t.shiftAndExecuteNext(e)},Xt._onSBUpdateError=function(e,t){u.b.error("[buffer-controller]: "+e+" SourceBuffer error",t),this.hls.trigger(s.a.ERROR,{type:o.b.MEDIA_ERROR,details:o.a.BUFFER_APPENDING_ERROR,fatal:!1}),(e=this.operationQueue.current(e))&&e.onError(t)},Xt.removeExecutor=function(e,t,n){var i=this.media,r=this.mediaSource,s=this.operationQueue,o=this.sourceBuffer[e];i&&r&&o?(i=Object(a.a)(i.duration)?i.duration:1/0,r=Object(a.a)(r.duration)?r.duration:1/0,(t=Math.max(0,t))<(n=Math.min(n,i,r))?(u.b.log("[buffer-controller]: Removing ["+t+","+n+"] from the "+e+" SourceBuffer"),o.remove(t,n)):s.shiftAndExecuteNext(e)):(u.b.warn("[buffer-controller]: Attempting to remove from the "+e+" SourceBuffer, but it does not exist"),s.shiftAndExecuteNext(e))},Xt.appendExecutor=function(e,t){var n=this.operationQueue,i=this.sourceBuffer[t];i?(i.ended=!1,i.appendBuffer(e)):(u.b.warn("[buffer-controller]: Attempting to append to the "+t+" SourceBuffer, but it does not exist"),n.shiftAndExecuteNext(t))},Xt.blockBuffers=function(e,t){var n,i,r=this;(t=void 0===t?this.getSourceBufferTypes():t).length?(n=this.operationQueue,i=t.map((function(e){return n.appendBlocker(e)})),Promise.all(i).then((function(){e(),t.forEach((function(e){var t=r.sourceBuffer[e];t&&t.updating||n.shiftAndExecuteNext(e)}))}))):(u.b.log("[buffer-controller]: Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(e))},Xt.getSourceBufferTypes=function(){return Object.keys(this.sourceBuffer)},Xt.addBufferListener=function(e,t,n){var i=this.sourceBuffer[e];i&&(n=n.bind(this,e),this.listeners[e].push({event:t,listener:n}),i.addEventListener(t,n))},Xt.removeBufferListeners=function(e){var t=this.sourceBuffer[e];t&&this.listeners[e].forEach((function(e){t.removeEventListener(e.event,e.listener)}))},rn),Qt={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},$t=function(e){var t=e;return Qt.hasOwnProperty(e)&&(t=Qt[e]),String.fromCharCode(t)},Zt={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},Jt={17:2,18:4,21:6,22:8,23:10,19:13,20:15},en={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},tn={25:2,26:4,29:6,30:8,31:10,27:13,28:15},nn=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];function rn(e){var t=this;this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.appendError=0,this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this._onMediaSourceOpen=function(){var e=t.hls,n=t.media,i=t.mediaSource;u.b.log("[buffer-controller]: Media source opened"),n&&(t.updateMediaElementDuration(),e.trigger(s.a.MEDIA_ATTACHED,{media:n})),i&&i.removeEventListener("sourceopen",t._onMediaSourceOpen),t.checkPendingTracks()},this._onMediaSourceClose=function(){u.b.log("[buffer-controller]: Media source closed")},this._onMediaSourceEnded=function(){u.b.log("[buffer-controller]: Media source ended")},this.hls=e,this._initSourceBuffer(),this.registerListeners()}function an(e){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=e}function sn(e){var t;return(t=qt.call(this,e,"[subtitle-track-controller]")||this).media=null,t.tracks=[],t.groupId=null,t.tracksInGroup=[],t.trackId=-1,t.selectDefaultTrack=!0,t.queuedDefaultTrack=-1,t.trackChangeListener=function(){return t.onTextTracksChanged()},t.asyncPollTrackChange=function(){return t.pollTrackChange(0)},t.useTextTrackPolling=!1,t.subtitlePollingInterval=-1,t._subtitleDisplay=!0,t.registerListeners(),t}(si=Kt=Kt||{})[si.ERROR=0]="ERROR",si[si.TEXT=1]="TEXT",si[si.WARNING=2]="WARNING",si[si.INFO=2]="INFO",si[si.DEBUG=3]="DEBUG",si[si.DATA=3]="DATA",bn.prototype.log=function(e,t){this.verboseLevel>=e&&u.b.log(this.time+" ["+e+"] "+t)};var on=bn,un=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].toString(16));return t},ln=((si=yn.prototype).reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},si.setStyles=function(e){for(var t=["foreground","underline","italics","background","flash"],n=0;n<t.length;n++){var i=t[n];e.hasOwnProperty(i)&&(this[i]=e[i])}},si.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},si.equals=function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},si.copy=function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},si.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},yn),cn=((si=vn.prototype).reset=function(){this.uchar=" ",this.penState.reset()},si.setChar=function(e,t){this.uchar=e,this.penState.copy(t)},si.setPenState=function(e){this.penState.copy(e)},si.equals=function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},si.copy=function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},si.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},vn),dn=((si=mn.prototype).equals=function(e){for(var t=!0,n=0;n<100;n++)if(!this.chars[n].equals(e.chars[n])){t=!1;break}return t},si.copy=function(e){for(var t=0;t<100;t++)this.chars[t].copy(e.chars[t])},si.isEmpty=function(){for(var e=!0,t=0;t<100;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},si.setCursor=function(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(Kt.DEBUG,"Negative cursor position "+this.pos),this.pos=0):100<this.pos&&(this.logger.log(Kt.DEBUG,"Too large cursor position "+this.pos),this.pos=100)},si.moveCursor=function(e){var t=this.pos+e;if(1<e)for(var n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)},si.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},si.insertChar=function(e){144<=e&&this.backSpace();var t=$t(e);100<=this.pos?this.logger.log(Kt.ERROR,"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))},si.clearFromPos=function(e){for(var t=e;t<100;t++)this.chars[t].reset()},si.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},si.clearToEndOfRow=function(){this.clearFromPos(this.pos)},si.getTextString=function(){for(var e=[],t=!0,n=0;n<100;n++){var i=this.chars[n].uchar;" "!==i&&(t=!1),e.push(i)}return t?"":e.join("")},si.setPenStyles=function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)},mn),hn=((si=pn.prototype).reset=function(){for(var e=0;e<15;e++)this.rows[e].clear();this.currRow=14},si.equals=function(e){for(var t=!0,n=0;n<15;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t},si.copy=function(e){for(var t=0;t<15;t++)this.rows[t].copy(e.rows[t])},si.isEmpty=function(){for(var e=!0,t=0;t<15;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},si.backSpace=function(){this.rows[this.currRow].backSpace()},si.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},si.insertChar=function(e){this.rows[this.currRow].insertChar(e)},si.setPen=function(e){this.rows[this.currRow].setPenStyles(e)},si.moveCursor=function(e){this.rows[this.currRow].moveCursor(e)},si.setCursor=function(e){this.logger.log(Kt.INFO,"setCursor: "+e),this.rows[this.currRow].setCursor(e)},si.setPAC=function(e){this.logger.log(Kt.INFO,"pacData = "+JSON.stringify(e));var t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(var n=0;n<15;n++)this.rows[n].clear();var i=this.currRow+1-this.nrRollUpRows,r=this.lastOutputScreen;if(r){var a=r.rows[i].cueStartTime,s=this.logger.time;if(a&&null!==s&&a<s)for(var o=0;o<this.nrRollUpRows;o++)this.rows[t-this.nrRollUpRows+o+1].copy(r.rows[i+o])}}this.currRow=t,a=this.rows[this.currRow],null!==e.indent&&(s=e.indent,s=Math.max(s-1,0),a.setCursor(e.indent),e.color=a.chars[s].penState.foreground),s={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1},this.setPen(s)},si.setBkgData=function(e){this.logger.log(Kt.INFO,"bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},si.setRollUpRows=function(e){this.nrRollUpRows=e},si.rollUp=function(){var e;null!==this.nrRollUpRows?(this.logger.log(Kt.TEXT,this.getDisplayText()),e=this.currRow+1-this.nrRollUpRows,(e=this.rows.splice(e,1)[0]).clear(),this.rows.splice(this.currRow,0,e),this.logger.log(Kt.INFO,"Rolling up")):this.logger.log(Kt.DEBUG,"roll_up but nrRollUpRows not set yet")},si.getDisplayText=function(e){e=e||!1;for(var t=[],n="",i=0;i<15;i++){var r=this.rows[i].getTextString();r&&t.push(e?"Row "+(i+1)+": '"+r+"'":r.trim())}return 0<t.length?e?"["+t.join(" | ")+"]":t.join("\n"):n},si.getTextAndFormat=function(){return this.rows},pn),fn=((si=gn.prototype).reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},si.getHandler=function(){return this.outputFilter},si.setHandler=function(e){this.outputFilter=e},si.setPAC=function(e){this.writeScreen.setPAC(e)},si.setBkgData=function(e){this.writeScreen.setBkgData(e)},si.setMode=function(e){e!==this.mode&&(this.mode=e,this.logger.log(Kt.INFO,"MODE="+e),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},si.insertChars=function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(Kt.INFO,n+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(this.logger.log(Kt.TEXT,"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},si.ccRCL=function(){this.logger.log(Kt.INFO,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},si.ccBS=function(){this.logger.log(Kt.INFO,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory)&&this.outputDataUpdate()},si.ccAOF=function(){},si.ccAON=function(){},si.ccDER=function(){this.logger.log(Kt.INFO,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},si.ccRU=function(e){this.logger.log(Kt.INFO,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},si.ccFON=function(){this.logger.log(Kt.INFO,"FON - Flash On"),this.writeScreen.setPen({flash:!0})},si.ccRDC=function(){this.logger.log(Kt.INFO,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},si.ccTR=function(){this.logger.log(Kt.INFO,"TR"),this.setMode("MODE_TEXT")},si.ccRTD=function(){this.logger.log(Kt.INFO,"RTD"),this.setMode("MODE_TEXT")},si.ccEDM=function(){this.logger.log(Kt.INFO,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},si.ccCR=function(){this.logger.log(Kt.INFO,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},si.ccENM=function(){this.logger.log(Kt.INFO,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},si.ccEOC=function(){var e;this.logger.log(Kt.INFO,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode&&(e=this.displayedMemory,this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(Kt.TEXT,"DISP: "+this.displayedMemory.getDisplayText())),this.outputDataUpdate(!0)},si.ccTO=function(e){this.logger.log(Kt.INFO,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},si.ccMIDROW=function(e){var t={flash:!1};t.underline=e%2==1,t.italics=46<=e,t.italics?t.foreground="white":(e=Math.floor(e/2)-16,t.foreground=["white","green","blue","cyan","red","yellow","magenta"][e]),this.logger.log(Kt.INFO,"MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},si.outputDataUpdate=function(e){void 0===e&&(e=!1);var t=this.logger.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))},si.cueSplitAtTime=function(e){!this.outputFilter||this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e)},gn);function gn(e,t,n){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new hn(n),this.nonDisplayedMemory=new hn(n),this.lastOutputScreen=new hn(n),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=n}function pn(e){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(var t=0;t<15;t++)this.rows.push(new dn(e));this.logger=e,this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}function mn(e){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(var t=0;t<100;t++)this.chars.push(new cn);this.logger=e,this.pos=0,this.currPenState=new ln}function vn(e,t,n,i,r,a){this.uchar=void 0,this.penState=void 0,this.uchar=e||" ",this.penState=new ln(t,n,i,r,a)}function yn(e,t,n,i,r){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=e||"white",this.underline=t||!1,this.italics=n||!1,this.background=i||"black",this.flash=r||!1}function bn(){this.time=null,this.verboseLevel=Kt.ERROR}function An(e,t,n){n.a=e,n.b=t}function En(e,t,n){return n.a===e&&n.b===t}(si=On.prototype).getHandler=function(e){return this.channels[e].getHandler()},si.setHandler=function(e,t){this.channels[e].setHandler(t)},si.addData=function(e,t){var n,i=!1;this.logger.time=e;for(var r=0;r<t.length;r+=2){var a,s=127&t[r],o=127&t[r+1];0==s&&0==o||(this.logger.log(Kt.DATA,"["+un([t[r],t[r+1]])+"] -> ("+un([s,o])+")"),!(n=(n=(n=(n=this.parseCmd(s,o))||this.parseMidrow(s,o))||this.parsePAC(s,o))||this.parseBackgroundAttributes(s,o))&&(i=this.parseChars(s,o))&&((a=this.currentChannel)&&0<a?this.channels[a].insertChars(i):this.logger.log(Kt.WARNING,"No channel found yet. TEXT-MODE?")),n)||i||this.logger.log(Kt.WARNING,"Couldn't parse cleaned data "+un([s,o])+" orig: "+un([t[r],t[r+1]]))}},si.parseCmd=function(e,t){var n,i,r=this.cmdHistory;return((20===e||28===e||21===e||29===e)&&32<=t&&t<=47||(23===e||31===e)&&33<=t&&t<=35)&&(En(e,t,r)?(An(null,null,r),this.logger.log(Kt.DEBUG,"Repeated command ("+un([e,t])+") is dropped")):(i=this.channels[n=20===e||21===e||23===e?1:2],20===e||21===e||28===e||29===e?32===t?i.ccRCL():33===t?i.ccBS():34===t?i.ccAOF():35===t?i.ccAON():36===t?i.ccDER():37===t?i.ccRU(2):38===t?i.ccRU(3):39===t?i.ccRU(4):40===t?i.ccFON():41===t?i.ccRDC():42===t?i.ccTR():43===t?i.ccRTD():44===t?i.ccEDM():45===t?i.ccCR():46===t?i.ccENM():47===t&&i.ccEOC():i.ccTO(t-32),An(e,t,r),this.currentChannel=n),!0)},si.parseMidrow=function(e,t){var n;return(17===e||25===e)&&32<=t&&t<=47&&((n=17===e?1:2)!==this.currentChannel?(this.logger.log(Kt.ERROR,"Mismatch channel in midrow parsing"),!1):!!(n=this.channels[n])&&(n.ccMIDROW(t),this.logger.log(Kt.DEBUG,"MIDROW ("+un([e,t])+")"),!0))},si.parsePAC=function(e,t){var n,i,r=this.cmdHistory;return((17<=e&&e<=23||25<=e&&e<=31)&&64<=t&&t<=127||(16===e||24===e)&&64<=t&&t<=95)&&(En(e,t,r)?(An(null,null,r),!0):!!(i=this.channels[n=e<=23?1:2])&&(i.setPAC(this.interpretPAC((64<=t&&t<=95?1==n?Zt:en:1==n?Jt:tn)[e],t)),An(e,t,r),this.currentChannel=n,!0))},si.interpretPAC=function(e,t){return(e={color:null,italics:!1,indent:null,underline:!1,row:e}).underline=1==(1&(t=95<t?t-96:t-64)),t<=13?e.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(t/2)]:t<=15?(e.italics=!0,e.color="white"):e.indent=4*Math.floor((t-16)/2),e},si.parseChars=function(e,t){var n,i=null,r=null;return 17<=(r=25<=e?(n=2,e-8):(n=1,e))&&r<=19?(this.logger.log(Kt.INFO,"Special char '"+$t(r=17===r?t+80:18===r?t+112:t+144)+"' in channel "+n),i=[r]):32<=e&&e<=127&&(i=0===t?[e]:[e,t]),i&&(n=un(i),this.logger.log(Kt.DEBUG,"Char codes =  "+n.join(",")),An(e,t,this.cmdHistory)),i},si.parseBackgroundAttributes=function(e,t){var n,i;return((16===e||24===e)&&32<=t&&t<=47||(23===e||31===e)&&45<=t&&t<=47)&&(i={},16===e||24===e?(n=Math.floor((t-32)/2),i.background=nn[n],t%2==1&&(i.background=i.background+"_semi")):45===t?i.background="transparent":(i.foreground="black",47===t&&(i.underline=!0)),this.channels[e<=23?1:2].setBkgData(i),An(e,t,this.cmdHistory),!0)},si.reset=function(){for(var e=0;e<Object.keys(this.channels).length;e++){var t=this.channels[e];t&&t.reset()}this.cmdHistory={a:null,b:null}},si.cueSplitAtTime=function(e){for(var t=0;t<this.channels.length;t++){var n=this.channels[t];n&&n.cueSplitAtTime(e)}};var Tn,wn,Sn=On,Cn=((si=Mn.prototype).dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},si.newCue=function(e,t,n){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=n,this.timelineController.createCaptionsTrack(this.trackName)},si.reset=function(){this.cueRanges=[],this.startTime=null},Mn),xn="undefined"!=typeof self&&self.VTTCue?self.VTTCue:(Tn=["","lr","rl"],wn=["start","middle","end","left","right"],_n.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},_n),kn=(In.prototype.decode=function(e,t){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))},In);function In(){}function Ln(e,t){return"string"==typeof t&&!!Array.isArray(e)&&(t=t.toLowerCase(),!!~e.indexOf(t))&&t}function Rn(e){return Ln(wn,e)}function Dn(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(var r=1;r<arguments.length;r++){var a,s=arguments[r];for(a in s)e[a]=s[a]}return e}function _n(e,t,n){var i=this,r={enumerable:!0},a=(i.hasBeenReset=!1,""),s=!1,o=e,u=t,l=n,c=null,d="",h=!0,f="auto",g="start",p=50,m="middle",v=50,y="middle";Object.defineProperty(i,"id",Dn({},r,{get:function(){return a},set:function(e){a=""+e}})),Object.defineProperty(i,"pauseOnExit",Dn({},r,{get:function(){return s},set:function(e){s=!!e}})),Object.defineProperty(i,"startTime",Dn({},r,{get:function(){return o},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");o=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"endTime",Dn({},r,{get:function(){return u},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");u=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"text",Dn({},r,{get:function(){return l},set:function(e){l=""+e,this.hasBeenReset=!0}})),Object.defineProperty(i,"region",Dn({},r,{get:function(){return c},set:function(e){c=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"vertical",Dn({},r,{get:function(){return d},set:function(e){if(!1===(e=Ln(Tn,e)))throw new SyntaxError("An invalid or illegal string was specified.");d=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"snapToLines",Dn({},r,{get:function(){return h},set:function(e){h=!!e,this.hasBeenReset=!0}})),Object.defineProperty(i,"line",Dn({},r,{get:function(){return f},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");f=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"lineAlign",Dn({},r,{get:function(){return g},set:function(e){if(!(e=Rn(e)))throw new SyntaxError("An invalid or illegal string was specified.");g=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"position",Dn({},r,{get:function(){return p},set:function(e){if(e<0||100<e)throw new Error("Position must be between 0 and 100.");p=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"positionAlign",Dn({},r,{get:function(){return m},set:function(e){if(!(e=Rn(e)))throw new SyntaxError("An invalid or illegal string was specified.");m=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"size",Dn({},r,{get:function(){return v},set:function(e){if(e<0||100<e)throw new Error("Size must be between 0 and 100.");v=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"align",Dn({},r,{get:function(){return y},set:function(e){if(!(e=Rn(e)))throw new SyntaxError("An invalid or illegal string was specified.");y=e,this.hasBeenReset=!0}})),i.displayState=void 0}function Mn(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}function On(e,t,n){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;var i=new on;this.channels=[null,new fn(e,t,i),new fn(e+1,n,i)],this.cmdHistory={a:null,b:null},this.logger=i}function Pn(e){function t(e,t,n,i){return 3600*(0|e)+60*(0|t)+(0|n)+parseFloat(i||0)}return(e=e.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/))?59<parseFloat(e[2])?t(e[2],e[3],0,e[4]):t(e[1],e[2],e[3],e[4]):null}(si=Bn.prototype).set=function(e,t){this.get(e)||""===t||(this.values[e]=t)},si.get=function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},si.has=function(e){return e in this.values},si.alt=function(e,t,n){for(var i=0;i<n.length;++i)if(t===n[i]){this.set(e,t);break}},si.integer=function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},si.percent=function(e,t){return!!(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)&&0<=(t=parseFloat(t))&&t<=100)&&(this.set(e,t),!0)};var Nn=Bn;function Bn(){this.values=Object.create(null)}function Fn(e,t,n,i){var r,a,s=i?e.split(i):[e];for(r in s)"string"==typeof s[r]&&2===(a=s[r].split(n)).length&&t(a[0],a[1])}var Un=new xn(0,0,""),jn="middle"===Un.align?"middle":"center";function Gn(e){return e.replace(/<br(?: \/)?>/gi,"\n")}(si=Yn.prototype).parse=function(e){var t=this;function n(){for(var e=0,n=Gn(n=t.buffer);e<n.length&&"\r"!==n[e]&&"\n"!==n[e];)++e;var i=n.slice(0,e);return"\r"===n[e]&&++e,"\n"===n[e]&&++e,t.buffer=n.slice(e),i}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{var i="";if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;var r=(i=n()).match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!r||!r[0])throw new Error("Malformed WebVTT signature.");t.state="HEADER"}for(var a=!1;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(a?a=!1:i=n(),t.state){case"HEADER":/:/.test(i)?Fn(i,(function(e,t){}),/:/):i||(t.state="ID");continue;case"NOTE":i||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){t.state="NOTE";break}if(!i)continue;if(t.cue=new xn(0,0,""),t.state="CUE",-1===i.indexOf("--\x3e")){t.cue.id=i;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}try{!function(e,t,n){var i,r,a=e;function s(){var t=Pn(e);if(null===t)throw new Error("Malformed timestamp: "+a);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function o(){e=e.replace(/^\s+/,"")}if(o(),t.startTime=s(),o(),"--\x3e"!==e.slice(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+a);e=e.slice(3),o(),t.endTime=s(),o(),i=e,t=t,r=new Nn,Fn(i,(function(e,t){var i;switch(e){case"region":for(var a=n.length-1;0<=a;a--)if(n[a].id===t){r.set(e,n[a].region);break}break;case"vertical":r.alt(e,t,["rl","lr"]);break;case"line":i=t.split(","),r.integer(e,i[0]),r.percent(e,i[0])&&r.set("snapToLines",!1),r.alt(e,i[0],["auto"]),2===i.length&&r.alt("lineAlign",i[1],["start",jn,"end"]);break;case"position":i=t.split(","),r.percent(e,i[0]),2===i.length&&r.alt("positionAlign",i[1],["start",jn,"end","line-left","line-right","auto"]);break;case"size":r.percent(e,t);break;case"align":r.alt(e,t,["start",jn,"end","left","right"])}}),/:/,/\s/),t.region=r.get("region",null),t.vertical=r.get("vertical",""),"auto"===(i=r.get("line","auto"))&&-1===Un.line&&(i=-1),t.line=i,t.lineAlign=r.get("lineAlign","start"),t.snapToLines=r.get("snapToLines",!0),t.size=r.get("size",100),t.align=r.get("align",jn),"auto"===(i=r.get("position","auto"))&&50===Un.position&&(i="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=i}(i,t.cue,t.regionList)}catch(e){t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var s=-1!==i.indexOf("--\x3e");if(!i||s&&(a=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(null===t.cue)continue;t.cue.text&&(t.cue.text+="\n"),t.cue.text+=i;continue;case"BADCUE":i||(t.state="ID")}}}catch(e){"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this},si.flush=function(){try{if(!this.cue&&"HEADER"!==this.state||(this.buffer+="\n\n",this.parse()),"INITIAL"===this.state||"BADWEBVTT"===this.state)throw new Error("Malformed WebVTT signature.")}catch(e){this.onparsingerror&&this.onparsingerror(e)}return this.onflush&&this.onflush(),this};var Hn=Yn,Vn=n(11),Kn=n(13),qn=/\r\n|\n\r|\n|\r/g,zn=function(e,t,n){return e.slice(n=void 0===n?0:n,n+t.length)===t},Wn=function(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return(t>>>0).toString()};function Yn(){this.state="INITIAL",this.buffer="",this.decoder=new kn,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}function Xn(e,t,n){return Wn(e.toString())+Wn(t.toString())+Wn(n)}function Qn(){return(Qn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n,i=arguments[t];for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}var $n=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,Zn=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,Jn={left:"start",center:"center",right:"end",start:"start",end:"end"};function ei(e,t,n,i,r){if(0!==(a=Object(l.c)(new Uint8Array(e),["mdat"])).length){var a=a.map((function(e){return Object(V.f)(e)})),s=Object(Vn.c)(t,1,n);try{a.forEach((function(e){return i(function(e,t){var n,i,r,a,s,o=(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName("tt")[0];if(o)return n={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},i=Object.keys(n).reduce((function(e,t){return e[t]=o.getAttribute("ttp:"+t)||n[t],e}),{}),r="preserve"!==o.getAttribute("xml:space"),a=ni(ti(o,"styling","style")),s=ni(ti(o,"layout","region")),e=ti(o,"body","[begin]"),[].map.call(e,(function(e){var n=function e(t,n){return[].slice.call(t.childNodes).reduce((function(t,i,r){return"br"===i.nodeName&&r?t+"\n":null!=(r=i.childNodes)&&r.length?e(i,n):n?t+i.textContent.trim().replace(/\s+/g," "):t+i.textContent}),"")}(e,r);if(!n||!e.hasAttribute("begin"))return null;var o=ai(e.getAttribute("begin"),i),u=ai(e.getAttribute("dur"),i),l=ai(e.getAttribute("end"),i);if(null===o)throw ri(e);if(null===l){if(null===u)throw ri(e);l=o+u}var c,d,h,f;(u=new xn(o-t,l-t,n)).id=Xn(u.startTime,u.endTime,u.text),o=s[e.getAttribute("region")],l=a[e.getAttribute("style")],u.position=10,u.size=80,d=l,n=a,h="http://www.w3.org/ns/ttml#styling",(l=(f=null)!=(c=o)&&c.hasAttribute("style")?c.getAttribute("style"):null)&&n.hasOwnProperty(l)&&(f=n[l]),o=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"].reduce((function(e,t){var n=ii(d,h,t)||ii(c,h,t)||ii(f,h,t);return n&&(e[t]=n),e}),{});return(l=o.textAlign)&&((n=Jn[l])&&(u.lineAlign=n),u.align=l),Qn(u,o),u})).filter((function(e){return null!==e}));throw new Error("Invalid ttml")}(e,s))}))}catch(e){r(e)}}else r(new Error("Could not parse IMSC1 mdat"))}function ti(e,t,n){return(t=e.getElementsByTagName(t)[0])?[].slice.call(t.querySelectorAll(n)):[]}function ni(e){return e.reduce((function(e,t){var n=t.getAttribute("xml:id");return n&&(e[n]=t),e}),{})}function ii(e,t,n){return e&&e.hasAttributeNS(t,n)?e.getAttributeNS(t,n):null}function ri(e){return new Error("Could not parse ttml timestamp "+e)}function ai(e,t){var n,i,r,a;return e?(null===(n=Pn(e))&&($n.test(e)?(i=t,a=(0|(r=$n.exec(e))[4])+(0|r[5])/i.subFrameRate,n=3600*(0|r[1])+60*(0|r[2])+(0|r[3])+a/i.frameRate):Zn.test(e)&&(n=function(t){var n=Zn.exec(e),i=Number(n[1]);switch(n[2]){case"h":return 3600*i;case"m":return 60*i;case"ms":return 1e3*i;case"f":return i/t.frameRate;case"t":return i/t.tickRate}return i}(t))),n):null}(si=oi.prototype).destroy=function(){var e=this.hls;e.off(s.a.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(s.a.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(s.a.MANIFEST_LOADING,this.onManifestLoading,this),e.off(s.a.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(s.a.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(s.a.FRAG_LOADING,this.onFragLoading,this),e.off(s.a.FRAG_LOADED,this.onFragLoaded,this),e.off(s.a.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(s.a.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(s.a.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(s.a.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(s.a.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.cea608Parser1=this.cea608Parser2=null},si.addCues=function(e,t,n,i,r){for(var a,o,u,l=!1,c=r.length;c--;){var d=r[c],h=(a=d[0],h=d[1],o=t,Math.min(h,n)-Math.max(a,o));if(0<=h&&(d[0]=Math.min(d[0],t),d[1]=Math.max(d[1],n),l=!0,.5<h/(n-t)))return}l||r.push([t,n]),this.config.renderTextTracksNatively?(u=this.captionsTracks[e],this.Cues.newCue(u,t,n,i)):(u=this.Cues.newCue(null,t,n,i),this.hls.trigger(s.a.CUES_PARSED,{type:"captions",cues:u,track:e}))},si.onInitPtsFound=function(e,t){var n=this,i=t.frag,r=t.id,a=t.initPTS,o=(t=t.timescale,this.unparsedVttFrags);"main"===r&&(this.initPTS[i.cc]=a,this.timescale[i.cc]=t),o.length&&(this.unparsedVttFrags=[],o.forEach((function(e){n.onFragLoaded(s.a.FRAG_LOADED,e)})))},si.getExistingTrack=function(e){var t=this.media;if(t)for(var n=0;n<t.textTracks.length;n++){var i=t.textTracks[n];if(i[e])return i}return null},si.createCaptionsTrack=function(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)},si.createNativeTrack=function(e){var t,n,i,r,a;this.captionsTracks[e]||(r=this.captionsProperties,t=this.captionsTracks,n=this.media,i=(r=r[e]).label,r=r.languageCode,(a=this.getExistingTrack(e))?(t[e]=a,G(t[e]),U(t[e],n)):(a=this.createTextTrack("captions",i,r))&&(a[e]=!0,t[e]=a))},si.createNonNativeTrack=function(e){var t;this.nonNativeCaptionsTracks[e]||(t=this.captionsProperties[e])&&(t={_id:e,label:t.label,kind:"captions",default:!!t.media&&!!t.media.default,closedCaptions:t.media},this.nonNativeCaptionsTracks[e]=t,this.hls.trigger(s.a.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[t]}))},si.createTextTrack=function(e,t,n){var i=this.media;if(i)return i.addTextTrack(e,t,n)},si.onMediaAttaching=function(e,t){this.media=t.media,this._cleanTracks()},si.onMediaDetaching=function(){var e=this.captionsTracks;Object.keys(e).forEach((function(t){G(e[t]),delete e[t]})),this.nonNativeCaptionsTracks={}},si.onManifestLoading=function(){this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.timescale=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())},si._cleanTracks=function(){var e=this.media;if(e){var t=e.textTracks;if(t)for(var n=0;n<t.length;n++)G(t[n])}},si.onSubtitleTracksUpdated=function(e,t){var n,i=this,r=(t=(this.textTracks=[],t.subtitleTracks||[])).some((function(e){return"stpp.ttml.im1t"===e.textCodec}));(this.config.enableWebVTT||r&&this.config.enableIMSC1)&&(r=this.tracks&&t&&this.tracks.length===t.length,this.tracks=t||[],this.config.renderTextTracksNatively?(n=this.media?this.media.textTracks:[],this.tracks.forEach((function(e,t){var r,a,s;if(t<n.length){for(var o=null,u=0;u<n.length;u++)if(s=e,(a=n[u])&&a.label===s.name&&!a.textTrack1&&!a.textTrack2){o=n[u];break}o&&(r=o)}r?G(r):(t=i._captionsOrSubtitlesFromCharacteristics(e),(r=i.createTextTrack(t,e.name,e.lang))&&(r.mode="disabled")),r&&(r.groupId=e.groupId,i.textTracks.push(r))}))):!r&&this.tracks&&this.tracks.length&&(t=this.tracks.map((function(e){return{label:e.name,kind:e.type.toLowerCase(),default:e.default,subtitleTrack:e}})),this.hls.trigger(s.a.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:t})))},si._captionsOrSubtitlesFromCharacteristics=function(e){if(null!=(t=e.attrs)&&t.CHARACTERISTICS){var t=/transcribes-spoken-dialog/gi.test(e.attrs.CHARACTERISTICS);e=/describes-music-and-sound/gi.test(e.attrs.CHARACTERISTICS);if(t&&e)return"captions"}return"subtitles"},si.onManifestLoaded=function(e,t){var n=this;this.config.enableCEA708Captions&&t.captions&&t.captions.forEach((function(e){var t=/(?:CC|SERVICE)([1-4])/.exec(e.instreamId);t&&(t="textTrack"+t[1],t=n.captionsProperties[t])&&(t.label=e.name,e.lang&&(t.languageCode=e.lang),t.media=e)}))},si.closedCaptionsForLevel=function(e){return null==(e=this.hls.levels[e.level])?void 0:e.attrs["CLOSED-CAPTIONS"]},si.onFragLoading=function(e,t){var n,i=this.cea608Parser1,r=this.cea608Parser2,a=this.lastSn,s=this.lastPartIndex;this.enabled&&i&&r&&t.frag.type===M.b.MAIN&&(n=t.frag.sn,t=null!=(t=null==t||null==(t=t.part)?void 0:t.index)?t:-1,n===a+1||n===a&&t===s+1||(i.reset(),r.reset()),this.lastSn=n,this.lastPartIndex=t)},si.onFragLoaded=function(e,t){var n,i,r=t.frag,o=t.payload,u=this.initPTS,l=this.unparsedVttFrags;r.type===M.b.SUBTITLE&&(o.byteLength?Object(a.a)(u[r.cc])?(i="stats"in t,null!=(n=r.decryptdata)&&null!=n.key&&"AES-128"===n.method&&!i||(n=this.tracks[r.level],(i=this.vttCCs)[r.cc]||(i[r.cc]={start:r.start,prevCC:this.prevCC,new:!0},this.prevCC=r.cc),n&&"stpp.ttml.im1t"===n.textCodec?this._parseIMSC1(r,o):this._parseVTTs(r,o,i))):(l.push(t),u.length&&this.hls.trigger(s.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:new Error("Missing initial subtitle PTS")})):this.hls.trigger(s.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:new Error("Empty subtitle payload")}))},si._parseIMSC1=function(e,t){var n=this,i=this.hls;ei(t,this.initPTS[e.cc],this.timescale[e.cc],(function(t){n._appendCues(t,e.level),i.trigger(s.a.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})}),(function(t){u.b.log("Failed to parse IMSC1: "+t),i.trigger(s.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:t})}))},si._parseVTTs=function(e,t,n){var i,r=this,o=this.hls;!function(e,t,n,i,r,s,o,u){var l,c=new Hn,d=(e=Object(V.f)(new Uint8Array(e)).trim().replace(qn,"\n").split("\n"),[]),h=Object(Vn.a)(t,n),f="00:00.000",g=0,p=0,m=!0;c.oncue=function(e){var t=i[r],n=i.ccOffset,a=(g-h)/9e4;null!=t&&t.new&&(void 0!==p?n=i.ccOffset=t.start:function(e,t){var n,i=e[r],a=e[i.prevCC];if(!a||!a.new&&i.new)return e.ccOffset=e.presentationOffset=i.start,i.new=!1;for(;null!=(n=a)&&n.new;)e.ccOffset+=i.start-a.start,i.new=!1,a=e[(i=a).prevCC];e.presentationOffset=t}(i,a)),a&&(n=a-i.presentationOffset),t=e.endTime-e.startTime,a=Object(Kn.d)(9e4*(e.startTime+n-p),9e4*s)/9e4,e.startTime=Math.max(a,0),e.endTime=Math.max(a+t,0),n=e.text.trim();e.text=decodeURIComponent(encodeURIComponent(n)),e.id||(e.id=Xn(e.startTime,e.endTime,n)),0<e.endTime&&d.push(e)},c.onparsingerror=function(e){l=e},c.onflush=function(){l?u(l):o(d)},e.forEach((function(e){if(m){if(zn(e,"X-TIMESTAMP-MAP=")){m=!1,e.slice(16).split(",").forEach((function(e){zn(e,"LOCAL:")?f=e.slice(6):zn(e,"MPEGTS:")&&(g=parseInt(e.slice(7)))}));try{p=function(e){var t=parseInt(e.slice(-3)),n=parseInt(e.slice(-6,-4)),i=parseInt(e.slice(-9,-7)),r=9<e.length?parseInt(e.substring(0,e.indexOf(":"))):0;if(Object(a.a)(t)&&Object(a.a)(n)&&Object(a.a)(i)&&Object(a.a)(r))return(t=t+1e3*n+6e4*i)+36e5*r;throw Error("Malformed X-TIMESTAMP-MAP: Local:"+e)}(f)/1e3}catch(e){l=e}return}""===e&&(m=!1)}c.parse(e+"\n")})),c.flush()}(null!=(i=e.initSegment)&&i.data?Object(l.b)(e.initSegment.data,new Uint8Array(t)):t,this.initPTS[e.cc],this.timescale[e.cc],n,e.cc,e.start,(function(t){r._appendCues(t,e.level),o.trigger(s.a.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})}),(function(n){r._fallbackToIMSC1(e,t),u.b.log("Failed to parse VTT cue: "+n),o.trigger(s.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:n})}))},si._fallbackToIMSC1=function(e,t){var n=this,i=this.tracks[e.level];i.textCodec||ei(t,this.initPTS[e.cc],this.timescale[e.cc],(function(){i.textCodec="stpp.ttml.im1t",n._parseIMSC1(e,t)}),(function(){i.textCodec="wvtt"}))},si._appendCues=function(e,t){var n,i,r=this.hls;this.config.renderTextTracksNatively?(n=this.textTracks[t])&&"disabled"!==n.mode&&e.forEach((function(e){return j(n,e)})):(i=this.tracks[t])&&(i=i.default?"default":"subtitles"+t,r.trigger(s.a.CUES_PARSED,{type:"subtitles",cues:e,track:i}))},si.onFragDecrypted=function(e,t){var n=t.frag;n.type===M.b.SUBTITLE&&(Object(a.a)(this.initPTS[n.cc])?this.onFragLoaded(s.a.FRAG_LOADED,t):this.unparsedVttFrags.push(t))},si.onSubtitleTracksCleared=function(){this.tracks=[],this.captionsTracks={}},si.onFragParsingUserdata=function(e,t){var n=this.cea608Parser1,i=this.cea608Parser2;if(this.enabled&&n&&i){var r=t.frag,a=t.samples;if(r.type!==M.b.MAIN||"NONE"!==this.closedCaptionsForLevel(r))for(var s=0;s<a.length;s++){var o=a[s].bytes;o&&(o=this.extractCea608Data(o),n.addData(a[s].pts,o[0]),i.addData(a[s].pts,o[1]))}}},si.onBufferFlushing=function(e,t){var n,i,r=t.startOffset,a=t.endOffset,s=t.endOffsetSubtitles,o=(t=t.type,this.media);!o||o.currentTime<a||(t&&"video"!==t||(n=this.captionsTracks,Object.keys(n).forEach((function(e){return H(n[e],r,a)}))),this.config.renderTextTracksNatively&&0===r&&void 0!==s&&(i=this.textTracks,Object.keys(i).forEach((function(e){return H(i[e],r,s)}))))},si.extractCea608Data=function(e){for(var t=[[],[]],n=31&e[0],i=2,r=0;r<n;r++){var a=e[i++],s=127&e[i++],o=127&e[i++];0==s&&0==o||0==(4&a)||0!=(a&=3)&&1!=a||(t[a].push(s),t[a].push(o))}return t};var si=oi;function oi(e){var t,n,i,r;this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.timescale=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},this.config.enableCEA708Captions&&(t=new Cn(this,"textTrack1"),n=new Cn(this,"textTrack2"),i=new Cn(this,"textTrack3"),r=new Cn(this,"textTrack4"),this.cea608Parser1=new Sn(1,t,n),this.cea608Parser2=new Sn(3,i,r)),e.on(s.a.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(s.a.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(s.a.MANIFEST_LOADING,this.onManifestLoading,this),e.on(s.a.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(s.a.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(s.a.FRAG_LOADING,this.onFragLoading,this),e.on(s.a.FRAG_LOADED,this.onFragLoaded,this),e.on(s.a.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(s.a.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(s.a.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(s.a.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(s.a.BUFFER_FLUSHING,this.onBufferFlushing,this)}(li=hi.prototype).setStreamController=function(e){this.streamController=e},li.destroy=function(){this.unregisterListener(),this.hls.config.capLevelToPlayerSize&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null},li.registerListeners=function(){var e=this.hls;e.on(s.a.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(s.a.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(s.a.MANIFEST_PARSED,this.onManifestParsed,this),e.on(s.a.BUFFER_CODECS,this.onBufferCodecs,this),e.on(s.a.MEDIA_DETACHING,this.onMediaDetaching,this)},li.unregisterListener=function(){var e=this.hls;e.off(s.a.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(s.a.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(s.a.MANIFEST_PARSED,this.onManifestParsed,this),e.off(s.a.BUFFER_CODECS,this.onBufferCodecs,this),e.off(s.a.MEDIA_DETACHING,this.onMediaDetaching,this)},li.onFpsDropLevelCapping=function(e,t){hi.isLevelAllowed(t.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(t.droppedLevel)},li.onMediaAttaching=function(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null},li.onManifestParsed=function(e,t){var n=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,n.config.capLevelToPlayerSize&&t.video&&this.startCapping()},li.onBufferCodecs=function(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()},li.onMediaDetaching=function(){this.stopCapping()},li.detectPlayerSize=function(){var e,t;this.media&&0<this.mediaHeight&&0<this.mediaWidth&&(e=this.hls.levels).length&&((t=this.hls).autoLevelCapping=this.getMaxLevel(e.length-1),t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping)},li.getMaxLevel=function(e){var t=this,n=this.hls.levels;return n.length?(n=n.filter((function(n,i){return hi.isLevelAllowed(i,t.restrictedLevels)&&i<=e})),this.clientRect=null,hi.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)):-1},li.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},li.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)},li.getDimensions=function(){var e,t,n;return this.clientRect||(t={width:0,height:0},(e=this.media)&&(n=e.getBoundingClientRect(),t.width=n.width,t.height=n.height,t.width||t.height||(t.width=n.right-n.left||e.width||0,t.height=n.bottom-n.top||e.height||0)),this.clientRect=t)},hi.isLevelAllowed=function(e,t){return-1===(t=void 0===t?[]:t).indexOf(e)},hi.getMaxLevelByMediaSize=function(e,t,n){if(!e||!e.length)return-1;for(var i,r=e.length-1,a=0;a<e.length;a+=1){var s=e[a];if((s.width>=t||s.height>=n)&&(!(i=e[a+1])||s.width!==i.width||s.height!==i.height)){r=a;break}}return r},function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}((li=hi).prototype,[{key:"mediaWidth",get:function(){return this.getDimensions().width*this.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*this.contentScaleFactor}},{key:"contentScaleFactor",get:function(){var e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch(e){}return e}}]),Object.defineProperty(li,"prototype",{writable:!1});var ui,li=hi,ci=((ci=di.prototype).setStreamController=function(e){this.streamController=e},ci.registerListeners=function(){this.hls.on(s.a.MEDIA_ATTACHING,this.onMediaAttaching,this)},ci.unregisterListeners=function(){this.hls.off(s.a.MEDIA_ATTACHING,this.onMediaAttaching)},ci.destroy=function(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null},ci.onMediaAttaching=function(e,t){var n=this.hls.config;n.capLevelOnFPSDrop&&(t=t.media instanceof self.HTMLVideoElement?t.media:null,(this.media=t)&&"function"==typeof t.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),n.fpsDroppedMonitoringPeriod))},ci.checkFPS=function(e,t,n){var i,r,a,o,l=performance.now();t&&(this.lastTime&&(o=l-this.lastTime,i=n-this.lastDroppedFrames,r=t-this.lastDecodedFrames,o=1e3*i/o,(a=this.hls).trigger(s.a.FPS_DROP,{currentDropped:i,currentDecoded:r,totalDroppedFrames:n}),0<o)&&i>a.config.fpsDroppedMonitoringThreshold*r&&(o=a.currentLevel,u.b.warn("drop FPS ratio greater than max allowed value for currentLevel: "+o),0<o)&&(-1===a.autoLevelCapping||a.autoLevelCapping>=o)&&(a.trigger(s.a.FPS_DROP_LEVEL_CAPPING,{level:--o,droppedLevel:a.currentLevel}),a.autoLevelCapping=o,this.streamController.nextLevelSwitch()),this.lastTime=l,this.lastDroppedFrames=n,this.lastDecodedFrames=t)},ci.checkFPSInterval=function(){var e,t=this.media;t&&(this.isVideoPlaybackQualityAvailable?(e=t.getVideoPlaybackQuality(),this.checkFPS(t,e.totalVideoFrames,e.droppedVideoFrames)):this.checkFPS(t,t.webkitDecodedFrameCount,t.webkitDroppedFrameCount))},di);function di(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}function hi(e){this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.hls=void 0,this.streamController=void 0,this.clientRect=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}(fi=ui=ui||{}).WIDEVINE="com.widevine.alpha",fi.PLAYREADY="com.microsoft.playready";var fi="undefined"!=typeof self&&self.navigator&&self.navigator.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null;(mi=vi.prototype).destroy=function(){this._unregisterListeners(),this.hls=this._onMediaEncrypted=null,this._requestMediaKeySystemAccess=null},mi._registerListeners=function(){this.hls.on(s.a.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(s.a.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(s.a.MANIFEST_PARSED,this.onManifestParsed,this)},mi._unregisterListeners=function(){this.hls.off(s.a.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(s.a.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(s.a.MANIFEST_PARSED,this.onManifestParsed,this)},mi.getLicenseServerUrl=function(e){if(e===ui.WIDEVINE&&this._widevineLicenseUrl)return this._widevineLicenseUrl;throw new Error('no license server URL configured for key-system "'+e+'"')},mi._attemptKeySystemAccess=function(e,t,n){var i=this;t=function(e,t,n,i){if(e!==ui.WIDEVINE)throw new Error("Unknown key-system: "+e);return e=n,r=i,a={audioCapabilities:[],videoCapabilities:[]},t.forEach((function(e){a.audioCapabilities.push({contentType:'audio/mp4; codecs="'+e+'"',robustness:r.audioRobustness||""})})),e.forEach((function(e){a.videoCapabilities.push({contentType:'video/mp4; codecs="'+e+'"',robustness:r.videoRobustness||""})})),[a];var r,a}(e,t,n,this._drmSystemOptions),u.b.log("Requesting encrypted media key-system access"),n=this.requestMediaKeySystemAccess(e,t);this.mediaKeysPromise=n.then((function(t){return i._onMediaKeySystemAccessObtained(e,t)})),n.catch((function(t){u.b.error('Failed to obtain key-system "'+e+'" access:',t)}))},mi._onMediaKeySystemAccessObtained=function(e,t){var n=this,i=(u.b.log('Access for key-system "'+e+'" obtained'),{mediaKeysSessionInitialized:!1,mediaKeySystemAccess:t,mediaKeySystemDomain:e}),r=(this._mediaKeysList.push(i),Promise.resolve().then((function(){return t.createMediaKeys()})).then((function(t){return i.mediaKeys=t,u.b.log('Media-keys created for key-system "'+e+'"'),n._onMediaKeysCreated(),t})));return r.catch((function(e){u.b.error("Failed to create media-keys:",e)})),r},mi._onMediaKeysCreated=function(){var e=this;this._mediaKeysList.forEach((function(t){t.mediaKeysSession||(t.mediaKeysSession=t.mediaKeys.createSession(),e._onNewMediaKeySession(t.mediaKeysSession))}))},mi._onNewMediaKeySession=function(e){var t=this;u.b.log("New key-system session "+e.sessionId),e.addEventListener("message",(function(n){t._onKeySessionMessage(e,n.message)}),!1)},mi._onKeySessionMessage=function(e,t){u.b.log("Got EME message event, creating license request"),this._requestLicense(t,(function(t){u.b.log("Received license data (length: "+(t&&t.byteLength)+"), updating key-session"),e.update(t).catch((function(e){u.b.warn("Updating key-session failed: "+e)}))}))},mi.onMediaEncrypted=function(e){var t,n=this;u.b.log('Media is encrypted using "'+e.initDataType+'" init data type'),this.mediaKeysPromise?this.mediaKeysPromise.then(t=function(t){n._media&&(n._attemptSetMediaKeys(t),n._generateRequestWithPreferredKeySession(e.initDataType,e.initData))}).catch(t):(u.b.error("Fatal: Media is encrypted but no CDM access or no keys have been requested"),this.hls.trigger(s.a.ERROR,{type:o.b.KEY_SYSTEM_ERROR,details:o.a.KEY_SYSTEM_NO_KEYS,fatal:!0}))},mi._attemptSetMediaKeys=function(e){if(!this._media)throw new Error("Attempted to set mediaKeys without first attaching a media element");var t;this._hasSetMediaKeys||((t=this._mediaKeysList[0])&&t.mediaKeys?(u.b.log("Setting keys for encrypted media"),this._media.setMediaKeys(t.mediaKeys),this._hasSetMediaKeys=!0):(u.b.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),this.hls.trigger(s.a.ERROR,{type:o.b.KEY_SYSTEM_ERROR,details:o.a.KEY_SYSTEM_NO_KEYS,fatal:!0})))},mi._generateRequestWithPreferredKeySession=function(e,t){var n,i=this,r=this._mediaKeysList[0];r?r.mediaKeysSessionInitialized?u.b.warn("Key-Session already initialized but requested again"):(n=r.mediaKeysSession)?t?(u.b.log('Generating key-session request for "'+e+'" init data type'),r.mediaKeysSessionInitialized=!0,n.generateRequest(e,t).then((function(){u.b.debug("Key-session generation succeeded")})).catch((function(e){u.b.error("Error generating key-session request:",e),i.hls.trigger(s.a.ERROR,{type:o.b.KEY_SYSTEM_ERROR,details:o.a.KEY_SYSTEM_NO_SESSION,fatal:!1})}))):(u.b.warn("Fatal: initData required for generating a key session is null"),this.hls.trigger(s.a.ERROR,{type:o.b.KEY_SYSTEM_ERROR,details:o.a.KEY_SYSTEM_NO_INIT_DATA,fatal:!0})):(u.b.error("Fatal: Media is encrypted but no key-session existing"),this.hls.trigger(s.a.ERROR,{type:o.b.KEY_SYSTEM_ERROR,details:o.a.KEY_SYSTEM_NO_SESSION,fatal:!0})):(u.b.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),this.hls.trigger(s.a.ERROR,{type:o.b.KEY_SYSTEM_ERROR,details:o.a.KEY_SYSTEM_NO_ACCESS,fatal:!0}))},mi._createLicenseXhr=function(e,t,n){var i=new XMLHttpRequest;if(t=(i.responseType="arraybuffer",i.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,i,e,t,n),this._licenseXhrSetup))try{t.call(this.hls,i,e),t=void 0}catch(e){u.b.error(e)}try{i.readyState||i.open("POST",e,!0),t&&t.call(this.hls,i,e)}catch(e){throw new Error("issue setting up KeySystem license XHR "+e)}return i},mi._onLicenseRequestReadyStageChange=function(e,t,n,i){if(4===e.readyState)if(200===e.status){this._requestLicenseFailureCount=0,u.b.log("License request succeeded");var r=e.response,a=this._licenseResponseCallback;if(a)try{r=a.call(this.hls,e,t)}catch(e){u.b.error(e)}i(r)}else u.b.error("License Request XHR failed ("+t+"). Status: "+e.status+" ("+e.statusText+")"),this._requestLicenseFailureCount++,3<this._requestLicenseFailureCount?this.hls.trigger(s.a.ERROR,{type:o.b.KEY_SYSTEM_ERROR,details:o.a.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0}):(a=3-this._requestLicenseFailureCount+1,u.b.warn("Retrying license request, "+a+" attempts left"),this._requestLicense(n,i))},mi._generateLicenseRequestChallenge=function(e,t){if(e.mediaKeySystemDomain===ui.WIDEVINE)return t;throw new Error("unsupported key-system: "+e.mediaKeySystemDomain)},mi._requestLicense=function(e,t){u.b.log("Requesting content license for key-system");var n=this._mediaKeysList[0];if(n)try{var i=this.getLicenseServerUrl(n.mediaKeySystemDomain),r=this._createLicenseXhr(i,e,t),a=(u.b.log("Sending license request to URL: "+i),this._generateLicenseRequestChallenge(n,e));r.send(a)}catch(e){u.b.error("Failure requesting DRM license: "+e),this.hls.trigger(s.a.ERROR,{type:o.b.KEY_SYSTEM_ERROR,details:o.a.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}else u.b.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),this.hls.trigger(s.a.ERROR,{type:o.b.KEY_SYSTEM_ERROR,details:o.a.KEY_SYSTEM_NO_ACCESS,fatal:!0})},mi.onMediaAttached=function(e,t){this._emeEnabled&&(t=t.media,(this._media=t).addEventListener("encrypted",this._onMediaEncrypted))},mi.onMediaDetached=function(){var e=this._media,t=this._mediaKeysList;e&&(e.removeEventListener("encrypted",this._onMediaEncrypted),this._media=null,this._mediaKeysList=[],Promise.all(t.map((function(e){if(e.mediaKeysSession)return e.mediaKeysSession.close().catch((function(){}))}))).then((function(){return e.setMediaKeys(null)})).catch((function(){})))},mi.onManifestParsed=function(e,t){var n;this._emeEnabled&&(n=t.levels.map((function(e){return e.audioCodec})).filter((function(e){return!!e})),t=t.levels.map((function(e){return e.videoCodec})).filter((function(e){return!!e})),this._attemptKeySystemAccess(ui.WIDEVINE,n,t))},function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}((mi=vi).prototype,[{key:"requestMediaKeySystemAccess",get:function(){if(this._requestMediaKeySystemAccess)return this._requestMediaKeySystemAccess;throw new Error("No requestMediaKeySystemAccess function configured")}}]),Object.defineProperty(mi,"prototype",{writable:!1});var gi,pi,mi=vi;function vi(e){this.hls=void 0,this._widevineLicenseUrl=void 0,this._licenseXhrSetup=void 0,this._licenseResponseCallback=void 0,this._emeEnabled=void 0,this._requestMediaKeySystemAccess=void 0,this._drmSystemOptions=void 0,this._config=void 0,this._mediaKeysList=[],this._media=null,this._hasSetMediaKeys=!1,this._requestLicenseFailureCount=0,this.mediaKeysPromise=null,this._onMediaEncrypted=this.onMediaEncrypted.bind(this),this.hls=e,this._config=e.config,this._widevineLicenseUrl=this._config.widevineLicenseUrl,this._licenseXhrSetup=this._config.licenseXhrSetup,this._licenseResponseCallback=this._config.licenseResponseCallback,this._emeEnabled=this._config.emeEnabled,this._requestMediaKeySystemAccess=this._config.requestMediaKeySystemAccessFunc,this._drmSystemOptions=this._config.drmSystemOptions,this._registerListeners()}function yi(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function bi(e,t,n){t&&yi(e.prototype,t),n&&yi(e,n),Object.defineProperty(e,"prototype",{writable:!1})}function Ai(e,t){var n,i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(i)return(i=i.call(e)).next.bind(i);if(Array.isArray(e)||(i=function(e){var t;if(e)return"string"==typeof e?Ei(e,void 0):"Map"===(t="Object"===(t=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Ei(e,void 0):void 0}(e))||t&&e&&"number"==typeof e.length)return i&&(e=i),n=0,function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ei(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Ti(){return(Ti=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n,i=arguments[t];for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}(wi=gi=gi||{}).MANIFEST="m",wi.AUDIO="a",wi.VIDEO="v",wi.MUXED="av",wi.INIT="i",wi.CAPTION="c",wi.TIMED_TEXT="tt",wi.KEY="k",wi.OTHER="o",(wi=pi=pi||{}).DASH="d",wi.HLS="h",wi.SMOOTH="s",wi.OTHER="o",(wi=Ii.prototype).registerListeners=function(){var e=this.hls;e.on(s.a.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(s.a.MEDIA_DETACHED,this.onMediaDetached,this),e.on(s.a.BUFFER_CREATED,this.onBufferCreated,this)},wi.unregisterListeners=function(){var e=this.hls;e.off(s.a.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(s.a.MEDIA_DETACHED,this.onMediaDetached,this),e.off(s.a.BUFFER_CREATED,this.onBufferCreated,this),this.onMediaDetached()},wi.destroy=function(){this.unregisterListeners(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null},wi.onMediaAttached=function(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)},wi.onMediaDetached=function(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)},wi.onBufferCreated=function(e,t){var n;this.audioBuffer=null==(n=t.tracks.audio)?void 0:n.buffer,this.videoBuffer=null==(n=t.tracks.video)?void 0:n.buffer},wi.createData=function(){var e;return{v:1,sf:pi.HLS,sid:this.sid,cid:this.cid,pr:null==(e=this.media)?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}},wi.apply=function(e,t){Ti(t=void 0===t?{}:t,this.createData());var n=t.ot===gi.INIT||t.ot===gi.VIDEO||t.ot===gi.MUXED;this.starved&&n&&(t.bs=!0,t.su=!0,this.starved=!1),null==t.su&&(t.su=this.buffering),this.useHeaders?(n=Ii.toHeaders(t),Object.keys(n).length&&(e.headers||(e.headers={}),Ti(e.headers,n))):(n=Ii.toQuery(t))&&(e.url=Ii.appendQueryToUri(e.url,n))},wi.getObjectType=function(e){var t=e.type;return"subtitle"===t?gi.TIMED_TEXT:"initSegment"===e.sn?gi.INIT:"audio"===t?gi.AUDIO:"main"===t?this.hls.audioTracks.length?gi.VIDEO:gi.MUXED:void 0},wi.getTopBandwidth=function(e){for(var t=0,n=this.hls,i=Ai(e===gi.AUDIO?n.audioTracks:(e=-1<(e=n.maxAutoLevel)?e+1:n.levels.length,n.levels.slice(0,e)));!(r=i()).done;){var r=r.value;r.bitrate>t&&(t=r.bitrate)}return 0<t?t:NaN},wi.getBufferLength=function(e){var t=this.hls.media;return(e=e===gi.AUDIO?this.audioBuffer:this.videoBuffer)&&t?1e3*we.bufferInfo(e,t.currentTime,this.config.maxBufferHole).len:NaN},wi.createPlaylistLoader=function(){var e=this.config.pLoader,t=this.applyPlaylistData,n=e||this.config.loader;return(e=i.prototype).destroy=function(){this.loader.destroy()},e.abort=function(){this.loader.abort()},e.load=function(e,n,i){t(e),this.loader.load(e,n,i)},bi(i,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),i;function i(e){this.loader=void 0,this.loader=new n(e)}},wi.createFragmentLoader=function(){var e=this.config.fLoader,t=this.applyFragmentData,n=e||this.config.loader;return(e=i.prototype).destroy=function(){this.loader.destroy()},e.abort=function(){this.loader.abort()},e.load=function(e,n,i){t(e),this.loader.load(e,n,i)},bi(i,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),i;function i(e){this.loader=void 0,this.loader=new n(e)}},Ii.uuid=function(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.slice(t.lastIndexOf("/")+1)},Ii.serialize=function(e){for(var t=[],n=function(e){return Math.round(e)},i=function(e){return 100*n(e/100)},r={br:n,d:n,bl:i,dl:i,mtp:i,nor:function(e){return encodeURIComponent(e)},rtp:i,tb:n},a=Ai(Object.keys(e||{}).sort());!(u=a()).done;){var s,o,u=u.value,l=e[u];s=l,Number.isNaN(s)||null==s||""===s||!1===s||"v"===u&&1===l||"pr"==u&&1===l||(s=typeof(l=(s=r[u])?s(l):l),void 0,o="ot"===u||"sf"===u||"st"===u?u+"="+l:"boolean"==s?u:"number"==s?u+"="+l:u+"="+JSON.stringify(l),t.push(o))}return t.join(",")},Ii.toHeaders=function(e){for(var t={},n=["Object","Request","Session","Status"],i=[{},{},{},{}],r={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3},a=0,s=Object.keys(e);a<s.length;a++){var o=s[a];i[null!=r[o]?r[o]:1][o]=e[o]}for(var u=0;u<i.length;u++){var l=Ii.serialize(i[u]);l&&(t["CMCD-"+n[u]]=l)}return t},Ii.toQuery=function(e){return"CMCD="+encodeURIComponent(Ii.serialize(e))},Ii.appendQueryToUri=function(e,t){var n;return t?(n=e.includes("?")?"&":"?",e+n+t):e};var wi=Ii,Si=n(14),Ci=/^age:\s*[\d.]+\s*$/m,xi=((n=ki.prototype).destroy=function(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null},n.abortInternal=function(){var e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,4!==e.readyState)&&(this.stats.aborted=!0,e.abort())},n.abort=function(){var e;this.abortInternal(),null!=(e=this.callbacks)&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)},n.load=function(e,t,n){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=n,this.retryDelay=t.retryDelay,this.loadInternal()},n.loadInternal=function(){var e=this.config,t=this.context;if(e){var n=this.loader=new self.XMLHttpRequest,i=((i=this.stats).loading.first=0,i.loaded=0,this.xhrSetup);try{if(i)try{i(n,t.url)}catch(e){n.open("GET",t.url,!0),i(n,t.url)}n.readyState||n.open("GET",t.url,!0);var r=this.context.headers;if(r)for(var a in r)n.setRequestHeader(a,r[a])}catch(e){return void this.callbacks.onError({code:n.status,text:e.message},t,n)}t.rangeEnd&&n.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),n.onreadystatechange=this.readystatechange.bind(this),n.onprogress=this.loadprogress.bind(this),n.responseType=t.responseType,self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),e.timeout),n.send()}},n.readystatechange=function(){var e,t,n,i,r=this.context,a=this.loader,s=this.stats;r&&a&&(t=a.readyState,e=this.config,!s.aborted)&&2<=t&&(self.clearTimeout(this.requestTimeout),0===s.loading.first&&(s.loading.first=Math.max(self.performance.now(),s.loading.start)),4===t?(a.onreadystatechange=null,a.onprogress=null,200<=(t=a.status)&&t<300?(s.loading.end=Math.max(self.performance.now(),s.loading.first),i="arraybuffer"===r.responseType?(n=a.response).byteLength:(n=a.responseText).length,s.loaded=s.total=i,this.callbacks&&((i=this.callbacks.onProgress)&&i(s,r,n,a),this.callbacks)&&(i={url:a.responseURL,data:n},this.callbacks.onSuccess(i,s,r,a))):s.retry>=e.maxRetry||400<=t&&t<499?(u.b.error(t+" while loading "+r.url),this.callbacks.onError({code:t,text:a.statusText},r,a)):(u.b.warn(t+" while loading "+r.url+", retrying in "+this.retryDelay+"..."),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,e.maxRetryDelay),s.retry++)):(self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),e.timeout)))},n.loadtimeout=function(){u.b.warn("timeout while loading "+this.context.url);var e=this.callbacks;e&&(this.abortInternal(),e.onTimeout(this.stats,this.context,this.loader))},n.loadprogress=function(e){var t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)},n.getCacheAge=function(){var e,t=null;return this.loader&&Ci.test(this.loader.getAllResponseHeaders())?(e=this.loader.getResponseHeader("age"))?parseFloat(e):null:t},ki);function ki(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=void 0,this.loader=null,this.stats=void 0,this.xhrSetup=e?e.xhrSetup:null,this.stats=new Si.a,this.retryDelay=0}function Ii(e){var t=this,n=(e=(this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=function(){t.initialized&&(t.starved=!0),t.buffering=!0},this.onPlaying=function(){t.initialized||(t.initialized=!0),t.buffering=!1},this.applyPlaylistData=function(e){try{t.apply(e,{ot:gi.MANIFEST,su:!t.initialized})}catch(e){u.b.warn("Could not generate manifest CMCD data.",e)}},this.applyFragmentData=function(e){try{var n=e.frag,i=t.hls.levels[n.level],r=t.getObjectType(n),a={d:1e3*n.duration,ot:r};r!==gi.VIDEO&&r!==gi.AUDIO&&r!=gi.MUXED||(a.br=i.bitrate/1e3,a.tb=t.getTopBandwidth(r)/1e3,a.bl=t.getBufferLength(r)),t.apply(e,a)}catch(e){u.b.warn("Could not generate segment CMCD data.",e)}},this.hls=e,this.config=e.config)).cmcd;null!=n&&(e.pLoader=this.createPlaylistLoader(),e.fLoader=this.createFragmentLoader(),this.sid=n.sessionId||Ii.uuid(),this.cid=n.contentId,this.useHeaders=!0===n.useHeaders,this.registerListeners())}function Li(e,t,n){return(Li=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),1}catch(e){}}}()?Reflect.construct.bind():function(e,t,n){var i=[null];i.push.apply(i,t),t=new(Function.bind.apply(e,i));return n&&Ri(t,n.prototype),t}).apply(null,arguments)}function Ri(e,t){return(Ri=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Di(e){return(Di=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _i(){return(_i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n,i=arguments[t];for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function Mi(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=void 0,this.response=void 0,this.controller=void 0,this.context=void 0,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||Oi,this.controller=new self.AbortController,this.stats=new Si.a}function Oi(e,t){return new self.Request(e.url,t)}(n=Mi.prototype).destroy=function(){this.loader=this.callbacks=null,this.abortInternal()},n.abortInternal=function(){var e=this.response;e&&e.ok||(this.stats.aborted=!0,this.controller.abort())},n.abort=function(){var e;this.abortInternal(),null!=(e=this.callbacks)&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)},n.load=function(e,t,n){var i=this,r=this.stats;if(r.loading.start)throw new Error("Loader can only be used once.");r.loading.start=self.performance.now();var s=function(e,t){return t={method:"GET",mode:"cors",credentials:"same-origin",signal:t,headers:new self.Headers(_i({},e.headers))},e.rangeEnd&&t.headers.set("Range","bytes="+e.rangeStart+"-"+String(e.rangeEnd-1)),t}(e,this.controller.signal),o=n.onProgress,u="arraybuffer"===e.responseType,l=u?"byteLength":"length";this.context=e,this.config=t,this.callbacks=n,this.request=this.fetchSetup(e,s),self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout((function(){i.abortInternal(),n.onTimeout(r,e,i.response)}),t.timeout),self.fetch(this.request).then((function(n){var s,l;if((i.response=i.loader=n).ok)return r.loading.first=Math.max(self.performance.now(),r.loading.start),r.total=parseInt(n.headers.get("Content-Length")||"0"),o&&Object(a.a)(t.highWaterMark)?i.loadProgressively(n,r,e,t.highWaterMark,o):u?n.arrayBuffer():n.text();throw s=n.status,l=n.statusText,new Ni(l||"fetch, bad network response",s,n)})).then((function(s){var u=i.response,c=(self.clearTimeout(i.requestTimeout),r.loading.end=Math.max(self.performance.now(),r.loading.first),r.loaded=r.total=s[l],{url:u.url,data:s});o&&!Object(a.a)(t.highWaterMark)&&o(r,e,s,u),n.onSuccess(c,r,e,u)})).catch((function(t){var a,s;self.clearTimeout(i.requestTimeout),r.aborted||(a=t&&t.code||0,s=t?t.message:null,n.onError({code:a,text:s},e,t?t.details:null))}))},n.getCacheAge=function(){var e,t=null;return this.response?(e=this.response.headers.get("age"))?parseFloat(e):null:t},n.loadProgressively=function(e,t,n,i,r){void 0===i&&(i=0);var a=new xt,s=e.body.getReader();return function o(){return s.read().then((function(s){var u;return s.done?(a.dataLength&&r(t,n,a.flush(),e),Promise.resolve(new ArrayBuffer(0))):(u=(s=s.value).length,t.loaded+=u,u<i||a.dataLength?(a.push(s),a.dataLength>=i&&r(t,n,a.flush(),e)):r(t,n,s,e),o())})).catch((function(){return Promise.reject()}))}()},n=Mi,qi=Pi=function(e){var t="function"==typeof Map?new Map:void 0;return function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Li(e,arguments,Di(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Ri(n,e)}(e)}(Error),(zi=Ui).prototype=Object.create(qi.prototype),Ri(zi.prototype.constructor=zi,qi);var Pi,Ni=Ui,Bi=n,Fi=/\s/;function Ui(e,t,n){return(e=Pi.call(this,e)||this).code=void 0,e.details=void 0,e.code=t,e.details=n,e}function ji(){return(ji=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n,i=arguments[t];for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function Gi(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)),i}function Hi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gi(Object(n),!0).forEach((function(t){var i,r;i=e,r=n[t=t],t in i?Object.defineProperty(i,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[t]=r})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Vi=Hi(Hi({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,maxBufferSize:6e7,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:xi,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:Ct,bufferController:Xt,capLevelController:li,fpsController:ci,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystemOptions:{},requestMediaKeySystemAccessFunc:fi,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0},{cueHandler:{newCue:function(e,t,n,i){for(var r,a,s,o,u=[],l=self.VTTCue||self.TextTrackCue,c=0;c<i.rows.length;c++)if(a=!0,s=0,o="",!(r=i.rows[c]).isEmpty()){for(var d=0;d<r.chars.length;d++)Fi.test(r.chars[d].uchar)&&a?s++:(o+=r.chars[d].uchar,a=!1);(r.cueStartTime=t)===n&&(n+=1e-4),16<=s?s--:s++;var h=Gn(o.trim()),f=Xn(t,n,h);e&&e.cues&&e.cues.getCueById(f)||((h=new l(t,n,h)).id=f,h.line=c+1,h.align="left",h.position=10+Math.min(80,10*Math.floor(8*s/32)),u.push(h))}return e&&u.length&&(u.sort((function(e,t){return"auto"===e.line||"auto"===t.line?0:8<e.line&&8<t.line?t.line-e.line:e.line-t.line})),u.forEach((function(t){return j(e,t)}))),u}},enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}),{},{subtitleStreamController:Ee,subtitleTrackController:t,timelineController:si,audioStreamController:_t,audioTrackController:Nt,emeController:mi,cmcdController:wi});function Ki(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Yi.isSupported=function(){return!!(t=ot())&&(e=ut(),t=t&&"function"==typeof t.isTypeSupported&&t.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),e=!e||e.prototype&&"function"==typeof e.prototype.appendBuffer&&"function"==typeof e.prototype.remove,!!t)&&!!e;var e,t},(zi=Yi.prototype).createController=function(e,t,n){return e?(t=t?new e(this,t):new e(this),n&&n.push(t),t):null},zi.on=function(e,t,n){this._emitter.on(e,t,n=void 0===n?this:n)},zi.once=function(e,t,n){this._emitter.once(e,t,n=void 0===n?this:n)},zi.removeAllListeners=function(e){this._emitter.removeAllListeners(e)},zi.off=function(e,t,n,i){this._emitter.off(e,t,n=void 0===n?this:n,i)},zi.listeners=function(e){return this._emitter.listeners(e)},zi.emit=function(e,t,n){return this._emitter.emit(e,t,n)},zi.trigger=function(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(t){u.b.error("An internal error happened while handling event "+e+'. Error message: "'+t.message+'". Here is a stacktrace:',t),this.trigger(s.a.ERROR,{type:o.b.OTHER_ERROR,details:o.a.INTERNAL_EXCEPTION,fatal:!1,event:e,error:t})}return!1},zi.listenerCount=function(e){return this._emitter.listenerCount(e)},zi.destroy=function(){u.b.log("destroy"),this.trigger(s.a.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach((function(e){return e.destroy()})),this.networkControllers.length=0,this.coreComponents.forEach((function(e){return e.destroy()})),this.coreComponents.length=0},zi.attachMedia=function(e){u.b.log("attachMedia"),this._media=e,this.trigger(s.a.MEDIA_ATTACHING,{media:e})},zi.detachMedia=function(){u.b.log("detachMedia"),this.trigger(s.a.MEDIA_DETACHING,void 0),this._media=null},zi.loadSource=function(e){this.stopLoad();var t=this.media,n=this.url,i=this.url=r.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});u.b.log("loadSource:"+i),t&&n&&n!==i&&this.bufferController.hasSourceTypes()&&(this.detachMedia(),this.attachMedia(t)),this.trigger(s.a.MANIFEST_LOADING,{url:e})},zi.startLoad=function(e){void 0===e&&(e=-1),u.b.log("startLoad("+e+")"),this.networkControllers.forEach((function(t){t.startLoad(e)}))},zi.stopLoad=function(){u.b.log("stopLoad"),this.networkControllers.forEach((function(e){e.stopLoad()}))},zi.swapAudioCodec=function(){u.b.log("swapAudioCodec"),this.streamController.swapAudioCodec()},zi.recoverMediaError=function(){u.b.log("recoverMediaError");var e=this._media;this.detachMedia(),e&&this.attachMedia(e)},zi.removeLevel=function(e,t){this.levelController.removeLevel(e,t=void 0===t?0:t)},zi=[{key:"version",get:function(){return"1.2.4"}},{key:"Events",get:function(){return s.a}},{key:"ErrorTypes",get:function(){return o.b}},{key:"ErrorDetails",get:function(){return o.a}},{key:"DefaultConfig",get:function(){return Yi.defaultConfig||Vi},set:function(e){Yi.defaultConfig=e}}],Ki((qi=Yi).prototype,[{key:"levels",get:function(){return this.levelController.levels||[]}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(e){u.b.log("set currentLevel:"+e),this.loadLevel=e,this.abrController.clearTimer(),this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(e){u.b.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(e){u.b.log("set loadLevel:"+e),this.levelController.manualLevel=e}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){u.b.log("set firstLevel:"+e),this.levelController.firstLevel=e}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(e){u.b.log("set startLevel:"+e),-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}},{key:"capLevelToPlayerSize",get:function(){return this.config.capLevelToPlayerSize},set:function(e){(e=!!e)!==this.config.capLevelToPlayerSize&&(e?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=e)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(e){this._autoLevelCapping!==e&&(u.b.log("set autoLevelCapping:"+e),this._autoLevelCapping=e)}},{key:"bandwidthEstimate",get:function(){var e=this.abrController.bwEstimator;return e?e.getEstimate():NaN}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){var e=this.levels,t=this.config.minAutoBitrate;if(e)for(var n=e.length,i=0;i<n;i++)if(e[i].maxBitrate>=t)return i;return 0}},{key:"maxAutoLevel",get:function(){var e=this.levels,t=this.autoLevelCapping;return-1===t&&e&&e.length?e.length-1:t}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(e){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,e)}},{key:"playingDate",get:function(){return this.streamController.currentProgramDateTime}},{key:"mainForwardBufferInfo",get:function(){return this.streamController.getMainFwdBufferInfo()}},{key:"audioTracks",get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]}},{key:"audioTrack",get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)}},{key:"subtitleTracks",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}},{key:"media",get:function(){return this._media}},{key:"subtitleDisplay",get:function(){var e=this.subtitleTrackController;return!!e&&e.subtitleDisplay},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}},{key:"lowLatencyMode",get:function(){return this.config.lowLatencyMode},set:function(e){this.config.lowLatencyMode=e}},{key:"liveSyncPosition",get:function(){return this.latencyController.liveSyncPosition}},{key:"latency",get:function(){return this.latencyController.latency}},{key:"maxLatency",get:function(){return this.latencyController.maxLatency}},{key:"targetLatency",get:function(){return this.latencyController.targetLatency}},{key:"drift",get:function(){return this.latencyController.drift}},{key:"forceStartLoad",get:function(){return this.streamController.forceStartLoad}}]),Ki(qi,zi),Object.defineProperty(qi,"prototype",{writable:!1});var qi,zi,Wi=Yi;function Yi(e){void 0===e&&(e={}),this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new dt.EventEmitter,this._autoLevelCapping=void 0,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null;var t,n=this.config=function(e,t){if((t.liveSyncDurationCount||t.liveMaxLatencyDurationCount)&&(t.liveSyncDuration||t.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(void 0!==t.liveMaxLatencyDurationCount&&(void 0===t.liveSyncDurationCount||t.liveMaxLatencyDurationCount<=t.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(void 0!==t.liveMaxLatencyDuration&&(void 0===t.liveSyncDuration||t.liveMaxLatencyDuration<=t.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');return ji({},e,t)}(Yi.DefaultConfig,e),i=(e=(this.userConfig=e,Object(u.a)(n.debug),this._autoLevelCapping=-1,n.progressive&&((e=(t=n).loader)!==Bi&&e!==xi?(u.b.log("[config]: Custom loader detected, cannot enable progressive streaming"),t.progressive=!1):function(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),1}catch(e){}}()&&(t.loader=Bi,t.progressive=!0,t.enableSoftwareAES=!0,u.b.log("[config]: Progressive streaming enabled, using FetchLoader"))),n.abrController),n.bufferController),r=n.capLevelController,a=n.fpsController,s=(e=this.abrController=new e(this),i=this.bufferController=new i(this),r=this.capLevelController=new r(this),a=new a(this),new P(this)),o=new N(this),l=new W(this),c=this.levelController=new pe(this),d=new ve(this),h=this.streamController=new bt(this,d);r.setStreamController(h),a.setStreamController(h),s=[s,o,c,h],this.networkControllers=s,o=[e,i,r,a,l,d];this.audioTrackController=this.createController(n.audioTrackController,null,s),this.createController(n.audioStreamController,d,s),this.subtitleTrackController=this.createController(n.subtitleTrackController,null,s),this.createController(n.subtitleStreamController,d,s),this.createController(n.timelineController,null,o),this.emeController=this.createController(n.emeController,null,o),this.cmcdController=this.createController(n.cmcdController,null,o),this.latencyController=this.createController(Q,null,o),this.coreComponents=o}Wi.defaultConfig=void 0}],n={},e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:i})},e.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var r in t)e.d(i,r,function(e){return t[e]}.bind(null,r));return i},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e.p="/dist/",e(e.s=20).default;function e(i){var r;return(n[i]||(r=n[i]={i:i,l:!1,exports:{}},t[i].call(r.exports,r,r.exports,e),r.l=!0,r)).exports}var t,n},e.exports=i())},function(e,t,n){(function(e){e="undefined"!=typeof window?window:e;var n,i={};for(n in function(e,t,n){function i(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var r="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value),e},a=function(n){n=["object"==typeof globalThis&&globalThis,n,"object"==typeof e&&e,"object"==typeof self&&self,"object"==typeof t&&t];for(var i=0;i<n.length;++i){var r=n[i];if(r&&r.Math==Math)return r}throw Error("Cannot find global object")}(this);function s(e,t){if(t)e:{for(var n=a,i=e.split("."),s=0;s<i.length-1;s++){var o=i[s];if(!(o in n))break e;n=n[o]}(o=t(s=n[i=i[i.length-1]]))!=s&&null!=o&&r(n,i,{configurable:!0,writable:!0,value:o})}}function o(e){return(e={next:e})[Symbol.iterator]=function(){return this},e}function u(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:i(e)}}function l(e){if(!(e instanceof Array)){e=u(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}s("Symbol",(function(e){function t(e,t){this.g=e,r(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;t.prototype.toString=function(){return this.g};var n="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",i=0;return function e(r){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new t(n+(r||"")+"_"+i++,r)}})),s("Symbol.iterator",(function(e){if(!e){e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<t.length;n++){var s=a[t[n]];"function"==typeof s&&"function"!=typeof s.prototype[e]&&r(s.prototype,e,{configurable:!0,writable:!0,value:function(){return o(i(this))}})}}return e}));var c,d="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t};if("function"==typeof Object.setPrototypeOf)W=Object.setPrototypeOf;else{e:{var h={};try{h.__proto__={a:!0},c=h.a;break e}catch(e){}c=!1}W=c?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var f=W;function g(e,t){if(e.prototype=d(t.prototype),e.prototype.constructor=e,f)f(e,t);else for(var n in t){var i;"prototype"!=n&&(Object.defineProperties?(i=Object.getOwnPropertyDescriptor(t,n))&&Object.defineProperty(e,n,i):e[n]=t[n])}e.dh=t.prototype}function p(){this.o=!1,this.l=null,this.h=void 0,this.g=1,this.j=this.m=0,this.u=this.i=null}function m(e){if(e.o)throw new TypeError("Generator is already running");e.o=!0}function v(e,t){e.i={re:t,ye:!0},e.g=e.m||e.j}function y(e,t,n){return e.g=n,{value:t}}function b(e){e.g=0}function A(e,t,n){e.m=t,null!=n&&(e.j=n)}function E(e){e.m=0,e.j=2}function T(e,t){e.g=t,e.m=0}function w(e){e.m=0;var t=e.i.re;return e.i=null,t}function S(e){e.u=[e.i],e.m=0,e.j=0}function C(e,t){var n=e.u.splice(0)[0];(n=e.i=e.i||n)?n.ye?e.g=e.m||e.j:null!=n.A&&e.j<n.A?(e.g=n.A,e.i=null):e.g=e.j:e.g=t}function x(e){this.g=new p,this.h=e}function k(e,t,n,i){try{var r=t.call(e.g.l,n);if(!(r instanceof Object))throw new TypeError("Iterator result "+r+" is not an object");if(!r.done)return e.g.o=!1,r;var a=r.value}catch(t){return e.g.l=null,v(e.g,t),I(e)}return e.g.l=null,i.call(e.g,a),I(e)}function I(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.o=!1,{value:t.value,done:!1}}catch(t){e.g.h=void 0,v(e.g,t)}if(e.g.o=!1,e.g.i){if(t=e.g.i,e.g.i=null,t.ye)throw t.re;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function L(e){this.next=function(t){return m(e.g),e.g.l?k(e,e.g.l.next,t,e.g.s):(e.g.s(t),I(e))},this.throw=function(t){return m(e.g),e.g.l?k(e,e.g.l.throw,t,e.g.s):(v(e.g,t),I(e))},this.return=function(t){return t=t,m((n=e).g),(i=n.g.l)?k(n,"return"in i?i.return:function(e){return{value:e,done:!0}},t,n.g.return):(n.g.return(t),I(n));var n,i},this[Symbol.iterator]=function(){return this}}function R(e){return function(e){function t(t){return e.next(t)}function n(t){return e.throw(t)}return new Promise((function(i,r){!function e(a){a.done?i(a.value):Promise.resolve(a.value).then(t,n).then(e,r)}(e.next())}))}(new L(new x(e)))}function D(){for(var e=Number(this),t=[],n=e;n<arguments.length;n++)t[n-e]=arguments[n];return t}function _(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function M(e,t,n){for(var i=(e=e instanceof String?String(e):e).length,r=0;r<i;r++){var a=e[r];if(t.call(n,a,r,e))return{we:r,v:a}}return{we:-1,v:void 0}}function O(e,t,n){if(null==e)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}function P(e,t){e instanceof String&&(e+="");var n=0,i=!1,r={next:function(){var r;return!i&&n<e.length?(r=n++,{value:t(r,e[r]),done:!1}):{done:i=!0,value:void 0}}};return r[Symbol.iterator]=function(){return r},r}p.prototype.s=function(e){this.h=e},p.prototype.return=function(e){this.i={return:e},this.g=this.j},p.prototype.A=function(e){this.g=e},s("Promise",(function(e){function t(e){this.h=0,this.i=void 0,this.g=[],this.o=!1;var t=this.j();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}}function n(){this.g=null}function i(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;n.prototype.h=function(e){var t;null==this.g&&(this.g=[],(t=this).i((function(){t.l()}))),this.g.push(e)};var r=a.setTimeout,s=(n.prototype.i=function(e){r(e,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var e=this.g;this.g=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(e){this.j(e)}}}this.g=null},n.prototype.j=function(e){this.i((function(){throw e}))},t.prototype.j=function(){function e(e){return function(i){n||(n=!0,e.call(t,i))}}var t=this,n=!1;return{resolve:e(this.F),reject:e(this.l)}},t.prototype.F=function(e){if(e===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.I(e);else{switch(typeof e){case"object":var n=null!=e;break;case"function":n=!0;break;default:n=!1}n?this.D(e):this.m(e)}},t.prototype.D=function(e){var t=void 0;try{t=e.then}catch(e){return void this.l(e)}"function"==typeof t?this.L(t,e):this.m(e)},t.prototype.l=function(e){this.s(2,e)},t.prototype.m=function(e){this.s(1,e)},t.prototype.s=function(e,t){if(0!=this.h)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.h);this.h=e,this.i=t,2===this.h&&this.G(),this.u()},t.prototype.G=function(){var e=this;r((function(){var t;e.B()&&void 0!==(t=a.console)&&t.error(e.i)}),1)},t.prototype.B=function(){var e,t,n;return!this.o&&(e=a.CustomEvent,t=a.Event,void 0===(n=a.dispatchEvent)||("function"==typeof e?e=new e("unhandledrejection",{cancelable:!0}):"function"==typeof t?e=new t("unhandledrejection",{cancelable:!0}):(e=a.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,e),e.promise=this,e.reason=this.i,n(e)))},t.prototype.u=function(){if(null!=this.g){for(var e=0;e<this.g.length;++e)s.h(this.g[e]);this.g=null}},new n);return t.prototype.I=function(e){var t=this.j();e.Fc(t.resolve,t.reject)},t.prototype.L=function(e,t){var n=this.j();try{e.call(t,n.resolve,n.reject)}catch(e){n.reject(e)}},t.prototype.then=function(e,n){function i(e,t){return"function"==typeof e?function(t){try{r(e(t))}catch(e){a(e)}}:t}var r,a,s=new t((function(e,t){r=e,a=t}));return this.Fc(i(e,r),i(n,a)),s},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.Fc=function(e,t){function n(){switch(i.h){case 1:e(i.i);break;case 2:t(i.i);break;default:throw Error("Unexpected state: "+i.h)}}var i=this;null==this.g?s.h(n):this.g.push(n),this.o=!0},t.resolve=i,t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(t,n){for(var r=u(e),a=r.next();!a.done;a=r.next())i(a.value).Fc(t,n)}))},t.all=function(e){var n=u(e),r=n.next();return r.done?i([]):new t((function(e,t){for(var a=[],s=0;a.push(void 0),s++,i(r.value).Fc(function(t){return function(n){a[t]=n,0==--s&&e(a)}}(a.length-1),t),!(r=n.next()).done;);}))},t})),s("WeakMap",(function(e){function t(e){if(this.g=(l+=Math.random()+1).toString(),e){e=u(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}}function n(){}function i(e){var t=typeof e;return"object"==t&&null!==e||"function"==t}function a(e){var t;_(e,o)||(t=new n,r(e,o,{value:t}))}function s(e){var t=Object[e];t&&(Object[e]=function(e){return e instanceof n?e:(Object.isExtensible(e)&&a(e),t(e))})}var o,l;return function(){if(e&&Object.seal)try{var t=Object.seal({}),n=Object.seal({}),i=new e([[t,2],[n,3]]);return 2==i.get(t)&&3==i.get(n)?(i.delete(t),i.set(n,4),!i.has(t)&&4==i.get(n)):void 0}catch(e){}}()?e:(o="$jscomp_hidden_"+Math.random(),s("freeze"),s("preventExtensions"),s("seal"),l=0,t.prototype.set=function(e,t){if(!i(e))throw Error("Invalid WeakMap key");if(a(e),_(e,o))return e[o][this.g]=t,this;throw Error("WeakMap key fail: "+e)},t.prototype.get=function(e){return i(e)&&_(e,o)?e[o][this.g]:void 0},t.prototype.has=function(e){return i(e)&&_(e,o)&&_(e[o],this.g)},t.prototype.delete=function(e){return!!(i(e)&&_(e,o)&&_(e[o],this.g))&&delete e[o][this.g]},t)})),s("Map",(function(e){function t(){var e={};return e.Qa=e.next=e.head=e}function n(e,t){var n=e.g;return o((function(){if(n){for(;n.head!=e.g;)n=n.Qa;if(n.next!=n.head)return n=n.next,{done:!1,value:t(n)};n=null}return{done:!0,value:void 0}}))}function i(e,t){var n=t&&typeof t,i=("object"==n||"function"==n?a.has(t)?n=a.get(t):(n=""+ ++s,a.set(t,n)):n="p_"+t,e.h[n]);if(i&&_(e.h,n))for(var r=0;r<i.length;r++){var o=i[r];if(t!=t&&o.key!=o.key||t===o.key)return{id:n,list:i,index:r,fa:o}}return{id:n,list:i,index:-1,fa:void 0}}function r(e){if(this.h={},this.g=t(),this.size=0,e){e=u(e);for(var n;!(n=e.next()).done;)n=n.value,this.set(n[0],n[1])}}var a,s;return function(){if(e&&"function"==typeof e&&e.prototype.entries&&"function"==typeof Object.seal)try{var t,n,i=Object.seal({x:4}),r=new e(u([[i,"s"]]));return"s"!=r.get(i)||1!=r.size||r.get({x:4})||r.set({x:4},"t")!=r||2!=r.size||(n=(t=r.entries()).next()).done||n.value[0]!=i||"s"!=n.value[1]?void 0:!((n=t.next()).done||4!=n.value[0].x||"t"!=n.value[1]||!t.next().done)}catch(e){}}()?e:(a=new WeakMap,r.prototype.set=function(e,t){var n=i(this,e=0===e?0:e);return n.list||(n.list=this.h[n.id]=[]),n.fa?n.fa.value=t:(n.fa={next:this.g,Qa:this.g.Qa,head:this.g,key:e,value:t},n.list.push(n.fa),this.g.Qa.next=n.fa,this.g.Qa=n.fa,this.size++),this},r.prototype.delete=function(e){return!(!(e=i(this,e)).fa||!e.list||(e.list.splice(e.index,1),e.list.length||delete this.h[e.id],e.fa.Qa.next=e.fa.next,e.fa.next.Qa=e.fa.Qa,e.fa.head=null,this.size--,0))},r.prototype.clear=function(){this.h={},this.g=this.g.Qa=t(),this.size=0},r.prototype.has=function(e){return!!i(this,e).fa},r.prototype.get=function(e){return(e=i(this,e).fa)&&e.value},r.prototype.entries=function(){return n(this,(function(e){return[e.key,e.value]}))},r.prototype.keys=function(){return n(this,(function(e){return e.key}))},r.prototype.values=function(){return n(this,(function(e){return e.value}))},r.prototype.forEach=function(e,t){for(var n,i=this.entries();!(n=i.next()).done;)n=n.value,e.call(t,n[1],n[0],this)},r.prototype[Symbol.iterator]=r.prototype.entries,s=0,r)})),s("Set",(function(e){function t(e){if(this.g=new Map,e){e=u(e);for(var t;!(t=e.next()).done;)this.add(t.value)}this.size=this.g.size}return function(){if(e&&"function"==typeof e&&e.prototype.entries&&"function"==typeof Object.seal)try{var t,n,i=Object.seal({x:4}),r=new e(u([i]));return r.has(i)&&1==r.size&&r.add(i)==r&&1==r.size&&r.add({x:4})==r&&2==r.size?(n=(t=r.entries()).next()).done||n.value[0]!=i||n.value[1]!=i?void 0:!(n=t.next()).done&&n.value[0]!=i&&4==n.value[0].x&&n.value[1]==n.value[0]&&t.next().done:void 0}catch(e){}}()?e:(t.prototype.add=function(e){return this.g.set(e=0===e?0:e,e),this.size=this.g.size,this},t.prototype.delete=function(e){return e=this.g.delete(e),this.size=this.g.size,e},t.prototype.clear=function(){this.g.clear(),this.size=0},t.prototype.has=function(e){return this.g.has(e)},t.prototype.entries=function(){return this.g.entries()},t.prototype.keys=t.prototype.values=function(){return this.g.values()},t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(e,t){var n=this;this.g.forEach((function(i){return e.call(t,i,i,n)}))},t)})),s("Array.prototype.findIndex",(function(e){return e||function(e,t){return M(this,e,t).we}})),s("Object.is",(function(e){return e||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}})),s("Array.prototype.includes",(function(e){return e||function(e,t){var n=this,i=(n=n instanceof String?String(n):n).length,r=t||0;for(r<0&&(r=Math.max(r+i,0));r<i;r++){var a=n[r];if(a===e||Object.is(a,e))return!0}return!1}})),s("String.prototype.includes",(function(e){return e||function(e,t){return-1!==O(this,e,"includes").indexOf(e,t||0)}})),s("Array.prototype.find",(function(e){return e||function(e,t){return M(this,e,t).v}})),s("String.prototype.startsWith",(function(e){return e||function(e,t){for(var n=O(this,e,"startsWith"),i=n.length,r=e.length,a=Math.max(0,Math.min(0|t,n.length)),s=0;s<r&&a<i;)if(n[a++]!=e[s++])return!1;return r<=s}})),s("Array.prototype.keys",(function(e){return e||function(){return P(this,(function(e){return e}))}}));var N="function"==typeof Object.assign?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i)for(var r in i)_(i,r)&&(e[r]=i[r])}return e},B=(s("Object.assign",(function(e){return e||N})),s("Array.from",(function(e){return e||function(e,t,n){t=null!=t?t:function(e){return e};var i=[],r="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];if("function"==typeof r){e=r.call(e);for(var a=0;!(r=e.next()).done;)i.push(t.call(n,r.value,a++))}else for(r=e.length,a=0;a<r;a++)i.push(t.call(n,e[a],a));return i}})),s("Array.prototype.values",(function(e){return e||function(){return P(this,(function(e,t){return t}))}})),s("Promise.prototype.finally",(function(e){return e||function(e){return this.then((function(t){return Promise.resolve(e()).then((function(){return t}))}),(function(t){return Promise.resolve(e()).then((function(){throw t}))}))}})),s("Array.prototype.entries",(function(e){return e||function(){return P(this,(function(e,t){return[e,t]}))}})),s("String.prototype.repeat",(function(e){return e||function(e){var t=O(this,null,"repeat");if(e<0||1342177279<e)throw new RangeError("Invalid count value");e|=0;for(var n="";e;)1&e&&(n+=t),(e>>>=1)&&(t+=t);return n}})),s("Number.isNaN",(function(e){return e||function(e){return"number"==typeof e&&isNaN(e)}})),s("Object.values",(function(e){return e||function(e){var t,n=[];for(t in e)_(e,t)&&n.push(e[t]);return n}})),s("Math.log2",(function(e){return e||function(e){return Math.log(e)/Math.LN2}})),s("Math.trunc",(function(e){return e||function(e){var t;return e=Number(e),isNaN(e)||1/0===e||-1/0===e||0===e?e:(t=Math.floor(Math.abs(e)),e<0?-t:t)}})),s("Object.entries",(function(e){return e||function(e){var t,n=[];for(t in e)_(e,t)&&n.push([t,e[t]]);return n}})),this||self);function F(e,t){var n,i=e.split("."),r=B;i[0]in r||void 0===r.execScript||r.execScript("var "+i[0]);for(;i.length&&(n=i.shift());)i.length||void 0===t?r=r[n]&&r[n]!==Object.prototype[n]?r[n]:r[n]={}:r[n]=t}
/*
      @license
      Shaka Player
      Copyright 2016 Google LLC
      SPDX-License-Identifier: Apache-2.0
      */function U(e){this.g=Math.exp(Math.log(.5)/e),this.i=this.h=0}function j(e){return e.h/(1-Math.pow(e.g,e.i))}function G(){this.h=new U(2),this.j=new U(5),this.g=0,this.i=128e3,this.l=16e3}function H(){}function V(){}function K(){}function q(e){var t=D.apply(1,arguments);Y.has(e)||(Y.add(e),K.apply(H,l(t)))}function z(){}U.prototype.sample=function(e,t){t=t*(1-(t=Math.pow(this.g,e)))+t*this.h,isNaN(t)||(this.h=t,this.i+=e)},G.prototype.configure=function(e){this.i=e.minTotalBytes,this.l=e.minBytes,this.h.g=Math.exp(Math.log(.5)/e.fastHalfLife),this.j.g=Math.exp(Math.log(.5)/e.slowHalfLife)},G.prototype.sample=function(e,t){var n;t<this.l||(n=8e3*t/e,e/=1e3,this.g+=t,this.h.sample(e,n),this.j.sample(e,n))},G.prototype.getBandwidthEstimate=function(e){return this.g<this.i?e:Math.min(j(this.h),j(this.j))};var W,Y=new Set;function X(e,t){return!("number"!=typeof e||"number"!=typeof t||!isNaN(e)||!isNaN(t))||e===t}function Q(e,t){-1<(t=e.indexOf(t))&&e.splice(t,1)}function $(e,t,n){if(n=n||X,e.length!=t.length)return!1;t=t.slice();for(var i={},r=(e=u(e)).next();!r.done;i={hd:i.hd},r=e.next()){if(i.hd=r.value,-1==(r=t.findIndex(function(e){return function(t){return n(e.hd,t)}}(i))))return!1;t[r]=t[t.length-1],t.pop()}return 0==t.length}function Z(e,t,n){if(n=n||X,e.length!=t.length)return!1;for(var i=0;i<e.length;i++)if(!n(e[i],t[i]))return!1;return!0}function J(e,t,n){this.startTime=e,this.direction=se,this.endTime=t,this.payload=n,this.region=new me,this.position=null,this.positionAlign=te,this.size=0,this.textAlign=ne,this.writingMode=oe,this.lineInterpretation=ue,this.line=null,this.lineHeight="",this.lineAlign=le,this.displayAlign=re,this.fontSize=this.textStrokeWidth=this.textStrokeColor=this.textShadow=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=fe,this.fontStyle=ge,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textDecoration=[],this.wrapLine=!0,this.id="",this.nestedCues=[],this.lineBreak=this.isContainer=!1,this.cellResolution={columns:32,rows:15}}function ee(e,t){if(e.startTime!=t.startTime||e.endTime!=t.endTime||e.payload!=t.payload)return!1;for(var n in e)if("startTime"!=n&&"endTime"!=n&&"payload"!=n)if("nestedCues"==n){if(!Z(e.nestedCues,t.nestedCues,ee))return!1}else if("region"==n||"cellResolution"==n){for(var i in e[n])if(e[n][i]!=t[n][i])return!1}else if(Array.isArray(e[n])){if(!Z(e[n],t[n]))return!1}else if(e[n]!=t[n])return!1;return!0}e.console&&e.console.log.bind&&((W={})[1]=console.error.bind(console),W[2]=console.warn.bind(console),W[3]=console.info.bind(console),W[4]=console.log.bind(console),W[5]=console.debug.bind(console),W[6]=console.debug.bind(console),K=W[2],V=W[1]),J.prototype.clone=function(){var e,t=new J(0,0,"");for(e in this)t[e]=this[e],t[e]&&t[e].constructor==Array&&(t[e]=t[e].slice());return t},F("shaka.text.Cue",J);var te="auto",ne=(J.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:te},"center"),ie={LEFT:"left",RIGHT:"right",CENTER:ne,START:"start",END:"end"},re=(J.textAlign=ie,"after"),ae={BEFORE:"before",CENTER:"center",AFTER:re},se=(J.displayAlign=ae,"ltr"),oe=(J.direction={HORIZONTAL_LEFT_TO_RIGHT:se,HORIZONTAL_RIGHT_TO_LEFT:"rtl"},"horizontal-tb"),ue=(J.writingMode={HORIZONTAL_TOP_TO_BOTTOM:oe,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"},0),le=(J.lineInterpretation={LINE_NUMBER:ue,PERCENTAGE:1},"start"),ce={CENTER:"center",START:le,END:"end"},de=(J.lineAlign=ce,{white:"#FFF",lime:"#0F0",cyan:"#0FF",red:"#F00",yellow:"#FF0",magenta:"#F0F",blue:"#00F",black:"#000"}),he=(J.defaultTextColor=de,{bg_white:"#FFF",bg_lime:"#0F0",bg_cyan:"#0FF",bg_red:"#F00",bg_yellow:"#FF0",bg_magenta:"#F0F",bg_blue:"#00F",bg_black:"#000"}),fe=(J.defaultTextBackgroundColor=he,400),ge=(J.fontWeight={NORMAL:fe,BOLD:700},"normal"),pe={NORMAL:ge,ITALIC:"italic",OBLIQUE:"oblique"};function me(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=ve,this.scroll=ye}J.fontStyle=pe,J.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"},F("shaka.text.CueRegion",me);var ve=1,ye=(me.units={PX:0,PERCENTAGE:ve,LINES:2},"");function be(){}function Ae(e,t){if(e||t){if(!e||!t||e.byteLength!=t.byteLength)return!1;if(Ee(e)!=Ee(t)||(e.byteOffset||0)!=(t.byteOffset||0))for(var n=we(e),i=we(t),r=0;r<e.byteLength;r++)if(n[r]!=i[r])return!1}return!0}function Ee(e){return e instanceof ArrayBuffer?e:e.buffer}function Te(e){return e instanceof ArrayBuffer?e:(0==e.byteOffset&&e.byteLength==e.buffer.byteLength?e:new Uint8Array(e)).buffer}function we(e,t,n){return Ce(e,void 0===t?0:t,n=void 0===n?1/0:n,Uint8Array)}function Se(e,t,n){return Ce(e,void 0===t?0:t,n=void 0===n?1/0:n,DataView)}function Ce(e,t,n,i){var r=(e.byteOffset||0)+e.byteLength;return t=Math.max(0,Math.min((e.byteOffset||0)+t,r)),new i(Ee(e),t,Math.min(t+Math.max(n,0),r)-t)}function xe(){}me.scrollMode={NONE:ye,UP:"up"},F("shaka.util.BufferUtils",be),be.toDataView=Se,be.toUint8=we,be.toArrayBuffer=Te,be.equal=Ae,F("shaka.dependencies",xe),xe.has=function(e){return Ie.has(e)},xe.add=function(e,t){if(!ke[e])throw Error(e+" is not supported");Ie.set(e,(function(){return t}))};var ke={muxjs:"muxjs"},Ie=(xe.Allowed=ke,new Map([["muxjs",function(){return e.muxjs}]]));function Le(e,t,n){var i=D.apply(3,arguments);this.severity=e,this.category=t,this.code=n,this.data=i,this.handled=!1}Le.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},F("shaka.util.Error",Le),Le.Severity={RECOVERABLE:1,CRITICAL:2},Le.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10},Le.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,SEGMENT_MISSING:1011,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,CHAPTERS_TRACK_FAILED:2015,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED:4040,HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4041,NO_WEB_CRYPTO_API:4042,HLS_AES_128_INVALID_IV_LENGTH:4043,HLS_AES_128_INVALID_KEY_LENGTH:4044,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,MODIFY_OPERATION_NOT_SUPPORTED:9016,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004};
/*
       @license
       Copyright 2008 The Closure Library Authors
       SPDX-License-Identifier: Apache-2.0
       */
var Re=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");
/*
                                                                                                                                       @license
                                                                                                                                       Copyright 2006 The Closure Library Authors
                                                                                                                                       SPDX-License-Identifier: Apache-2.0
                                                                                                                                       */function De(e){e instanceof De?(_e(this,e.Ea),this.nb=e.nb,this.Fa=e.Fa,Me(this,e.Ib),this.ta=e.ta,Oe(this,e.g.clone()),this.eb=e.eb):e&&(e=String(e).match(Re))?(_e(this,e[1]||"",!0),this.nb=Pe(e[2]||""),this.Fa=Pe(e[3]||"",!0),Me(this,e[4]),this.ta=Pe(e[5]||"",!0),Oe(this,e[6]||"",!0),this.eb=Pe(e[7]||"")):this.g=new Ve(null)}function _e(e,t,n){e.Ea=n?Pe(t,!0):t,e.Ea&&(e.Ea=e.Ea.replace(/:$/,""))}function Me(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.Ib=t}else e.Ib=null}function Oe(e,t,n){t instanceof Ve?e.g=t:(n||(t=Ne(t,Ge)),e.g=new Ve(t))}function Pe(e,t){return e?(t?decodeURI:decodeURIComponent)(e):""}function Ne(e,t,n){return null!=e?(e=encodeURI(e).replace(t,Be),e=n?e.replace(/%25([0-9a-fA-F]{2})/g,"%$1"):e):null}function Be(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}(W=De.prototype).Ea="",W.nb="",W.Fa="",W.Ib=null,W.ta="",W.eb="",W.toString=function(){var e,t=[],n=this.Ea;return n&&t.push(Ne(n,Fe,!0),":"),(n=this.Fa)&&(t.push("//"),(e=this.nb)&&t.push(Ne(e,Fe,!0),"@"),t.push(encodeURIComponent(n).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.Ib))&&t.push(":",String(n)),(n=this.ta)&&(this.Fa&&"/"!=n.charAt(0)&&t.push("/"),t.push(Ne(n,"/"==n.charAt(0)?je:Ue,!0))),(n=this.g.toString())&&t.push("?",n),(n=this.eb)&&t.push("#",Ne(n,He)),t.join("")},W.resolve=function(e){var t=this.clone(),n=("data"===t.Ea&&(t=new De),!!e.Ea),i=(n?_e(t,e.Ea):n=!!e.nb,n?t.nb=e.nb:n=!!e.Fa,n?t.Fa=e.Fa:n=null!=e.Ib,e.ta);if(n)Me(t,e.Ib);else if(n=!!e.ta)if("/"!=i.charAt(0)&&(this.Fa&&!this.ta?i="/"+i:-1!=(r=t.ta.lastIndexOf("/"))&&(i=t.ta.substr(0,r+1)+i)),".."==i||"."==i)i="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){for(var r=0==i.lastIndexOf("/",0),a=(i=i.split("/"),[]),s=0;s<i.length;){var o=i[s++];"."==o?r&&s==i.length&&a.push(""):".."==o?((1<a.length||1==a.length&&""!=a[0])&&a.pop(),r&&s==i.length&&a.push("")):(a.push(o),r=!0)}i=a.join("/")}return n?t.ta=i:n=""!==e.g.toString(),n?Oe(t,e.g.clone()):n=!!e.eb,n&&(t.eb=e.eb),t},W.clone=function(){return new De(this)};var Fe=/[#\/\?@]/g,Ue=/[#\?:]/g,je=/[#\?]/g,Ge=/[#\?@]/g,He=/#/g;function Ve(e){this.g=e||null}function Ke(e){if(!e.na&&(e.na={},e.Hc=0,e.g))for(var t=e.g.split("&"),n=0;n<t.length;n++){var i,r=t[n].indexOf("="),a=null;0<=r?(i=t[n].substring(0,r),a=t[n].substring(r+1)):i=t[n],i=decodeURIComponent(i.replace(/\+/g," ")),a=a||"",e.add(i,decodeURIComponent(a.replace(/\+/g," ")))}}function qe(e,t){return e.concat(t)}function ze(){}function We(e){return null!=e}function Ye(e,t){var n;return 0==t.length?e:(n=t.map((function(e){return new De(e)})),e.map((function(e){return new De(e)})).map((function(e){return n.map((function(t){return e.resolve(t)}))})).reduce(qe,[]).map((function(e){return e.toString()})))}function Xe(e,t){return{keySystem:e,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:t||[],keyIds:new Set}}function Qe(e,t){if(1==t.length)return t[0];if(null!=(e=$e(e,t)))return e;throw new Le(2,4,4025,t)}function $e(e,t){for(var n=u(et[e]),i=n.next();!i.done;i=n.next()){i=i.value;for(var r=u(t),a=r.next();!a.done;a=r.next())if(a=a.value,i.test(a.trim()))return a.trim()}return e==Ze?"":null}(W=Ve.prototype).na=null,W.Hc=null,W.add=function(e,t){Ke(this),this.g=null;var n=this.na.hasOwnProperty(e)&&this.na[e];return n||(this.na[e]=n=[]),n.push(t),this.Hc++,this},W.set=function(e,t){return Ke(this),this.g=null,this.na.hasOwnProperty(e)?this.na[e]=[t]:this.add(e,t),this},W.toString=function(){if(this.g)return this.g;if(!this.na)return"";var e,t=[];for(e in this.na)for(var n=encodeURIComponent(e),i=this.na[e],r=0;r<i.length;r++){var a=n;""!==i[r]&&(a+="="+encodeURIComponent(i[r])),t.push(a)}return this.g=t.join("&")},W.clone=function(){var e=new Ve;if(e.g=this.g,this.na){var t,n={};for(t in this.na)n[t]=this.na[t].concat();e.na=n,e.Hc=this.Hc}return e};var Ze="text",Je={va:"video",bb:"audio",X:Ze,Ub:"image",pg:"application"},et={audio:[/^vorbis$/,/^opus$/,/^flac$/,/^mp4a/,/^[ae]c-3$/],video:[/^avc/,/^hev/,/^hvc/,/^vp0?[89]/,/^av01/],text:[/^vtt$/,/^wvtt/,/^stpp/]};function tt(){var e,t,n=new Promise((function(n,i){e=n,t=i}));return n.resolve=e,n.reject=t,n}function nt(e){this.h=e,this.g=void 0}function it(e){this.h=e,this.g=null}function rt(e){this.h=e,this.g=null}function at(){return!(!e.MediaSource||!MediaSource.isTypeSupported)}function st(e){return""!=gt().canPlayType(e)}function ot(){return ft("Xbox One")}function ut(){return ft("Tizen")}function lt(){return ft("Web0S")&&ft("Chrome/38.0.2125.122 Safari/537.36")}function ct(){return navigator.vendor&&navigator.vendor.includes("Apple")&&!ut()&&!ft("PC=EOS")&&!dt()&&!ft("AFT")}function dt(){return ft("PlayStation 4")}function ht(){var e;return ct()&&(e=(e=navigator.userAgent.match(/Version\/(\d+)/))||navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}function ft(e){return(navigator.userAgent||"").includes(e)}function gt(){return mt||(pt=pt||new rt((function(){mt=null})),mt=(mt=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||document.createElement("video"),pt.R(1)),mt}tt.prototype.resolve=function(){},tt.prototype.reject=function(){},nt.prototype.value=function(){return null==this.g&&(this.g=this.h()),this.g},it.prototype.R=function(t){var n=this,i=(this.stop(),!0),r=null;return this.g=function(){e.clearTimeout(r),i=!1},r=e.setTimeout((function(){i&&n.h()}),1e3*t),this},it.prototype.stop=function(){this.g&&(this.g(),this.g=null)},rt.prototype.Lb=function(){return this.stop(),this.h(),this},rt.prototype.R=function(e){var t=this;return this.stop(),this.g=new it((function(){t.h()})).R(e),this},rt.prototype.Ca=function(e){var t=this;return this.stop(),this.g=new it((function(){t.g.R(e),t.h()})).R(e),this},rt.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)},F("shaka.util.Timer",rt),rt.prototype.tickEvery=rt.prototype.Ca,rt.prototype.tickAfter=rt.prototype.R,rt.prototype.tickNow=rt.prototype.Lb;var pt=null,mt=null;function vt(){}function yt(t){if(!t)return"";if(239==(t=we(t))[0]&&187==t[1]&&191==t[2]&&(t=t.subarray(3)),e.TextDecoder&&!dt())return(t=(new TextDecoder).decode(t)).includes("�")&&V('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),t;for(var n="",i=0;i<t.length;++i){var r,a=65533;0==(128&t[i])?a=t[i]:t.length>=i+2&&192==(224&t[i])&&128==(192&t[i+1])?(a=(31&t[i])<<6|63&t[i+1],i+=1):t.length>=i+3&&224==(240&t[i])&&128==(192&t[i+1])&&128==(192&t[i+2])?(a=(15&t[i])<<12|(63&t[i+1])<<6|63&t[i+2],i+=2):t.length>=i+4&&240==(241&t[i])&&128==(192&t[i+1])&&128==(192&t[i+2])&&128==(192&t[i+3])&&(a=(7&t[i])<<18|(63&t[i+1])<<12|(63&t[i+2])<<6|63&t[i+3],i+=3),a<=65535?n+=String.fromCharCode(a):(r=1023&(a-=65536),n=(n+=String.fromCharCode(55296+(a>>10)))+String.fromCharCode(56320+r))}return n}function bt(e,t,n){if(!e)return"";if(!n&&0!=e.byteLength%2)throw new Le(2,2,2004);n=Math.floor(e.byteLength/2);var i=new Uint16Array(n);e=Se(e);for(var r=0;r<n;r++)i[r]=e.getUint16(2*r,t);return wt.value()(i)}function At(e){function t(e){return n.byteLength<=e||32<=n[e]&&n[e]<=126}if(!e)return"";var n=we(e);if(239==n[0]&&187==n[1]&&191==n[2])return yt(n);if(254==n[0]&&255==n[1])return bt(n.subarray(2),!1);if(255==n[0]&&254==n[1])return bt(n.subarray(2),!0);if(0==n[0]&&0==n[2])return bt(e,!1);if(0==n[1]&&0==n[3])return bt(e,!0);if(t(0)&&t(1)&&t(2)&&t(3))return yt(e);throw new Le(2,2,2003)}function Et(t){if(e.TextEncoder&&!dt())return Te((n=new TextEncoder).encode(t));t=encodeURIComponent(t),t=unescape(t);for(var n=new Uint8Array(t.length),i=0;i<t.length;i++)n[i]=t[i].charCodeAt(0);return Te(n)}function Tt(e,t){for(var n=new ArrayBuffer(2*e.length),i=new DataView(n),r=0;r<e.length;++r)i.setUint16(2*r,e.charCodeAt(r),t);return n}F("shaka.util.StringUtils",vt),vt.resetFromCharCode=function(){wt.g=void 0},vt.toUTF16=Tt,vt.toUTF8=Et,vt.fromBytesAutoDetect=At,vt.fromUTF16=bt,vt.fromUTF8=yt;var wt=new nt((function(){for(var e={Ua:65536};0<e.Ua;(e={Ua:e.Ua}).Ua/=2)if(function(e){try{var t=new Uint8Array(e);return 0<String.fromCharCode.apply(null,t).length}catch(e){}}(e.Ua)){var t=e;return function(e){for(var n="",i=0;i<e.length;i+=t.Ua)n+=String.fromCharCode.apply(null,e.subarray(i,i+t.Ua));return n}}return null}));function St(){}function Ct(e){return e=we(e),e=wt.value()(e),btoa(e)}function xt(e,t){return t=null==t||t,e=Ct(e).replace(/\+/g,"-").replace(/\//g,"_"),t?e:e.replace(/[=]*$/,"")}function kt(t){t=e.atob(t.replace(/-/g,"+").replace(/_/g,"/"));for(var n=new Uint8Array(t.length),i=0;i<t.length;++i)n[i]=t.charCodeAt(i);return n}function It(t){for(var n=t.length/2,i=new Uint8Array(n),r=0;r<n;r++)i[r]=e.parseInt(t.substr(2*r,2),16);return i}function Lt(e){var t=we(e);e="";for(var n=(t=u(t)).next();!n.done;n=t.next())e+=n=1==(n=(n=n.value).toString(16)).length?"0"+n:n;return e}function Rt(){for(var e=D.apply(0,arguments),t=0,n=u(e),i=n.next();!i.done;i=n.next())t+=i.value.byteLength;for(t=new Uint8Array(t),n=0,i=(e=u(e)).next();!i.done;i=e.next())i=i.value,t.set(we(i),n),n+=i.byteLength;return t}function Dt(){var e=this;this.o=Ie.get("muxjs")(),this.g=new this.o.mp4.Transmuxer({keepOriginalTimestamps:!0}),this.h=null,this.m=[],this.j=[],this.i=[],this.l=!1,this.g.on("data",(function(t){e.j=t.captions,e.i=t.metadata,e.m.push(Rt(t.initSegment,t.data))})),this.g.on("done",(function(){var t={data:Rt.apply(St,l(e.m)),captions:e.j,metadata:e.i};e.h.resolve(t),e.l=!1}))}function _t(e,t){return!(!Ie.get("muxjs")()||!Mt(e))&&(t?MediaSource.isTypeSupported(Ot(t,e)):(t=Ot("audio",e),e=Ot("video",e),MediaSource.isTypeSupported(t)||MediaSource.isTypeSupported(e)))}function Mt(e){return"mp2t"==e.toLowerCase().split(";")[0].split("/")[1]}function Ot(e,t){var n,i;t=t.replace(/mp2t/i,"mp4");return(e=("audio"==e&&(t=t.replace("video","audio")),/avc1\.(66|77|100)\.(\d+)/.exec(t)))&&(i="avc1.",i=("66"==(n=e[1])?"avc1.4200":"77"==n?"avc1.4d00":"avc1.6400")+((n=Number(e[2]))>>4).toString(16),i+=(15&n).toString(16),t=t.replace(e[0],i)),t}function Pt(){}function Nt(e,t){return t&&(e+='; codecs="'+t+'"'),e}function Bt(e,t,n){if(Mt(e=Nt(e,t))){if(Ie.get("muxjs")())return Ot(n,e)}else if("audio"==n)return e.replace("video","audio");return e}function Ft(e){var t=jt(e);switch(e=t[0],t=t[1].toLowerCase(),!0){case"mp4a"===e&&"69"===t:case"mp4a"===e&&"6b"===t:return"mp3";case"mp4a"===e&&"66"===t:case"mp4a"===e&&"67"===t:case"mp4a"===e&&"68"===t:case"mp4a"===e&&"40.2"===t:case"mp4a"===e&&"40.02"===t:case"mp4a"===e&&"40.5"===t:case"mp4a"===e&&"40.05"===t:case"mp4a"===e&&"40.29"===t:case"mp4a"===e&&"40.42"===t:return"aac";case"mp4a"===e&&"a5"===t:return"ac-3";case"mp4a"===e&&"a6"===t:return"ec-3";case"mp4a"===e&&"b2"===t:return"dtsx";case"mp4a"===e&&"a9"===t:return"dtsc";case"avc1"===e:case"avc3"===e:return"avc";case"hvc1"===e:case"hev1"===e:return"hevc";case"dvh1"===e:case"dvhe"===e:return"dovi"}return e}function Ut(e){return(e=e.split(/ *; */)).shift(),(e=e.find((function(e){return e.startsWith("codecs=")})))?e.split("=")[1].replace(/^"|"$/g,""):""}function jt(e){var t=(e=e.split("."))[0];return e.shift(),[t,e.join(".")]}function Gt(e){this.j=null,this.i=e,this.u=!1,this.l=this.s=0,this.m=1/0,this.h=this.g=null,this.B="",this.o=new Map}function Ht(e){return!(!qt[e]&&"application/cea-608"!=e&&"application/cea-708"!=e)}function Vt(e,t,n){if(e.B=t,t=e.o.get(t))for(var i=u(t.keys()),r=i.next();!r.done;r=i.next())(r=t.get(r.value).filter((function(e){return e.endTime<=n})))&&e.i.append(r)}function Kt(e,t,n,i,r){for(var a=n+" "+i,s=new Map,o=(t=u(t)).next();!o.done;o=t.next()){o=(l=o.value).stream;var l=l.cue;s.has(o)||s.set(o,new Map),s.get(o).has(a)||s.get(o).set(a,[]),function e(t,n,i){n.startTime+=i,n.endTime+=i;for(var r=(n=u(n.nestedCues)).next();!r.done;r=n.next())e(t,r.value,i)}(e,l,r),l.startTime>=e.l&&l.startTime<e.m&&(s.get(o).get(a).push(l),o==e.B)&&e.i.append([l])}for(a=(r=u(s.keys())).next();!a.done;a=r.next())for(a=a.value,e.o.has(a)||e.o.set(a,new Map),o=(t=u(s.get(a).keys())).next();!o.done;o=t.next())o=o.value,l=s.get(a).get(o),e.o.get(a).set(o,l);e.g=null==e.g?Math.max(n,e.l):Math.min(e.g,Math.max(n,e.l)),e.h=Math.max(e.h,Math.min(i,e.m))}F("shaka.util.Uint8ArrayUtils",St),St.concat=Rt,St.toHex=Lt,St.fromHex=It,St.fromBase64=kt,St.toBase64=xt,St.toStandardBase64=Ct,Dt.prototype.destroy=function(){return this.g.dispose(),this.g=null,Promise.resolve()},F("shaka.util.MimeUtils",Pt),Pt.getFullType=Nt,(new Map).set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels"),Gt.prototype.destroy=function(){return this.i=this.j=null,this.o.clear(),Promise.resolve()},Gt.prototype.remove=function(e,t){var n=this;return R((function(i){if(1==i.g)return y(i,Promise.resolve(),2);!n.i||!n.i.remove(e,t)||null==n.g||t<=n.g||e>=n.h||(e<=n.g&&t>=n.h?n.g=n.h=null:e<=n.g&&t<n.h?n.g=t:e>n.g&&t>=n.h&&(n.h=e)),b(i)}))},F("shaka.text.TextEngine",Gt),Gt.findParser=function(e){return qt[e]},Gt.unregisterParser=function(e){delete qt[e]},Gt.registerParser=function(e,t){qt[e]=t};var qt={};function zt(){}function Wt(e,t){return e=Qt(e),t=Qt(t),e.split("-")[0]==t.split("-")[0]}function Yt(e,t){return e=Qt(e),t=Qt(t),e=e.split("-"),t=t.split("-"),e[0]==t[0]&&1==e.length&&2==t.length}function Xt(e,t){return e=Qt(e),t=Qt(t),e=e.split("-"),t=t.split("-"),2==e.length&&2==t.length&&e[0]==t[0]}function Qt(e){var t=e.split("-");return e=t[0]||"",t=t[1]||"",e=e.toLowerCase(),e=tn.get(e)||e,(t=t.toUpperCase())?e+"-"+t:e}function $t(e,t){return e=Qt(e),(t=Qt(t))==e?4:Yt(t,e)?3:Xt(t,e)?2:Yt(e,t)?1:0}function Zt(e){var t=e.indexOf("-");return e=(e=0<=t?e.substring(0,t):e).toLowerCase(),tn.get(e)||e}function Jt(e){return e.language?Qt(e.language):e.audio&&e.audio.language?Qt(e.audio.language):e.video&&e.video.language?Qt(e.video.language):"und"}function en(e,t){for(var n=Qt(e),i=new Set,r=u(t),a=r.next();!a.done;a=r.next())i.add(Qt(a.value));for(a=(r=u(i)).next();!a.done;a=r.next())if((a=a.value)==n)return a;for(a=(r=u(i)).next();!a.done;a=r.next())if(Yt(a=a.value,n))return a;for(a=(r=u(i)).next();!a.done;a=r.next())if(Xt(a=a.value,n))return a;for(a=(i=u(i)).next();!a.done;a=i.next())if(Yt(n,a=a.value))return a;return null}F("shaka.util.LanguageUtils",zt),zt.findClosestLocale=en,zt.getLocaleForVariant=Jt,zt.getLocaleForText=function(e){return Qt(e.language||"und")},zt.getBase=Zt,zt.relatedness=$t,zt.areSiblings=function(e,t){var n=Zt(e),i=Zt(t);return e!=n&&t!=i&&n==i},zt.normalize=Qt,zt.isSiblingOf=Xt,zt.isParentOf=Yt,zt.areLanguageCompatible=Wt,zt.areLocaleCompatible=function(e,t){return(e=Qt(e))==Qt(t)};var tn=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function nn(){this.g={}}function rn(e,t){for(var n in e.g)t(n,e.g[n])}function an(e,t,n,i,r){var a,s,o,l=e.variants,c=(t=function(e){for(var t=new nn,n=(e=u(e)).next();!n.done;n=e.next()){var i=sn(n=n.value);t.push(i,n)}return t}(l=wn(l=t.length||n.length?function(e,t,n){for(var i={},r=(t=u(t)).next();!r.done;i={td:i.td},r=t.next())if(i.td=r.value,(r=e.filter(function(e){return function(t){return t.video&&t.video.codecs.startsWith(e.td)}}(i))).length){e=r;break}for(i={},t=(n=u(n)).next();!t.done;i={ed:i.ed},t=n.next())if(i.ed=t.value,(t=e.filter(function(e){return function(t){return t.audio&&t.audio.codecs.startsWith(e.ed)}}(i))).length){e=t;break}return e}(l,t,n):l,i)),n=t,a=0,s=new Map,o=n.size(),rn(n,(function(e,t){for(var n=u(t),i=n.next();!i.done;i=n.next()){var r,l=(i=i.value).video;l&&l.width&&l.height&&(l=l.width*l.height*(l.frameRate||1),s.has(l)||s.set(l,new nn),(r=s.get(l)).push(e,i),r.size()===o)&&(a=Math.max(a,l))}})),function(e,t){for(var n=u(t),i=n.next();!i.done;i=n.next())if((i=i.value)==Ln||i==Rn){if(1==(e=function(e,t){var n=0,i=new nn;return rn(e,(function(e,r){for(var a=0,s=0,o=u(r),l=o.next();!l.done;l=o.next())(l=l.value).decodingInfos.length&&(a+=l.decodingInfos[0][t]?1:0,s++);n<(a/=s)?(i.g={},i.push(e,r),n=a):a==n&&i.push(e,r)})),i}(e,i)).size())return e.keys()[0]}else if(i==Dn)break;return function(e){var t="",n=1/0;return rn(e,(function(e,i){for(var r=0,a=0,s=u(i),o=s.next();!o.done;o=s.next())r+=o.value.bandwidth||0,++a;(r/=a)<n&&(t=e,n=r)})),t}(e)}(t=a?s.get(a):n,r));e.variants=e.variants.filter((function(e){return sn(e)==c}))}function sn(e){var t="",n="";return(t=e.video?Ft(e.video.codecs):t)+"-"+(e.audio?Ft(e.audio.codecs):n)}function on(e,t,n){function i(e,t,n){return t<=e&&e<=n}var r=e.video;if(0!=e.disabledUntilTime){if(e.disabledUntilTime>Date.now()/1e3)return!1;e.disabledUntilTime=0}return!(r&&r.width&&r.height&&(!i(r.width,t.minWidth,Math.min(t.maxWidth,n.width))||!i(r.height,t.minHeight,Math.min(t.maxHeight,n.height))||!i(r.width*r.height,t.minPixels,t.maxPixels))||e&&e.video&&e.video.frameRate&&!i(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||!i(e.bandwidth,t.minBandwidth,t.maxBandwidth))}function un(e,t,n){for(var i=!1,r=(e=u(e)).next();!r.done;r=e.next()){var a=(r=r.value).allowedByApplication;r.allowedByApplication=on(r,t,n),a!=r.allowedByApplication&&(i=!0)}return i}function ln(e,t){return R((function(n){if(1==n.g)return y(n,cn(e.variants,t,!1),2);e.variants=e.variants.filter((function(e){var t=e.video;if(t){var n=hn(t.codecs);if(t.codecs.includes(",")){n=Qe("video",i=t.codecs.split(","));var i=Qe("audio",i);if(i=Bt(t.mimeType,i,"audio"),!MediaSource.isTypeSupported(i))return!1}if(n=Bt(t.mimeType,n,"video"),!MediaSource.isTypeSupported(n))return!1}return!((n=e.audio)&&(i=dn(n.codecs),n=Bt(n.mimeType,i,"audio"),!MediaSource.isTypeSupported(n)))&&(ot()&&t&&(t.width&&1920<t.width||t.height&&1080<t.height)&&t.codecs.includes("avc1.")?(xn(e),!1):((t=e.decodingInfos.some((function(e){return e.supported})))||xn(e),t))})),b(n)}))}function cn(e,t,n){var i,r,a,s,o,l,c,d,h,f;return R((function(g){if(e.some((function(e){return e.decodingInfos.length})))return g.return();for(i=navigator.mediaCapabilities,r=[],a=function(e,t){var n;return R((function(r){return 1==r.g?(A(r,2),y(r,i.decodingInfo(t),4)):2!=r.g?(n=r.h,e.decodingInfos.push(n),T(r,0)):(w(r),JSON.stringify(t),void b(r))}))},s=u(e),o=s.next();!o.done;o=s.next())for(l=o.value,c=function(e,t,n){var i=e.audio,r=e.video;if(n={type:n?"file":"media-source"},r){var a,s=r.codecs;if(r.codecs.includes(",")&&(s=hn(s=Qe("video",a=r.codecs.split(","))),a=Qe("audio",a),a=Bt(r.mimeType,a,"audio"),n.audio={contentType:a,channels:2,bitrate:e.bandwidth||1,samplerate:1,spatialRendering:!1}),s=hn(s),s=Bt(r.mimeType,s,"video"),n.video={contentType:s,width:r.width||64,height:r.height||64,bitrate:r.bandwidth||e.bandwidth||1,framerate:r.frameRate||1},r.hdr)switch(r.hdr){case"SDR":n.video.transferFunction="srgb";break;case"PQ":n.video.transferFunction="pq";break;case"HLG":n.video.transferFunction="hlg"}}if(i&&(s=dn(i.codecs),s=Bt(i.mimeType,s,"audio"),n.audio={contentType:s,channels:i.channelsCount||2,bitrate:i.bandwidth||e.bandwidth||1,samplerate:i.audioSamplingRate||1,spatialRendering:i.spatialAudio}),!(a=(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])).length)return[n];e=[],s=new Map;for(var o=(a=u(a)).next();!o.done;o=a.next()){var l=o.value;s.get(l.keySystem)||s.set(l.keySystem,[]),s.get(l.keySystem).push(l)}a=t?"required":"optional",t=t?["persistent-license"]:["temporary"];for(var c=(l=u(s.keys())).next();!c.done;c=l.next()){var d=c.value,h=(c=Object.assign({},n),s.get(d));for(d={keySystem:d,initDataType:"cenc",persistentState:a,distinctiveIdentifier:"optional",sessionTypes:t},o=(h=u(h)).next();!o.done;o=h.next()){if((o=o.value).initData&&o.initData.length){for(var f=new Set,g=u(o.initData),p=g.next();!p.done;p=g.next())f.add(p.value.initDataType);d.initDataType=o.initData[0].initDataType}o.distinctiveIdentifierRequired&&(d.distinctiveIdentifier="required"),o.persistentStateRequired&&(d.persistentState="required"),o.sessionType&&(d.sessionTypes=[o.sessionType]),i&&(d.audio?d.audio.robustness=d.audio.robustness||o.audioRobustness:d.audio={robustness:o.audioRobustness}),r&&(d.video?d.video.robustness=d.video.robustness||o.videoRobustness:d.video={robustness:o.videoRobustness})}c.keySystemConfiguration=d,e.push(c)}return e}(l,t,n),d=u(c),h=d.next();!h.done;h=d.next())f=h.value,r.push(a(l,f));return y(g,Promise.all(r),0)}))}function dn(e){return ut()&&"ac-3"==e.toLowerCase()?"ec-3":e}function hn(e){return"vp9"==e?"vp09.00.41.08":e}function fn(e,t){t.variants=t.variants.filter((function(t){var n=t.audio;return t=t.video,!(n&&e&&e.audio&&!gn(n,e.audio)||t&&e&&e.video&&!gn(t,e.video))}))}function gn(e,t){return e.mimeType==t.mimeType&&e.codecs.split(".")[0]==t.codecs.split(".")[0]}function pn(e){var t=e.audio,n=e.video,i=t?t.mimeType:null,r=n?n.mimeType:null,a=t?t.codecs:null,s=n?n.codecs:null,o=[],l=(s&&o.push(s),a&&o.push(a),[]),c=(n&&l.push(n.mimeType),t&&l.push(t.mimeType),l=l[0]||null,[]),d=(t&&c.push(t.kind),n&&c.push(n.kind),c=c[0]||null,new Set);if(t)for(var h=u(t.roles),f=h.next();!f.done;f=h.next())d.add(f.value);if(n)for(f=(h=u(n.roles)).next();!f.done;f=h.next())d.add(f.value);return e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:c,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:l,audioMimeType:i,videoMimeType:r,codecs:o.join(", "),audioCodec:a,videoCodec:s,primary:e.primary,roles:Array.from(d),audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.pixelAspectRatio=n.pixelAspectRatio||null,e.videoBandwidth=n.bandwidth||null),t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.spatialAudio=t.spatialAudio,e.label=t.label,e.audioRoles=t.roles),e}function mn(e){return{id:e.id,active:!1,type:Ze,bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,audioRoles:null,forced:e.forced,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:e.originalId,originalImageId:null}}function vn(e){var t=e.width||null,n=e.height||null,i=null,r=(e.segmentIndex&&(i=e.segmentIndex.get(0)),e.tilesLayout);return(r=i&&i.tilesLayout||r)&&null!=t&&(t/=Number(r.split("x")[0])),r&&null!=n&&(n/=Number(r.split("x")[1])),{id:e.id,active:!1,type:"image",bandwidth:e.bandwidth||0,language:"",label:null,kind:null,width:t,height:n,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:r||null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:e.originalId}}function yn(e){return e.__shaka_id||(e.__shaka_id=In++),e.__shaka_id}function bn(e){var t=En(e);return t.active="disabled"!=e.mode,t.type="text",t.originalTextId=e.id,"captions"==e.kind&&(t.mimeType="application/cea-608"),e.kind&&(t.roles=[e.kind]),"forced"==e.kind&&(t.forced=!0),t}function An(e){var t=En(e);return t.active=e.enabled,t.type="variant",t.originalAudioId=e.id,"main"==e.kind&&(t.primary=!0),e.kind&&(t.roles=[e.kind],t.audioRoles=[e.kind],t.label=e.label),t}function En(e){return{id:yn(e),active:!1,type:"",bandwidth:0,language:Qt(e.language),label:e.label,kind:e.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:null,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],forced:!1,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null}}function Tn(e){return e.allowedByApplication&&e.allowedByKeySystem}function wn(e,t){for(var n=e.filter((function(e){return e.audio&&e.audio.channelsCount})),i=new Map,r=(n=u(n)).next();!r.done;r=n.next()){var a=(r=r.value).audio.channelsCount;i.has(a)||i.set(a,[]),i.get(a).push(r)}return 0==(n=Array.from(i.keys())).length?e:(r=n.filter((function(e){return e<=t}))).length?i.get(Math.max.apply(Math,l(r))):i.get(Math.min.apply(Math,l(n)))}function Sn(e,t,n,i){var r,a=e,s=e.filter((function(e){return e.primary})),o=(a=s.length?s:a).length?a[0].language:"";a=a.filter((function(e){return e.language==o}));if(a=(a=t&&(r=en(Qt(t),e.map((function(e){return e.language}))))?e.filter((function(e){return Qt(e.language)==r})):a).filter((function(e){return e.forced==i})),n){if((e=Cn(a,n)).length)return e}else if((e=a.filter((function(e){return 0==e.roles.length}))).length)return e;return(e=a.map((function(e){return e.roles})).reduce(qe,[])).length?Cn(a,e[0]):a}function Cn(e,t){return e.filter((function(e){return e.roles.includes(t)}))}function xn(e){var t=[];return e.audio&&t.push(kn(e.audio)),e.video&&t.push(kn(e.video)),t.join(", ")}function kn(e){return"audio"==e.type?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:"video"==e.type?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"}(W=nn.prototype).push=function(e,t){this.g.hasOwnProperty(e)?this.g[e].push(t):this.g[e]=[t]},W.get=function(e){return(e=this.g[e])?e.slice():null},W.remove=function(e,t){e in this.g&&(this.g[e]=this.g[e].filter((function(e){return e!=t})),0==this.g[e].length)&&delete this.g[e]},W.size=function(){return Object.keys(this.g).length},W.keys=function(){return Object.keys(this.g)};var In=0,Ln="smooth",Rn="powerEfficient",Dn="bandwidth",_n=(new Map).set("image/svg+xml",!0).set("image/png",!0).set("image/jpeg",!0).set("image/jpg",!0),Mn=(new Map).set("image/webp","data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA").set("image/avif","data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=");function On(){var e=this;this.l=null,this.o=!1,this.i=new G,navigator.connection&&navigator.connection.addEventListener("change",(function(){var t;e.g.useNetworkInformation&&e.o&&(e.i=new G,e.g&&e.i.configure(e.g.advanced),t=e.chooseVariant())&&e.l(t)})),this.m=[],this.u=1,this.B=!1,this.h=this.j=this.g=this.s=null,this.D=new rt((function(){var t;e.g.restrictToElementSize&&(t=e.chooseVariant())&&e.l(t)}))}function Pn(e){var t=e.g.defaultBandwidthEstimate;return navigator.connection&&navigator.connection.downlink&&e.g.useNetworkInformation?1e6*navigator.connection.downlink:t}function Nn(e,t,n,i){return(t=e?t.filter((function(t){return on(t,e,{width:i,height:n})})):t).sort((function(e,t){return e.bandwidth-t.bandwidth}))}(W=On.prototype).stop=function(){this.l=null,this.o=!1,this.m=[],this.u=1,this.j=this.s=null,this.h&&(this.h.disconnect(),this.h=null),this.D.stop()},W.init=function(e){this.l=e},W.chooseVariant=function(){var t=1/0,n=1/0;this.h&&this.g.restrictToElementSize&&(n=this.g.ignoreDevicePixelRatio?1:e.devicePixelRatio,t=this.j.clientWidth*n,n*=this.j.clientHeight);t=Nn(this.g.restrictions,this.m,t,n),n=this.i.getBandwidthEstimate(Pn(this));for(var i=(t=this.m.length&&!t.length?[(t=Nn(null,this.m,1/0,1/0))[0]]:t)[0]||null,r=0;r<t.length;r++){for(var a=t[r],s=isNaN(this.u)?1:Math.abs(this.u),o=s*a.bandwidth/this.g.bandwidthDowngradeTarget,u={bandwidth:1/0},l=r+1;l<t.length;l++)if(a.bandwidth!=t[l].bandwidth){u=t[l];break}s=s*u.bandwidth/this.g.bandwidthUpgradeTarget,o<=n&&n<=s&&i.bandwidth!=a.bandwidth&&(i=a)}return this.s=Date.now(),i},W.enable=function(){this.o=!0},W.disable=function(){this.o=!1},W.segmentDownloaded=function(e,t){if(this.i.sample(e,t),null!=this.s&&this.o)e:{if(this.B){if(Date.now()-this.s<1e3*this.g.switchInterval)break e}else{var n=this.i;if(!(n.g>=n.i))break e;this.B=!0}n=this.chooseVariant(),this.i.getBandwidthEstimate(Pn(this)),n&&this.l(n)}},W.getBandwidthEstimate=function(){return this.i.getBandwidthEstimate(Pn(this))},W.setVariants=function(e){this.m=e},W.playbackRateChanged=function(e){this.u=e},W.setMediaElement=function(t){var n=this;this.j=t,this.h&&(this.h.disconnect(),this.h=null),this.j&&"ResizeObserver"in e&&(this.h=new ResizeObserver((function(){n.D.R(Bn)})),this.h.observe(this.j))},W.configure=function(e){this.g=e,this.i&&this.g&&this.i.configure(this.g.advanced)},F("shaka.abr.SimpleAbrManager",On);var Bn=1;function Fn(e,t){this.g=e,this.h=t}function Un(e,t,n,i){K([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",i].join(" "))}function jn(e,t,n,i){V([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",i].join(""))}Fn.prototype.toString=function(){return"v"+this.g+"."+this.h};var Gn=null;function Hn(e,t){this.h=e,this.g=new Set([e]);for(var n=u(t=t||[]),i=n.next();!i.done;i=n.next())this.add(i.value)}function Vn(e,t){var n,i;return!(n=!!e.audio!=!!t.audio||!!e.video!=!!t.video||e.language!=t.language)&&(n=e.audio&&t.audio)&&(n=e.audio,i=t.audio,n=!((!(!n.channelsCount||!i.channelsCount||2<n.channelsCount||2<i.channelsCount)||n.channelsCount==i.channelsCount)&&Kn(n,i)&&qn(n.roles,i.roles))),!(n=!n&&(n=e.video&&t.video)?!(Kn(n=e.video,i=t.video)&&qn(n.roles,i.roles)):n)}function Kn(e,t){if(e.mimeType==t.mimeType){var n=e.codecs.split(",").map((function(e){return jt(e)[0]})),i=t.codecs.split(",").map((function(e){return jt(e)[0]}));if(n.length==i.length){n.sort(),i.sort();for(var r=0;r<n.length;r++)if(n[r]!=i[r])return;return 1}}}function qn(e,t){var n=new Set(e),i=new Set(t);if(n.delete("main"),i.delete("main"),n.size==i.size){for(var r=(n=u(n)).next();!r.done;r=n.next())if(!i.has(r.value))return;return 1}}function zn(e){this.g=e,this.h=new Wn(e.language,"",e.audio&&e.audio.channelsCount?e.audio.channelsCount:0,"")}function Wn(e,t,n,i){this.i=e,this.j=t,this.g=n,this.h=void 0===i?"":i}function Yn(){this.g=$n,this.h=(new Map).set($n,2).set(Qn,1)}function Xn(e,t,n){e.h.set($n,n).set(Qn,t)}Hn.prototype.add=function(e){return!!Vn(this.h,e)&&(this.g.add(e),!0)},Hn.prototype.values=function(){return this.g.values()},zn.prototype.create=function(e){var t=this,n=e.filter((function(e){return Vn(t.g,e)}));return n.length?new Hn(n[0],n):this.h.create(e)},Wn.prototype.create=function(e){var t,n,i,r,a,s=[],o=(r=e,n=this.i,s=(t=en(Qt(n),r.map(Jt)))?r.filter((function(e){return t==Jt(e)})):[],e.filter((function(e){return e.primary})));for(n=s=s.length?s:o.length?o:e,i=this.j,(e=n.filter((function(e){return!!e.audio&&(i?e.audio.roles.includes(i):0==e.audio.roles.length)}))).length&&(s=e),this.g&&(e=wn(s,this.g)).length&&(s=e),e=new Hn((s=this.h&&(r=s,a=this.h,(e=r.filter((function(e){return!!e.audio&&e.audio.label.toLowerCase()==a.toLowerCase()}))).length)?e:s)[0]),o=(s=u(s)).next();!o.done;o=s.next())o=o.value,Vn(e.h,o)&&e.add(o);return e};var Qn=0,$n=1;function Zn(e,t){var n={maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4};this.l=(null==e.maxAttempts?n:e).maxAttempts,this.j=(null==e.baseDelay?n:e).baseDelay,this.o=(null==e.fuzzFactor?n:e).fuzzFactor,this.m=(null==e.backoffFactor?n:e).backoffFactor,this.g=0,this.h=this.j,(this.i=void 0!==t&&t)&&(this.g=1)}function Jn(e){var t,n;return R((function(i){if(1==i.g){if(e.g>=e.l){if(!e.i)throw new Le(2,7,1010);e.g=1,e.h=e.j}return t=e.g,e.g++,0==t?i.return():(n=e.h*(1+(2*Math.random()-1)*e.o),y(i,new Promise((function(e){new rt(e).R(n/1e3)})),2))}e.h*=e.m,b(i)}))}function ei(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}}function ti(e,t){this.promise=e,this.i=t,this.g=!1}function ni(e){return new ti(Promise.reject(e),(function(){return Promise.resolve()}))}function ii(){var e=Promise.reject(new Le(2,7,7001));return e.catch((function(){})),new ti(e,(function(){return Promise.resolve()}))}function ri(e){return new ti(Promise.resolve(e),(function(){return Promise.resolve()}))}function ai(e){return new ti(e,(function(){return e.catch((function(){}))}))}function si(e){return new ti(Promise.all(e.map((function(e){return e.promise}))),(function(){return Promise.all(e.map((function(e){return e.abort()})))}))}function oi(t,n){if(n)if(n instanceof Map)for(var i=u(n.keys()),r=i.next();!r.done;r=i.next())r=r.value,Object.defineProperty(this,r,{value:n.get(r),writable:!0,enumerable:!0});else for(i in n)Object.defineProperty(this,i,{value:n[i],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=(e.performance&&e.performance.now?e.performance:Date).now(),this.type=t,this.isTrusted=!1,this.target=this.currentTarget=null,this.g=!1}function ui(e){var t,n=new oi(e.type);for(t in e)Object.defineProperty(n,t,{value:e[t],writable:!0,enumerable:!0});return n}ti.prototype.abort=function(){return this.g=!0,this.i()},ti.prototype.finally=function(e){return this.promise.then((function(){return e(!0)}),(function(){return e(!1)})),this},ti.prototype.Z=function(e,t){function n(n){return function(o){var u;r.g&&n?a.reject(s):(u=n?e:t)?i=function(e,t,n){try{var i=e(t);return i&&i.promise&&i.abort?(n.resolve(i.promise),function(){return i.abort()}):(n.resolve(i),function(){return Promise.resolve(i).then((function(){}),(function(){}))})}catch(e){return n.reject(e),function(){return Promise.resolve()}}}(u,o,a):(n?a.resolve:a.reject)(o)}}function i(){return a.reject(s),r.abort()}var r=this,a=new tt,s=new Le(2,7,7001);return this.promise.then(n(!0),n(!1)),new ti(a,(function(){return i()}))},F("shaka.util.AbortableOperation",ti),ti.prototype.chain=ti.prototype.Z,ti.all=si,ti.notAbortable=ai,ti.completed=ri,ti.aborted=ii,ti.failed=ni,oi.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},oi.prototype.stopImmediatePropagation=function(){this.g=!0},oi.prototype.stopPropagation=function(){},F("shaka.util.FakeEvent",oi);var li={rg:"abrstatuschanged",sg:"adaptation",tg:"buffering",vg:"downloadfailed",wg:"downloadheadersreceived",xg:"drmsessionupdate",zg:"emsg",Error:"error",Ag:"expirationupdated",Bg:"gapjumped",Dg:"loaded",Eg:"loading",Gg:"manifestparsed",Hg:"mediaqualitychanged",Metadata:"metadata",Jg:"onstatechange",Kg:"onstateidle",Lg:"ratechange",Ng:"sessiondata",Og:"stalldetected",Pg:"streaming",Qg:"textchanged",Rg:"texttrackvisibility",Sg:"timelineregionadded",Tg:"timelineregionenter",Ug:"timelineregionexit",Vg:"trackschanged",Xg:"unloading",Yg:"variantchanged"};function ci(){this.da=new nn,this.Kc=this}function di(e){var t=new Set;return function e(n){switch(typeof n){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return n;default:if(!n||n.buffer&&n.buffer.constructor==ArrayBuffer)return n;if(t.has(n))return null;var i=n.constructor==Array;if(n.constructor!=Object&&!i)return null;t.add(n);var r,a=i?[]:{};for(r in n)a[r]=e(n[r]);return i&&(a.length=n.length),a}}(e)}function hi(e){var t,n={};for(t in e)n[t]=e[t];return n}function fi(){this.g=[]}function gi(e,t){e.g.push(t.finally((function(){Q(e.g,t)})))}function pi(e,t,n){ci.call(this),this.i=!1,this.m=new fi,this.g=new Set,this.h=new Set,this.l=e||null,this.j=t||null,this.s=n||null,this.o=!1}function mi(e,t,n,i){n=n||Ei;var r=Ti[e];(!r||n>=r.priority)&&(Ti[e]={priority:n,Sf:t,Tf:void 0!==i&&i})}function vi(e,t,n){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null,drmInfo:null,initData:null,initDataType:null,streamDataCallback:void 0===n?null:n}}function yi(){this.g=0}function bi(e,t,n){ti.call(this,e,t),this.h=n}ci.prototype.addEventListener=function(e,t){this.da&&this.da.push(e,t)},ci.prototype.removeEventListener=function(e,t){this.da&&this.da.remove(e,t)},ci.prototype.dispatchEvent=function(e){if(!this.da)return!0;for(var t=this.da.get(e.type)||[],n=(t=u(t=(n=this.da.get("All"))?t.concat(n):t)).next();!n.done;n=t.next()){n=n.value,e.target=this.Kc,e.currentTarget=this.Kc;try{n.handleEvent?n.handleEvent(e):n.call(this,e)}catch(e){}if(e.g)break}return e.defaultPrevented},ci.prototype.release=function(){this.da=null},fi.prototype.destroy=function(){for(var e=[],t=u(this.g),n=t.next();!n.done;n=t.next())(n=n.value).promise.catch((function(){})),e.push(n.abort());return this.g=[],Promise.all(e)},g(pi,ci),(W=pi.prototype).$d=function(e){this.o=e},W.Uf=function(e){this.g.add(e)},W.kg=function(e){this.g.delete(e)},W.af=function(){this.g.clear()},W.Vf=function(e){this.h.add(e)},W.lg=function(e){this.h.delete(e)},W.bf=function(){this.h.clear()},W.destroy=function(){return this.i=!0,this.g.clear(),this.h.clear(),ci.prototype.release.call(this),this.m.destroy()},W.request=function(e,t){var n=this,i=new yi;if(this.i)return(r=Promise.reject(new Le(2,7,7001))).catch((function(){})),new bi(r,(function(){return Promise.resolve()}),i);t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?di(t.retryParameters):{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},t.uris=di(t.uris);var r,a=(r=function(e,t,n){for(var i=ri(void 0),r={},a=(e=u(e.g)).next();!a.done;r={od:r.od},a=e.next())r.od=a.value,i=i.Z(function(e){return function(){return n.body&&(n.body=Te(n.body)),e.od(t,n)}}(r));return i.Z(void 0,(function(e){if(e instanceof Le&&7001==e.code)throw e;throw new Le(2,1,1006,e)}))}(this,e,t)).Z((function(){return function e(t,n,i,r,a,s,o){t.o&&(i.uris[a]=i.uris[a].replace("http://","https://"));var u=new De(i.uris[a]),l=u.Ea,c=!1;l||(_e(u,l=(l=location.protocol).slice(0,-1)),i.uris[a]=u.toString()),l=l.toLowerCase();var d=(l=Ti[l])?l.Sf:null;if(!d)return ni(new Le(2,1,1e3,u));var h,f=l.Tf,g=null,p=null,m=!1,v=!1;return ai(Jn(r)).Z((function(){if(t.i)return ii();h=Date.now();var e,r,s=d(i.uris[a],i,n,(function(e,i,a){g&&g.stop(),p&&p.R(r/1e3),t.l&&n==Ai&&(t.l(e,i),c=!0,o.g=a)}),(function(e){t.j&&t.j(e,i,n),v=!0}));return f&&((e=i.retryParameters.connectionTimeout)&&(g=new rt((function(){m=!0,s.abort()}))).R(e/1e3),r=i.retryParameters.stallTimeout)&&(p=new rt((function(){m=!0,s.abort()}))),s})).Z((function(e){g&&g.stop(),p&&p.stop(),null==e.timeMs&&(e.timeMs=Date.now()-h);var r={response:e,Hf:c};return!v&&t.j&&t.j(e.headers,i,n),r}),(function(u){var l,c;if(g&&g.stop(),p&&p.stop(),t.s&&(l=null,c=0,u instanceof Le&&1001==(l=u).code&&(c=u.data[1]),t.s(i,l,c,m)),t.i)return ii();if((u=m?new Le(1,1,1003,i.uris[a],n):u)instanceof Le){if(7001==u.code)throw u;if(1010==u.code)throw s;if(1==u.severity)return l=new oi("retry",l=(new Map).set("error",u)),t.dispatchEvent(l),a=(a+1)%i.uris.length,e(t,n,i,r,a,u,o)}throw u}))}(n,e,t,new Zn(t.retryParameters,!1),0,null,i)})),s=a.Z((function(t){for(var i=n,r=e,a=t,s=ri(void 0),o={},l=(i=u(i.h)).next();!l.done;o={pd:o.pd},l=i.next())o.pd=l.value,s=s.Z(function(e){return function(){var t=a.response;return t.data&&(t.data=Te(t.data)),e.pd(r,t)}}(o));return s.Z((function(){return a}),(function(e){var t=2;if(e instanceof Le){if(7001==e.code)throw e;t=e.severity}throw new Le(t,1,1007,e)}))})),o=Date.now(),l=0,c=(r.promise.then((function(){l=Date.now()-o}),(function(){})),0),d=(a.promise.then((function(){c=Date.now()}),(function(){})),s.Z((function(t){var i=Date.now()-c,r=t.response;return r.timeMs+=l,r.timeMs+=i,t.Hf||!n.l||r.fromCache||e!=Ai||n.l(r.timeMs,r.data.byteLength),r}),(function(e){throw e&&(e.severity=2),e})));return r=new bi(d.promise,(function(){return d.abort()}),i),gi(this.m,r),r},F("shaka.net.NetworkingEngine",pi),pi.makeRequest=vi,pi.defaultRetryParameters=ei,pi.prototype.clearAllResponseFilters=pi.prototype.bf,pi.prototype.unregisterResponseFilter=pi.prototype.lg,pi.prototype.registerResponseFilter=pi.prototype.Vf,pi.prototype.clearAllRequestFilters=pi.prototype.af,pi.prototype.unregisterRequestFilter=pi.prototype.kg,pi.prototype.registerRequestFilter=pi.prototype.Uf,pi.unregisterScheme=function(e){delete Ti[e]},pi.registerScheme=mi,pi.prototype.setForceHTTPS=pi.prototype.$d,pi.NumBytesRemainingClass=yi,g(bi,ti),pi.PendingRequest=bi;var Ai=1,Ei=(pi.RequestType={MANIFEST:0,SEGMENT:Ai,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5,KEY:6},3),Ti=(pi.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:Ei},{});function wi(e){this.g=!1,this.h=new tt,this.i=e}function Si(e,t){if(e.g){if(t instanceof Le&&7003==t.code)throw t;throw new Le(2,7,7003,t)}}function Ci(){this.g=new nn}function xi(e,t,n,i){var r;this.target=e,this.type=t,this.listener=n,this.g=(e=e,null!=(i=i)&&("boolean"==typeof i||(r=new Set(["passive","capture"]),Object.keys(i).filter((function(e){return!r.has(e)})),function(e){var t=ki;if(null==t){t=!1;try{var n={},i={get:function(){return!(t=!0)}};Object.defineProperty(n,"passive",i),Object.defineProperty(n,"capture",i),i=function(){},e.addEventListener("test",i,n),e.removeEventListener("test",i,n)}catch(e){t=!1}ki=t}return t}(e))?i:i.capture||!1)),this.target.addEventListener(t,n,this.g)}wi.prototype.destroy=function(){var e=this;return this.g?this.h:(this.g=!0,this.i().then((function(){e.h.resolve()}),(function(){e.h.resolve()})))},(W=Ci.prototype).release=function(){this.lb(),this.g=null},W.C=function(e,t,n,i){this.g&&(e=new xi(e,t,n,i),this.g.push(t,e))},W.oa=function(e,t,n,i){var r=this;this.C(e,t,(function i(a){r.wc(e,t,i),n(a)}),i)},W.wc=function(e,t,n){if(this.g)for(var i=this.g.get(t)||[],r=(i=u(i)).next();!r.done;r=i.next())(r=r.value).target!=e||n!=r.listener&&n||(r.wc(),this.g.remove(t,r))},W.lb=function(){if(this.g){var e,t=this.g,n=[];for(e in t.g)n.push.apply(n,l(t.g[e]));for(n=(t=u(n)).next();!n.done;n=t.next())n.value.wc();this.g.g={}}},F("shaka.util.EventManager",Ci),Ci.prototype.removeAll=Ci.prototype.lb,Ci.prototype.unlisten=Ci.prototype.wc,Ci.prototype.listenOnce=Ci.prototype.oa,Ci.prototype.listen=Ci.prototype.C,xi.prototype.wc=function(){this.target.removeEventListener(this.type,this.listener,this.g),this.listener=this.target=null,this.g=!1};var ki=void 0;function Ii(e,t){for(var n=[],i=u(e),r=i.next();!r.done;r=i.next())n.push(t(r.value));return n}function Li(e){for(var t=new Map,n=u(Object.keys(e)),i=n.next();!i.done;i=n.next())i=i.value,t.set(i,e[i]);return t}function Ri(e){var t={};return e.forEach((function(e,n){t[n]=e})),t}function Di(e,t){var n=this;t=void 0===t?1:t,this.D=e,this.G=new Set,this.l=this.s=null,this.ha=this.ca=!1,this.I=0,this.g=null,this.o=new Ci,this.i=new Map,this.B=[],this.u=new tt,this.h=null,this.m=function(t){n.u.reject(t),e.onError(t)},this.ia=new Map,this.da=new Map,this.T=new rt((function(){return t=(e=n).ia,(i=e.da).clear(),t.forEach((function(e,t){return i.set(t,e)})),(t=Array.from(i.values())).length&&t.every((function(e){return"expired"==e}))&&e.m(new Le(2,6,6014)),void e.D.Wc(Ri(i));var e,t,i})),this.M=!1,this.L=[],this.O=!1,this.ea=new rt((function(){var e;(e=n).i.forEach((function(t,n){var i=t.Od,r=n.expiration;(r=isNaN(r)?1/0:r)!=i&&(e.D.onExpirationUpdated(n.sessionId,r),t.Od=r)}))})).Ca(t),this.u.catch((function(){})),this.j=new wi((function(){return e=n,R((function(t){switch(t.g){case 1:return e.o.release(),e.o=null,e.u.reject(),e.ea.stop(),e.ea=null,e.T.stop(),e.T=null,y(t,Ki(e),2);case 2:if(e.l)return A(t,4),y(t,e.l.setMediaKeys(null),6);t.A(3);break;case 6:T(t,5);break;case 4:w(t);case 5:e.l=null;case 3:e.g=null,e.G.clear(),e.s=null,e.B=[],e.h=null,e.m=function(){},e.D=null,e.Y=!1,e.F=null,b(t)}}));var e})),this.Y=!1,this.F=null}function _i(e,t,n){return e.B=n,e.M=0<n.length,Mi(e,t)}function Mi(t,n){var i,r,a,s,o,l,c,d,h,f;return R((function(g){if(1==g.g){if(i=0==(S=Li((S=t).h.clearKeys)).size?null:(C=[],x=[],S.forEach((function(e,t){t=It(t),e=It(e),t={kty:"oct",kid:xt(t,!1),k:xt(e,!1)},C.push(t),x.push(t.kid)})),S=JSON.stringify({keys:C}),k=[{initData:we(Et(k=JSON.stringify({kids:x}))),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+e.btoa(S),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:k,keyIds:new Set(x)}))for(r=u(n),a=r.next();!a.done;a=r.next())(s=a.value).video&&(s.video.drmInfos=[i]),s.audio&&(s.audio.drmInfos=[i]);if(!(o=n.some((function(e){return!!(e.video&&e.video.drmInfos.length||e.audio&&e.audio.drmInfos.length)})))){f=Li(t.h.servers),S=n;var p=[];(k=f).forEach((function(e,t){p.push({keySystem:t,licenseServerUri:e,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})}));for(var m=u(S),v=m.next();!v.done;v=m.next())(v=v.value).video&&(v.video.drmInfos=p),v.audio&&(v.audio.drmInfos=p)}for(l=u(n),a=l.next();!a.done;a=l.next())for(c=zi(c=a.value),d=u(c),h=d.next();!h.done;h=d.next())b=h.value,A=Li(t.h.servers),E=Li(t.h.advanced||{}),T=t.h.keySystemsMapping,void 0,!(w=b.keySystem)||"org.w3.clearkey"==w&&b.licenseServerUri||(A.size&&(A=A.get(w)||"",b.licenseServerUri=A),b.keyIds||(b.keyIds=new Set),(E=E.get(w))&&(b.distinctiveIdentifierRequired||(b.distinctiveIdentifierRequired=E.distinctiveIdentifierRequired),b.persistentStateRequired||(b.persistentStateRequired=E.persistentStateRequired),b.videoRobustness||(b.videoRobustness=E.videoRobustness),b.audioRobustness||(b.audioRobustness=E.audioRobustness),b.serverCertificate||(b.serverCertificate=E.serverCertificate),E.sessionType&&(b.sessionType=E.sessionType),b.serverCertificateUri||(b.serverCertificateUri=E.serverCertificateUri)),T[w]&&(b.keySystem=T[w]),e.cast&&e.cast.__platform__&&"com.microsoft.playready"==w&&(b.keySystem="com.chromecast.playready"));return y(g,cn(n,t.M,t.Y),2)}var b,A,E,T,w,S,C,x,k;return o||Object.keys(t.h.servers).length?(f=ji(t,void 0,n),g.return(o?f:f.catch((function(){})))):(t.ca=!0,g.return(Promise.resolve()))}))}function Oi(e){var t;return R((function(n){switch(n.g){case 1:if(e.l.mediaKeys)return n.return();if(e.F)return y(n,e.F,3);n.A(2);break;case 3:return n.return();case 2:return A(n,4),e.F=e.l.setMediaKeys(e.s),y(n,e.F,6);case 6:T(n,5);break;case 4:t=w(n),e.m(new Le(2,6,6003,t.message));case 5:Si(e.j),b(n)}}))}function Pi(e){var t;return R((function(n){switch(n.g){case 1:if(!e.s||!e.g)return n.return();if(!e.g.serverCertificateUri||e.g.serverCertificate&&e.g.serverCertificate.length){n.A(2);break}return t=vi([e.g.serverCertificateUri],e.h.retryParameters),A(n,3),y(n,e.D.jb.request(5,t).promise,5);case 5:t=n.h,e.g.serverCertificate=we(t.data),T(n,4);break;case 3:throw new Le(2,6,6017,w(n));case 4:if(e.j.g)return n.return();case 2:return e.g.serverCertificate&&e.g.serverCertificate.length?(A(n,6),y(n,e.s.setServerCertificate(e.g.serverCertificate),8)):n.return();case 8:T(n,0);break;case 6:throw new Le(2,6,6004,w(n).message)}}))}function Ni(e){for(var t=(e.g?e.g.initData:[])||[],n=u(t),i=n.next();!i.done;i=n.next())Bi(e,(i=i.value).initDataType,i.initData);for(i=(n=u(e.B)).next();!i.done;i=n.next())Gi(e,i.value);return t.length||e.B.length||e.u.resolve(),e.u}function Bi(e,t,n){if(n.length){for(var i=e.i.values(),r=(i=u(i)).next();!r.done;r=i.next())if(Ae(n,r.value.initData)&&!ft("Tizen 2"))return;!function(e,t,n,i){try{var r=e.s.createSession(i)}catch(t){return void e.m(new Le(2,6,6005,t.message))}e.o.C(r,"message",(function(t){e.l&&e.h.delayLicenseRequestUntilPlayed&&e.l.paused&&!e.O?e.L.push(t):Hi(e,t)})),e.o.C(r,"keystatuseschange",(function(t){return Vi(e,t)})),e.i.set(r,{initData:n,initDataType:t,loaded:!1,Od:1/0,Ja:null,type:i});try{n=e.h.initDataTransform(n,t,e.g)}catch(n){return(t=n)instanceof Le||(t=new Le(2,6,6016,n)),void e.m(t)}e.h.logLicenseExchange&&xt(n),r.generateRequest(t,n).catch((function(t){var n,i;e.j.g||(e.i.delete(r),(n=t.errorCode)&&n.systemCode&&((i=n.systemCode)<0&&(i+=Math.pow(2,32)),i="0x"+i.toString(16)),e.m(new Le(2,6,6006,t.message,t,i)))}))}(e,t,n,e.g.sessionType)}}function Fi(e){return e&&e.match(/^com\.(microsoft|chromecast)\.playready/)}function Ui(e){return e=Ii(e=e.i.keys(),(function(e){return e.sessionId})),Array.from(e)}function ji(e,t,n){var i,r,a,s,o,l,c,d,h,f;return R((function(g){switch(g.g){case 1:if(i=new Map,n.length){r=function(e,t,n){for(var i=u(t),r=i.next();!r.done;r=i.next()){var a=u(zi(r.value));for(r=a.next();!r.done;r=a.next())r=r.value,n.has(r.keySystem)||n.set(r.keySystem,[]),n.get(r.keySystem).push(r)}if(1==n.size&&n.has(""))throw new Le(2,6,6e3);for(i={},r=(e=u(e.h.preferredKeySystems)).next();!r.done;i={md:i.md},r=e.next())for(i.md=r.value,r=(a=u(t)).next();!r.done;r=a.next())if(r=r.value.decodingInfos.find(function(e){return function(t){return t.supported&&null!=t.keySystemAccess&&t.keySystemAccess.keySystem==e.md}}(i)))return r.keySystemAccess;for(r=(e=u([!0,!1])).next();!r.done;r=e.next())for(i=r.value,r=(a=u(t)).next();!r.done;r=a.next()){var s=u(r.value.decodingInfos);for(r=s.next();!r.done;r=s.next()){var o=r.value;if(o.supported&&o.keySystemAccess){var l=u(r=n.get(o.keySystemAccess.keySystem));for(r=l.next();!r.done;r=l.next())if(!!r.value.licenseServerUri==i)return o.keySystemAccess}}}return null}(e,n,i),g.A(2);break}return y(g,(k=e,I=t,R((function(e){switch(e.g){case 1:if(1==I.size&&I.has(""))throw new Le(2,6,6e3);for(D=u(I.values()),_=D.next();!_.done;_=D.next())0==(M=_.value).audioCapabilities.length&&delete M.audioCapabilities,0==M.videoCapabilities.length&&delete M.videoCapabilities;O=u(k.h.preferredKeySystems),P=O.next();case 2:if(P.done)e.A(4);else{if(j=P.value,I.has(j))return G=I.get(j),A(e,6),y(e,navigator.requestMediaKeySystemAccess(j,[G]),8);e.A(3)}break;case 8:return L=e.h,e.return(L);case 6:w(e);case 7:Si(k.j);case 3:P=O.next(),e.A(2);break;case 4:N=u([!0,!1]),B=N.next();case 9:if(B.done){e.A(11);break}F=B.value,U=u(I.keys()),P=U.next();case 12:if(P.done)B=N.next(),e.A(9);else{if(j=P.value,(G=I.get(j)).drmInfos.some((function(e){return!!e.licenseServerUri}))==F)return A(e,15),y(e,navigator.requestMediaKeySystemAccess(j,[G]),17);e.A(13)}break;case 17:return L=e.h,e.return(L);case 15:w(e);case 16:Si(k.j);case 13:P=U.next(),e.A(12);break;case 11:return e.return(L)}}))),3);case 3:r=g.h;case 2:if(!(a=r))throw new Le(2,6,6001);for(Si(e.j),A(g,4),e.G.clear(),f=a.getConfiguration(),h=f.audioCapabilities||[],f=f.videoCapabilities||[],s=u(h),o=s.next();!o.done;o=s.next())l=o.value,e.G.add(l.contentType.toLowerCase());for(c=u(f),o=c.next();!o.done;o=c.next())d=o.value,e.G.add(d.contentType.toLowerCase());if(n.length){var p=a.keySystem,m=i.get(a.keySystem),v=[],b=[],E=[],S=[],C=new Set,x=(Yi(m,v,E,b,S,C),e.M?"persistent-license":"temporary");for(p={keySystem:p,licenseServerUri:v[0],distinctiveIdentifierRequired:m[0].distinctiveIdentifierRequired,persistentStateRequired:m[0].persistentStateRequired,sessionType:m[0].sessionType||x,audioRobustness:m[0].audioRobustness||"",videoRobustness:m[0].videoRobustness||"",serverCertificate:E[0],serverCertificateUri:b[0],initData:S,keyIds:C},v=(m=u(m)).next();!v.done;v=m.next())(v=v.value).distinctiveIdentifierRequired&&(p.distinctiveIdentifierRequired=v.distinctiveIdentifierRequired),v.persistentStateRequired&&(p.persistentStateRequired=v.persistentStateRequired);m=p}else m=a.keySystem,p=t.get(a.keySystem),v=[],b=[],E=[],S=[],C=new Set,Yi(p.drmInfos,v,E,b,S,C),m={keySystem:m,licenseServerUri:v[0],distinctiveIdentifierRequired:"required"==p.distinctiveIdentifier,persistentStateRequired:"required"==p.persistentState,sessionType:p.sessionTypes[0]||"temporary",audioRobustness:(p.audioCapabilities?p.audioCapabilities[0].robustness:"")||"",videoRobustness:(p.videoCapabilities?p.videoCapabilities[0].robustness:"")||"",serverCertificate:E[0],serverCertificateUri:b[0],initData:S,keyIds:C};if(e.g=m,e.g.licenseServerUri)return y(g,a.createMediaKeys(),6);throw new Le(2,6,6012,e.g.keySystem);case 6:return h=g.h,Si(e.j),e.s=h,e.ca=!0,y(g,Pi(e),7);case 7:Si(e.j),T(g,0);break;case 4:if(f=w(g),Si(e.j,f),e.g=null,e.G.clear(),f instanceof Le)throw f;throw new Le(2,6,6002,f.message)}var k,I,L,D,_,M,O,P,N,B,F,U,j,G}))}function Gi(e,t){var n,i,r;return R((function(a){switch(a.g){case 1:try{n=e.s.createSession("persistent-license")}catch(t){return i=new Le(2,6,6005,t.message),e.m(i),a.return(Promise.reject(i))}return e.o.C(n,"message",(function(t){e.l&&e.h.delayLicenseRequestUntilPlayed&&e.l.paused&&!e.O?e.L.push(t):Hi(e,t)})),e.o.C(n,"keystatuseschange",(function(t){return Vi(e,t)})),i={initData:null,initDataType:null,loaded:!1,Od:1/0,Ja:null,type:"persistent-license"},e.i.set(n,i),A(a,2),y(a,n.load(t),4);case 4:return r=a.h,Si(e.j),r?(i.loaded=!0,Wi(e)&&e.u.resolve(),a.return(n)):(e.i.delete(n),e.m(new Le(2,6,6013)),a.return(Promise.resolve()));case 2:r=w(a),Si(e.j,r),e.i.delete(n),e.m(new Le(2,6,6005,r.message));case 3:return a.return(Promise.resolve())}}))}function Hi(e,t){var n,i,r,a,s,o,l;R((function(c){switch(c.g){case 1:if(n=t.target,e.h.logLicenseExchange&&xt(t.message),i=e.i.get(n),r=e.g.licenseServerUri,s=e.h.advanced[e.g.keySystem],"individualization-request"==t.messageType&&s&&s.individualizationServer&&(r=s.individualizationServer),(s=vi([r],e.h.retryParameters)).body=t.message,s.method="POST",s.licenseRequestType=t.messageType,s.sessionId=n.sessionId,s.drmInfo=e.g,i&&(s.initData=i.initData,s.initDataType=i.initDataType),Fi(e.g.keySystem)){var d=s,h=bt(d.body,!0,!0);if(h.includes("PlayReadyKeyMessage")){for(var f=u((h=(new DOMParser).parseFromString(h,"application/xml")).getElementsByTagName("HttpHeader")),g=f.next();!g.done;g=f.next())g=g.value,d.headers[g.getElementsByTagName("name")[0].textContent]=g.getElementsByTagName("value")[0].textContent;d.body=kt(h.getElementsByTagName("Challenge")[0].textContent)}else d.headers["Content-Type"]="text/xml; charset=utf-8"}return r=Date.now(),A(c,2),y(c,e.D.jb.request(2,s).promise,4);case 4:a=c.h,T(c,3);break;case 2:return s=w(c),o=new Le(2,6,6007,s),e.m(o),i&&i.Ja&&i.Ja.reject(o),c.return();case 3:return e.j.g?c.return():(e.I+=(Date.now()-r)/1e3,e.h.logLicenseExchange&&xt(a.data),A(c,5),y(c,n.update(a.data),7));case 7:T(c,6);break;case 5:return o=w(c),l=new Le(2,6,6008,o.message),e.m(l),i&&i.Ja&&i.Ja.reject(l),c.return();case 6:if(e.j.g)return c.return();l=new oi("drmsessionupdate"),e.D.onEvent(l),i&&(i.Ja&&i.Ja.resolve(),new rt((function(){i.loaded=!0,Wi(e)&&e.u.resolve()})).R(Qi)),b(c)}}))}function Vi(e,t){t=t.target;var n=e.i.get(t),i=!1,r=(t.keyStatuses.forEach((function(t,r){var a,s,o,u;"string"==typeof r&&(a=r,r=t,t=a),Fi(e.g.keySystem)&&16==r.byteLength&&(navigator.userAgent.match(/Edge?\//)||dt())&&(s=(a=Se(r)).getUint32(0,!0),o=a.getUint16(4,!0),u=a.getUint16(6,!0),a.setUint32(0,s,!1),a.setUint16(4,o,!1),a.setUint16(6,u,!1)),"status-pending"!=t&&(n.loaded=!0),"expired"==t&&(i=!0),a=Lt(r),e.ia.set(a,t)})),t.expiration-Date.now());(r<0||i&&r<1e3)&&n&&!n.Ja&&(e.i.delete(t),t.close().catch((function(){}))),Wi(e)&&(e.u.resolve(),e.T.R($i))}function Ki(e){var t;return R((function(n){return t=Array.from(e.i.entries()),e.i.clear(),y(n,Promise.all(t.map((function(t){var n=(t=u(t)).next().value,i=t.next().value;return R((function(t){var r,a;return 1==t.g?(A(t,2),e.ha||e.B.includes(n.sessionId)||"persistent-license"!==i.type?y(t,(r=n,R((function(e){return 1==e.g?(a=new Promise((function(e,t){new rt(t).R(Xi)})),A(e,2),y(e,Promise.race([Promise.all([r.close(),r.closed]),a]),4)):2!=e.g?T(e,0):(w(e),void b(e))}))),5):y(t,n.remove(),5)):2!=t.g?T(t,0):(w(t),void b(t))}))}))),0)}))}function qi(e,t){if(!e.length)return t;if(!t.length)return e;for(var n=[],i=u(e),r=i.next();!r.done;r=i.next()){r=r.value;for(var a={},s=u(t),o=s.next();!o.done;a={Da:a.Da},o=s.next())if(o=o.value,r.keySystem==o.keySystem){a.Da=[],a.Da=a.Da.concat(r.initData||[]),a.Da=a.Da.concat(o.initData||[]),a.Da=a.Da.filter(function(e){return function(t,n){return void 0===t.keyId||n===e.Da.findIndex((function(e){return e.keyId===t.keyId}))}}(a)),s=r.keyIds&&o.keyIds?new Set([].concat(l(r.keyIds),l(o.keyIds))):r.keyIds||o.keyIds,n.push({keySystem:r.keySystem,licenseServerUri:r.licenseServerUri||o.licenseServerUri,distinctiveIdentifierRequired:r.distinctiveIdentifierRequired||o.distinctiveIdentifierRequired,persistentStateRequired:r.persistentStateRequired||o.persistentStateRequired,videoRobustness:r.videoRobustness||o.videoRobustness,audioRobustness:r.audioRobustness||o.audioRobustness,serverCertificate:r.serverCertificate||o.serverCertificate,serverCertificateUri:r.serverCertificateUri||o.serverCertificateUri,initData:a.Da,keyIds:s});break}}return n}function zi(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])}function Wi(e){for(var t=function(e){return e.loaded},n=u(e=e.i.values()),i=n.next();!i.done;i=n.next())if(!t(i.value))return;return 1}function Yi(e,t,n,i,r,a){for(var s={},o=(e=u(e)).next();!o.done;s={qa:s.qa},o=e.next()){if(s.qa=o.value,t.includes(s.qa.licenseServerUri)||t.push(s.qa.licenseServerUri),i.includes(s.qa.serverCertificateUri)||i.push(s.qa.serverCertificateUri),!s.qa.serverCertificate||n.some(function(e){return function(t){return Ae(t,e.qa.serverCertificate)}}(s))||n.push(s.qa.serverCertificate),s.qa.initData){o={};for(var l=u(s.qa.initData),c=l.next();!c.done;o={zc:o.zc},c=l.next())o.zc=c.value,r.some(function(e){return function(t){var n=e.zc;return!(!t.keyId||t.keyId!=n.keyId)||t.initDataType==n.initDataType&&Ae(t.initData,n.initData)}}(o))||r.push(o.zc)}if(s.qa.keyIds)for(l=(o=u(s.qa.keyIds)).next();!l.done;l=o.next())a.add(l.value)}}(W=Di.prototype).destroy=function(){return this.j.destroy()},W.configure=function(e){this.h=e},W.Yb=function(t){var n,i=this;return R((function(r){if(1==r.g)return i.s?(i.l=t,i.o.oa(i.l,"play",(function(){for(var e=u(i.L),t=e.next();!t.done;t=e.next())Hi(i,t.value);i.O=!0,i.L=[]})),"webkitCurrentPlaybackTargetIsWireless"in i.l&&i.o.C(i.l,"webkitcurrentplaybacktargetiswirelesschanged",(function(){return Ki(i)})),(n=i.g.initData.find((function(e){return 0<e.initData.length})))||e.shakaMediaKeysPolyfill||i.B.length?y(r,Oi(i),2):r.A(2)):(i.o.oa(t,"encrypted",(function(){i.m(new Le(2,6,6010))})),r.return());Ni(i),n||i.B.length||i.o.C(i.l,"encrypted",(function(e){return t=i,n=e,R((function(e){if(1==e.g)return y(e,Oi(t),2);Bi(t,n.initDataType,we(n.initData)),b(e)}));var t,n})),b(r)}))},W.ec=function(){for(var e=1/0,t=this.i.keys(),n=(t=u(t)).next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e},W.Mc=function(){return Ri(this.da)};var Xi=1,Qi=5,$i=.5,Zi=new nt((function(){return Te(new Uint8Array([0]))}));function Ji(){}function er(e,t,n,i){var r,a;return R((function(s){if(1==s.g)return i&&(r=ir[i.toLowerCase()])?s.return(r):(r=nr(e))&&(a=rr[r])?s.return(a):i?s.A(2):y(s,tr(e,t,n),3);if(2!=s.g&&(i=s.h)&&(a=ir[i]))return s.return(a);throw new Le(2,4,4e3,e)}))}function tr(e,t,n){var i,r;return R((function(a){return 1==a.g?((i=vi([e],n)).method="HEAD",y(a,t.request(0,i).promise,2)):(i=a.h,r=i.headers["content-type"],a.return(r?r.toLowerCase().split(";").shift():""))}))}function nr(e){return 1==(e=new De(e).ta.split("/").pop().split(".")).length?"":e.pop().toLowerCase()}F("shaka.media.ManifestParser",Ji),Ji.unregisterParserByMime=function(e){delete ir[e]},Ji.registerParserByMime=function(e,t){ir[e]=t},Ji.registerParserByExtension=function(e,t){rr[e]=t};var ir={},rr={};function ar(e,t){this.S=Se(e),this.h=t==or,this.g=0}function sr(){return new Le(2,3,3e3)}(W=ar.prototype).ma=function(){return this.g<this.S.byteLength},W.$=function(){return this.g},W.pf=function(){return this.S.byteLength},W.Ra=function(){try{var e=this.S.getUint8(this.g);return this.g+=1,e}catch(e){throw sr()}},W.Rd=function(){try{var e=this.S.getUint16(this.g,this.h);return this.g+=2,e}catch(e){throw sr()}},W.N=function(){try{var e=this.S.getUint32(this.g,this.h);return this.g+=4,e}catch(e){throw sr()}},W.Fe=function(){try{var e=this.S.getInt32(this.g,this.h);return this.g+=4,e}catch(e){throw sr()}},W.Jb=function(){try{var e,t;this.h?(e=this.S.getUint32(this.g,!0),t=this.S.getUint32(this.g+4,!0)):(t=this.S.getUint32(this.g,!1),e=this.S.getUint32(this.g+4,!1))}catch(e){throw sr()}if(2097151<t)throw new Le(2,3,3001);return this.g+=8,t*Math.pow(2,32)+e},W.Za=function(e){if(this.g+e>this.S.byteLength)throw sr();var t=we(this.S,this.g,e);return this.g+=e,t},W.skip=function(e){if(this.g+e>this.S.byteLength)throw sr();this.g+=e},W.ag=function(e){if(this.g<e)throw sr();this.g-=e},W.seek=function(e){if(e<0||e>this.S.byteLength)throw sr();this.g=e},W.pc=function(){for(var e=this.g;this.ma()&&0!=this.S.getUint8(this.g);)this.g+=1;return e=we(this.S,e,this.g-e),this.g+=1,yt(e)},F("shaka.util.DataViewReader",ar),ar.prototype.readTerminatedString=ar.prototype.pc,ar.prototype.rewind=ar.prototype.ag,ar.prototype.readBytes=ar.prototype.Za,ar.prototype.readUint64=ar.prototype.Jb,ar.prototype.readInt32=ar.prototype.Fe,ar.prototype.readUint32=ar.prototype.N,ar.prototype.readUint16=ar.prototype.Rd,ar.prototype.readUint8=ar.prototype.Ra,ar.prototype.getLength=ar.prototype.pf,ar.prototype.getPosition=ar.prototype.$,ar.prototype.hasMoreData=ar.prototype.ma;var or=1;function ur(){this.i=[],this.h=[],this.g=!1}function lr(e){for(var t=gr(e);e.reader.ma()&&!e.parser.g;)e.parser.Yc(e.start+t,e.reader,e.partialOkay)}function cr(e){for(var t=gr(e),n=e.reader.N(),i=0;i<n&&(e.parser.Yc(e.start+t,e.reader,e.partialOkay),!e.parser.g);i++);}function dr(e){return function(t){e(t.reader.Za(t.reader.S.byteLength-t.reader.$()))}}function hr(e){for(var t=0,n=(e=u(e)).next();!n.done;n=e.next())t=t<<8|n.value.charCodeAt(0);return t}function fr(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)}function gr(e){return 8+(e.has64BitSize?8:0)+(null!=e.flags?4:0)}ar.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:or},(W=ur.prototype).box=function(e,t){return e=hr(e),this.i[e]=pr,this.h[e]=t,this},W.U=function(e,t){return e=hr(e),this.i[e]=mr,this.h[e]=t,this},W.stop=function(){this.g=!0},W.parse=function(e,t,n){for(e=new ar(e,0),this.g=!1;e.ma()&&!this.g;)this.Yc(0,e,t,n)},W.Yc=function(e,t,n,i){var r=t.$();if(i&&r+8>t.S.byteLength)this.g=!0;else{var a=t.N(),s=t.N(),o=!1;switch(a){case 0:a=t.S.byteLength-r;break;case 1:if(i&&t.$()+8>t.S.byteLength)return void(this.g=!0);a=t.Jb(),o=!0}var u=this.h[s];if(u){var l=null,c=null;if(this.i[s]==mr){if(i&&t.$()+4>t.S.byteLength)return void(this.g=!0);l=(c=t.N())>>>24,c&=16777215}s=r+a,n&&s>t.S.byteLength&&(s=t.S.byteLength),i&&s>t.S.byteLength?this.g=!0:u({parser:this,partialOkay:n||!1,version:l,flags:c,reader:t=new ar(t=0<(i=s-t.$())?t.Za(i):new Uint8Array(0),0),size:a,start:r+e,has64BitSize:o})}else t.skip(Math.min(r+a-t.$(),t.S.byteLength-t.$()))}},F("shaka.util.Mp4Parser",ur),ur.headerSize=gr,ur.typeToString=fr,ur.allData=dr,ur.sampleDescription=cr,ur.children=lr,ur.prototype.parseNext=ur.prototype.Yc,ur.prototype.fullBox=ur.prototype.U;var pr=0,mr=1;function vr(e,t,n){0!=(t=(e=Se(e,t)).getUint32(0))&&(1==t?(e.setUint32(8,n>>32),e.setUint32(12,4294967295&n)):e.setUint32(0,n))}var yr=new nt((function(){return new Uint8Array([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])}));function br(e,t,n,i,r){if(r<=i)return null;for(var a=-1,s=-1,o=0;o<n.length;o++)if(n[o].some((function(e){return null!=e&&""!=e.g.trim()}))){a=o;break}for(o=n.length-1;0<=o;o--)if(n[o].some((function(e){return null!=e&&""!=e.g.trim()}))){s=o;break}if(-1===a||-1===s)return null;for(var u=o=!1,l="white",c="black",d=Ar(i,r,o,u,l,c);a<=s;a++){for(var h,f,g,p,m=n[a],v=-1,y=-1,b=0;b<m.length;b++)if(null!=m[b]&&""!==m[b].g.trim()){v=b;break}for(b=m.length-1;0<=b;b--)if(null!=m[b]&&""!==m[b].g.trim()){y=b;break}if(-1===v||-1===y)m=Er(i,r),e.nestedCues.push(m);else{for(;v<=y;v++)(b=m[v])?(h=b.l,f=b.i,g=b.j,p=b.h,h==o&&f==u&&g==l&&p==c||(d.payload&&e.nestedCues.push(d),d=Ar(i,r,h,f,g,p),o=h,u=f,l=g,c=p),d.payload+=b.g):d.payload+=" ";d.payload&&e.nestedCues.push(d),a!==s&&(d=Er(i,r),e.nestedCues.push(d)),d=Ar(i,r,o,u,l,c)}}return e.nestedCues.length?{cue:e,stream:t}:null}function Ar(e,t,n,i,r,a){return e=new J(e,t,""),n&&e.textDecoration.push("underline"),i&&(e.fontStyle="italic"),e.color=r,e.backgroundColor=a,e}function Er(e,t){return(e=new J(e,t,"")).lineBreak=!0,e}function Tr(e,t,n,i,r){this.g=e,this.l=t,this.i=n,this.h=i,this.j=r}function wr(e,t){this.i=[],this.g=1,this.h=0,this.u=e,this.s=t,this.j=this.m=!1,this.l="white",this.o="black",Cr(this)}function Sr(e,t,n){return br(new J(t,n,""),"CC"+(e.u<<1|e.s+1),e.i,t,n)}function Cr(e){Ir(e,0,15),e.g=1}function xr(e,t,n){if(!(n<32||127<n)){var i="";switch(t){case Lr:i=Mr.has(n)?Mr.get(n):String.fromCharCode(n);break;case Rr:i=Or.get(n);break;case Dr:e.i[e.g].pop(),i=Pr.get(n);break;case _r:e.i[e.g].pop(),i=Nr.get(n)}i&&e.i[e.g].push(new Tr(i,e.m,e.j,e.o,e.l))}}function kr(e,t,n,i){if(n<=t)for(--i;0<=i;i--)e.i[t+i]=e.i[n+i].map((function(e){return e}));else for(var r=0;r<i;r++)e.i[t+r]=e.i[n+r].map((function(e){return e}))}function Ir(e,t,n){for(var i=0;i<=n;i++)e.i[t+i]=[]}var Lr=0,Rr=1,Dr=2,_r=3,Mr=new Map([[39,"’"],[42,"á"],[92,"é"],[92,"é"],[94,"í"],[95,"ó"],[96,"ú"],[123,"ç"],[124,"÷"],[125,"Ñ"],[126,"ñ"],[127,"█"]]),Or=new Map([[48,"®"],[49,"°"],[50,"½"],[51,"¿"],[52,"™"],[53,"¢"],[54,"£"],[55,"♪"],[56,"à"],[57,"⠀"],[58,"è"],[59,"â"],[60,"ê"],[61,"î"],[62,"ô"],[63,"û"]]),Pr=new Map([[32,"Á"],[33,"É"],[34,"Ó"],[35,"Ú"],[36,"Ü"],[37,"ü"],[38,"‘"],[39,"¡"],[40,"*"],[41,"'"],[42,"─"],[43,"©"],[44,"℠"],[45,"·"],[46,"“"],[47,"”"],[48,"À"],[49,"Â"],[50,"Ç"],[51,"È"],[52,"Ê"],[53,"Ë"],[54,"ë"],[55,"Î"],[56,"Ï"],[57,"ï"],[58,"Ô"],[59,"Ù"],[60,"ù"],[61,"Û"],[62,"«"],[63,"»"]]),Nr=new Map([[32,"Ã"],[33,"ã"],[34,"Í"],[35,"Ì"],[36,"ì"],[37,"Ò"],[38,"ò"],[39,"Õ"],[40,"õ"],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,"Ä"],[49,"ä"],[50,"Ö"],[51,"ö"],[52,"ß"],[53,"¥"],[54,"¤"],[55,"│"],[56,"Å"],[57,"å"],[58,"Ø"],[59,"ø"],[60,"┌"],[61,"┐"],[62,"└"],[63,"┘"]]);function Br(e,t){this.h=Gr,this.o=new wr(e,t),this.i=new wr(e,t),this.l=new wr(e,t),this.g=this.i,this.j=0,this.m=null}function Fr(e,t,n){e.g=e.i;var i=e.g,r=null;return e.h!==Vr&&e.h!==Kr&&(r=Sr(i,e.j,n),(n=e.i).g=0<n.h?n.h:0,Ir(n,0,15),(n=e.l).g=0<n.h?n.h:0,Ir(n,0,15),i.g=15),e.h=Vr,i.h=t,r}function Ur(e){e.h=Hr,e.g=e.l,e.g.h=0}function jr(e){q("Cea608DataChannel","CEA-608 text mode entered, but is unsupported"),e.g=e.o,e.h=Kr}var Gr=0,Hr=1,Vr=3,Kr=4,qr="black green blue cyan red yellow magenta black".split(" "),zr="white green blue cyan red yellow magenta white_italics".split(" ");function Wr(){this.l=!1,this.B=this.F=0,this.D=ta,this.i=[],this.g=this.h=this.j=0,this.u=this.o=!1,this.s="white",this.m="black",Yr(this)}function Yr(e){e.i=[];for(var t=0;t<15;t++)e.i.push(Xr())}function Xr(){for(var e=[],t=0;t<42;t++)e.push(null);return e}function Qr(e,t){$r(e)&&(e.i[e.h][e.g]=new Tr(t,e.u,e.o,e.m,e.s),e.g++)}function $r(e){var t=e.g<e.B&&0<=e.g;return e.h<e.F&&0<=e.h&&t}function Zr(e,t,n){var i=new J(e.j,t,"");return i.textAlign=e.D===Jr?"left":e.D===ea?"right":ne,(n=br(i,"svc"+n,e.i,e.j,t))&&(e.j=t),n}Wr.prototype.isVisible=function(){return this.l};var Jr=0,ea=1,ta=2;function na(){this.i=[],this.h=null,this.g=0}function ia(e){this.g=0,this.h=e}function ra(e){if(e.ma())return e.h[e.g++];throw new Le(2,2,3e3)}function aa(e){this.i=e,this.h=[null,null,null,null,null,null,null,null],this.g=null}function sa(e,t){for(var n=[],i=0;i<8;i++)1==(1&t)&&e.h[i]&&n.push(i),t>>=1;return n}function oa(e,t,n){for(var i=null,r=(t=u(sa(e,t))).next();!r.done;r=t.next()){r=r.value;var a=e.h[r];a.isVisible()&&(i=Zr(a,n,e.i)),e.h[r]=null}return i}function ua(e){e.g=null,e.h=[null,null,null,null,null,null,null,null]}function la(e,t,n){var i={0:0,1:0,2:1,3:1};return da[(e=i[e])<<2|(t=i[t])<<1|(n=i[n])]}ia.prototype.ma=function(){return this.g<this.h.length},ia.prototype.$=function(){return this.g},ia.prototype.skip=function(e){if(this.g+e>this.h.length)throw new Le(2,2,3e3);this.g+=e};var ca=new Map([[32," "],[33," "],[37,"…"],[42,"Š"],[44,"Œ"],[48,"█"],[49,"‘"],[50,"’"],[51,"“"],[52,"”"],[53,"•"],[57,"™"],[58,"š"],[60,"œ"],[61,"℠"],[63,"Ÿ"],[118,"⅛"],[119,"⅜"],[120,"⅝"],[121,"⅞"],[122,"│"],[123,"┐"],[124,"└"],[125,"─"],[126,"┘"],[127,"┌"]]),da="black blue green cyan red magenta yellow white".split(" ");function ha(){this.h=[],this.g=[],this.i=new na,this.l=0,this.s=new Map([["CC1",new Br(0,0)],["CC2",new Br(0,1)],["CC3",new Br(1,0)],["CC4",new Br(1,1)]]),this.o=this.m=0,this.j=new Map,fa(this)}function fa(e){e.m=0,e.o=0;for(var t=(e=u(e.s.values())).next();!t.done;t=e.next())(t=t.value).h=2,t.g=t.i,t.m=null,Cr(t.i),Cr(t.l),Cr(t.o)}function ga(e,t){var n=[];try{for(;t.ma();){var i=ra(t).value,r=31&i;if(0!=(g=7==(g=(224&i)>>5)&&0!=r?63&ra(t).value:g)){e.j.has(g)||e.j.set(g,new aa(g));for(var a=e.j.get(g),s=t.$();t.$()-s<r;){var o,l=ra(g=t),c=l.value,d=l.pts;if(0<=(c=16===c?c<<16|ra(g).value:c)&&c<=31){var h=d;if(a.g){var f=a.g,g=null;switch(c){case 8:!$r(f)||f.g<=0&&f.h<=0||(f.g<=0?(f.g=f.B-1,f.h--):f.g--,f.i[f.h][f.g]=null);break;case 13:if(f.isVisible()&&(g=Zr(f,h,a.i)),f.h+1>=f.F){h=f;for(var p=0,m=1;m<15;m++,p++)h.i[p]=h.i[m];for(m=0;m<1;m++,p++)h.i[p]=Xr()}else f.h++;f.g=0;break;case 14:f.isVisible()&&(g=Zr(f,h,a.i)),f.i[f.h]=Xr(),f.g=0;break;case 12:f.isVisible()&&(g=Zr(f,h,a.i)),Yr(f),(h=f).h=0,h.g=0}var v=g}else v=null}else v=128<=c&&c<=159?function(e,t,n,i){if(128<=n&&n<=135)e.h[i=7&n]&&(e.g=e.h[i]);else{if(136===n){n=ra(t).value,t=null;for(var r=(n=u(sa(e,n))).next();!r.done;r=n.next())(r=e.h[r.value]).isVisible()&&(t=Zr(r,i,e.i)),Yr(r);return t}if(137===n)for(n=(t=u(sa(e,t=ra(t).value))).next();!n.done;n=t.next())(n=e.h[n.value]).isVisible()||(n.j=i),n.l=!0;else{if(138===n){for(n=ra(t).value,t=null,r=(n=u(sa(e,n))).next();!r.done;r=n.next())(r=e.h[r.value]).isVisible()&&(t=Zr(r,i,e.i)),r.l=!1;return t}if(139===n){for(n=ra(t).value,t=null,r=(n=u(sa(e,n))).next();!r.done;r=n.next())(r=e.h[r.value]).isVisible()?t=Zr(r,i,e.i):r.j=i,r.l=!r.l;return t}if(140===n)return oa(e,t=ra(t).value,i);if(143===n)return i=oa(e,255,i),ua(e),i;var a,s;144===n?(t.skip(1),i=ra(t).value,e.g&&(e.g.o=0<(128&i),e.g.u=0<(64&i))):145===n?(i=ra(t).value,n=ra(t).value,t.skip(1),e.g&&(t=la((48&n)>>4,(12&n)>>2,3&n),e.g.s=la((48&i)>>4,(12&i)>>2,3&i),e.g.m=t)):146===n?(i=ra(t).value,t=ra(t).value,e.g&&((e=e.g).h=15&i,e.g=63&t)):151===n?(t.skip(1),t.skip(1),i=ra(t).value,t.skip(1),e.g&&(e.g.D=3&i)):152<=n&&n<=159&&((r=null!==e.h[n=(15&n)-8])||((a=new Wr).j=i,e.h[n]=a),i=ra(t).value,ra(t),ra(t),a=ra(t).value,s=ra(t).value,t=ra(t).value,r&&0==(7&t)||((t=e.h[n]).h=0,t.g=0,t.u=!1,t.o=!1,t.s="white",t.m="black"),(t=e.h[n]).l=0<(32&i),t.F=1+(15&a),t.B=1+(63&s),e.g=e.h[n])}}return null}(a,g,c,d):(4096<=c&&c<=4127?8<=(h=255&c)&&h<=15?g.skip(1):16<=h&&h<=23?g.skip(2):24<=h&&h<=31&&g.skip(3):4224<=c&&c<=4255?128<=(h=255&c)&&h<=135?g.skip(4):136<=h&&h<=143&&g.skip(5):32<=c&&c<=127?(g=c,a.g&&Qr(a.g,127===g?"♪":String.fromCharCode(g))):160<=c&&c<=255?a.g&&Qr(a.g,String.fromCharCode(c)):4128<=c&&c<=4223?(g=255&c,a.g&&(ca.has(g)?(o=ca.get(g),Qr(a.g,o)):Qr(a.g,"_"))):4256<=c&&c<=4351&&a.g&&Qr(a.g,160!=(255&c)?"_":"[CC]"),null);(g=v)&&n.push(g)}}}}catch(e){if(!(e instanceof Le&&3e3===e.code))throw e;q("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.")}return n}function pa(e){for(var t=0;e;)t^=1&e,e>>=1;return 1===t}function ma(e,t){var n=null,i=null,r=e.N();return 1&t&&e.skip(8),2&t&&e.skip(4),{trackId:r,pe:n=8&t?e.N():n,ef:i=16&t?e.N():i}}function va(e,t){return{ke:1==t?e.Jb():e.N()}}function ya(e,t){return 1==t?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4)),{timescale:e.N()}}function ba(e,t,n){var i=e.N(),r=[];1&n&&e.skip(4),4&n&&e.skip(4);for(var a=0;a<i;a++){var s={Vd:null,sampleSize:null,$c:null};256&n&&(s.Vd=e.N()),512&n&&(s.sampleSize=e.N()),1024&n&&e.skip(4),2048&n&&(s.$c=0==t?e.N():e.Fe()),r.push(s)}return{bh:i,He:r}}function Aa(){this.i=new Map,this.h=this.g=0}function Ea(){this.h=new Aa,this.g=new ha}function Ta(e,t,n,i){this.ya=e,this.Ba=t,this.la=n,this.Id=void 0===i?null:i}function wa(e,t,n,i,r,a,s,o,u,l,c,d,h,f,g){l=void 0===l?[]:l,f=void 0===f?Sa:f,this.startTime=e,this.j=this.endTime=t,this.o=n,this.Ba=i,this.la=r,this.i=a,this.timestampOffset=s,this.appendWindowStart=o,this.appendWindowEnd=u,this.h=l,this.tilesLayout=void 0===c?"":c,this.m=void 0===d?null:d,this.g=void 0===h?null:h,this.status=f,this.l=void 0===g?null:g}Aa.prototype.init=function(e){var t=this,n=[],i=[];if((new ur).box("moov",lr).box("mvex",lr).U("trex",(function(e){var n=e.reader;n.skip(4),n.skip(4),e=n.N(),n=n.N(),t.g=e,t.h=n})).box("trak",lr).U("tkhd",(function(e){var t=e.reader;1==e.version?(t.skip(8),t.skip(8)):(t.skip(4),t.skip(4)),e=t.N(),n.push(e)})).box("mdia",lr).U("mdhd",(function(e){e=ya(e.reader,e.version),i.push(e.timescale)})).parse(e,!0),!n.length||!i.length||n.length!=i.length)throw new Le(2,2,2010);n.forEach((function(e,n){t.i.set(e,i[n])}))},Aa.prototype.parse=function(e){var t=this,n=[],i=this.g,r=this.h,a=[],s=null,o=9e4;return(new ur).box("moof",lr).box("traf",lr).U("trun",(function(e){a=ba(e.reader,e.version,e.flags).He})).U("tfhd",(function(e){e=ma(e.reader,e.flags),i=e.pe||t.g,r=e.ef||t.h,e=e.trackId,t.i.has(e)&&(o=t.i.get(e))})).U("tfdt",(function(e){s=va(e.reader,e.version).ke})).box("mdat",(function(e){if(null===s)throw new Le(2,2,2010);e=e.reader;var t=s,c=o,d=i,h=r,f=a,g=0,p=h;for(f.length&&(p=f[0].sampleSize||h);e.ma();){var m=e.N();if(6==(31&e.Ra())){for(var v,y=0,b=(y=(t+(y=f.length>g?f[g].$c||0:y))/c,[]),A=e.Za(m-1),E=v=0;E<A.length;)2==v&&3==A[E]?(v=0,(A=[].concat(l(A))).splice(E,1),A=new Uint8Array(A)):0==A[E]?v++:v=0,E++;for(v=A,E=0;E<v.length;){for(A=0;255==v[E];)A+=255,E++;A+=v[E++];for(var T=0;255==v[E];)T+=255,E++;T+=v[E++],4==A&&b.push(v.subarray(E,E+T)),E+=T}for(v=(b=u(b)).next();!v.done;v=b.next())n.push({Rf:v.value,pts:y})}else try{e.skip(m-1)}catch(e){break}0==(p-=m+4)&&(t=f.length>g?t+(f[g].Vd||d):t+d,g++,p=f.length>g&&f[g].sampleSize||h)}})).parse(e,!1),n},Ea.prototype.init=function(e){this.h.init(e)},Ta.prototype.ic=function(){return this.Ba},Ta.prototype.dc=function(){return this.la},F("shaka.media.InitSegmentReference",Ta),Ta.prototype.getEndByte=Ta.prototype.dc,Ta.prototype.getStartByte=Ta.prototype.ic,(W=wa.prototype).ya=function(){return this.o()},W.getStartTime=function(){return this.startTime},W.mf=function(){return this.endTime},W.ic=function(){return this.Ba},W.dc=function(){return this.la},W.Ef=function(){return this.tilesLayout},W.Df=function(){return this.m},W.Cb=function(){return this.status},W.Lf=function(){this.status=Ca},F("shaka.media.SegmentReference",wa),wa.prototype.markAsUnavailable=wa.prototype.Lf,wa.prototype.getStatus=wa.prototype.Cb,wa.prototype.getTileDuration=wa.prototype.Df,wa.prototype.getTilesLayout=wa.prototype.Ef,wa.prototype.getEndByte=wa.prototype.dc,wa.prototype.getStartByte=wa.prototype.ic,wa.prototype.getEndTime=wa.prototype.mf,wa.prototype.getUris=wa.prototype.ya;var Sa=0,Ca=1;function xa(e){return!e||1==e.length&&e.end(0)-e.start(0)<1e-6?null:1==e.length&&e.start(0)<0?0:e.length?e.start(0):null}function ka(e){return!e||1==e.length&&e.end(0)-e.start(0)<1e-6||!e.length?null:e.end(e.length-1)}function Ia(e,t){return!(!e||!e.length||1==e.length&&e.end(0)-e.start(0)<1e-6||t>e.end(e.length-1))&&t>=e.start(0)}function La(e,t){if(!e||!e.length||1==e.length&&e.end(0)-e.start(0)<1e-6)return 0;for(var n=0,i=u(Ra(e)),r=i.next();!r.done;r=i.next()){var a=r.value;r=a.start;t<(a=a.end)&&(n+=a-Math.max(r,t))}return n}function Ra(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}function Da(e,t,n,i){var r,a,s=this;this.j=e,this.m=n,this.h={},this.M={},this.L={},this.g=null,this.F=!1,this.T=i||function(){},this.i={},this.o=new Ci,this.u={},this.B=t,this.G=new tt,this.l=(a=(r=this).G,e=new MediaSource,r.o.oa(e,"sourceopen",(function(){URL.revokeObjectURL(r.I),a.resolve()})),r.I=qa(e),r.j.src=r.I,e),this.D=new wi((function(){return e=s,R((function(s){if(1==s.g){for(n in t=[],e.i)for(i=e.i[n],r=i[0],e.i[n]=i.slice(0,1),r&&t.push(r.p.catch(ze)),a=u(i.slice(1)),o=a.next();!o.done;o=a.next())o.value.p.reject(new Le(2,7,7003,void 0));for(l in e.g&&t.push(e.g.destroy()),e.m&&t.push(e.m.destroy()),e.u)t.push(e.u[l].destroy());return y(s,Promise.all(t),2)}e.o&&(e.o.release(),e.o=null),e.j&&(e.j.removeAttribute("src"),e.j.load(),e.j=null),e.l=null,e.g=null,e.m=null,e.h={},e.u={},e.B=null,e.i={},b(s)}));var e,t,n,i,r,a,o,l})),this.I="",this.s=!1,this.O=new tt}function _a(e,t,n){e.g||(e.g=new Gt(e.m));var i=e.g;e=e.F,"application/cea-608"!=t&&"application/cea-708"!=t&&(i.j=(0,qt[t])(),i.j.setSequenceMode?i.j.setSequenceMode(n):K('Text parsers should have a "setSequenceMode" method!'),i.u=e)}function Ma(e){return!e.l||"ended"==e.l.readyState}function Oa(e,t){return t==Ze?e.g.g:xa(Na(e,t))}function Pa(e,t){return t==Ze?e.g.h:ka(Na(e,t))}function Na(e,t){try{return e.h[t].buffered}catch(e){return null}}function Ba(e,t,n,i,r,a){var s,o,c,d,h,f,g,p,m,v,A;return R((function(E){switch(E.g){case 1:if(t!=(s=Je).X)E.A(2);else{if(e.s)return y(E,e.O,4);E.A(3)}break;case 4:o=E.h,e.g.s=o;case 3:return y(E,(k=e.g,I=n,L=i?i.startTime:null,D=i?i.endTime:null,R((function(e){return 1==e.g?y(e,Promise.resolve(),2):k.j&&k.i?null==L||null==D?(k.j.parseInit(we(I)),e.return()):(_=k.u?L:k.s,_={periodStart:k.s,segmentStart:L,segmentEnd:D,vttOffset:_},_=(_=k.j.parseMedia(we(I),_)).filter((function(e){return e.startTime>=k.l&&e.startTime<k.m})),k.i.append(_),null==k.g&&(k.g=Math.max(L,k.l)),k.h=Math.min(D,k.m),void b(e)):e.return()}))),5);case 5:return E.return();case 2:if(e.u[t])return y(E,(C=e.u[t],x=n,C.l=!0,C.h=new tt,C.m=[],C.j=[],C.i=[],x=we(x),C.g.push(x),C.g.flush(),C.l&&C.h.reject(new Le(2,3,3018)),C.h),7);r&&(e.g||_a(e,"text/vtt",e.s),i?(o=function(e,t){for(var n=e.h.parse(t),i=(n=u(n)).next();!i.done;i=n.next()){var r=i.value,a=we(r.Rf);if(0<a.length&&(i=e.g,r=r.pts,181===(a=new ar(a,0)).Ra())&&49===a.Rd()&&1195456820===a.N()&&3===a.Ra()){var s=a.Ra();if(0!=(64&s)){s&=31,a.skip(1);for(var o=0;o<s;o++){var c=a.Ra(),d=(4&c)>>2,h=a.Ra(),f=a.Ra();d&&(0==(c&=3)||1==c?i.h.push({pts:r,type:c,xa:h,Ma:f,order:i.h.length}):(i.g.push({pts:r,type:c,value:h,order:i.g.length}),i.g.push({pts:r,type:2,value:f,order:i.g.length})))}}}}return function(e){function t(e,t){return e.pts-t.pts||e.order-t.order}var n=[];e.h.sort(t),e.g.sort(t);for(var i,r,a=u(e.h),s=a.next();!s.done;s=a.next())(s=function(e,t){var n,i=t.type;if(16==(112&t.xa)&&(n=t.xa>>3&1,0===i?e.m=n:e.o=n),i=e.s.get("CC"+(i<<1|(i?e.o:e.m)+1)),255===t.xa&&255===t.Ma||!t.xa&&!t.Ma||!pa(t.xa)||!pa(t.Ma))return 45<=++e.l&&fa(e),null;if(e.l=0,t.xa&=127,t.Ma&=127,!t.xa&&!t.Ma)return null;if(n=null,16==(112&t.xa))e:{var r=t.xa;if(n=t.Ma,i.m===(r<<8|n))i.m=null;else if(i.m=r<<8|n,16==(240&r)&&64==(192&n)){r=[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(7&r)<<1|n>>5&1];var a,s=(30&n)>>1,o="white",u=!1;s<7?o=zr[s]:7===s&&(u=!0),n=1==(1&n),i.h!==Kr&&(s=i.g,i.h===Vr&&r!==s.g&&(kr(s,a=1+r-s.h,1+s.g-s.h,s.h),Ir(s,0,a-1),Ir(s,r+1,15-r)),s.g=r,i.g.m=n,i.g.j=u,i.g.l=o,i.g.o="black")}else if(17==(247&r)&&32==(240&n))i.g.m=!1,i.g.j=!1,i.g.l="white",xr(i.g,Lr,32),o=!1,"white_italics"===(r=zr[(14&n)>>1])&&(r="white",o=!0),i.g.m=1==(1&n),i.g.j=o,i.g.l=r;else if(16==(247&r)&&32==(240&n)||23==(247&r)&&45==(255&n))o="black",0==(7&r)&&(o=qr[(14&n)>>1]),i.g.o=o;else if(17==(247&r)&&48==(240&n))xr(i.g,Rr,n);else if(18==(246&r)&&32==(224&n))xr(i.g,1&r?_r:Dr,n);else if(20==(246&r)&&32==(240&n)){switch(n=t.pts,r=null,t.Ma){case 32:Ur(i);break;case 33:(i=i.g).i[i.g].pop();break;case 37:r=Fr(i,2,n);break;case 38:r=Fr(i,3,n);break;case 39:r=Fr(i,4,n);break;case 40:xr(i.g,Lr,32);break;case 41:i.h=2,i.g=i.i,i.g.h=0,i.j=n;break;case 42:Cr(i.o),jr(i);break;case 43:jr(i);break;case 44:r=i.i,o=null,i.h!==Kr&&(o=Sr(r,i.j,n)),Ir(r,0,15),r=o;break;case 45:r=i.g,r=i.h!==Vr?null:(o=Sr(r,i.j,n),kr(r,(u=r.g-r.h+1)-1,u,r.h),Ir(r,0,u-1),Ir(r,r.g,15-r.g),i.j=n,o);break;case 46:Ir(i.l,0,15);break;case 47:r=null,i.h!==Kr&&(r=Sr(i.i,i.j,n)),o=i.l,i.l=i.i,i.i=o,Ur(i),i.j=n}n=r;break e}n=null}else r=t.Ma,xr(i.g,Lr,t.xa),xr(i.g,Lr,r);return n}(e,s.value))&&n.push(s);for(s=(a=u(e.g)).next();!s.done;s=a.next())i=e.i,3===(r=s.value).type?(i.g=2*(63&r.value)-1,i.h=[]):i.h&&(0<i.g&&(i.h.push(r),i.g--),0===i.g)&&(i.i.push(new ia(i.h)),i.h=null,i.g=0);for(s=(a=u(e.i.i)).next();!s.done;s=a.next())s=ga(e,s.value),n.push.apply(n,l(s));return e.i.i=[],e.h=[],e.g=[],n}(e.g)}(e.B,n)).length&&(c=e.h[s.va].timestampOffset,Kt(e.g,o,i.startTime,i.endTime,c)):e.B.init(n)),E.A(6);break;case 7:c=E.h,e.g||_a(e,"text/vtt",e.s),c.metadata&&(d=e.h[t].timestampOffset,e.T(c.metadata,d,i?i.endTime:null)),c.captions&&c.captions.length&&(d=e.h[s.va].timestampOffset,m=function(e){for(var t=[],n=(e=u(e)).next();!n.done;n=e.next())n=n.value,t.push({stream:n.stream,cue:new J(n.startTime,n.endTime,n.text)});return t}(c.captions),Kt(e.g,m,i?i.startTime:null,i?i.endTime:null,d)),n=c.data;case 6:if(x=e,C=n,T=i?i.startTime:null,w=t,S=x.L[w],n=C=null==T&&S&&(ut()||ot())&&"mp4"==x.M[w].split(";")[0].split("/")[1]?function(e){function t(){r=!0}function n(e){a.push(e),lr(e)}e=we(e);var i,r=!1,a=[],s=[];if((new ur).box("moov",n).box("trak",n).box("mdia",n).box("minf",n).box("stbl",n).U("stsd",(function(e){i=e,a.push(e),cr(e)})).U("encv",t).U("enca",t).U("avc1",(function(e){s.push({box:e,nc:1701733238})})).U("avc3",(function(e){s.push({box:e,nc:1701733238})})).U("ac-3",(function(e){s.push({box:e,nc:1701733217})})).U("ec-3",(function(e){s.push({box:e,nc:1701733217})})).U("mp4a",(function(e){s.push({box:e,nc:1701733217})})).parse(e),!r){if(0==s.length||!i)throw Lt(e),new Le(2,3,3019);s.reverse();for(var o=u(s),l=o.next();!l.done;l=o.next())l=l.value,e=function(e,t,n,i,r){var a=yr.value(),s=e.subarray(n.start,n.start+n.size),o=Se(s),l=new Uint8Array(n.size+a.byteLength);for(l.set(s,0),(s=Se(l)).setUint32(4,r),l.set(a,n.size),r=o.getUint32(4),s.setUint32(n.size+16,r),vr(l,0,l.byteLength),r=new Uint8Array(e.byteLength+l.byteLength),n=ot()?n.start:n.start+n.size,a=e.subarray(n),r.set(e.subarray(0,n)),r.set(l,n),r.set(a,n+l.byteLength),i=(e=u(i)).next();!i.done;i=e.next())vr(r,(i=i.value).start,i.size+l.byteLength);return l=Se(r,t.start),t=gr(t),e=l.getUint32(t),l.setUint32(t,e+1),r}(e,i,l.box,a,l.nc)}return e}(C):C,h=e.h[t],f=za,e.s&&h.mode!=f&&i){if(t==s.va||!(s.va in e.h))return g=[h.appendWindowStart,h.appendWindowEnd],h.appendWindowStart=0,h.appendWindowEnd=1/0,p=h.timestampOffset,h.timestampOffset=0,y(E,Ga(e,t,(function(){e.h[t].appendBuffer(n)})),10);E.A(9)}else E.A(8);break;case 10:return h.timestampOffset=p,h.appendWindowStart=g[0],h.appendWindowEnd=g[1],m=xa(Na(e,t)),v=(i.startTime||0)-(m||0),e.O.resolve(v),y(E,Ga(e,t,(function(){return Ua(e,t,0,e.l.duration)})),9);case 9:h.mode=f;case 8:return i&&e.s&&t!=s.X&&a&&(A=i.startTime,Ga(e,t,(function(){var n=A;n<0&&(n+=.001),e.h[t].timestampOffset=n,ja(e,t)}))),y(E,Ga(e,t,(function(){e.h[t].appendBuffer(n)})),12);case 12:b(E)}var T,w,S,C,x,k,I,L,D,_}))}function Fa(e,t){return R((function(n){return t==Je.X?e.g?y(n,e.g.remove(0,1/0),0):n.return():y(n,Ga(e,t,(function(){return Ua(e,t,0,e.l.duration)})),0)}))}function Ua(e,t,n,i){i<=n?ja(e,t):e.h[t].remove(n,i)}function ja(e,t){var n=e.i[t][0];n&&(n.p.resolve(),Va(e,t))}function Ga(e,t,n){return Si(e.D),n={start:n,p:new tt},e.i[t].push(n),1==e.i[t].length&&Ka(e,t),n.p}function Ha(e,t){var n,i,r,a,s;return R((function(o){switch(o.g){case 1:for(r in Si(e.D),n=[],i={},e.h)i.Sb=new tt,a={start:function(e){return function(){return e.Sb.resolve()}}(i),p:i.Sb},e.i[r].push(a),n.push(i.Sb),1==e.i[r].length&&a.start(),i={Sb:i.Sb};return A(o,2),y(o,Promise.all(n),4);case 4:T(o,3);break;case 2:throw w(o);case 3:try{t()}catch(e){throw new Le(2,3,3015,e)}finally{for(s in e.h)Va(e,s)}b(o)}}))}function Va(e,t){e.i[t].shift(),Ka(e,t)}function Ka(e,t){var n=e.i[t][0];if(n)try{n.start()}catch(i){"QuotaExceededError"==i.name?n.p.reject(new Le(2,3,3017,t)):n.p.reject(new Le(2,3,3015,i)),Va(e,t)}}wa.Status={qg:Sa,Wg:Ca,Fg:2},(W=Da.prototype).destroy=function(){return this.D.destroy()},W.init=function(e,t,n){n=void 0!==n&&n;var i,r,a,s,o,l,c,d=this;return R((function(h){if(1==h.g)return i=Je,y(h,d.G,2);for(d.s=n,r={},a=u(e.keys()),s=a.next();!s.done;r={pa:r.pa},s=a.next())r.pa=s.value,o=e.get(r.pa),l=Nt(o.mimeType,o.codecs),r.pa==i.X?_a(d,l,n):(!t&&MediaSource.isTypeSupported(l)||!_t(l,r.pa)||(d.u[r.pa]=new Dt,l=Ot(r.pa,l)),c=d.l.addSourceBuffer(l),d.o.C(c,"error",function(e){return function(){d.i[e.pa][0].p.reject(new Le(2,3,3014,d.j.error?d.j.error.code:0))}}(r)),d.o.C(c,"updateend",function(e){return function(){return ja(d,e.pa)}}(r)),d.h[r.pa]=c,d.M[r.pa]=l,d.i[r.pa]=[],d.L[r.pa]=!!o.drmInfos.length);b(h)}))},W.Na=function(){var e,t,n={total:Ra(this.j.buffered),audio:Ra(Na(this,"audio")),video:Ra(Na(this,"video")),text:[]};return this.g&&(e=this.g.g,t=this.g.h,null!=e)&&null!=t&&n.text.push({start:e,end:t}),n},W.remove=function(e,t,n){var i=this;return R((function(r){return y(r,e==Je.X?i.g.remove(t,n):Ga(i,e,(function(){return Ua(i,e,t,n)})),0)}))},W.flush=function(e){var t=this;return R((function(n){return e==Je.X?n.return():y(n,Ga(t,e,(function(){t.j.currentTime-=.001,ja(t,e)})),0)}))},W.endOfStream=function(e){var t=this;return R((function(n){return y(n,Ha(t,(function(){Ma(t)||(e?t.l.endOfStream(e):t.l.endOfStream())})),0)}))},W.Ia=function(e){var t=this;return R((function(n){return y(n,Ha(t,(function(){t.l.duration=e})),0)}))},W.getDuration=function(){return this.l.duration};var qa=e.URL.createObjectURL,za="sequence",Wa=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"];function Ya(e,t,n){this.l=e,this.Zc=t,this.m=this.i=1/0,this.g=1,this.h=this.j=null,this.o=0,this.s=!0,this.u=0,this.B=void 0===n||n,this.D=0,this.F=!1}function Xa(e,t,n){this.l=n,this.j=e,this.s=$a(e),this.g=e.g.currentTime,this.m=Date.now()/1e3,this.h=!1,this.o=0,this.u=t,this.i=function(){}}function Qa(e){this.g=e}function $a(e){if(e.g.paused||0==e.g.playbackRate||0==e.g.buffered.length)var t=!1;else e:{t=e.g.currentTime;for(var n=(e=u(Ra(e.g.buffered))).next();!n.done;n=e.next())if(!(t<(n=n.value).start-.1||t>n.end-.5)){t=!0;break e}t=!1}return t}function Za(e,t,n,i,r){var a=this;this.o=r,this.g=e,this.s=t,this.D=n,this.i=new Ci,this.m=!1,this.B=e.readyState,this.u=0,this.h=i,this.l=!1,this.i.C(e,"waiting",(function(){return Ja(a)})),this.j=new rt((function(){Ja(a)})).Ca(.25)}function Ja(e){if(0!=e.g.readyState){if(e.g.seeking){if(!e.m)return}else e.m=!1;var t,n,i,r;e.g.paused&&(0!=e.g.currentTime||!e.g.autoplay&&0==e.g.currentTime)||(e.g.readyState!=e.B&&(e.B=e.g.readyState),(t=!e.h)||(i=$a(n=(t=e.h).j),r=n.g.currentTime,a=Date.now()/1e3,t.g==r&&t.s==i||(t.m=a,t.g=r,t.s=i,t.h=!1),(i=(r=a-t.m)>=t.u&&i&&!t.h)&&(t.i(t.g,r),t.h=!0,t.g=n.g.currentTime,t.o++,t.l(new oi("stalldetected"))),t=!i),t&&(t=e.g.currentTime,a=n=e.g.buffered,s=t,o=e.D.gapDetectionThreshold,null==(i=a&&a.length&&!(1==a.length&&a.end(0)-a.start(0)<1e-6)&&0<=(a=Ra(a).findIndex((function(e,t,n){return e.start>s&&(0==t||n[t-1].end-s<=o)})))?a:null)||0==i&&!e.l||(r=n.start(i))>=e.s.Oa()||r-t<.001||(0!=i&&n.end(i-1),e.g.currentTime=r,e.u++,e.o(new oi("gapjumped")))))}var a,s,o}function es(e,t,n,i){t==HTMLMediaElement.HAVE_NOTHING||e.readyState>=t?i():(t=ts.value().get(t),n.oa(e,t,i))}(W=Ya.prototype).getDuration=function(){return this.i},W.uf=function(){return this.g},W.Ia=function(e){this.i=e},W.zf=function(){return this.l},W.Le=function(e){this.o=e},W.vc=function(e){this.s=e},W.ce=function(e){this.m=e},W.gg=function(e){this.Zc=e},W.lf=function(){return this.Zc},W.Gb=function(e){var t;0!=e.length&&(t=e[e.length-1].endTime,this.Md(e[0].startTime),this.g=e.reduce((function(e,t){return Math.max(e,t.endTime-t.startTime)}),this.g),this.h=Math.max(this.h,t),null!=this.l)&&this.B&&!this.F&&(this.l=(Date.now()+this.o)/1e3-this.h-this.g)},W.Fd=function(){this.F=!0},W.Md=function(e){this.j=null==this.j?e:Math.min(this.j,e)},W.Ld=function(e){this.g=Math.max(this.g,e)},W.offset=function(e){null!=this.j&&(this.j+=e),null!=this.h&&(this.h+=e)},W.V=function(){return 1/0==this.i&&!this.s},W.ib=function(){return 1/0!=this.i&&!this.s},W.Pa=function(){return Math.max(this.u,this.fb()-this.m)},W.Me=function(e){this.u=e},W.fb=function(){return this.V()||this.ib()?Math.min(Math.max(0,(Date.now()+this.o)/1e3-this.g-this.l)+this.D,this.i):this.h?Math.min(this.h,this.i):this.i},W.hc=function(e){var t=Math.max(this.j,this.u);return 1/0==this.m?Math.ceil(1e3*t)/1e3:Math.max(t,Math.min(this.fb()-this.m+e,this.Oa()))},W.Bb=function(){return this.hc(0)},W.Oa=function(){return Math.max(0,this.fb()-(this.V()||this.ib()?this.Zc:0))},W.Pe=function(){return!(null==this.l||null!=this.h&&this.B)},W.Ke=function(e){this.D=e},F("shaka.media.PresentationTimeline",Ya),Ya.prototype.setAvailabilityTimeOffset=Ya.prototype.Ke,Ya.prototype.usingPresentationStartTime=Ya.prototype.Pe,Ya.prototype.getSeekRangeEnd=Ya.prototype.Oa,Ya.prototype.getSeekRangeStart=Ya.prototype.Bb,Ya.prototype.getSafeSeekRangeStart=Ya.prototype.hc,Ya.prototype.getSegmentAvailabilityEnd=Ya.prototype.fb,Ya.prototype.setUserSeekStart=Ya.prototype.Me,Ya.prototype.getSegmentAvailabilityStart=Ya.prototype.Pa,Ya.prototype.isInProgress=Ya.prototype.ib,Ya.prototype.isLive=Ya.prototype.V,Ya.prototype.notifyMaxSegmentDuration=Ya.prototype.Ld,Ya.prototype.notifyMinSegmentStartTime=Ya.prototype.Md,Ya.prototype.lockStartTime=Ya.prototype.Fd,Ya.prototype.notifySegments=Ya.prototype.Gb,Ya.prototype.getDelay=Ya.prototype.lf,Ya.prototype.setDelay=Ya.prototype.gg,Ya.prototype.setSegmentAvailabilityDuration=Ya.prototype.ce,Ya.prototype.setStatic=Ya.prototype.vc,Ya.prototype.setClockOffset=Ya.prototype.Le,Ya.prototype.getPresentationStartTime=Ya.prototype.zf,Ya.prototype.setDuration=Ya.prototype.Ia,Ya.prototype.getMaxSegmentDuration=Ya.prototype.uf,Xa.prototype.release=function(){this.l=this.j=null,this.i=function(){}},Za.prototype.release=function(){this.i&&(this.i.release(),this.i=null),null!=this.j&&(this.j.stop(),this.j=null),this.h&&(this.h.release(),this.h=null),this.g=this.s=this.o=null},Za.prototype.Pd=function(){this.l=!0,Ja(this)};var ts=new nt((function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])}));function ns(e,t,n){var i=this;this.g=e,this.l=t,this.j=n,this.m=!1,this.h=new Ci,this.i=new os(e),es(this.g,HTMLMediaElement.HAVE_METADATA,this.h,(function(){as(i,i.j)}))}function is(e){return e.m?e.g.currentTime:e.j}function rs(e,t){0<e.g.readyState?us(e.i,t):es(e.g,HTMLMediaElement.HAVE_METADATA,e.h,(function(){as(e,e.j)}))}function as(e,t){Math.abs(e.g.currentTime-t)<.001?ss(e):(e.h.oa(e.g,"seeking",(function(){ss(e)})),us(e.i,0==e.g.currentTime?t:e.g.currentTime))}function ss(e){e.m=!0,e.h.C(e.g,"seeking",(function(){return e.l()}))}function os(e){var t=this;this.h=e,this.m=10,this.l=this.j=this.i=0,this.g=new rt((function(){t.i<=0||t.h.currentTime!=t.j?t.g.stop():(t.h.currentTime=t.l,t.i--)}))}function us(e,t){e.j=e.h.currentTime,e.l=t,e.i=e.m,e.h.currentTime=t,e.g.Ca(.1)}function ls(e){var t=this;this.g=e,this.j=!1,this.h=null,this.i=new Ci,es(this.g,HTMLMediaElement.HAVE_CURRENT_DATA,this.i,(function(){null==t.h||0==t.h?t.j=!0:(t.i.oa(t.g,"seeking",(function(){t.j=!0})),t.g.currentTime=Math.max(0,t.g.currentTime+t.h))}))}function cs(e,t,n,i,r,a){var s,o,u,l=this;this.i=e,this.g=t.presentationTimeline,this.B=t.minBufferTime||0,this.l=n,this.s=r,this.o=null,this.u=(s=e,r=a,(u=n).stallEnabled?(o=u.stallSkip,(u=new Xa(new Qa(s),u.stallThreshold,r)).i=function(){o?s.currentTime+=o:(s.pause(),s.play())},u):null),this.j=new Za(e,t.presentationTimeline,n,this.u,a),this.h=new ns(e,(function(){(t=l.j).m=!0,t.l=!1;var e=is(l.h),t=hs(l,e);return.001<Math.abs(t-e)&&(e=Date.now()/1e3,!l.o||l.o<e-1)?(l.o=e,rs(l.h,t),t=void 0):(l.s(),t=void 0),t}),(r=this,null==(u=i)?u=1/0>r.g.getDuration()?r.g.Bb():r.g.Oa():u<0&&(u=r.g.Oa()+u),ds(r,fs(r,u)))),this.m=new rt((function(){var e,t,n;0==l.i.readyState||l.i.paused||(e=is(l.h),t=l.g.Bb(),e<(t=(n=l.g.Oa())-t<3?n-3:t)&&(e=hs(l,e),l.i.currentTime=e))})).Ca(.25)}function ds(e,t){var n=e.g.getDuration();return n<=t?n-e.l.durationBackoff:t}function hs(e,t){var n=Math.max(e.B,e.l.rebufferingGoal),i=e.l.safeSeekOffset,r=e.g.Bb(),a=e.g.Oa(),s=e.g.getDuration(),o=(a-r<3&&(r=a-3),e.g.hc(n)),u=e.g.hc(i);n=e.g.hc(n+i);return s<=t?ds(e,t):a<t?a:t<r?Ia(e.i.buffered,u)?u:n:o<=t||Ia(e.i.buffered,t)?t:n}function fs(e,t){var n=e.g.Bb();return t<n||(n=e.g.Oa())<t?n:t}function gs(e){this.J=e,this.g=null,this.h=0,this.i=!1}function ps(e,t,n){return new gs([new wa(e,e+t,(function(){return n}),0,null,null,e,e,e+t)])}function ms(e,t,n){this.i=e,this.g=t,this.h=n}function vs(){gs.call(this,[]),this.j=[]}function ys(e){var t=this;this.g=e,this.j=!1,this.i=this.g.Pc(),this.h=new rt((function(){t.g.Ae(.25*t.i)}))}function bs(e){e.h.stop();var t=e.j?0:e.i;if(0<=t)try{return void(e.g.Pc()!=t&&e.g.be(t))}catch(e){}e.h.Ca(.25),0!=e.g.Pc()&&e.g.be(0)}function As(e){var t=this;this.h=e,this.g=new Set,this.i=new rt((function(){Es(t,!1)})).Ca(.25)}function Es(e,t){for(var n=u(e.g),i=n.next();!i.done;i=n.next())i.value.j(e.h.currentTime,t)}function Ts(e){ci.call(this),this.g=new Map,this.h=e}function ws(e){ci.call(this);var t=this;this.g=new Set,this.i=e,this.h=new rt((function(){for(var e=t.i(),n=u(t.g),i=n.next();!i.done;i=n.next())(i=i.value).endTime<e.start&&(t.g.delete(i),i=new oi("regionremove",new Map([["region",i]])),t.dispatchEvent(i))})).Ca(2)}function Ss(e){ci.call(this);var t=this;this.i=e,this.g=new Map,this.l=[{qb:null,pb:ks,hb:function(e,n){return Cs(t,"enter",e,n)}},{qb:xs,pb:ks,hb:function(e,n){return Cs(t,"enter",e,n)}},{qb:Is,pb:ks,hb:function(e,n){return Cs(t,"enter",e,n)}},{qb:ks,pb:xs,hb:function(e,n){return Cs(t,"exit",e,n)}},{qb:ks,pb:Is,hb:function(e,n){return Cs(t,"exit",e,n)}},{qb:xs,pb:Is,hb:function(e,n){return Cs(t,"skip",e,n)}},{qb:Is,pb:xs,hb:function(e,n){return Cs(t,"skip",e,n)}}],this.h=new Ci,this.h.C(this.i,"regionremove",(function(e){t.g.delete(e.region)}))}function Cs(e,t,n,i){t=new oi(t,new Map([["region",n],["seeking",i]])),e.dispatchEvent(t)}ns.prototype.release=function(){this.h&&(this.h.release(),this.h=null),null!=this.i&&(this.i.release(),this.i=null),this.l=function(){},this.g=null},os.prototype.release=function(){this.g&&(this.g.stop(),this.g=null),this.h=null},(W=ls.prototype).release=function(){this.i&&(this.i.release(),this.i=null),this.g=null},W.ud=function(e){this.h=this.j?this.h:e},W.Dc=function(){return(this.j?this.g.currentTime:this.h)||0},W.je=function(){return 0},W.ie=function(){return 0},W.Be=function(){},(W=cs.prototype).release=function(){this.h&&(this.h.release(),this.h=null),this.j&&(this.j.release(),this.j=null),this.m&&(this.m.stop(),this.m=null),this.i=this.h=this.g=this.l=null,this.s=function(){}},W.ud=function(e){rs(this.h,e)},W.Dc=function(){var e=is(this.h);return 0<this.i.readyState&&!this.i.paused?fs(this,e):e},W.je=function(){return this.u.o},W.ie=function(){return this.j.u},W.Be=function(){this.j.Pd()},(W=gs.prototype).release=function(){this.i||(this.J=[],this.g&&this.g.stop(),this.g=null)},W.Mf=function(){this.i=!0},W.find=function(e){for(var t=this.J.length-1,n=t;0<=n;--n){var i=this.J[n],r=n<t?this.J[n+1].startTime:i.endTime;if(e>=i.startTime&&e<r)return n+this.h}return this.J.length&&e<this.J[0].startTime?this.h:null},W.get=function(e){return 0==this.J.length||(e-=this.h)<0||e>=this.J.length?null:this.J[e]},W.offset=function(e){if(!this.i)for(var t=u(this.J),n=t.next();!n.done;n=t.next()){(n=n.value).startTime+=e,n.endTime+=e,n.j+=e;for(var i=(n=u(n.h)).next();!i.done;i=n.next())(i=i.value).startTime+=e,i.endTime+=e,i.j+=e}},W.mc=function(e){!this.i&&e.length&&(this.J=this.J.filter((function(t){return t.startTime<e[0].startTime})),this.J.push.apply(this.J,l(e)))},W.Fb=function(e,t){var n=this;e=e.filter((function(e){return e.endTime>t&&(0==n.J.length||e.endTime>n.J[0].startTime)})),this.mc(e),this.cb(t)},W.cb=function(e){var t;this.i||(t=this.J.length,this.J=this.J.filter((function(t){return t.endTime>e})),this.h+=t-this.J.length)},W.Xa=function(e,t,n){if(n=void 0!==n&&n,!this.i){for(;this.J.length&&this.J[this.J.length-1].startTime>=t;)this.J.pop();for(;this.J.length&&this.J[0].endTime<=e;)this.J.shift(),n||this.h++;0!=this.J.length&&(e=this.J[this.J.length-1],this.J[this.J.length-1]=new wa(e.startTime,t,e.o,e.Ba,e.la,e.i,e.timestampOffset,e.appendWindowStart,e.appendWindowEnd,e.h,e.tilesLayout,e.m,e.g))}},W.ad=function(e,t){var n=this;this.i||(this.g&&this.g.stop(),this.g=new rt((function(){var e=t();e?n.J.push.apply(n.J,l(e)):(n.g.stop(),n.g=null)})),this.g.Ca(e))},gs.prototype[Symbol.iterator]=function(){return this.Ab(0)},gs.prototype.Ab=function(e){var t=this.find(e);if(null==t)return null;var n=this.get(1+--t),i=-1;if(n&&0<n.h.length)for(var r=n.h.length-1;0<=r;--r){var a=n.h[r];if(e>=a.startTime&&e<a.endTime){t++,i=r-1;break}}return new ms(this,t,i)},F("shaka.media.SegmentIndex",gs),gs.forSingleSegment=ps,gs.prototype.getIteratorForTime=gs.prototype.Ab,gs.prototype.updateEvery=gs.prototype.ad,gs.prototype.fit=gs.prototype.Xa,gs.prototype.evict=gs.prototype.cb,gs.prototype.mergeAndEvict=gs.prototype.Fb,gs.prototype.markImmutable=gs.prototype.Mf,ms.prototype.df=function(){return this.g},ms.prototype.current=function(){var e=this.i.get(this.g);return e&&0<e.h.length&&e.ya().length&&this.h>=e.h.length&&(this.g++,this.h=0,e=this.i.get(this.g)),e&&0<e.h.length?e.h[this.h]:e},ms.prototype.next=function(){var e=this.i.get(this.g);return e&&0<e.h.length&&(this.h++,!e.ya().length||this.h!=e.h.length)||(this.g++,this.h=0),{value:e=this.current(),done:!e}},F("shaka.media.SegmentIterator",ms),ms.prototype.currentPosition=ms.prototype.df,g(vs,gs),(W=vs.prototype).clone=function(){var e=new vs;return e.j=this.j.slice(),e},W.release=function(){for(var e=u(this.j),t=e.next();!t.done;t=e.next())t.value.release();this.j=[]},W.find=function(e){for(var t=0,n=u(this.j),i=n.next();!i.done;i=n.next()){var r=(i=i.value).find(e);if(null!=r)return r+t;t+=i.h+i.J.length}return null},W.get=function(e){for(var t=0,n=u(this.j),i=n.next();!i.done;i=n.next()){var r=(i=i.value).get(e-t);if(r)return r;t+=i.h+i.J.length}return null},W.offset=function(){},W.mc=function(){},W.cb=function(){},W.Fb=function(){},W.Xa=function(){},W.ad=function(){},F("shaka.media.MetaSegmentIndex",vs),vs.prototype.updateEvery=vs.prototype.ad,vs.prototype.fit=vs.prototype.Xa,vs.prototype.mergeAndEvict=vs.prototype.Fb,vs.prototype.evict=vs.prototype.cb,vs.prototype.merge=vs.prototype.mc,ys.prototype.release=function(){this.h&&(this.h.stop(),this.h=null),this.g=null},ys.prototype.set=function(e){this.i=e,bs(this)},ys.prototype.Lc=function(){return this.g.Lc()},As.prototype.release=function(){this.i.stop();for(var e=u(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g.clear()},g(Ts,ci),Ts.prototype.release=function(){this.g.clear(),ci.prototype.release.call(this)},Ts.prototype.j=function(e){for(var t=u(this.g.values()),n=t.next();!n.done;n=t.next()){e:{for(var i=(n=n.value).oc,r=i.length-1;0<=r;r--){var a=i[r];if(a.position<=e){i=a.Id;break e}}i=null}if(r=(r=i)?!((r=n.ne)===i||r&&i&&r.bandwidth==i.bandwidth&&r.audioSamplingRate==i.audioSamplingRate&&r.codecs==i.codecs&&r.contentType==i.contentType&&r.frameRate==i.frameRate&&r.height==i.height&&r.mimeType==i.mimeType&&r.channelsCount==i.channelsCount&&r.pixelAspectRatio==i.pixelAspectRatio&&r.width==i.width):r)e:{if(r=e,a=i.contentType,(a=this.h()[a])&&0<a.length){var s=a[a.length-1].end;if(r>=a[0].start&&r<s){r=!0;break e}}r=!1}r&&(n.ne=i,JSON.stringify(i),n=new oi("qualitychange",new Map([["quality",i],["position",e]])),this.dispatchEvent(n))}},g(ws,ci),ws.prototype.release=function(){this.g.clear(),this.h.stop(),ci.prototype.release.call(this)},g(Ss,ci),Ss.prototype.release=function(){this.i=null,this.g.clear(),this.h.release(),this.h=null,ci.prototype.release.call(this)},Ss.prototype.j=function(e,t){for(var n=u(this.i.g),i=n.next();!i.done;i=n.next()){i=i.value;var r=this.g.get(i),a=e<i.startTime?xs:e>i.endTime?Is:ks;this.g.set(i,a);for(var s=u(this.l),o=s.next();!o.done;o=s.next())(o=o.value).qb==r&&o.pb==a&&o.hb(i,t)}};var xs=1,ks=2,Is=3;function Ls(e,t,n,i,r){return e=vi(e,i,r),0==t&&null==n||(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}function Rs(e,t){var n=this;this.g=t,this.m=e,this.j=null,this.u=1,this.o=this.l=null,this.i=new Map,this.B=!1,this.D=null,this.s=!1,this.h=new wi((function(){return e=n,R((function(n){if(1==n.g){for(t=[],i=u(e.i.values()),r=i.next();!r.done;r=i.next())Hs(a=r.value),t.push(Vs(a));return y(n,Promise.all(t),2)}e.i.clear(),e.g=null,e.m=null,e.j=null,b(n)}));var e,t,i,r,a}))}function Ds(e,t){var n,i=e.i.get("video");i&&(n=i.stream)&&(t?(t=n.trickModeVideo)&&!i.mb&&(Os(e,t,!1,0,!1),i.mb=n):(n=i.mb)&&Os(e,n,!(i.mb=null),0,!1))}function _s(e,t,n,i,r){n=void 0!==n&&n,i=void 0===i?0:i,r=void 0!==r&&r,e.l=t,e.B&&(t.video&&Os(e,t.video,n,i,r),t.audio)&&Os(e,t.audio,n,i,r)}function Ms(e,t){e.o=t,e.B&&Os(e,t,!0,0,!1)}function Os(e,t,n,i,r){var a,s,o,u,l,c,d,h,f,g=e.i.get(t.type);g||t.type!=Ze?g&&(g.mb&&(t.trickModeVideo?t=(g.mb=t).trickModeVideo:g.mb=null),g.stream!=t||r)&&(t.type==Ze&&_a(e.g.P,Nt(t.mimeType,t.codecs),e.m.sequenceMode),g.stream.closeSegmentIndex&&g.stream.closeSegmentIndex(),g.stream=t,g.ba=null,n&&(g.ac?g.dd=!0:g.Ha?(g.ob=!0,g.Gc=i,g.dd=!0):(Hs(g),js(e,g,!0,i).catch((function(t){e.g&&e.g.onError(t)})))),c=e,d=g,R((function(e){var t,n,i,r;return 1==e.g?d.sa?(h=d.stream,f=d.sa,h.segmentIndex?e.A(2):y(e,h.createSegmentIndex(),2)):e.return():d.sa!=f||d.stream!=h?e.return():(t=c.g.Oc(),n=Pa(c.g.P,d.type),r=(i=null==(r=d.stream.segmentIndex.find(d.za?d.za.endTime:t))?null:d.stream.segmentIndex.get(r))&&i.la?i.la-i.Ba:null,(t=!!(r=i&&!r?(i.endTime-i.getStartTime())*(d.stream.bandwidth||0)/8:r)&&((i=i.i)&&(r+=(i.la?i.la-i.Ba:null)||0),8*r/(i=c.g.getBandwidthEstimate())<(n||0)-t-Math.max(c.m.minBufferTime||0,c.j.rebufferingGoal)||d.sa.h.g>r))&&d.sa.abort(),void b(e))})).catch((function(t){e.g&&e.g.onError(t)}))):(a=e,s=t,R((function(e){switch(e.g){case 1:return o=Je,A(e,2),y(e,Fa(a.g.P,o.X),4);case 4:T(e,3);break;case 2:u=w(e),a.g&&a.g.onError(u);case 3:u=Nt(s.mimeType,s.codecs),_a(a.g.P,u,a.m.sequenceMode),((l=a.g.P.m).isTextVisible()||a.j.alwaysStreamText)&&(l=Ps(s),a.i.set(o.X,l),Gs(a,l,0)),b(e)}})))}function Ps(e){return{stream:e,type:e.type,ba:null,za:null,Tc:null,Ed:null,Dd:null,Cd:null,mb:null,endOfStream:!1,Ha:!1,Ka:null,ob:!1,Gc:0,dd:!1,ac:!1,sc:!0,Td:!1,jc:!1,sa:null}}function Ns(t,n){var i,r,a;return R((function(s){switch(s.g){case 1:if(Si(t.h),n.Ha||null==n.Ka||n.ac)return s.return();if(n.Ka=null,n.ob)return y(s,js(t,n,n.dd,n.Gc),3);s.A(2);break;case 3:return s.return();case 2:if(n.stream.segmentIndex){s.A(4);break}return i=n.stream,y(s,n.stream.createSegmentIndex(),5);case 5:if(i!=n.stream)return i.closeSegmentIndex&&i.closeSegmentIndex(),null==n.Ka&&Gs(t,n,0),s.return();case 4:A(s,6),null!=(r=function(t,n){if(Fs(n)){var i=t.g.P,r=n.stream.originalId||"",a=Pa(i,"video")||0;Vt(i.g,r,a)}else{n.type==Ze&&function(e){e.g&&Vt(e.g,"",0)}(t.g.P);var s=t.g.Oc(),o=(i=n.za?n.za.endTime:s,r=function(e,t,n){return t==Ze?null==(e=e.g).h||e.h<n?0:e.h-Math.max(n,e.g):La(e=Na(e,t),n)}(t.g.P,n.type,s),Math.max(t.m.minBufferTime||0,t.j.rebufferingGoal,t.j.bufferingGoal)*t.u);if(t.m.presentationTimeline.getDuration()-i<1e-6)n.endOfStream=!0,"video"==n.type&&(s=t.i.get(Ze))&&Fs(s)&&(s.endOfStream=!0);else{if(n.endOfStream=!1,o<=r)return t.j.updateIntervalSeconds/2;if(!(r=function(e,t,n,i){if(t.ba)return t.ba.current();if(t.za||i)return t.ba=t.stream.segmentIndex.Ab(t.za?t.za.endTime:i),t.ba&&t.ba.next().value;e=e.j.inaccurateManifestTolerance,i=Math.max(n-e,0);var r=null;return e&&(t.ba=t.stream.segmentIndex.Ab(i),r=t.ba&&t.ba.next().value),r||(t.ba=t.stream.segmentIndex.Ab(n),r=t.ba&&t.ba.next().value),r}(t,n,s,r=Pa(t.g.P,n.type))))return t.j.updateIntervalSeconds;o=1/0;for(var l=Array.from(t.i.values()),c=(l=u(l)).next();!c.done;c=l.next())Fs(c=c.value)||c.ba&&!c.ba.current()||(o=Math.min(o,c.za?c.za.endTime:s));if(i>=o+t.m.presentationTimeline.g)return t.j.updateIntervalSeconds;(function(t,n,i,r){var a,s,o,u,l,c,d,h;return R((function(f){switch(f.g){case 1:if(a=Je,s=n.stream,o=n.ba,n.Ha=!0,A(f,2),2==r.Cb())throw new Le(1,1,1011);return y(f,(C=t,x=n,k=r,R((function(e){var t,n;return I=[],L=Math.max(0,k.appendWindowStart-.1),D=k.appendWindowEnd+.01,(_=k.timestampOffset)==x.Ed&&L==x.Dd&&D==x.Cd||I.push(function(){var e;return R((function(t){if(1==t.g)return A(t,2),x.Dd=L,x.Cd=D,x.Ed=_,y(t,function(e,t,n,i,r,a){return R((function(s){return t==Je.X?(a||(e.g.s=n),o=e.g,u=r,o.l=i,o.m=u,s.return()):y(s,Promise.all([Ga(e,t,(function(){var n=e.h[t].appendWindowStart,i=e.h[t].appendWindowEnd;e.h[t].abort(),e.h[t].appendWindowStart=n,e.h[t].appendWindowEnd=i,ja(e,t)})),a?Promise.resolve():Ga(e,t,(function(){var i=n;i<0&&(i+=.001),e.h[t].timestampOffset=i,ja(e,t)})),Ga(e,t,(function(){e.h[t].appendWindowStart=0,e.h[t].appendWindowEnd=r,e.h[t].appendWindowStart=i,ja(e,t)}))]),0);var o,u}))}(C.g.P,x.type,_,L,D,C.m.sequenceMode),4);if(2!=t.g)return T(t,0);throw e=w(t),x.Dd=null,x.Cd=null,x.Ed=null,e}))}()),t=k.i,n=x.Tc,!(t&&n?t.ic()==n.ic()&&t.dc()==n.dc()&&Z(t.ya(),n.ya()):t==n)&&(x.Tc=k.i)&&(M=Us(C,x,k.i),O=function(){var e,t;return R((function(n){switch(n.g){case 1:return A(n,2),y(n,M,4);case 4:return t=n.h,Si(C.h),e=x.stream.closedCaptions&&0<x.stream.closedCaptions.size,y(n,Ba(C.g.P,x.type,t,null,e),5);case 5:T(n,0);break;case 2:throw t=w(n),x.Tc=null,t}}))},C.g.Pf(k.startTime,k.i),I.push(O())),y(e,Promise.all(I),0)}))),4);case 4:return Si(t.h),t.s?f.return():(d="video/mp4"==s.mimeType||"audio/mp4"==s.mimeType,c=e.ReadableStream,t.j.lowLatencyMode&&c&&d&&!r.l?(l=new Uint8Array(0),y(f,Us(t,n,r,(function(e){var a,o,u;return R((function(c){var d,h,f;return Si(t.h),t.s?c.return():(d=l,h=e,(f=new Uint8Array(d.length+h.length)).set(d),f.set(h,d.length),l=f,a=!1,o=0,(new ur).box("mdat",(function(e){o=e.size+e.start,a=!0})).parse(l,!1,!0),a?(u=l.subarray(0,o),l=l.subarray(o),y(c,Bs(t,n,i,s,r,u),0)):c.A(0))}))})),6)):y(f,Us(t,n,r),7));case 7:if(u=f.h,Si(t.h),t.s)return f.return();if(r.l)return y(f,(g=u,p=r,m=o,R((function(t){if(1==t.g)return(v=p.l).cryptoKey?t.A(2):y(t,v.fetchKey(),3);if(!(b=v.iv))for(b=we(new ArrayBuffer(16)),E=v.firstMediaSequenceNumber+m.g,S=b.byteLength-1;0<=S;S--)b[S]=255&E,E>>=8;return t.return(e.crypto.subtle.decrypt({name:"AES-CBC",iv:b},v.cryptoKey,g))}))),9);f.A(8);break;case 9:u=f.h;case 8:return Si(t.h),n.ob?(n.Ha=!1,Gs(t,n,0),f.return()):y(f,Bs(t,n,i,s,r,u),6);case 6:if(Si(t.h),t.s)return f.return();n.za=r,o.next(),n.Ha=!1,n.Td=!1,c=t.g.P.Na(),d=c[n.type],JSON.stringify(d),n.ob||t.g.Pd(),Gs(t,n,0),T(f,0);break;case 2:if(h=w(f),Si(t.h,h),t.s)return f.return();if(n.Ha=!1,7001==h.code)n.Ha=!1,n.Ka=null,Gs(t,n,0);else if(n.type==a.X&&t.j.ignoreTextStreamFailures)t.i.delete(a.X);else if(3017==h.code)!function(e,t,n){if(!Array.from(e.i.values()).some((function(e){return e!=t&&e.Td}))){var i=Math.round(100*e.u);if(20<i)e.u-=.2;else{if(!(4<i))return t.jc=!0,e.s=!0,e.g.onError(n);e.u-=.04}t.Td=!0}Gs(e,t,4)}(t,n,h);else{if(1001!=h.code||!h.data||404!=h.data[1])return n.jc=!0,h.severity=2,y(f,Ks(t,h),0);n.Ha=!1,n.Ka=null,Gs(t,n,1)}f.A(0)}var g,p,m,v,b,E,S,C,x,k,I,L,D,_,M,O}))})(t,n,s,r).catch((function(){}))}}return null}(t,n))&&(Gs(t,n,r),n.jc=!1),T(s,7);break;case 6:return r=w(s),y(s,Ks(t,r),8);case 8:return s.return();case 7:if(a=Array.from(t.i.values()),t.B&&a.every((function(e){return e.endOfStream})))return y(s,t.g.P.endOfStream(),10);s.A(0);break;case 10:Si(t.h),0!=(a=t.g.P.getDuration())&&a<t.m.presentationTimeline.getDuration()&&t.m.presentationTimeline.Ia(a),b(s)}}))}function Bs(e,t,n,i,r,a){var s,o;return R((function(u){var l,c,d,h,f;return 1==u.g?(s=i.closedCaptions&&0<i.closedCaptions.size,(null!=i.emsgSchemeIdUris&&0<i.emsgSchemeIdUris.length||e.j.dispatchAllEmsgBoxes)&&(new ur).U("emsg",(function(t){var n,a,s,o,u,l,c,d=i.emsgSchemeIdUris;0===t.version?(n=t.reader.pc(),a=t.reader.pc(),s=t.reader.N(),o=t.reader.N(),u=t.reader.N(),l=t.reader.N(),c=r.startTime+o/s):(s=t.reader.N(),o=(c=t.reader.Jb()/s+r.timestampOffset)-r.startTime,u=t.reader.N(),l=t.reader.N(),n=t.reader.pc(),a=t.reader.pc()),t=t.reader.Za(t.reader.S.byteLength-t.reader.$()),(d&&d.includes(n)||e.j.dispatchAllEmsgBoxes)&&("urn:mpeg:dash:event:2012"==n?e.g.Qf():(d=new oi("emsg",d=(new Map).set("detail",{startTime:c,endTime:c+u/s,schemeIdUri:n,value:a,timescale:s,presentationTimeDelta:o,eventDuration:u,id:l,messageData:t})),e.g.onEvent(d)))})).parse(a),y(u,(l=e,c=t,d=n,R((function(e){if(1==e.g)return f=Math.max(l.j.bufferBehind,l.m.presentationTimeline.g),null==(h=Oa(l.g.P,c.type))||(f=d-h-f)<=.01?e.return():y(e,l.g.P.remove(c.type,h,h+f),2);Si(l.h),b(e)}))),2)):3!=u.g?(Si(e.h),o=t.sc,t.sc=!1,y(u,Ba(e.g.P,t.type,a,r,s,o),3)):(Si(e.h),void b(u))}))}function Fs(e){return e&&e.type==Ze&&("application/cea-608"==e.stream.mimeType||"application/cea-708"==e.stream.mimeType)}function Us(e,t,n,i){var r,a,s;return R((function(o){return 1==o.g?(s=Ai,r=Ls(n.ya(),n.Ba,n.la,e.j.retryParameters,i),a=t.stream,e.g.modifySegmentRequest(r,{type:a.type,init:n instanceof Ta,duration:n.endTime-n.startTime,mimeType:a.mimeType,codecs:a.codecs,bandwidth:a.bandwidth}),a=e.g.jb.request(s,r),y(o,(t.sa=a).promise,2)):(s=o.h,t.sa=null,o.return(s.data))}))}function js(e,t,n,i){var r,a;return R((function(s){return 1==s.g?(t.ob=!1,t.dd=!1,t.Gc=0,t.ac=!0,t.za=null,t.Tc=null,t.ba=null,i?(r=e.g.Oc(),a=e.g.P.getDuration(),y(s,e.g.P.remove(t.type,r+i,a),3)):y(s,Fa(e.g.P,t.type),4)):3!=s.g?(Si(e.h),n?y(s,e.g.P.flush(t.type),3):s.A(3)):(Si(e.h),t.ac=!1,t.endOfStream=!1,Gs(e,t,0),void b(s))}))}function Gs(e,t,n){var i=t.type;i==Ze&&!e.i.has(i)||(t.Ka=new it((function(){var n;return R((function(i){return 1==i.g?(A(i,2),y(i,Ns(e,t),4)):2!=i.g?T(i,0):(n=w(i),e.g&&e.g.onError(n),void b(i))}))})).R(n))}function Hs(e){null!=e.Ka&&(e.Ka.stop(),e.Ka=null)}function Vs(e){return R((function(t){return e.sa?y(t,e.sa.abort(),0):t.A(0)}))}function Ks(e,t){return R((function(n){if(1==n.g)return y(n,Jn(e.D),2);Si(e.h),e.g.onError(t),t.handled||e.j.failureCallback(t),b(n)}))}function qs(e,t){var n=Au(),i=this;this.j=t,this.i=e,this.l=n,this.o=null,this.m=[],this.h=this.g=null,this.u=Promise.resolve().then((function(){return e=i,R((function(t){var n,i,r,a,s;return e.s.g?t.A(0):(n=(n=!(0==e.m.length||e.g&&!e.g.gb||(e.g&&(e.g.Ga.kb(),e.g=null),(i=(n=e.m.shift()).create(e.l))?(n.Ga.Hb(),e.g={node:i.node,payload:i.payload,gb:i.gb,Ga:n.Ga}):n.Ga.Xc(),0)))?Promise.resolve():e.g?(r=e,R((function(e){switch(e.g){case 1:return r.i=r.j.wf(r.i,r.l,r.g.node,r.g.payload),A(e,2),r.h=r.j.ff(r.i,r.l,r.g.payload),y(e,r.h.promise,4);case 4:r.h=null,r.i==r.g.node&&(r.g.Ga.Vc(),r.g=null),T(e,0);break;case 2:return 7001==(a=w(e)).code?r.g.Ga.kb():r.g.Ga.onError(a),r.g=null,r.h=null,y(e,(s=r).j.handleError(r.l,a),5);case 5:s.i=e.h,b(e)}}))):(e.j.Of(e.i),e.o=new tt,e.o),y(t,n,1))}));var e})),this.s=new wi((function(){return e=i,R((function(i){if(1==i.g)return e.h&&e.h.abort(),Ws(e),y(i,e.u,2);for(e.g&&e.g.Ga.kb(),t=u(e.m),n=t.next();!n.done;n=t.next())n.value.Ga.kb();e.g=null,e.m=[],e.j=null,b(i)}));var e,t,n}))}function zs(e,t){var n={Hb:function(){},Vc:function(){},kb:function(){},onError:function(){},Xc:function(){},ah:function(){}};return e.m.push({create:t,Ga:n}),e.h&&e.h.abort(),Ws(e),n}function Ws(e){e.o&&(e.o.resolve(),e.o=null)}function Ys(e){this.g=null;for(var t=u(Array.from(e.textTracks)),n=t.next();!n.done;n=t.next())(n=n.value).mode="disabled","Shaka Player TextTrack"==n.label&&(this.g=n);this.g||(this.g=e.addTextTrack("subtitles","Shaka Player TextTrack")),this.g.mode="hidden"}function Xs(e,t){var n=e.mode;e.mode="showing"==n?"showing":"hidden";for(var i=u(Array.from(e.cues)),r=i.next();!r.done;r=i.next())(r=r.value)&&t(r)&&e.removeCue(r);e.mode=n}function Qs(){}function $s(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function Zs(t,n){var i=this;this.j=!1,this.i=[],this.B=t,this.m=n,this.g=document.createElement("div"),this.g.classList.add("shaka-text-container"),this.g.style.textAlign="center",this.g.style.display="flex",this.g.style.flexDirection="column",this.g.style.alignItems="center",this.g.style.justifyContent="flex-end",this.m.appendChild(this.g),this.u=new rt((function(){Js(i)})).Ca(.25),this.h=new Map,this.s=new Ci,this.s.C(document,"fullscreenchange",(function(){Js(i,!0)})),this.l=null,"ResizeObserver"in e&&(this.l=new ResizeObserver((function(){Js(i,!0)})),this.l.observe(this.g)),this.o=new Map}function Js(e,t){if(e.g){var n=e.B.currentTime;if(!e.j||void 0!==t&&t){for(var i=(r=u(e.o.values())).next();!i.done;i=r.next())$s(i.value);$s(e.g),e.h.clear(),e.o.clear()}if(e.j){for(var r=new Map,a=(i=u(e.h.keys())).next();!a.done;a=i.next())a=a.value,r.set(a,e.h.get(a));!function e(t,n,i,r,a){for(var s=!1,o=[],l=[],c=(n=u(n)).next();!c.done;c=n.next()){c=c.value,a.push(c);var d,h,f,g=t.h.get(c),p=c.startTime<=r&&c.endTime>r,m=g?g.Qe:null;if(g&&(o.push(g.vd),g.qc&&o.push(g.qc),p||(s=!0,t.h.delete(c),g=null)),p&&(l.push(c),!g)){p=void 0,void 0,y=void 0,b=void 0,A=void 0,E=void 0,d=void 0,h=void 0,f=void 0,p=t;var v=c,y=a,b=1<y.length,A=b?"span":"div",E=(v.lineBreak&&(A="br"),b=!b&&0<v.nestedCues.length,document.createElement(A));"br"!=A&&function(e,t,n,i,r){var a,s=t.style,o=0==n.nestedCues.length,u=1<i.length,l=(s.whiteSpace="pre-wrap",n.payload.replace(/\s+$/g,(function(e){return" ".repeat(e.length)})));s.webkitTextStrokeColor=n.textStrokeColor,s.webkitTextStrokeWidth=n.textStrokeWidth,s.color=n.color,s.direction=n.direction,s.opacity=n.opacity,s.paddingLeft=eo(n.linePadding,n,e.m),s.paddingRight=eo(n.linePadding,n,e.m),s.textShadow=n.textShadow,n.backgroundImage?(s.backgroundImage="url('"+n.backgroundImage+"')",s.backgroundRepeat="no-repeat",s.backgroundSize="contain",s.backgroundPosition="center",s.width="100%",s.height="100%"):(n.nestedCues.length?a=t:(a=document.createElement("span"),t.appendChild(a)),n.border&&(a.style.border=n.border),r||((t=function(e,t){for(var n=e.length-1;0<=n;n--){var i=t(e[n]);if(i||0===i)return i}return null}(i,(function(e){return e.backgroundColor})))?a.style.backgroundColor=t:l&&(a.style.backgroundColor="rgba(0, 0, 0, 0.8)")),l&&(a.textContent=l)),u&&!i[i.length-1].isContainer?s.display="inline":(s.display="flex",s.flexDirection="column",s.alignItems="center",s.justifyContent="before"==n.displayAlign?"flex-start":"center"==n.displayAlign?"center":"flex-end"),o||(s.margin="0"),s.fontFamily=n.fontFamily,s.fontWeight=n.fontWeight.toString(),s.fontStyle=n.fontStyle,s.letterSpacing=n.letterSpacing,s.fontSize=eo(n.fontSize,n,e.m),n.line&&1==n.lineInterpretation&&(s.position="absolute",s.left="0",s.top="0",n.writingMode==oe?(s.width="100%",n.lineAlign==le?s.top=n.line+"%":"end"==n.lineAlign&&(s.bottom=n.line+"%")):"vertical-lr"==n.writingMode?(s.height="100%",n.lineAlign==le?s.left=n.line+"%":"end"==n.lineAlign&&(s.right=n.line+"%")):(s.height="100%",n.lineAlign==le?s.right=n.line+"%":"end"==n.lineAlign&&(s.left=n.line+"%"))),s.lineHeight=n.lineHeight,n.position&&(n.writingMode==oe?s.paddingLeft=n.position:s.paddingTop=n.position),"line-left"==n.positionAlign?s.cssFloat="left":"line-right"==n.positionAlign&&(s.cssFloat="right"),s.textAlign=n.textAlign,s.textDecoration=n.textDecoration.join(" "),s.writingMode=n.writingMode,"writingMode"in document.documentElement.style&&s.writingMode==n.writingMode||(s.webkitWritingMode=n.writingMode),n.size&&(n.writingMode==oe?s.width=n.size+"%":s.height=n.size+"%")}(p,E,v,y,b),y=null,v.region&&v.region.id&&(y=v.region,y=p.o.has(y.id)?p.o.get(y.id):(A=document.createElement("span"),d=y.heightUnits==ve?"%":"px",h=y.widthUnits==ve?"%":"px",f=y.viewportAnchorUnits==ve?"%":"px",A.id="shaka-text-region---"+y.id,A.classList.add("shaka-text-region"),A.style.height=y.height+d,A.style.width=y.width+h,A.style.position="absolute",A.style.top=y.viewportAnchorY+f,A.style.left=y.viewportAnchorX+f,A.style.display="flex",A.style.flexDirection="column",A.style.alignItems="center",A.style.justifyContent="before"==v.displayAlign?"flex-start":"center"==v.displayAlign?"center":"flex-end",p.o.set(y.id,A),A)),A=E,b&&((A=document.createElement("span")).classList.add("shaka-text-wrapper"),A.style.backgroundColor=v.backgroundColor,E.appendChild(A)),p.h.set(v,{vd:E,Qe:A,qc:y}),m=(g=t.h.get(c)).Qe,s=!0}0<c.nestedCues.length&&m&&e(t,c.nestedCues,m,r,a),a.pop()}if(s){for(a=(r=u(o)).next();!a.done;a=r.next())(a=a.value).parentElement&&a.parentElement.removeChild(a);for(l.sort((function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime-t.endTime})),c=(l=u(l)).next();!c.done;c=l.next())((r=t.h.get(c.value)).qc?(i.appendChild(r.qc),r.qc):i).appendChild(r.vd)}}(e,e.i,e.g,n,[])}}}function eo(e,t,n){var i=(i=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))?{value:Number(i[1]),unit:i[2]}:null;if(!i)return e;var r=i.value;switch(i.unit){case"%":return r/100*n.clientHeight/t.cellResolution.rows+"px";case"c":return n.clientHeight*r/t.cellResolution.rows+"px";default:return e}}function to(e,t){this.h=e,this.g=t,this.j="",this.o=void 0,this.i=!1,this.m=!0,this.l=!1}function no(e,t,n){try{var i,r;e.g.enabled&&((i={d:1e3*n.duration,st:e.h.V()?mo:po}).ot=(c=(l=n).type,l.init?ho:"video"==c?l.codecs.includes(",")?co:lo:"audio"==c?uo:"text"==c?"application/mp4"===l.mimeType?go:fo:void 0),(r=i.ot===lo||i.ot===uo||i.ot===co||i.ot===go)&&(i.bl=(a=e,s=n.type,(s=a.h.Na()[s]).length&&(o=a.h.getCurrentTime(),s=s.find((function(e){return e.start<=o&&e.end>=o})))?1e3*(s.end-o):NaN)),n.bandwidth&&(i.br=n.bandwidth/1e3),r&&i.ot!==go&&(i.tb=function(e,t){var n=e.h.Ya();if(!n.length)return NaN;for(var i=n[0],r=(n=u(n)).next();!r.done;r=n.next())"variant"===(r=r.value).type&&r.bandwidth>i.bandwidth&&(i=r);switch(t){case lo:return i.videoBandwidth||NaN;case uo:return i.audioBandwidth||NaN;default:return i.bandwidth}}(e,i.ot)/1e3),ro(e,t,i))}catch(e){q("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",e)}var a,s,o,l,c}function io(t){return t.j||(t.j=t.g.sessionId||e.crypto.randomUUID()),{v:1,sf:t.o,sid:t.j,cid:t.g.contentId,mtp:t.h.getBandwidthEstimate()/1e3}}function ro(e,t,n){n=void 0===n?{}:n;var i,r,a=e.g.useHeaders;e.g.enabled&&(Object.assign(n,io(e)),n.pr=e.h.Nc(),i=n.ot===lo||n.ot===co,e.l&&i&&(n.bs=!0,n.su=!0,e.l=!1),null==n.su&&(n.su=e.m),a?(e=function(e){for(var t=Object.keys(e),n={},i=["Object","Request","Session","Status"],r=[{},{},{},{}],a={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3},s=(t=u(t)).next();!s.done;s=t.next())r[null!=a[s=s.value]?a[s]:1][s]=e[s];for(e=0;e<r.length;e++)(a=ao(r[e]))&&(n["CMCD-"+i[e]]=a);return n}(n),Object.keys(e).length&&Object.assign(t.headers,e)):(r=ao(n))&&(t.uris=t.uris.map((function(e){return so(e,r)}))))}function ao(e){function t(e){return 100*n(e/100)}function n(e){return Math.round(e)}for(var i=[],r={br:n,d:n,bl:t,dl:t,mtp:t,nor:function(e){return encodeURIComponent(e)},rtp:t,tb:n},a=Object.keys(e||{}).sort(),s=(a=u(a)).next();!s.done;s=a.next()){var o,l,c=e[s=s.value];l=c,Number.isNaN(l)||null==l||""===l||!1===l||"v"===s&&1===c||"pr"==s&&1===c||(l=void 0,l="string"==(o=typeof(c=(o=r[s])?o(c):c))&&"ot"!==s&&"sf"!==s&&"st"!==s?s+"="+JSON.stringify(c):"boolean"===o?s:"symbol"===o?s+"="+c.description:s+"="+c,i.push(l))}return i.join(",")}function so(e,t){return!t||e.includes("offline:")?e:((e=new De(e)).g.set("CMCD",t),e.toString())}Rs.prototype.destroy=function(){return this.h.destroy()},Rs.prototype.configure=function(e){this.j=e,this.D=new Zn({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor,timeout:0,stallTimeout:0,connectionTimeout:0},!0)},Rs.prototype.start=function(){var e=this;return R((function(t){if(1==t.g)return y(t,(n=e,R((function(e){if(1==e.g){if(r=Je,n.l)return i=new Map,a=new Set,n.l.audio&&(i.set(r.bb,n.l.audio),a.add(n.l.audio)),n.l.video&&(i.set(r.va,n.l.video),a.add(n.l.video)),n.o&&(i.set(r.X,n.o),a.add(n.o)),r=n.g.P,a=n.j.forceTransmuxTS,y(e,r.init(i,a,n.m.sequenceMode),2);throw new Le(2,5,5006)}Si(n.h);var t=n.m.presentationTimeline.getDuration();for(1/0>t?n.g.P.Ia(t):n.g.P.Ia(Math.pow(2,32)),s=u(i.keys()),o=s.next();!o.done;o=s.next())l=o.value,c=i.get(l),n.i.has(l)||(c=Ps(c),n.i.set(l,c),Gs(n,c,0));b(e)}))),2);var n,i,r,a,s,o,l,c;Si(e.h),e.B=!0,b(t)}))},Rs.prototype.sc=function(){for(var e=this.g.Oc(),t=u(this.i.keys()),n=t.next();!n.done;n=t.next()){var i=n.value,r=((n=this.i.get(i)).ba=null,this.g.P);if(!(r=i==Ze?null!=(r=r.g).g&&null!=r.h&&e>=r.g&&e<r.h:Ia(r=Na(r,i),e))){if(null==Pa(this.g.P,i)&&!n.Ha||function(e,t){t.ac||t.ob||(t.Ha?(t.ob=!0,t.Gc=0):null==Oa(e.g.P,t.type)?null==t.Ka&&Gs(e,t,0):(Hs(t),js(e,t,!1,0).catch((function(t){e.g&&e.g.onError(t)}))))}(this,n),n.sa&&(n.sa.abort(),n.sa=null),i===Ze)for((i=this.g.P.B.g).l=0,i.h=[],i.g=[],(r=i.i).i=[],r.h=[],r.g=0,fa(i),r=(i=u(i.j.values())).next();!r.done;r=i.next())ua(r.value);n.sc=!0}}},qs.prototype.destroy=function(){return this.s.destroy()},(W=Ys.prototype).remove=function(e,t){return!!this.g&&(Xs(this.g,(function(n){return n.startTime<t&&n.endTime>e})),!0)},W.append=function(e){function t(e){var n=[],i=700<=e.fontWeight,r="italic"==e.fontStyle,a=e.textDecoration.includes("underline");return i&&n.push("b"),r&&n.push("i"),a&&n.push("u"),i=n.reduce((function(e,t){return e+"<"+t+">"}),""),n=n.reduceRight((function(e,t){return e+"</"+t+">"}),""),e.lineBreak?"\n":e.nestedCues.length?e.nestedCues.map(t).join(""):i+e.payload+n}for(var n=function e(n,i){for(var r,a=u(n),s=a.next();!s.done;s=a.next())(s=s.value).isContainer?e(s.nestedCues,i):((r=s.clone()).nestedCues=[],r.payload=t(s),i.push(r));return i}(e,[]),i=[],r=(e=this.g.cues?Array.from(this.g.cues):[],{}),a=(n=u(n)).next();!a.done;r={rb:r.rb},a=n.next())r.rb=a.value,e.some(function(e){return function(t){return t.startTime==e.rb.startTime&&t.endTime==e.rb.endTime&&t.text==e.rb.payload}}(r))||(a=function(e){if(e.startTime>=e.endTime)return null;var t=new VTTCue(e.startTime,e.endTime,e.payload);t.lineAlign=e.lineAlign,t.positionAlign=e.positionAlign,e.size&&(t.size=e.size);try{t.align=e.textAlign}catch(e){}return"center"==e.textAlign&&"center"!=t.align&&(t.align="middle"),"vertical-lr"==e.writingMode?t.vertical="lr":"vertical-rl"==e.writingMode&&(t.vertical="rl"),1==e.lineInterpretation&&(t.snapToLines=!1),null!=e.line&&(t.line=e.line),null!=e.position&&(t.position=e.position),t}(r.rb))&&i.push(a);for(r=(e=u(e=i.slice().sort((function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime!=t.endTime?e.endTime-t.startTime:"line"in VTTCue.prototype?i.indexOf(t)-i.indexOf(e):i.indexOf(e)-i.indexOf(t)})))).next();!r.done;r=e.next())this.g.addCue(r.value)},W.destroy=function(){return this.g&&(Xs(this.g,(function(){return 1})),this.g.mode="disabled"),this.g=null,Promise.resolve()},W.isTextVisible=function(){return"showing"==this.g.mode},W.setTextVisibility=function(e){this.g.mode=e?"showing":"hidden"},F("shaka.text.SimpleTextDisplayer",Ys),F("shaka.util.Dom",Qs),Qs.removeAllChildren=$s,(W=Zs.prototype).append=function(e){for(var t=[].concat(l(this.i)),n={},i=(e=u(e)).next();!i.done;n={yc:n.yc},i=e.next())n.yc=i.value,t.some(function(e){return function(t){return ee(t,e.yc)}}(n))||this.i.push(n.yc);Js(this)},W.destroy=function(){this.m.removeChild(this.g),this.g=null,this.j=!1,this.i=[],this.u&&this.u.stop(),this.h.clear(),this.s&&(this.s.release(),this.s=null),this.l&&(this.l.disconnect(),this.l=null)},W.remove=function(e,t){var n;return!!this.g&&(n=this.i.length,this.i=this.i.filter((function(n){return n.startTime<e||n.endTime>=t})),Js(this,n>this.i.length),!0)},W.isTextVisible=function(){return this.j},W.setTextVisibility=function(e){this.j=e},F("shaka.text.UITextDisplayer",Zs),F("shaka.text.WebVttGenerator",(function(){}));var oo="m",uo="a",lo="v",co="av",ho="i",fo="c",go="tt",po="v",mo="l";function vo(){}function yo(e,t,n,i,r){var a,s=r in i,o=!0;for(a in t){var u=r+"."+a,l=s?i[r]:n[a];s||a in n?void 0===t[a]?void 0===l||s?delete e[a]:e[a]=di(l):l.constructor==Object&&t[a]&&t[a].constructor==Object?(e[a]||(e[a]=di(l)),u=yo(e[a],t[a],l,i,u),o=o&&u):typeof t[a]!=typeof l||null==t[a]||"function"!=typeof t[a]&&t[a].constructor!=l.constructor?(V("Invalid config, wrong type for "+u),o=!1):("function"==typeof n[a]&&n[a].length!=t[a].length&&K("Unexpected number of arguments for "+u),e[a]=t[a]):(V("Invalid config, unrecognized key "+u),o=!1)}return o}function bo(e,t){for(var n={},i=n,r=0,a=0;!((r=e.indexOf(".",r))<0);)0!=r&&"\\"==e[r-1]||(i[a=e.substring(a,r).replace(/\\\./g,".")]={},i=i[a],a=r+1),r+=1;return i[e.substring(a).replace(/\\\./g,".")]=t,n}function Ao(){}function Eo(){var e=1/0,t=(navigator.connection&&navigator.connection.saveData&&(e=360),{retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,initDataTransform:function(e,t,n){return e},logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[],keySystemsMapping:{}}),n={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,defaultPresentationDelay:0,segmentRelativeVttTiming:!1,dash:{clockSyncUri:"",ignoreDrmInfo:!1,disableXlinkProcessing:!1,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},manifestPreprocessor:function(e){return e}},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,defaultAudioCodec:"mp4a.40.2",defaultVideoCodec:"avc1.42E01E",ignoreManifestProgramDateTime:!1,mediaPlaylistFullMimeType:'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"'}},i={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},failureCallback:function(e){},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.5,durationBackoff:1,forceTransmuxTS:!1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsOnSafari:!0,inaccurateManifestTolerance:2,lowLatencyMode:!1,autoLowLatencyMode:!1,forceHTTPS:!1,preferNativeHls:!1,updateIntervalSeconds:1,dispatchAllEmsgBoxes:!1,observeQualityChanges:!1,maxDisabledTime:30},r=((ft("Web0S")||ut()||ft("CrKey"))&&(i.stallSkip=0),{trackSelectionCallback:function(e){return R((function(t){return t.return(e)}))},downloadSizeCallback:function(e){var t;return R((function(n){return 1==n.g?navigator.storage&&navigator.storage.estimate?y(n,navigator.storage.estimate(),3):n.return(!0):(t=n.h,n.return(t.usage+e<.95*t.quota))}))},progressCallback:function(e,t){},usePersistentLicense:!0,numberOfParallelDownloads:5}),a={drm:t,manifest:n,streaming:i,offline:r,abrFactory:function(){return new On},abr:{enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:e,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},advanced:{minTotalBytes:128e3,minBytes:16e3,fastHalfLife:2,slowHalfLife:5},restrictToElementSize:!1,ignoreDevicePixelRatio:!1},preferredAudioLanguage:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredVideoCodecs:[],preferredAudioCodecs:[],preferForcedSubs:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",useHeaders:!1}};return r.trackSelectionCallback=function(e){return R((function(t){return t.return(function(e,t){var n,i=e.filter((function(e){return"variant"==e.type})),r=[],a=en(t,i.map((function(e){return e.language}))),s=(0==(r=0==(r=a?i.filter((function(e){return Qt(e.language)==a})):r).length?i.filter((function(e){return e.primary})):r).length&&(i.map((function(e){return e.language})),r=i),r.filter((function(e){return e.height&&e.height<=480})));for(s.length&&(s.sort((function(e,t){return t.height-e.height})),r=s.filter((function(e){return e.height==s[0].height}))),i=[],r.length&&(n=Math.floor(r.length/2),r.sort((function(e,t){return e.bandwidth-t.bandwidth})),i.push(r[n])),n=(r=u(e)).next();!n.done;n=r.next())(n=n.value).type!=Ze&&"image"!=n.type||i.push(n);return i}(e,a.preferredAudioLanguage))}))},a}function To(e,t,n){var i={".drm.keySystemsMapping":"",".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:""}};return yo(e,t,n||Eo(),i,"")}function wo(){this.g=null,this.h=[]}function So(e,t){var n;null==e.g?e.g={timestamp:Date.now()/1e3,state:t,duration:0}:(n=Date.now()/1e3,e.g.duration=n-e.g.timestamp,e.g.state!=t&&(e.h.push(e.g),e.g={timestamp:n,state:t,duration:0}))}function Co(e,t){var n=0;e.g&&e.g.state==t&&(n+=e.g.duration);for(var i=u(e.h),r=i.next();!r.done;r=i.next())n+=(r=r.value).state==t?r.duration:0;return n}function xo(){this.i=this.h=null,this.g=[]}function ko(e,t,n){e.i!=t&&(e.i=t,e.g.push({timestamp:Date.now()/1e3,id:t.id,type:"text",fromAdaptation:n,bandwidth:null}))}function Io(){this.u=this.B=this.G=this.D=this.s=this.j=this.F=this.m=this.i=this.O=this.T=this.I=this.L=this.M=this.l=this.o=NaN,this.g=new wo,this.h=new xo}function Lo(t,n){ci.call(this);var i,r=this,a=(this.l=wu,this.Ic=this.g=null,this.ha=!1,this.Qc=new Ci,this.Wb=new Ci,this.s=new Ci,this.zd=this.u=this.Vb=this.i=this.Rc=this.I=this.j=this.ia=this.T=this.Sc=this.M=this.Jc=this.G=this.vb=this.B=this.L=this.m=this.F=null,this.Ee=1e9,this.h=Ko(this),this.$b={width:1/0,height:1/0},this.o=null,this.La=new Wn(this.h.preferredAudioLanguage,this.h.preferredVariantRole,this.h.preferredAudioChannelCount),this.sb=this.h.preferredTextLanguage,this.Zb=this.h.preferredTextRole,this.Xb=this.h.preferForcedSubs,this.Mb=[],this.cc=null,n&&n(this),this.F=(i=this,new pi((function(e,t){i.u&&i.u.segmentDownloaded(e,t)}),(function(e,t,n){e=(new Map).set("headers",e).set("request",t).set("requestType",n),i.dispatchEvent(Ro("downloadheadersreceived",e))}),(function(e,t,n,r){e=(new Map).set("request",e).set("error",t).set("httpResponseCode",n).set("aborted",r),i.dispatchEvent(Ro("downloadfailed",e))}))),this.F.$d(this.h.streaming.forceHTTPS),this.D=null,Lu&&(this.D=Lu()),this.Qc.C(e,"online",(function(){r.Ud()})),this.O={name:"detach"},this.Y={name:"attach"},this.ea={name:"unload"},this.Nd={name:"manifest-parser"},this.Kd={name:"manifest"},this.ub={name:"media-source"},this.Bd={name:"drm-engine"},this.ca={name:"load"},this.Qd={name:"src-equals-drm-engine"},this.wb={name:"src-equals"},new Map);a.set(this.Y,(function(e,t){return ai((n=r,t=t,null==(e=e).K&&(e.K=t.K,n.Wb.C(e.K,"error",(function(){var e=lu(n);e&&ou(n,e)}))),n.g=e.K,Promise.resolve()));var n})),a.set(this.O,(function(e){return e.K&&(r.Wb.lb(),e.K=null),r.D&&r.D.release(),r.g=null,ai(e=Promise.resolve())})),a.set(this.ea,(function(e){return ai(Do(r,e))})),a.set(this.ub,(function(e){var t,n,i,a,s;return t=r,n=e,ai(e=R((function(e){if(1==e.g)return a=new Ea,i=t.h.textDisplayFactory,s=i(),t.Gd=i,r=n.K,i=new Da(r,a,s,(function(e,n,i){for(var r=(e=u(e)).next();!r.done;r=e.next())if((r=r.value).data&&r.cueTime&&r.frames){for(var a=r.cueTime+n,s=i,o=u(r.frames),l=o.next();!l.done;l=o.next())_o(t,a,s,"ID3",l.value);t.D&&t.D.onHlsTimedMetadata(r,a)}})),a=t.h.manifest,s=a.segmentRelativeVttTiming,i.F=s,y(e,i.G,2);var r;t.L=i,b(e)})))})),a.set(this.Nd,(function(e,t){var n,i,a,s,o,u;return n=r,i=e,a=t,ai(R((function(e){if(1==e.g)return i.mimeType=a.mimeType,i.uri=a.uri,u=i.uri,s=n.F,n.Vb=u,o=n,y(e,er(u,s,n.h.manifest.retryParameters,i.mimeType),2);o.Rc=e.h,n.I=n.Rc(),u=di(n.h.manifest),a.K&&"AUDIO"===a.K.nodeName&&(u.disableVideo=!0),n.I.configure(u),b(e)})))})),a.set(this.Kd,(function(e){return function(e,t){var n,i,r=t.uri,a=(t=e.F,e.Sc=new ws((function(){return e.rc()})),e.Sc.addEventListener("regionadd",(function(t){t=t.region,uu(e,"timelineregionadded",t),e.D&&e.D.onDashTimedMetadata(t)})),e.ia=null,e.h.streaming.observeQualityChanges&&(e.ia=new Ts((function(){return e.Na()})),e.ia.addEventListener("qualitychange",(function(t){var n=t.quality;t=t.position,n=(new Map).set("mediaQuality",{bandwidth:n.bandwidth,audioSamplingRate:n.audioSamplingRate,codecs:n.codecs,contentType:n.contentType,frameRate:n.frameRate,height:n.height,mimeType:n.mimeType,channelsCount:n.channelsCount,pixelAspectRatio:n.pixelAspectRatio,width:n.width}).set("position",t),e.dispatchEvent(Ro("mediaqualitychanged",n))}))),{networkingEngine:t,modifyManifestRequest:function(t,n){var i=e.T;try{i.g.enabled&&(i.o=n.format,ro(i,t,{ot:oo,su:!i.i}))}catch(e){q("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",e)}},modifySegmentRequest:function(t,n){no(e.T,t,n)},filter:function(t){return qo(e,t)},makeTextStreamsForClosedCaptions:function(t){for(var n,i,r=e,a=t,s=new Set,o=u(a.textStreams),l=o.next();!l.done;l=o.next())"application/cea-608"!=(l=l.value).mimeType&&"application/cea-708"!=l.mimeType||s.add(l.originalId);for(l=(o=u(a.variants)).next();!l.done;l=o.next())if((l=l.value.video)&&l.closedCaptions)for(var c=u(l.closedCaptions.keys()),d=c.next();!d.done;d=c.next())d=d.value,s.has(d)||(n=d.startsWith("CC")?"application/cea-608":"application/cea-708",i=new vs,n={id:r.Ee++,originalId:d,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:i,mimeType:n,codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:l.closedCaptions.get(d),label:null,type:Ze,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:l.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null},a.textStreams.push(n),s.add(d))},onTimelineRegionAdded:function(t){var n=e.Sc;e:{for(var i=u(n.g),r=i.next();!r.done;r=i.next())if((r=r.value).schemeIdUri==t.schemeIdUri&&r.id==t.id&&r.startTime==t.startTime&&r.endTime==t.endTime){i=r;break e}i=null}null==i&&(n.g.add(t),t=new oi("regionadd",new Map([["region",t]])),n.dispatchEvent(t))},onEvent:function(t){return e.dispatchEvent(t)},onError:function(t){return ou(e,t)},isLowLatencyMode:function(){return e.h.streaming.lowLatencyMode},isAutoLowLatencyMode:function(){return e.h.streaming.autoLowLatencyMode},enableLowLatencyMode:function(){e.configure("streaming.lowLatencyMode",!0)}}),s=Date.now()/1e3;return new ti(R((function(t){if(1==t.g)return y(t,(n=e).I.start(r,a),2);if(n.i=t.h,i=Ro("manifestparsed"),e.dispatchEvent(i),0==e.i.variants.length)throw new Le(2,4,4036);function o(e){return e.video&&e.audio||e.video&&e.video.codecs.includes(",")}var u;(u=e.i).variants.some(o)&&(u.variants=u.variants.filter(o)),i=Date.now()/1e3,i-=s,e.o.F=i,b(t)})),(function(){return e.I.stop()}))}(r,e)})),a.set(this.Bd,(function(e){var t,n,i,a;return t=r,n=e,ai(e=R((function(e){return 1==e.g?(i=Date.now()/1e3,a=!0,t.m=Oo(t,{jb:t.F,onError:function(e){ou(t,e)},Wc:function(e){cu(t,e)},onExpirationUpdated:function(e,n){du(t,e,n)},onEvent:function(e){t.dispatchEvent(e),"drmsessionupdate"==e.type&&a&&(a=!1,t.o.j=Date.now()/1e3-i)}}),t.m.configure(t.h.drm),y(e,_i(t.m,t.i.variants,t.i.offlineSessionIds),2)):3!=e.g?y(e,t.m.Yb(n.K),3):y(e,qo(t,t.i),0)})))})),a.set(this.ca,(function(e,t){return ai((n=r,i=e,a=t,R((function(e){switch(e.g){case 1:if(i.startTime=a.startTime,null!=n.cc&&(i.startTime=n.cc,n.cc=null),s=i.K,o=i.uri,n.Vb=o,n.G=new ys({Pc:function(){return s.playbackRate},Lc:function(){return s.defaultPlaybackRate},be:function(e){s.playbackRate=e},Ae:function(e){s.currentTime+=e}}),o=function(){return Xo(n)},u=function(){return Yo(n)},n.s.C(s,"playing",o),n.s.C(s,"pause",o),n.s.C(s,"ended",o),n.s.C(s,"ratechange",u),o=n.h.abrFactory,n.u&&n.zd==o||(n.zd=o,n.u=o(),"function"!=typeof n.u.setMediaElement&&(E=new Fn(5,0),w=(T=Gn).g,S=E.h-w.h,(0<(E.g-w.g||S)?T.i:T.h)(T.g,E,"AbrManager","Please use an AbrManager with setMediaElement function."),n.u.setMediaElement=function(){}),n.u.configure(n.h.abr)),n.La=new Wn(n.h.preferredAudioLanguage,n.h.preferredVariantRole,n.h.preferredAudioChannelCount),n.sb=n.h.preferredTextLanguage,n.Zb=n.h.preferredTextRole,n.Xb=n.h.preferForcedSubs,hu(n.i.presentationTimeline,n.h.playRangeStart,n.h.playRangeEnd),n.u.init((function(e,t,i){n.j&&e!=n.j.l&&Jo(n,e,!0,void 0!==t&&t,void 0===i?0:i)})),n.u.setMediaElement(s),n.B=(A=n,w=i.startTime,new cs(A.g,A.i,A.h.streaming,w,(function(){A.vb&&Es(A.vb,!0),A.j&&A.j.sc(),A.M&&No(A)}),(function(e){return A.dispatchEvent(e)}))),n.vb=((S=new Ss((v=n).Sc)).addEventListener("enter",(function(e){uu(v,"timelineregionenter",e.region)})),S.addEventListener("exit",(function(e){uu(v,"timelineregionexit",e.region)})),S.addEventListener("skip",(function(e){var t=e.region;e.seeking||(uu(v,"timelineregionenter",t),uu(v,"timelineregionexit",t))})),(T=new As(v.g)).g.add(S),v.ia&&T.g.add(v.ia),T),u=Math.max(n.i.minBufferTime,n.h.streaming.rebufferingGoal),Po(n,u),an(n.i,n.h.preferredVideoCodecs,n.h.preferredAudioCodecs,n.h.preferredAudioChannelCount,n.h.preferredDecodingAttributes),n.j=new Rs((m=n).i,{Oc:function(){return m.B.Dc()},getBandwidthEstimate:function(){return m.u.getBandwidthEstimate()},modifySegmentRequest:function(e,t){no(m.T,e,t)},P:m.L,jb:m.F,onError:function(e){return ou(m,e)},onEvent:function(e){return m.dispatchEvent(e)},Qf:function(){m.I&&m.I.update&&m.I.update()},Pd:function(){m.B&&m.B.Be(),No(m)},Pf:function(e,t){var n,i,r,a,s,o,u;(t=t.Id)&&m.ia&&(n=m.ia,i=e,e=n,o=(t=t).contentType,(u=e.g.get(o))||e.g.set(o,u={oc:[],ne:null,contentType:o}),u=o=u,(e=(e=n).h()[u.contentType])&&0<e.length?(r=e[0].start,a=e[e.length-1].end,s=u.oc,u.oc=s.filter((function(e,t){return!(e.position<=r&&t+1<s.length&&s[t+1].position<=r||e.position>=a)}))):u.oc=[],n={Id:t,position:i},0<=(t=(o=o.oc).findIndex((function(e){return e.position>=i})))?o.splice(t,o[t].position==i?1:0,n):o.push(n))}}),n.j.configure(n.h.streaming),n.l=Su,s.textTracks&&n.s.C(s.textTracks,"addtrack",(function(e){e.track&&"chapters"===(e=e.track).kind&&Mo(n,e)})),n.dispatchEvent(Ro("streaming")),o=null,n.Ya().find((function(e){return e.active})))e.A(2);else{if(o=$o(n),Jo(n,o,!0,!1,0),n.h.streaming.startAtSegmentBoundary)return u=n.B.Dc(),y(e,(c=o,d=u,R((function(e){return 1==e.g?(p=c.audio,h=c.video,y(e,(f=function(e,t){var n;return R((function(i){return 1==i.g?e?y(i,e.createSegmentIndex(),2):i.return(null):(n=(n=e.segmentIndex.Ab(t))?n.next().value:null)?(n=n.startTime,i.return(n)):i.return(null)}))})(p,d),2)):3!=e.g?(g=e.h,y(e,f(h,d),3)):null!=(p=e.h)&&null!=g?e.return(Math.max(p,g)):null!=p?e.return(p):null!=g?e.return(g):e.return(d)}))),4);e.A(3)}break;case 4:u=e.h,n.B.ud(u);case 3:tu(n,null,pn(o));case 2:return n.Db().find((function(e){return e.active}))||((l=Sn(n.i.textStreams,n.sb,n.Zb,n.Xb)[0]||null)&&ko(n.o.h,l,!0),o&&(l?(o.audio&&(E=n,t=o.audio,r=l,E=Qt(n.h.preferredTextLanguage),t=Qt(t.language),Wt(r=Qt(r.language),E))&&!Wt(t,r)&&(n.ha=!0),n.ha&&n.L.m.setTextVisibility(!0),au(n)):n.ha=!1),l&&(n.h.streaming.alwaysStreamText||n.yd())&&Ms(n.j,l)),y(e,n.j.start(),5);case 5:n.h.abr.enabled&&(n.u.enable(),su(n)),fn(n.j?n.j.l:null,n.i),gu(n.i),nu(n),Qo(n),n.i.variants.some((function(e){return e.primary})),n.s.oa(s,"loadedmetadata",(function(){n.o.m=Date.now()/1e3-a.de})),b(e)}var t,r,c,d,h,f,g,p,m,v,A,E,T,w,S}))));var n,i,a,s,o,u,l})),a.set(this.Qd,(function(e,t){var n,i,a,s,o,u,l;return n=r,i=e,a=t,ai(R((function(e){return 1==e.g?(s=Je,o=Date.now()/1e3,u=!0,n.m=Oo(n,{jb:n.F,onError:function(e){ou(n,e)},Wc:function(e){cu(n,e)},onExpirationUpdated:function(e,t){du(n,e,t)},onEvent:function(e){n.dispatchEvent(e),"drmsessionupdate"==e.type&&u&&(u=!1,n.o.j=Date.now()/1e3-o)}}),n.m.configure(n.h.drm),l=nr(l=a.uri||""),l=(l="application/x-mpegurl"==(l=Ru[l])&&ct()?"application/vnd.apple.mpegurl":l)||"video/mp4",l={id:0,language:"und",disabledUntilTime:0,primary:!1,audio:null,video:{id:0,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:a.mimeType?a.mimeType.split(";")[0]:l,codecs:a.mimeType?Ut(a.mimeType):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",label:null,type:s.va,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null},bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},n.m.Y=!0,y(e,_i(n.m,[l],[]),2)):y(e,n.m.Yb(i.K),0)})))})),a.set(this.wb,(function(e,t){return i=r,a=t,(t=e).uri=a.uri,t.startTime=a.startTime,i.Vb=t.uri,s=t.K,i.B=new ls(s),o=!1,i.Mb.push((function(){o=!0})),null!=t.startTime&&i.B.ud(t.startTime),i.G=new ys({Pc:function(){return s.playbackRate},Lc:function(){return s.defaultPlaybackRate},be:function(e){s.playbackRate=e},Ae:function(e){s.currentTime+=e}}),Po(i,i.h.streaming.rebufferingGoal),i.s.C(s,"playing",n),i.s.C(s,"pause",n),i.s.C(s,"ended",n),i.s.C(s,"ratechange",(function(){return Yo(i)})),"none"!=s.preload&&i.s.oa(s,"loadedmetadata",(function(){i.o.m=Date.now()/1e3-a.de})),s.audioTracks&&(i.s.C(s.audioTracks,"addtrack",(function(){return nu(i)})),i.s.C(s.audioTracks,"removetrack",(function(){return nu(i)})),i.s.C(s.audioTracks,"change",(function(){return nu(i)}))),s.textTracks&&(i.s.C(s.textTracks,"addtrack",(function(e){if(e.track)switch(e=e.track,e.kind){case"metadata":var t,n=i,r=e;"metadata"==r.kind&&(r.mode="hidden",n.s.C(r,"cuechange",(function(){if(r.activeCues)for(var e=u(r.activeCues),t=e.next();!t.done;t=e.next())t=t.value,_o(n,t.startTime,t.endTime,t.type,t.value),n.D&&n.D.onCueMetadataChange(t.value)})),t=new rt((function(){for(var e=Array.from(n.g.textTracks).filter((function(e){return"metadata"==e.kind})),t=(e=u(e)).next();!t.done;t=e.next())t.value.mode="hidden"})).Lb().R(.5),n.Mb.push((function(){t.stop()})));break;case"chapters":Mo(i,e);break;default:nu(i)}})),i.s.C(s.textTracks,"removetrack",(function(){return nu(i)})),i.s.C(s.textTracks,"change",(function(){return nu(i)}))),e=nr(t.uri),s.src=function(e,t,n){try{if(!e.g.enabled)return t;var i=io(e);e:{switch(n){case"video/webm":case"video/mp4":var r=co;break e;case"application/x-mpegurl":r=oo;break e}r=void 0}return i.ot=r,i.su=!0,so(t,ao(i))}catch(e){return q("CMCD_SRC_ERROR","Could not generate src CMCD data.",e),t}}(i.T,t.uri,Ru[e]),(ut()||ft("Web0S"))&&s.load(),i.l=Cu,i.dispatchEvent(Ro("streaming")),l=new tt,es(s,HTMLMediaElement.HAVE_METADATA,i.s,(function(){l.resolve()})),es(s,HTMLMediaElement.HAVE_CURRENT_DATA,i.s,(function(){return R((function(e){if(1==e.g)return""!=(n=(a=i).h.preferredAudioLanguage)&&(a.Xd(n),""!=(r=a.h.preferredVariantRole))&&a.Xd(n,r),Fo(i).find((function(e){return"disabled"!=e.mode}))?e.A(2):y(e,new Promise((function(e){i.s.oa(s.textTracks,"change",e),new rt(e).R(1)})),2);if(o)return e.return();var t,n,r=(n=i).h.preferredTextLanguage,a=n.h.preferForcedSubs;""!=r&&(n.Yd(r,"",a),""!=(t=n.h.preferredTextRole))&&n.Yd(r,t,a),b(e)}))})),s.error?l.reject(lu(i)):"none"==s.preload&&(K('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),l.resolve()),i.s.oa(s,"error",(function(){l.reject(lu(i))})),new ti(l,(function(){return l.reject(new Le(2,7,7001)),Promise.resolve()}));function n(){return Xo(i)}var i,a,s,o,l})),this.ua=new qs(this.O,{wf:function(e,t,n,i){var a=null;return e==r.O&&(a=n==r.O?r.O:r.Y),e==r.Y&&(a=n==r.O||t.K!=i.K?r.O:n==r.Y?r.Y:n==r.ub||n==r.ca?r.ub:n==r.wb?r.Qd:null),e==r.ub&&(a=n==r.ca&&t.K==i.K?r.Nd:r.ea),e==r.Nd&&(a=bu(r.ca,r.Kd,r.ea,n,t,i)),e==r.Kd&&(a=bu(r.ca,r.Bd,r.ea,n,t,i)),e==r.Bd&&(a=bu(r.ca,r.ca,r.ea,n,t,i)),e==r.Qd&&(a=n==r.wb&&t.K==i.K?r.wb:r.ea),e!=r.ca&&e!=r.wb||(a=r.ea),e==r.ea?i.K&&t.K==i.K?r.Y:r.O:a},ff:function(e,t,n){return r.dispatchEvent(Ro("onstatechange",(new Map).set("state",e.name))),a.get(e)(t,n)},handleError:function(e){return R((function(t){return 1==t.g?y(t,Do(r,e),2):t.return(e.K?r.Y:r.O)}))},Of:function(e){r.dispatchEvent(Ro("onstateidle",(new Map).set("state",e.name)))}}),this.De=new rt((function(){un(r.i.variants,r.h.restrictions,r.$b)&&$o(r)})),t&&this.Yb(t,!0)}function Ro(e,t){return new oi(e,t)}function Do(e,t){var n,i,r,a,s,o,l,c,d;return R((function(h){switch(h.g){case 1:return e.l!=Tu&&(e.l=wu),n=e.Mb.map((function(e){return e()})),e.Mb=[],y(h,Promise.all(n),2);case 2:if(e.dispatchEvent(Ro("unloading")),t.mimeType=null,t.startTime=null,t.uri=null,t.K&&e.s.lb(),e.De.stop(),e.vb&&(e.vb.release(),e.vb=null),e.Jc&&(e.Jc.stop(),e.Jc=null),e.I)return y(h,e.I.stop(),4);h.A(3);break;case 4:e.I=null,e.Rc=null;case 3:if(e.u)return y(h,e.u.stop(),5);h.A(5);break;case 5:if(e.j)return y(h,e.j.destroy(),8);h.A(7);break;case 8:e.j=null;case 7:if(e.G&&(e.G.release(),e.G=null),e.B&&(e.B.release(),e.B=null),e.L)return y(h,e.L.destroy(),10);h.A(9);break;case 10:e.L=null;case 9:if(e.D&&e.D.onAssetUnload(),t.K&&t.K.src)return y(h,new Promise((function(e){return new rt(e).R(.1)})),12);h.A(11);break;case 12:for(t.K.removeAttribute("src"),t.K.load();t.K.lastChild;)t.K.removeChild(t.K.firstChild);case 11:if(e.m)return y(h,e.m.destroy(),14);h.A(13);break;case 14:e.m=null;case 13:if(e.Vb=null,e.M=null,e.i){for(i=u(e.i.variants),r=i.next();!r.done;r=i.next())for(a=r.value,s=u([a.audio,a.video]),o=s.next();!o.done;o=s.next())(l=o.value)&&l.segmentIndex&&l.segmentIndex.release();for(c=u(e.i.textStreams),o=c.next();!o.done;o=c.next())(d=o.value).segmentIndex&&d.segmentIndex.release()}e.i=null,e.o=new Io,e.Gd=null,Wo(e),b(h)}}))}function _o(e,t,n,i,r){t=(new Map).set("startTime",t).set("endTime",n).set("metadataType",i).set("payload",r),e.dispatchEvent(Ro("metadata",t))}function Mo(e,t){var n;t&&"chapters"==t.kind&&(t.mode="hidden",n=new rt((function(){t.mode="hidden"})).Lb().R(.5),e.Mb.push((function(){n.stop()})))}function Oo(e,t){return new Di(t,e.h.drm.updateExpirationTime)}function Po(e,t){e.M=new Yn,e.M.g=Qn,Xn(e.M,t,Math.min(.5,t/2)),Wo(e),e.Jc=new rt((function(){No(e)})).Ca(.25)}function No(e){switch(e.l){case Cu:var t;t=!!e.g.ended||null!=(n=ka(e.g.buffered))&&n>=e.g.duration-1;break;case Su:e:if(e.g.ended||Ma(e.L))t=!0;else{if(e.i.presentationTimeline.V()){var n=e.i.presentationTimeline.fb();if(null!=(i=ka(e.g.buffered))&&n<=i){t=!0;break e}}t=!1}break;default:t=!1}var i=La(e.g.buffered,e.g.currentTime),r=t,a=(n=e.M).h.get(n.g);(t=n.g)!=(n.g=i=r||a<=i?$n:Qn)&&Wo(e)}function Bo(e){var t,n,i,r;if(e.I&&(t=di(e.h.manifest),e.g&&"AUDIO"===e.g.nodeName&&(t.disableVideo=!0),e.I.configure(t)),e.m&&e.m.configure(e.h.drm),e.j){e.j.configure(e.h.streaming);try{zo(e,e.i)}catch(t){ou(e,t)}e.u&&Qo(e),!(t=e.j.l)||t.allowedByApplication&&t.allowedByKeySystem||Zo(e)}e.F&&e.F.$d(e.h.streaming.forceHTTPS),e.L&&(e.L.F=e.h.manifest.segmentRelativeVttTiming,t=e.h.textDisplayFactory,e.Gd!=t)&&(n=t(),r=(i=e.L).m,i.m=n,r&&(n.setTextVisibility(r.isTextVisible()),r.destroy()),i.g&&(i.g.i=n),e.Gd=t,e.j&&(n=(t=e.j).i.get(Ze))&&Os(t,n.stream,!0,0,!0)),e.u&&(e.u.configure(e.h.abr),e.h.abr.enabled?e.u.enable():e.u.disable(),su(e)),e.M&&(t=e.h.streaming.rebufferingGoal,e.i&&(t=Math.max(t,e.i.minBufferTime)),Xn(e.M,t,Math.min(.5,t/2))),e.i&&hu(e.i.presentationTimeline,e.h.playRangeStart,e.h.playRangeEnd)}function Fo(e){return Array.from(e.g.textTracks).filter((function(e){return"metadata"!=e.kind&&"chapters"!=e.kind&&"Shaka Player TextTrack"!=e.label}))}function Uo(e){return Array.from(e.g.textTracks).filter((function(e){return"chapters"==e.kind}))}function jo(e,t){var n,i;return R((function(r){switch(r.g){case 1:return n=nr(t),(i=Du[n])?r.return(i):(A(r,2),y(r,tr(t,e.F,e.h.streaming.retryParameters),4));case 4:i=r.h,T(r,3);break;case 2:w(r);case 3:if(i)return r.return(i);throw new Le(1,2,2011,n)}}))}function Go(e,t,n,i,r,a,s){var o;return R((function(u){if(1==u.g)return"text/vtt"!=r||s.length?y(u,Ho(e,t,e.F,e.h.streaming.retryParameters),3):u.A(2);2!=u.g&&(o=u.h,o=Vo(e,o,r,s),o=new Blob([o],{type:"text/vtt"}),t=qa(o),r="text/vtt"),o=document.createElement("track");var l=e.T,c=t;try{var d,h=l.g.enabled?((d=io(l)).ot=fo,d.su=!0,so(c,ao(d))):c}catch(e){q("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",e),h=c}return o.src=h,o.label=a,o.kind=i,o.srclang=n,e.g.getAttribute("crossorigin")||e.g.setAttribute("crossorigin","anonymous"),e.g.appendChild(o),u.return(o)}))}function Ho(e,t,n,i){var r,a;return R((function(s){if(1!=s.g)return a=s.h,s.return(a.data);a=Ai,(r=vi([t],i)).method="GET";var o=e.T;try{o.g.enabled&&ro(o,r,{ot:fo,su:!0})}catch(e){q("CMCD_TEXT_ERROR","Could not generate text CMCD data.",e)}return y(s,n.request(a,r).promise,2)}))}function Vo(e,t,n,i){var r=qt[n];if(r){n=r(),e={periodStart:0,segmentStart:0,segmentEnd:e.g.duration,vttOffset:0},t=we(t),t=n.parseMedia(t,e);var a=i;function s(e){for(var t=e,n=u(a),i=n.next();!i.done;i=n.next())(i=i.value).end&&i.start<e&&(t+=i.end-i.start);return((e=Math.floor(t/3600))<10?"0":"")+e+":"+((n=Math.floor(t/60%60))<10?"0":"")+n+":"+((i=Math.floor(t%60))<10?"0":"")+i+"."+((t=Math.floor(1e3*t%1e3))<100?t<10?"00":"0":"")+t}function o(e){var t=[],n=700<=e.fontWeight,i="italic"==e.fontStyle,r=e.textDecoration.includes("underline");return n&&t.push("b"),i&&t.push("i"),r&&t.push("u"),n=t.reduce((function(e,t){return e+"<"+t+">"}),""),t=t.reduceRight((function(e,t){return e+"</"+t+">"}),""),e.lineBreak?"\n":e.nestedCues.length?e.nestedCues.map(o).join(""):n+e.payload+t}for(var l=t.map((function(e){var t;return e.nestedCues.length?((t=e.clone()).nestedCues=[],t.payload=o(e),t):e})),c="WEBVTT\n\n",d=(l=u(l)).next();!d.done;d=l.next())c=(c+=s((d=d.value).startTime)+" --\x3e "+s(d.endTime)+function(e){var t=[];switch(e.textAlign){case"left":t.push("align:left");break;case"right":t.push("align:right");break;case ne:t.push("align:middle");break;case"start":t.push("align:start");break;case"end":t.push("align:end")}switch(e.writingMode){case"vertical-lr":t.push("vertical:lr");break;case"vertical-rl":t.push("vertical:rl")}return t.length?" "+t.join(" "):""}(d)+"\n")+d.payload+"\n\n";return c}throw new Le(2,2,2014,n)}function Ko(e){var t=Eo();return t.streaming.failureCallback=function(t){e.V()&&[1001,1002,1003].includes(t.code)&&(t.severity=1,e.Ud())},t.textDisplayFactory=function(){return e.Ic?new Zs(e.g,e.Ic):new Ys(e.g)},t}function qo(e,t){return R((function(n){if(1==n.g)return y(n,(i=e,r=t,R((function(e){if(1==e.g)return y(e,function(e,t){return R((function(n){var i,r,a,s,o,l,c;return 1==n.g?y(n,ln(t,0<t.offlineSessionIds.length),2):(fn(e,t),t.textStreams=t.textStreams.filter((function(e){return Ht(Nt(e.mimeType,e.codecs))})),y(n,(i=t,R((function(e){switch(e.g){case 1:r=[],a=u(i.imageStreams),s=a.next();case 2:if(s.done)e.A(4);else{if(o=s.value,l=o.mimeType,!_n.has(l)){if(c=Mn.get(l))return y(e,(t=c,new Promise((function(e){var n=new Image;n.src=t,"decode"in n?n.decode().then((function(){e(!0)})).catch((function(){e(!1)})):n.onload=n.onerror=function(){e(2===n.height)}}))),7);_n.set(l,!1)}e.A(5)}break;case 7:c=e.h,_n.set(l,c);case 5:_n.get(l)&&r.push(o),s=a.next(),e.A(2);break;case 4:i.imageStreams=r,b(e)}var t}))),0))}))}(i.j?i.j.l:null,r),2);gu(r),b(e)}))),2);var i,r;zo(e,t),b(n)}))}function zo(e,t){if(e.l!=Tu){un(t.variants,e.h.restrictions,e.$b)&&e.j&&nu(e);var n=e.m?e.m.g:null;if(n&&e.m.s)for(var i=u(t.variants),r=i.next();!r.done;r=i.next())for(var a=(r=u(((r=r.value).video?r.video.drmInfos:[]).concat(r.audio?r.audio.drmInfos:[]))).next();!a.done;a=r.next())if((a=a.value).keySystem==n.keySystem)for(var s=(a=u(a.initData||[])).next();!s.done;s=a.next())s=s.value,Bi(e.m,s.initDataType,s.initData);fu(e,t)}}function Wo(e){var t,n=e.xd();e.o&&e.M&&e.B&&((t=e.G).j=n,bs(t),e.T&&(t=e.T,n||t.i||(t.i=!0),t.i&&n&&(t.l=!0),t.m=n),Xo(e)),n=(new Map).set("buffering",n),e.dispatchEvent(Ro("buffering",n))}function Yo(e){var t=e.g.playbackRate;0!=t&&(e.G&&e.G.set(t),t=Ro("ratechange"),e.dispatchEvent(t))}function Xo(e){var t;e.o&&e.M&&(t=e.o.g,e.M.g==Qn?So(t,"buffering"):e.g.paused?So(t,"paused"):e.g.ended?So(t,"ended"):So(t,"playing"))}function Qo(e){try{fu(e,e.i)}catch(t){return ou(e,t),0}var t=e.i.variants.filter(Tn);t=e.La.create(t);return e.u.setVariants(Array.from(t.values())),1}function $o(e){return Qo(e)?e.u.chooseVariant():null}function Zo(e){var t=$o(e);t&&Jo(e,t,!0,!0,0)}function Jo(e,t,n,i,r){var a,s=e.j.l;t==s?i&&_s(e.j,t,i,r,!0):((a=e.o.h).h!=t&&(a.h=t,a.g.push({timestamp:Date.now()/1e3,id:t.id,type:"variant",fromAdaptation:n,bandwidth:t.bandwidth})),_s(e.j,t,i,r),i=null,(n?tu:iu)(e,i=s?pn(s):i,t=pn(t)))}function eu(e,t){var n=Array.from(e.g.audioTracks).find((function(e){return e.enabled}));t.enabled=!0,t.id!==n.id&&(n.enabled=!1),n=An(n),t=An(t);iu(e,n,t)}function tu(e,t,n){pu(e,t=Ro("adaptation",t=(new Map).set("oldTrack",t).set("newTrack",n)))}function nu(e){pu(e,Ro("trackschanged"))}function iu(e,t,n){pu(e,t=Ro("variantchanged",t=(new Map).set("oldTrack",t).set("newTrack",n)))}function ru(e){pu(e,Ro("textchanged"))}function au(e){pu(e,Ro("texttrackvisibility"))}function su(e){pu(e,Ro("abrstatuschanged",(new Map).set("newStatus",e.h.abr.enabled)))}function ou(e,t){var n;e.l!=Tu&&(function(e,t){if((1002==t.code||1011==t.code)&&1==t.category&&navigator.onLine){var n=e.h.streaming.maxDisabledTime;if(0==n){if(1011!=t.code)return;n=1}for(var i=e.Ya().find((function(e){return e.active})),r=u((t=e.i).variants),a=r.next();!a.done;a=r.next())(a=a.value).id===i.id&&(a.disabledUntilTime=Date.now()/1e3+n);return un(t.variants,e.h.restrictions,e.$b),(i=$o(e))?(t=e.Na().video.reduce((function(e,t){return e+t.end-t.start}),0),Jo(e,i,!1,!0,t),e.De.R(n),1):void 0}}(e,t)||(n=Ro("error",(new Map).set("detail",t)),e.dispatchEvent(n),n.defaultPrevented))&&(t.handled=!0)}function uu(e,t,n){n=(new Map).set("detail",{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,eventElement:n.eventElement}),e.dispatchEvent(Ro(t,n))}function lu(e){var t,n;return e.g.error&&1!=(t=e.g.error.code)?((n=e.g.error.msExtendedCode)&&(n<0&&(n+=Math.pow(2,32)),n=n.toString(16)),new Le(2,3,3016,t,n,e.g.error.message)):null}function cu(e,t){if(e.j){var n=Object.keys(t),i=1==n.length&&"00"==n[0],r=!1;if(n.length)for(var a=(n=u(e.i.variants)).next();!a.done;a=n.next()){var s=[];(a=a.value).audio&&s.push(a.audio),a.video&&s.push(a.video);for(var o=(s=u(s)).next();!o.done;o=s.next()){var l=o.value;o=a.allowedByKeySystem;if(l.keyIds.size){a.allowedByKeySystem=!0;for(var c=(l=u(l.keyIds)).next();!c.done;c=l.next())c=c.value,c=t[i?"00":c],a.allowedByKeySystem=a.allowedByKeySystem&&!!c&&!ku.includes(c)}o!=a.allowedByKeySystem&&(r=!0)}}r&&!Qo(e)||((i=e.j.l)&&!i.allowedByKeySystem&&Zo(e),r&&nu(e))}}function du(e,t,n){e.I&&e.I.onExpirationUpdated&&e.I.onExpirationUpdated(t,n),t=Ro("expirationupdated"),e.dispatchEvent(t)}function hu(e,t,n){0<t&&(e.V()||e.Me(t)),n<(t=e.getDuration())&&(e.V()||e.Ia(n))}function fu(e,t){for(var n=e.m?e.m.Mc():{},i=(i=Object.keys(n)).length&&"00"==i[0],r=!1,a=!1,s=new Set,o=new Set,l=u(t.variants),c=l.next();!c.done;c=l.next()){var d=[];(c=c.value).audio&&d.push(c.audio),c.video&&d.push(c.video);for(var h=(d=u(d)).next();!h.done;h=d.next())if((h=h.value).keyIds.size)for(var f=(h=u(h.keyIds)).next();!f.done;f=h.next()){f=f.value;var g=n[i?"00":f];g?ku.includes(g)&&o.add(g):s.add(f)}c.allowedByApplication?c.allowedByKeySystem&&(r=!0):a=!0}if(!r)throw new Le(2,4,4012,n={hasAppRestrictions:a,missingKeys:Array.from(s),restrictedKeyStatuses:Array.from(o)})}function gu(e){if(!e.variants.some(Tn))throw new Le(2,4,4032)}function pu(e,t){R((function(n){if(1==n.g)return y(n,Promise.resolve(),2);e.l!=Tu&&e.dispatchEvent(t),b(n)}))}function mu(e){for(var t=new Set,n=(e=u(e)).next();!n.done;n=e.next())(n=n.value).language?t.add(Qt(n.language)):t.add("und");return t}function vu(e){for(var t=new Map,n=new Map,i=(e=u(e)).next();!i.done;i=e.next()){var r="und",a=[];(i=i.value).language&&(r=Qt(i.language)),(a="variant"==i.type?i.audioRoles:i.roles)&&a.length||(a=[""]),t.has(r)||t.set(r,new Set);for(var s=(a=u(a)).next();!s.done;s=a.next())s=s.value,t.get(r).add(s),i.label&&(n.has(r)||n.set(r,new Map),n.get(r).set(s,i.label))}var o=[];return t.forEach((function(e,t){for(var i=u(e),r=i.next();!r.done;r=i.next()){r=r.value;var a=null;n.has(t)&&n.get(t).has(r)&&(a=n.get(t).get(r)),o.push({language:t,role:r,label:a})}})),o}function yu(){return new Le(2,7,7e3)}function bu(e,t,n,i,r,a){return i==e&&r.K==a.K&&r.uri==a.uri&&r.mimeType==a.mimeType?t:n}function Au(){return{K:null,mimeType:null,startTime:null,de:NaN,uri:null}}function Eu(e){return new Promise((function(t,n){e.kb=function(){return n(yu())},e.Vc=function(){return t()},e.onError=function(e){return n(e)},e.Xc=function(){return n(yu())}}))}F("shaka.util.CmcdManager.StreamingFormat",{ug:"d",Cg:"h",Mg:"s",Ig:"o"}),F("shaka.util.ConfigUtils",vo),vo.convertToConfigObject=bo,vo.mergeConfigObjects=yo,F("shaka.util.PlayerConfiguration",Ao),Ao.mergeConfigObjects=To,Ao.createDefault=Eo,g(Lo,ci),(W=Lo.prototype).destroy=function(){var e,t=this;return R((function(n){switch(n.g){case 1:return t.l==Tu?n.return():(t.l=Tu,e=zs(t.ua,(function(){return{node:t.O,payload:{K:null,mimeType:null,startTime:null,de:NaN,uri:null},gb:!1}})),y(n,new Promise((function(t){e.Hb=function(){},e.Vc=function(){t()},e.kb=function(){t()},e.onError=function(){t()},e.Xc=function(){t()}})),2));case 2:return y(n,t.ua.destroy(),3);case 3:if(t.Qc&&(t.Qc.release(),t.Qc=null),t.Wb&&(t.Wb.release(),t.Wb=null),t.s&&(t.s.release(),t.s=null),t.zd=null,t.u=null,t.h=null,t.o=null,t.Ic=null,t.T=null,t.F)return y(n,t.F.destroy(),5);n.A(4);break;case 5:t.F=null;case 4:ci.prototype.release.call(t),b(n)}}))},W.Yb=function(e,t){var n,i;return t=void 0===t||t,this.l==Tu?Promise.reject(yu()):((n={K:null,mimeType:null,startTime:null,de:NaN,uri:null}).K=e,i=(t=!!at()&&t)?this.ub:this.Y,(e=zs(this.ua,(function(){return{node:i,payload:n,gb:!1}}))).Hb=function(){},Eu(e))},W.detach=function(){var e,t=this;return this.l==Tu?Promise.reject(yu()):((e=zs(this.ua,(function(){return{node:t.O,payload:{K:null,mimeType:null,startTime:null,de:NaN,uri:null},gb:!1}}))).Hb=function(){},Eu(e))},W.ge=function(e){var t=this;if(e=void 0===e||e,this.l==Tu)return Promise.reject(yu());at()||(e=!1);var n={K:null,mimeType:null,startTime:null,de:NaN,uri:null},i=zs(this.ua,(function(i){var r=i.K&&e?t.ub:i.K?t.Y:t.O;return n.K=i.K,{node:r,payload:n,gb:!1}}));return i.Hb=function(){},Eu(i)},W.og=function(e){this.cc=e},W.load=function(e,t,n){var i=this;if(this.cc=null,this.l==Tu)return Promise.reject(yu());this.dispatchEvent(Ro("loading"));var r,a={K:null,mimeType:null,startTime:null,de:NaN,uri:null},s=(a.uri=e,a.de=Date.now()/1e3,n&&(a.mimeType=n),void 0!==t&&(a.startTime=t),function(e,t){if(!at())return 1;var n=t.mimeType,i=t.uri||"";if(n||(n=nr(i),n=Ru[n]),n){if(""==(t.K||gt()).canPlayType(n))return;if(!at()||!(n in ir)&&!(nr(i)in rr)||e.h.streaming.preferNativeHls)return 1;if(ct())return e.h.streaming.useNativeHlsOnSafari}}(this,a)?this.wb:this.ca),o=zs(this.ua,(function(e){return null==e.K?null:(a.K=e.K,{node:s,payload:a,gb:!0})}));return this.o=new Io,this.T=new to({getBandwidthEstimate:function(){return r.u?r.u.getBandwidthEstimate():NaN},Na:function(){return r.Na()},getCurrentTime:function(){return r.g?r.g.currentTime:0},Ya:function(){return r.Ya()},Nc:function(){return r.Nc()},V:function(){return r.V()}},(r=this).h.cmcd),o.Hb=function(){},new Promise((function(e,t){o.Xc=function(){return t(new Le(2,7,7002))},o.Vc=function(){e(),i.dispatchEvent(Ro("loaded"))},o.kb=function(){return t(yu())},o.onError=function(e){return t(e)}}))},W.configure=function(e,t){(e=2==arguments.length&&"string"==typeof e?bo(e,t):e).streaming&&e.streaming.lowLatencyMode&&(null==e.streaming.inaccurateManifestTolerance&&(e.streaming.inaccurateManifestTolerance=0),null==e.streaming.rebufferingGoal)&&(e.streaming.rebufferingGoal=.01);var n=To(this.h,e,Ko(this));return Bo(this),n},W.getConfiguration=function(){var e=Ko(this);return To(e,this.h,Ko(this)),e},W.jf=function(){if(this.g){var e=(e=this.g.buffered.length)?this.g.buffered.end(e-1):0,t=this.getConfiguration().streaming.bufferingGoal;if((t=Math.min(this.g.currentTime+t,this.rc().end))<=e)return 1;if(!(e<=this.g.currentTime)&&e<t)return(e-this.g.currentTime)/(t-this.g.currentTime)}return 0},W.$f=function(){for(var e in this.h)delete this.h[e];To(this.h,Ko(this),Ko(this)),Bo(this)},W.qf=function(){return this.l},W.vf=function(){return this.g},W.fc=function(){return this.F},W.wd=function(){return this.Vb},W.te=function(){return this.D||null},W.V=function(){return this.i?this.i.presentationTimeline.V():!(!this.g||!this.g.src)&&1/0==this.g.duration},W.ib=function(){return!!this.i&&this.i.presentationTimeline.ib()},W.If=function(){var e;return this.i?!!(e=this.i.variants).length&&!e[0].video:!(!this.g||!this.g.src)&&(this.g.videoTracks?0==this.g.videoTracks.length:0==this.g.videoHeight)},W.rc=function(){var e;return this.i?{start:(e=this.i.presentationTimeline).Bb(),end:e.Oa()}:this.g&&this.g.src&&(e=this.g.seekable).length?{start:e.start(0),end:e.end(e.length-1)}:{start:0,end:0}},W.Gf=function(){this.V()&&(this.g.currentTime=this.rc().end)},W.keySystem=function(){var e=this.drmInfo();return e?e.keySystem:""},W.drmInfo=function(){return this.m?this.m.g:null},W.ec=function(){return this.m?this.m.ec():1/0},W.Mc=function(){return this.m?this.m.Mc():{}},W.xd=function(){return!!this.M&&this.M.g==Qn},W.Nc=function(){return this.g?this.G?this.G.i:1:0},W.jg=function(e){0==e?K("A trick play rate of 0 is unsupported!"):(this.g.paused&&this.g.play(),this.G.set(e),this.l==Su&&(this.u.playbackRateChanged(e),Ds(this.j,1<Math.abs(e))))},W.Ze=function(){var e=this.G.Lc();this.l==Cu&&this.G.set(e),this.l==Su&&(this.G.set(e),this.u.playbackRateChanged(e),Ds(this.j,!1))},W.Ya=function(){if(this.i){for(var e,t=this.j?this.j.l:null,n=[],i=0,r=u(this.i.variants),a=r.next();!a.done;a=r.next())Tn(a=a.value)&&((e=pn(a)).active=a==t,e.active||1==i||null==t||a.video!=t.video||a.audio!=t.audio||(e.active=!0),e.active&&i++,n.push(e));return n}return this.g&&this.g.audioTracks?Array.from(this.g.audioTracks).map(An):[]},W.Db=function(){if(this.i){for(var e=this.j?this.j.o:null,t=[],n=u(this.i.textStreams),i=n.next();!i.done;i=n.next()){var r=mn(i=i.value);r.active=i==e,t.push(r)}return t}return this.g&&this.g.src&&this.g.textTracks?Fo(this).map(bn):[]},W.nf=function(){return this.i?this.i.imageStreams.map(vn):[]},W.Cf=function(e,t){var n,i,r,a,s,o,u,l,c,d,h,f,g=this;return R((function(p){return 1==p.g?g.i?(n=g.i.imageStreams.find((function(t){return t.id==e})))?n.segmentIndex?p.A(3):y(p,n.createSegmentIndex(),3):p.return(null):p.A(2):2!=p.g&&null!=(i=n.segmentIndex.find(t))&&(i=n.segmentIndex.get(i),f=i.tilesLayout||n.tilesLayout,f=/(\d+)x(\d+)/.exec(f))?(r=n.width||0,a=n.height||0,s=parseInt(f[1],10),f=parseInt(f[2],10),o=r/s,u=a/f,f*=s,l=i.j-i.startTime,l=i.m||l/f,c=i.startTime,h=d=0,1<f&&(f=Math.floor((t-i.startTime)/l),c=i.startTime+f*l,d=f%s*o,h=Math.floor(f/s)*u),p.return({imageHeight:a,imageWidth:r,height:u,positionX:d,positionY:h,startTime:c,duration:l,uris:i.ya(),width:o})):p.return(null)}))},W.Ie=function(e){if(this.i&&this.j){var t=this.i.textStreams.find((function(t){return t.id==e.id}));t&&t!=this.j.o&&(ko(this.o.h,t,!1),Ms(this.j,t),ru(this),this.sb=t.language)}else if(this.g&&this.g.src&&this.g.textTracks){for(var n=(t=u(t=Fo(this))).next();!n.done;n=t.next())yn(n=n.value)==e.id?n.mode=this.ha?"showing":"hidden":n.mode="disabled";ru(this)}},W.Je=function(e,t,n){if(t=void 0!==t&&t,n=void 0===n?0:n,this.i&&this.j){this.h.abr.enabled&&K("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var i=this.i.variants.find((function(t){return t.id==e.id}));i&&Tn(i)&&(Jo(this,i,!1,t,n),this.La=new zn(i),Qo(this))}else if(this.g&&this.g.audioTracks)for(n=(t=u(t=Array.from(this.g.audioTracks))).next();!n.done;n=t.next())if(yn(n=n.value)==e.id){eu(this,n);break}},W.hf=function(){return vu(this.Ya())},W.Bf=function(){return vu(this.Db())},W.gf=function(){return Array.from(mu(this.Ya()))},W.Af=function(){return Array.from(mu(this.Db()))},W.Xd=function(e,t){if(this.i&&this.B){this.La=new Wn(e,t||"",0,"");for(var n=function(e,t){return e.video||t.video?e.video&&t.video?Math.abs((e.video.height||0)-(t.video.height||0))+Math.abs((e.video.width||0)-(t.video.width||0)):1/0:0},i=this.j.l,r=this.La.create(this.i.variants),a=null,s=(r=u(r.values())).next();!s.done;s=r.next())s=s.value,(!a||n(a,i)>n(s,i))&&(a=s);a?(n=pn(a),this.Je(n,!0)):Zo(this)}else if(this.g&&this.g.audioTracks){for(r=Array.from(this.g.audioTracks),n=Qt(e),a=i=null,s=(r=u(r)).next();!s.done;s=r.next()){var o=An(s=s.value);Qt(o.language)==n&&(i=s,t?o.roles.includes(t)&&(a=s):0==o.roles.length&&(a=s))}a?eu(this,a):i&&eu(this,i)}},W.Yd=function(e,t,n){var i;n=void 0!==n&&n,this.i&&this.B?(this.sb=e,this.Zb=t||"",this.Xb=n,(e=Sn(this.i.textStreams,this.sb,this.Zb,this.Xb)[0]||null)&&e!=this.j.o&&(ko(this.o.h,e,!1),this.h.streaming.alwaysStreamText||this.yd())&&(Ms(this.j,e),ru(this))):(i=Qt(e),(e=this.Db().find((function(e){return Qt(e.language)==i&&(!t||e.roles.includes(t))&&e.forced==n})))&&this.Ie(e))},W.bg=function(e){if(this.i&&this.B){for(var t=null,n=u(this.i.variants),i=n.next();!i.done;i=n.next())if((i=i.value).audio.label==e){t=i;break}null!=t&&(this.La=new Wn(t.language,"",0,e),Zo(this))}},W.yd=function(){var e=this.ha;return this.L?this.L.m.isTextVisible():this.g&&this.g.src&&this.g.textTracks?Fo(this).some((function(e){return"showing"==e.mode})):e},W.ue=function(){return this.g&&this.g.src&&this.g.textTracks?Uo(this).map(bn):[]},W.kf=function(e){var t=Qt(e),n=Uo(this).filter((function(e){return Qt(e.language)==t}));if(!n||!n.length)return[];e=[];for(var i=(n=u(n)).next();!i.done;i=n.next())if((i=i.value)&&i.cues)for(var r=(i=u(i.cues)).next();!r.done;r=i.next()){var a=(r=r.value).id;a&&""!=a||(a=r.startTime+"-"+r.endTime+"-"+r.text),e.push({id:a,title:r.text,startTime:r.startTime,endTime:r.endTime})}return e},W.hg=function(e){if(this.ha!=(e=!!e)){if(this.ha=e,this.l==Su)this.L.m.setTextVisibility(e),this.h.streaming.alwaysStreamText||(e?this.j.o||0<(e=Sn(this.i.textStreams,this.sb,this.Zb,this.Xb)).length&&(Ms(this.j,e[0]),ru(this)):((r=(i=this.j).i.get(Ze))&&(Hs(r),Vs(r).catch((function(){})),i.i.delete(Ze)),i.o=null));else if(this.g&&this.g.src&&this.g.textTracks)for(var t=Fo(this),n=(t=u(t)).next();!n.done;n=t.next())"disabled"!=(n=n.value).mode&&(n.mode=e?"showing":"hidden");au(this)}var i,r},W.yf=function(){if(!this.V())return null;var e=this.ua.l,t=0;if(this.B)t=this.B.Dc();else if(e){if(null==e.startTime)return new Date;t=e.startTime}return this.i?new Date(1e3*(this.i.presentationTimeline.l+t)):this.g&&this.g.getStartDate&&(e=this.g.getStartDate(),!isNaN(e.getTime()))?new Date(e.getTime()+1e3*t):null},W.ve=function(){var e;return this.V()?this.i?new Date(1e3*this.i.presentationTimeline.l):this.g&&this.g.getStartDate&&(e=this.g.getStartDate(),!isNaN(e.getTime()))?e:null:null},W.Na=function(){var e;return this.l==Su?this.L.Na():(e={total:[],audio:[],video:[],text:[]},this.l==Cu&&(e.total=Ra(this.g.buffered)),e)},W.getStats=function(){if(this.l!=Su&&this.l!=Cu)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,stallsDetected:NaN,gapsJumped:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,switchHistory:[],stateHistory:[]};Xo(this);var e=(n=this.g).currentTime/n.duration,t=(isNaN(e)||(i=this.o,e=Math.round(100*e),i.i=isNaN(i.i)?e:Math.max(i.i,e)),this.B&&(this.o.O=this.B.ie(),this.o.T=this.B.je()),n.getVideoPlaybackQuality&&(i=n.getVideoPlaybackQuality(),e=this.o,r=Number(i.totalVideoFrames),e.M=Number(i.droppedVideoFrames),e.L=r,this.o.I=Number(i.corruptedVideoFrames)),i=this.m&&(i=this.m).I||NaN,this.o.s=i,this.l==Su&&((i=this.j.l)&&(this.o.B=(this.G?this.G.i:1)*i.bandwidth),i&&i.video&&(e=this.o,r=i.video.height||NaN,e.o=i.video.width||NaN,e.l=r),this.V()&&(i=this.ve().valueOf()+1e3*this.rc().end,this.o.D=(Date.now()-i)/1e3),this.i&&this.i.presentationTimeline&&(this.o.G=this.i.presentationTimeline.g),i=this.u.getBandwidthEstimate(),this.o.u=i),this.l==Cu&&(i=this.o,e=n.videoHeight||NaN,i.o=n.videoWidth||NaN,i.l=e),this.o),n=t.o,i=t.l;e=t.B;for(var r=t.L,a=t.M,s=t.I,o=t.T,l=t.O,c=t.u,d=t.i,h=t.m,f=t.F,g=t.j,p=Co(t.g,"playing"),m=Co(t.g,"paused"),v=Co(t.g,"buffering"),y=t.s,b=t.D,A=t.G,E=function(e){function t(e){return{timestamp:e.timestamp,state:e.state,duration:e.duration}}for(var n=[],i=u(e.h),r=i.next();!r.done;r=i.next())n.push(t(r.value));return e.g&&n.push(t(e.g)),n}(t.g),T=[],w=(t=u(t.h.g)).next();!w.done;w=t.next())w=w.value,T.push({timestamp:w.timestamp,id:w.id,type:w.type,fromAdaptation:w.fromAdaptation,bandwidth:w.bandwidth});return{width:n,height:i,streamBandwidth:e,decodedFrames:r,droppedFrames:a,corruptedFrames:s,stallsDetected:o,gapsJumped:l,estimatedBandwidth:c,completionPercent:d,loadLatency:h,manifestTimeSeconds:f,drmTimeSeconds:g,playTime:p,pauseTime:m,bufferingTime:v,licenseTime:y,liveLatency:b,maxSegmentDuration:A,stateHistory:E,switchHistory:T}},W.Ve=function(e,t,n,i,r,a,s){s=void 0!==s&&s;var o,u,l,c,d,h=this;return R((function(f){switch(f.g){case 1:if(h.l!=Su&&h.l!=Cu)throw new Le(1,7,7004);if(i){f.A(2);break}return y(f,jo(h,e),3);case 3:i=f.h;case 2:if(o=[],h.D)try{o=h.D.getServerSideCuePoints()}catch(e){}if(h.l==Cu)return y(f,Go(h,e,t,n=s?"forced":n,i,a||"",o),5);f.A(4);break;case 5:if(c=(c=h.Db()).find((function(e){return e.language==t&&e.label==(a||"")&&e.kind==n})))return nu(h),f.return(c);throw new Le(1,2,2012);case 4:if(u=Je,1/0==(l=h.i.presentationTimeline.getDuration()))throw new Le(1,4,4033);if(o.length)return y(f,Ho(h,e,h.F,h.h.streaming.retryParameters),7);f.A(6);break;case 7:c=f.h,d=Vo(h,c,i,o),d=new Blob([d],{type:"text/vtt"}),e=qa(d),i="text/vtt";case 6:if(d={id:h.Ee++,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:ps(0,l,[e]),mimeType:i||"",codecs:r||"",kind:n,encrypted:!1,drmInfos:[],keyIds:new Set,language:t,label:a||null,type:u.X,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!!s,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null},Ht(Nt(d.mimeType,d.codecs)))return h.i.textStreams.push(d),nu(h),f.return(mn(d));throw new Le(2,2,2014,i)}}))},W.Ue=function(e,t,n){var i,r,a,s=this;return R((function(o){switch(o.g){case 1:if(s.l!=Su&&s.l!=Cu)throw new Le(1,7,7004);if(n){o.A(2);break}return y(o,jo(s,e),3);case 3:n=o.h;case 2:if(r=[],s.D)try{r=s.D.getServerSideCuePoints()}catch(e){}return y(o,Go(s,e,t,"chapters",n,"",r),4);case 4:if(i=o.h,r=s.ue(),a=r.find((function(e){return e.language==t})))return y(o,new Promise((function(e,t){s.s.oa(i,"load",e),s.s.oa(i,"error",(function(){t(new Le(1,2,2015))}))})),6);o.A(5);break;case 6:return o.return(a);case 5:throw new Le(1,2,2012)}}))},W.ae=function(e,t){this.$b.width=e,this.$b.height=t},W.Ud=function(){if(this.l==Su){var e=this.j;if(e.h.g)e=!1;else if(e.s)e=!1;else{for(var t=u(e.i.values()),n=t.next();!n.done;n=t.next())(n=n.value).jc&&(n.jc=!1,Gs(e,n,.1));e=!0}}else e=!1;return e},W.rf=function(){return K("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."),this.i},W.tf=function(){return this.Rc},W.Ne=function(e){this.Ic=e},F("shaka.Player",Lo),Lo.prototype.setVideoContainer=Lo.prototype.Ne,Lo.prototype.getManifestParserFactory=Lo.prototype.tf,Lo.prototype.getManifest=Lo.prototype.rf,Lo.prototype.retryStreaming=Lo.prototype.Ud,Lo.prototype.setMaxHardwareResolution=Lo.prototype.ae,Lo.prototype.addChaptersTrack=Lo.prototype.Ue,Lo.prototype.addTextTrackAsync=Lo.prototype.Ve,Lo.prototype.getBufferedInfo=Lo.prototype.Na,Lo.prototype.getPresentationStartTimeAsDate=Lo.prototype.ve,Lo.prototype.getPlayheadTimeAsDate=Lo.prototype.yf,Lo.prototype.setTextTrackVisibility=Lo.prototype.hg,Lo.prototype.getChapters=Lo.prototype.kf,Lo.prototype.getChaptersTracks=Lo.prototype.ue,Lo.prototype.isTextTrackVisible=Lo.prototype.yd,Lo.prototype.selectVariantsByLabel=Lo.prototype.bg,Lo.prototype.selectTextLanguage=Lo.prototype.Yd,Lo.prototype.selectAudioLanguage=Lo.prototype.Xd,Lo.prototype.getTextLanguages=Lo.prototype.Af,Lo.prototype.getAudioLanguages=Lo.prototype.gf,Lo.prototype.getTextLanguagesAndRoles=Lo.prototype.Bf,Lo.prototype.getAudioLanguagesAndRoles=Lo.prototype.hf,Lo.prototype.selectVariantTrack=Lo.prototype.Je,Lo.prototype.selectTextTrack=Lo.prototype.Ie,Lo.prototype.getThumbnails=Lo.prototype.Cf,Lo.prototype.getImageTracks=Lo.prototype.nf,Lo.prototype.getTextTracks=Lo.prototype.Db,Lo.prototype.getVariantTracks=Lo.prototype.Ya,Lo.prototype.cancelTrickPlay=Lo.prototype.Ze,Lo.prototype.trickPlay=Lo.prototype.jg,Lo.prototype.getPlaybackRate=Lo.prototype.Nc,Lo.prototype.isBuffering=Lo.prototype.xd,Lo.prototype.getKeyStatuses=Lo.prototype.Mc,Lo.prototype.getExpiration=Lo.prototype.ec,Lo.prototype.goToLive=Lo.prototype.Gf,Lo.prototype.seekRange=Lo.prototype.rc,Lo.prototype.isAudioOnly=Lo.prototype.If,Lo.prototype.isInProgress=Lo.prototype.ib,Lo.prototype.isLive=Lo.prototype.V,Lo.prototype.getAdManager=Lo.prototype.te,Lo.prototype.getAssetUri=Lo.prototype.wd,Lo.prototype.getNetworkingEngine=Lo.prototype.fc,Lo.prototype.getMediaElement=Lo.prototype.vf,Lo.prototype.getLoadMode=Lo.prototype.qf,Lo.prototype.resetConfiguration=Lo.prototype.$f,Lo.prototype.getBufferFullness=Lo.prototype.jf,Lo.prototype.updateStartTime=Lo.prototype.og,Lo.prototype.unload=Lo.prototype.ge,Lo.prototype.attach=Lo.prototype.Yb,Lo.probeSupport=function(e){var t,n,i,r,a;return e=void 0===e||e,R((function(s){if(1==s.g)return t={},e?y(s,R((function(e){return 1==e.g?(o="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.microsoft.playready.recommendation com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" "),c=[{videoCapabilities:h=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],persistentState:"required",sessionTypes:["persistent-license"]},{initDataTypes:["cenc"],videoCapabilities:h}],d=new Map,h=function(e){var t,n;return R((function(i){switch(i.g){case 1:if(A(i,2),"org.w3.clearkey"===e&&ht())throw Error("Unsupported keySystem");return y(i,navigator.requestMediaKeySystemAccess(e,c),4);case 4:return t=i.h,n=!!(n=t.getConfiguration().sessionTypes)&&n.includes("persistent-license"),ft("Tizen 3")&&(n=!1),d.set(e,{persistentState:n}),y(i,t.createMediaKeys(),5);case 5:T(i,0);break;case 2:w(i),d.set(e,null),b(i)}}))},h=o.map(h),y(e,Promise.all(h),2)):e.return(Ri(d))})),3):s.A(2);2!=s.g&&(t=s.h);var o,c,d,h,f={};if(at()){for(var g in ir)f[g]=!0;for(var p in rr)f[p]=!0}g={mpd:"application/dash+xml",m3u8:"application/x-mpegurl",ism:"application/vnd.ms-sstr+xml"};for(var m,v=(p=u(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"])).next();!v.done;v=p.next())f[v=v.value]=at()?!!ir[v]:st(v);for(m in g)f[m]=at()?!!rr[m]:st(g[m]);for(n=f,f={},g=(m=u(m='video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="opus",audio/mp4; codecs="flac",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").concat(l(Wa)))).next();!g.done;g=m.next())f[g=g.value]=at()?!!Ht(g)||MediaSource.isTypeSupported(g)||_t(g):st(g),f[p=g.split(";")[0]]=f[p]||f[g];for(a in i={manifest:n,media:f,drm:t},r=Iu)i[a]=r[a]();return s.return(i)}))},Lo.isBrowserSupported=function(){var t;return e.Promise||K("A Promise implementation or polyfill is required"),!(!(e.Promise&&e.Uint8Array&&Array.prototype.forEach)||ft("Trident/")||(t=ht())&&t<13||!(e.MediaKeys&&e.navigator&&e.navigator.requestMediaKeySystemAccess&&e.MediaKeySystemAccess&&e.MediaKeySystemAccess.prototype.getConfiguration))&&(!!at()||st("application/x-mpegurl"))},Lo.setAdManagerFactory=function(e){Lu=e},Lo.registerSupportPlugin=function(e,t){Iu[e]=t};var Tu=0,wu=1,Su=2,Cu=3,xu=(Lo.LoadMode={DESTROYED:Tu,NOT_LOADED:wu,MEDIA_SOURCE:Su,SRC_EQUALS:Cu},Lo.version="v4.2.1",["4","2"]),ku=(Gn=new function(e){this.g=e,this.i=Un,this.h=jn}(new Fn(Number(xu[0]),Number(xu[1]))),["output-restricted","internal-error"]),Iu={},Lu=null,Ru={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",weba:"audio/webm",mkv:"video/webm",ts:"video/mp2t",ogv:"video/ogg",ogg:"audio/ogg",mpg:"video/mpeg",mpeg:"video/mpeg",m3u8:"application/x-mpegurl",mpd:"application/dash+xml",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac",wav:"audio/wav"},Du={sbv:"text/x-subviewer",srt:"text/srt",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml",lrc:"application/x-subtitle-lrc",ssa:"text/x-ssa",ass:"text/x-ssa"};function _u(){this.h=[],this.j=this.i=this.g=0}function Mu(e,t,n){var i=this;this.h=e,this.g=t,this.m=n,this.i=!1,this.l=this.g.getVolume(),this.j=new Ci,this.j.C(this.g,google.ima.AdEvent.Type.PAUSED,(function(){i.i=!0})),this.j.C(this.g,google.ima.AdEvent.Type.RESUMED,(function(){i.i=!1}))}function Ou(t,n,i,r){var a=this;this.o=t,this.i=n,this.s=null,this.u=NaN,this.l=r,this.j=null,this.h=new Ci,google.ima.settings.setLocale(i),(t=new google.ima.AdDisplayContainer(this.o,this.i)).initialize(),this.m=new google.ima.AdsLoader(t),this.m.getSettings().setPlayerType("shaka-player"),this.m.getSettings().setPlayerVersion("v4.2.1"),this.g=null,this.h.oa(this.m,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,(function(t){var n=a,i=(n.l(new oi("ads-loaded",(new Map).set("loadTime",Date.now()/1e3-n.u))),n.g=t.getAdsManager(n.i),n.l(new oi("ima-ad-manager-loaded",(new Map).set("imaAdManager",n.g))),n.g.getCuePoints());if(i.length){for(var r=[],s=(i=u(i)).next();!s.done;s=i.next())r.push({start:s.value,end:null});n.l(new oi("ad-cue-points-changed",(new Map).set("cuepoints",r)))}var o=n;function l(e,t){e=(new Map).set("originalEvent",e),o.l(new oi(t,e))}o.h.C(o.g,google.ima.AdErrorEvent.Type.AD_ERROR,(function(e){Pu(o,e)})),o.h.C(o.g,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,(function(e){Bu(o,e)})),o.h.C(o.g,google.ima.AdEvent.Type.STARTED,(function(e){Bu(o,e)})),o.h.C(o.g,google.ima.AdEvent.Type.FIRST_QUARTILE,(function(e){l(e,"ad-first-quartile")})),o.h.C(o.g,google.ima.AdEvent.Type.MIDPOINT,(function(e){l(e,"ad-midpoint")})),o.h.C(o.g,google.ima.AdEvent.Type.THIRD_QUARTILE,(function(e){l(e,"ad-third-quartile")})),o.h.C(o.g,google.ima.AdEvent.Type.COMPLETE,(function(e){l(e,"ad-complete")})),o.h.C(o.g,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,(function(e){Fu(o,e)})),o.h.C(o.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,(function(e){Fu(o,e)})),o.h.C(o.g,google.ima.AdEvent.Type.SKIPPED,(function(e){l(e,"ad-skipped")})),o.h.C(o.g,google.ima.AdEvent.Type.VOLUME_CHANGED,(function(e){l(e,"ad-volume-changed")})),o.h.C(o.g,google.ima.AdEvent.Type.VOLUME_MUTED,(function(e){l(e,"ad-muted")})),o.h.C(o.g,google.ima.AdEvent.Type.PAUSED,(function(e){o.j.i=!0,l(e,"ad-paused")})),o.h.C(o.g,google.ima.AdEvent.Type.RESUMED,(function(e){o.j.i=!1,l(e,"ad-resumed")})),o.h.C(o.g,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,(function(e){l(e,"ad-skip-state-changed")})),o.h.C(o.g,google.ima.AdEvent.Type.CLICK,(function(e){l(e,"ad-clicked")})),o.h.C(o.g,google.ima.AdEvent.Type.AD_PROGRESS,(function(e){l(e,"ad-progress")})),o.h.C(o.g,google.ima.AdEvent.Type.AD_BUFFERING,(function(e){l(e,"ad-buffering")})),o.h.C(o.g,google.ima.AdEvent.Type.IMPRESSION,(function(e){l(e,"ad-impression")})),o.h.C(o.g,google.ima.AdEvent.Type.DURATION_CHANGE,(function(e){l(e,"ad-duration-changed")})),o.h.C(o.g,google.ima.AdEvent.Type.USER_CLOSE,(function(e){l(e,"ad-closed")})),o.h.C(o.g,google.ima.AdEvent.Type.LOADED,(function(e){l(e,"ad-loaded")})),o.h.C(o.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,(function(e){l(e,"all-ads-completed")})),o.h.C(o.g,google.ima.AdEvent.Type.LINEAR_CHANGED,(function(e){l(e,"ad-linear-changed")})),o.h.C(o.g,google.ima.AdEvent.Type.AD_METADATA,(function(e){l(e,"ad-metadata")})),o.h.C(o.g,google.ima.AdEvent.Type.LOG,(function(e){l(e,"ad-recoverable-error")})),o.h.C(o.g,google.ima.AdEvent.Type.AD_BREAK_READY,(function(e){l(e,"ad-break-ready")})),o.h.C(o.g,google.ima.AdEvent.Type.INTERACTION,(function(e){l(e,"ad-interaction")}));try{n.g.init(n.i.offsetWidth,n.i.offsetHeight,Nu(n)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),n.h.C(n.i,"loadeddata",(function(){n.g.resize(n.i.offsetWidth,n.i.offsetHeight,Nu(n)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)})),"ResizeObserver"in e&&(n.s=new ResizeObserver((function(){n.g.resize(n.i.offsetWidth,n.i.offsetHeight,Nu(n)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)})),n.s.observe(n.i)),n.g.start()}catch(e){Fu(n,null)}})),this.h.C(this.m,google.ima.AdErrorEvent.Type.AD_ERROR,(function(e){Pu(a,e)})),this.i.onended=function(){a.m.contentComplete()}}function Pu(e,t){t.getError(),Fu(e,null),e.l(new oi("ad-cue-points-changed",(new Map).set("cuepoints",[])))}function Nu(e){return document.fullscreenEnabled?document.fullscreenElement:(e=e.i).webkitSupportsFullscreen&&e.webkitDisplayingFullscreen}function Bu(e,t){var n=t.getAd();e.j=new Mu(n,e.g,e.i),n=(new Map).set("ad",e.j).set("sdkAdObject",n).set("originalEvent",t),e.l(new oi("ad-started",n)),e.j.isLinear()&&(e.o.setAttribute("ad-active","true"),e.i.pause())}function Fu(e,t){e.l(new oi("ad-stopped",(new Map).set("originalEvent",t))),e.j&&e.j.isLinear()&&(e.o.removeAttribute("ad-active"),e.i.play())}function Uu(e,t){this.i=e,this.h=null,this.g=t}function ju(e,t,n,i){var r=this;this.s=e,this.l=t,this.j=null,this.G=NaN,this.i=i,this.F=!1,this.u=this.m=this.o=null,this.B="",this.D=[],this.h=new Ci,(e=new google.ima.dai.api.UiSettings).setLocale(n),this.g=new google.ima.dai.api.StreamManager(this.l,this.s,e),this.i(new oi("ima-stream-manager-loaded",(new Map).set("imaStreamManager",this.g))),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.LOADED,(function(e){var t=r;t.i(new oi("ads-loaded",(new Map).set("loadTime",Date.now()/1e3-t.G))),e=e.getStreamData().url,t.j.resolve(e),t.j=null,t.F||t.h.C(t.l,"seeked",(function(){var e,n=t.l.currentTime;0!=n&&(t.g.streamTimeForContentTime(n),e=t.g.previousCuePointForStreamTime(n))&&!e.played&&(t.o=n,t.l.currentTime=e.start)}))})),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.ERROR,(function(){r.B.length?r.j.resolve(r.B):r.j.reject("IMA Stream request returned an error and there was no backup asset uri provided."),r.j=null})),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,(function(){})),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.STARTED,(function(e){e=e.getAd(),r.m=new Uu(e,r.l),r.u&&(r.m.h=r.u),r.i(new oi("ad-started",(new Map).set("ad",r.m))),r.s.setAttribute("ad-active","true")})),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,(function(){r.s.removeAttribute("ad-active");var e=r.l.currentTime;r.o&&r.o>e&&(r.l.currentTime=r.o,r.o=null)})),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,(function(e){r.u=e.getStreamData().adProgressData,r.m&&(r.m.h=r.u)})),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,(function(){r.i(new oi("ad-first-quartile"))})),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.MIDPOINT,(function(){r.i(new oi("ad-midpoint"))})),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,(function(){r.i(new oi("ad-third-quartile"))})),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.COMPLETE,(function(){r.i(new oi("ad-complete")),r.i(new oi("ad-stopped")),r.s.removeAttribute("ad-active"),r.m=null})),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.SKIPPED,(function(){r.i(new oi("ad-skipped")),r.i(new oi("ad-stopped"))})),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,(function(e){var t=e.getStreamData();e=[];for(var n=(t=u(t.cuepoints)).next();!n.done;n=t.next())n=n.value,e.push({start:n.start,end:n.end});r.D=e,r.i(new oi("ad-cue-points-changed",(new Map).set("cuepoints",e)))}))}function Gu(){ci.call(this),this.g=this.i=null,this.h=new _u,this.j=navigator.language}function Hu(e){return JSON.stringify(e,(function(e,t){if("function"!=typeof t){if(t instanceof Event||t instanceof oi){var n={};for(r in t){var i=t[r];i&&"object"==typeof i?"detail"==r&&(n[r]=i):r in Event||(n[r]=i)}return n}if(t instanceof Error){var r=new Set(["name","message","stack"]);for(n in t)r.add(n);for(n=(i=u(Object.getOwnPropertyNames(t))).next();!n.done;n=i.next())r.add(n.value);for(i={},n=(r=u(r)).next();!n.done;n=r.next())i[n=n.value]=t[n];r={__type__:"Error",contents:i}}else if(t instanceof TimeRanges)for(r={__type__:"TimeRanges",length:t.length,start:[],end:[]},i=(n=u(Ra(t))).next();!i.done;i=n.next()){var a=(i=i.value).end;r.start.push(i.start),r.end.push(a)}else r=t instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(t)}:"number"==typeof t?isNaN(t)?"NaN":isFinite(t)?t:t<0?"-Infinity":"Infinity":t;return r}}))}function Vu(e){return JSON.parse(e,(function(e,t){if("NaN"==t)var n=NaN;else if("-Infinity"==t)n=-1/0;else if("Infinity"==t)n=1/0;else if(t&&"object"==typeof t&&"TimeRanges"==t.__type__)n={length:(a=t).length,start:function(e){return a.start[e]},end:function(e){return a.end[e]}};else if(t&&"object"==typeof t&&"Uint8Array"==t.__type__)n=new Uint8Array(t.entries);else if(t&&"object"==typeof t&&"Error"==t.__type__){n=t.contents;var i,r=Error(n.message);for(i in n)r[i]=n[i];n=r}else n=t;var a;return n}))}(W=Mu.prototype).getDuration=function(){return this.h.getDuration()},W.getMinSuggestedDuration=function(){return this.h.getMinSuggestedDuration()},W.getRemainingTime=function(){return this.g.getRemainingTime()},W.isPaused=function(){return this.i},W.isSkippable=function(){return 0<=this.h.getSkipTimeOffset()},W.getTimeUntilSkippable=function(){var e=this.h.getSkipTimeOffset();e=this.getRemainingTime()-e;return Math.max(e,0)},W.canSkipNow=function(){return this.g.getAdSkippableState()},W.skip=function(){return this.g.skip()},W.pause=function(){return this.g.pause()},W.play=function(){return this.g.resume()},W.getVolume=function(){return this.g.getVolume()},W.setVolume=function(e){return this.g.setVolume(e)},W.isMuted=function(){return 0==this.g.getVolume()},W.isLinear=function(){return this.h.isLinear()},W.resize=function(e,t){var n=!1,i=this.m;document.fullscreenEnabled?n=!!document.fullscreenElement:i.webkitSupportsFullscreen&&(n=i.webkitDisplayingFullscreen),this.g.resize(e,t,n?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)},W.setMuted=function(e){e?(this.l=this.getVolume(),this.setVolume(0)):this.setVolume(this.l)},W.getSequenceLength=function(){var e=this.h.getAdPodInfo();return null==e?1:e.getTotalAds()},W.getPositionInSequence=function(){var e=this.h.getAdPodInfo();return null==e?1:e.getAdPosition()},W.release=function(){this.g=this.h=null},F("shaka.ads.ClientSideAd",Mu),Ou.prototype.stop=function(){this.g&&this.g.stop(),this.o&&$s(this.o)},Ou.prototype.release=function(){this.stop(),this.s&&this.s.disconnect(),this.h&&this.h.release(),this.g&&this.g.destroy(),this.m.destroy()},(W=Uu.prototype).getDuration=function(){return this.h?this.h.duration:-1},W.getMinSuggestedDuration=function(){return this.getDuration()},W.getRemainingTime=function(){return this.h?this.h.duration-this.h.currentTime:-1},W.isPaused=function(){return this.g.paused},W.isSkippable=function(){return this.i.isSkippable()},W.getTimeUntilSkippable=function(){var e=this.i.getSkipTimeOffset();e=this.getRemainingTime()-e;return Math.max(e,0)},W.canSkipNow=function(){return 0==this.getTimeUntilSkippable()},W.skip=function(){this.g.currentTime+=this.getRemainingTime()},W.pause=function(){return this.g.pause()},W.play=function(){return this.g.play()},W.getVolume=function(){return this.g.volume},W.setVolume=function(e){this.g.volume=e},W.isMuted=function(){return this.g.muted},W.isLinear=function(){return!0},W.resize=function(){},W.setMuted=function(e){this.g.muted=e},W.getSequenceLength=function(){var e=this.i.getAdPodInfo();return null==e?1:e.getTotalAds()},W.getPositionInSequence=function(){var e=this.i.getAdPodInfo();return null==e?1:e.getAdPosition()},W.release=function(){this.g=this.h=this.i=null},F("shaka.ads.ServerSideAd",Uu),ju.prototype.stop=function(){this.B="",this.o=null,this.D=[]},ju.prototype.release=function(){this.stop(),this.h&&this.h.release()},ju.prototype.onCueMetadataChange=function(e){var t;e.key&&e.data&&((t={})[e.key]=e.data,this.g.onTimedMetadata(t))},g(Gu,ci),(W=Gu.prototype).setLocale=function(e){this.j=e},W.initClientSide=function(t,n){var i=this;if(!e.google||!google.ima||!google.ima.AdsLoader)throw new Le(2,10,1e4);this.i&&this.i.release(),this.i=new Ou(t,n,this.j,(function(e){if(e&&e.type)switch(e.type){case"ads-loaded":i.h.h.push(e.loadTime);break;case"ad-started":i.h.g++;break;case"ad-complete":i.h.i++;break;case"ad-skipped":i.h.j++}i.dispatchEvent(e)}))},W.release=function(){this.i&&(this.i.release(),this.i=null),this.g&&(this.g.release(),this.g=null),ci.prototype.release.call(this)},W.onAssetUnload=function(){this.i&&this.i.stop(),this.g&&this.g.stop(),this.dispatchEvent(new oi("ad-stopped")),this.h=new _u},W.requestClientSideAds=function(e){if(!this.i)throw new Le(1,10,10001);var t=this.i;t.u=Date.now()/1e3,t.m.requestAds(e)},W.initServerSide=function(t,n){var i=this;if(!e.google||!google.ima||!google.ima.dai)throw new Le(2,10,10002);this.g&&this.g.release(),this.g=new ju(t,n,this.j,(function(e){if(e&&e.type)switch(e.type){case"ads-loaded":i.h.h.push(e.loadTime);break;case"ad-started":i.h.g++;break;case"ad-complete":i.h.i++;break;case"ad-skipped":i.h.j++}i.dispatchEvent(e)}))},W.requestServerSideStream=function(e,t){if(t=void 0===t?"":t,!this.g)throw new Le(1,10,10003);e.adTagParameters||(e.adTagParameters={});var n=e.adTagParameters;return(n.mpt||n.mpv)&&K('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.adTagParameters.mpt="shaka-player",e.adTagParameters.mpv="v4.2.1",(n=this.g).j?Promise.reject(new Le(1,10,10004)):(e instanceof google.ima.dai.api.LiveStreamRequest&&(n.F=!0),n.j=new tt,n.g.requestStream(e),n.B=t||"",n.G=Date.now()/1e3,n.j)},W.replaceServerSideAdTagParameters=function(e){if(!this.g)throw new Le(1,10,10003);(e.mpt||e.mpv)&&K('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.mpt="Shaka Player",e.mpv="v4.2.1",this.g.g.replaceAdTagParameters(e)},W.getServerSideCuePoints=function(){if(this.g)return this.g.D;throw new Le(1,10,10003)},W.getStats=function(){var e=this.h;return{loadTimes:e.h,started:e.g,playedCompletely:e.i,skipped:e.j}},W.onDashTimedMetadata=function(e){var t,n;this.g&&"urn:google:dai:2018"==e.schemeIdUri&&(t=e.schemeIdUri,n=e.eventElement?e.eventElement.getAttribute("messageData"):null,this.g.g.processMetadata(t,n,e.startTime))},W.onHlsTimedMetadata=function(e,t){this.g&&this.g.g.processMetadata("ID3",e.data,t)},W.onCueMetadataChange=function(e){this.g&&this.g.onCueMetadataChange(e)},F("shaka.ads.AdManager",Gu),Gu.ADS_LOADED="ads-loaded",Gu.AD_STARTED="ad-started",Gu.AD_FIRST_QUARTILE="ad-first-quartile",Gu.AD_MIDPOINT="ad-midpoint",Gu.AD_THIRD_QUARTILE="ad-third-quartile",Gu.AD_COMPLETE="ad-complete",Gu.AD_STOPPED="ad-stopped",Gu.AD_SKIPPED="ad-skipped",Gu.AD_VOLUME_CHANGED="ad-volume-changed",Gu.AD_MUTED="ad-muted",Gu.AD_PAUSED="ad-paused",Gu.AD_RESUMED="ad-resumed",Gu.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",Gu.CUEPOINTS_CHANGED="ad-cue-points-changed",Gu.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",Gu.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",Gu.AD_CLICKED="ad-clicked",Gu.AD_PROGRESS="ad-progress",Gu.AD_BUFFERING="ad-buffering",Gu.AD_IMPRESSION="ad-impression",Gu.AD_DURATION_CHANGED="ad-duration-changed",Gu.AD_CLOSED="ad-closed",Gu.AD_LOADED="ad-loaded",Gu.ALL_ADS_COMPLETED="all-ads-completed",Gu.AD_LINEAR_CHANGED="ad-linear-changed",Gu.AD_METADATA="ad-metadata",Gu.AD_RECOVERABLE_ERROR="ad-recoverable-error",Gu.AD_BREAK_READY="ad-break-ready",Gu.AD_INTERACTION="ad-interaction";Lu=function(){return new Gu};var Ku="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),qu="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),zu=["loop","playbackRate"],Wu=["pause","play"],Yu={getAssetUri:2,getAudioLanguages:4,getAudioLanguagesAndRoles:4,getBufferFullness:1,getBufferedInfo:2,getConfiguration:4,getExpiration:2,getKeyStatuses:2,getPlaybackRate:2,getTextLanguages:4,getTextLanguagesAndRoles:4,getTextTracks:2,getStats:5,getVariantTracks:2,getImageTracks:2,getThumbnails:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,getLoadMode:10},Xu={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20},Qu=[["getConfiguration","configure"]],$u=[["isTextTrackVisible","setTextTrackVisibility"]],Zu="addChaptersTrack addTextTrackAsync cancelTrickPlay configure getChapters getChaptersTracks resetConfiguration retryStreaming selectAudioLanguage selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay updateStartTime goToLive".split(" "),Ju=["attach","detach","load","unload"];function el(e,t,n,i,r,a,s){var o=this;this.G=e,this.O=s,this.j=new rt(t),this.T=n,this.u=!1,this.s=i,this.F=r,this.L=a,this.h=this.m=!1,this.M="",this.o=null,this.B=function(){return al(o)},this.D=function(e,t){switch((i=Vu(t)).type){case"event":var n=i.targetName,i=ui(i.event);o.s(n,i);break;case"update":for(var r in n=i.update)for(var a in i=o.g[r]||{},n[r])i[a]=n[r][a];o.u&&(o.T(),o.u=!1);break;case"asyncComplete":if(r=i.id,i=i.error,a=o.i[r],delete o.i[r],a)if(i){for(n in r=new Le(i.severity,i.category,i.code),i)r[n]=i[n];a.reject(r)}else a.resolve()}},this.g={video:{},player:{}},this.I=0,this.i={},this.l=null,dl.add(this)}function tl(e,t,n){(cl=n).addUpdateListener(e.B),n.addMessageListener("urn:x-cast:com.google.shaka.v2",e.D),al(e),ol(e,{type:"init",initState:t,appData:e.o}),e.l.resolve()}function nl(e,t){var n=8003;switch(t.code){case"cancel":n=8004;break;case"timeout":n=8005;break;case"receiver_unavailable":n=8006}e.l.reject(new Le(2,8,n,t))}function il(e,t){var n=e.L();e.l=new tt,e.u=!0,tl(e,n,t)}function rl(e){var t=cl;t.removeUpdateListener(e.B),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.D)}function al(e){var t=!!cl&&"connected"==cl.status;if(e.h&&!t){for(var n in e.F(),e.g)e.g[n]={};sl(e)}e.h=t,e.M=t?cl.receiver.friendlyName:"",e.j.Lb()}function sl(e){for(var t in e.i){var n=e.i[t];delete e.i[t],n.reject(new Le(1,7,7e3))}}function ol(e,t){t=Hu(t);var n=cl;try{n.sendMessage("urn:x-cast:com.google.shaka.v2",t,(function(){}),z)}catch(i){throw t=new Le(2,8,8005,i),n=new oi("error",(new Map).set("detail",t)),e.s("player",n),e.yb(),t}}(W=el.prototype).destroy=function(){return dl.delete(this),sl(this),cl&&rl(this),this.j&&(this.j.stop(),this.j=null),this.F=this.s=null,this.h=this.m=!1,this.D=this.B=this.l=this.i=this.g=this.o=null,Promise.resolve()},W.ra=function(){return this.h},W.Sd=function(){return this.M},W.init=function(){var t;this.G.length&&(e.chrome&&chrome.cast&&chrome.cast.isAvailable?(this.m=!0,this.j.Lb(),t=new chrome.cast.SessionRequest(this.G,[],null,this.O,null),t=new chrome.cast.ApiConfig(t,(function(e){for(var t=u(dl),n=t.next();!n.done;n=t.next())il(n.value,e)}),(function(e){for(var t=u(dl),n=t.next();!n.done;n=t.next())n=n.value,ll="available"==e,n.j.Lb()}),"origin_scoped"),chrome.cast.initialize(t,(function(){}),(function(){})),ll&&this.j.R(ul),(t=cl)&&t.status!=chrome.cast.SessionStatus.STOPPED?il(this,t):cl=null):(e.__onGCastApiAvailable||(e.__onGCastApiAvailable=hl),e.__onGCastApiAvailable!=hl&&K("A global Cast SDK hook is already installed! Shaka Player will be unable to receive a notification when the Cast SDK is ready.")))},W.Zd=function(e){this.o=e,this.h&&ol(this,{type:"appData",appData:this.o})},W.cast=function(e){var t=this;return R((function(n){if(!t.m)throw new Le(1,8,8e3);if(!ll)throw new Le(1,8,8001);if(t.h)throw new Le(1,8,8002);return t.l=new tt,chrome.cast.requestSession((function(n){return tl(t,e,n)}),(function(e){return nl(t,e)})),y(n,t.l,0)}))},W.yb=function(){if(this.h){if(sl(this),cl){rl(this);try{cl.stop((function(){}),(function(){}))}catch(e){}cl=null}al(this)}},W.get=function(e,t){var n=this;if("video"==e){if(Wu.includes(t))return function(){return n.Ge.apply(n,[e,t].concat(l(D.apply(0,arguments))))}}else if("player"==e){if(Xu[t]&&!this.get("player","isLive")())return function(){};if(Zu.includes(t))return function(){return n.Ge.apply(n,[e,t].concat(l(D.apply(0,arguments))))};if(Ju.includes(t))return function(){return n.Xf.apply(n,[e,t].concat(l(D.apply(0,arguments))))};if(Yu[t])return function(){return n.g[e][t]}}return this.g[e][t]},W.set=function(e,t,n){this.g[e][t]=n,ol(this,{type:"set",targetName:e,property:t,value:n})},W.Ge=function(e,t){ol(this,{type:"call",targetName:e,methodName:t,args:D.apply(2,arguments)})},W.Xf=function(e,t){var n=D.apply(2,arguments),i=new tt,r=this.I.toString();this.I++,this.i[r]=i;try{ol(this,{type:"asyncCall",targetName:e,methodName:t,args:n,id:r})}catch(e){i.reject(e)}return i};var ul=.02,ll=!1,cl=null,dl=new Set;function hl(e){if(e)for(var t=(e=u(dl)).next();!t.done;t=e.next())t.value.init()}function fl(e,t,n,i){i=void 0!==i&&i,ci.call(this);var r=this,a=(this.i=e,this.h=t,this.m=this.o=this.j=this.s=this.l=null,this.D=n,this.B=i,this.u=new Map,this.g=new el(n,(function(){return ml(r)}),(function(){return vl(r)}),(function(e,t){return bl(r,e,t)}),(function(){return yl(r)}),(function(){return pl(r)}),i),this);a.g.init(),a.m=new Ci;for(var s,o,l=u(Ku),c=l.next();!c.done;c=l.next())a.m.C(a.i,c.value,(function(e){a.g.ra()||(e=ui(e),a.j.dispatchEvent(e))}));for(s in li)a.m.C(a.h,li[s],(function(e){a.g.ra()||a.o.dispatchEvent(e)}));for(o in a.l={},l={},a.i)l.Qb=o,Object.defineProperty(a.l,l.Qb,{configurable:!1,enumerable:!0,get:function(e){return function(){var t=a,n=e.Qb;if("addEventListener"==n)return function(e,n,i){return t.j.addEventListener(e,n,i)};if("removeEventListener"==n)return function(e,n,i){return t.j.removeEventListener(e,n,i)};if(t.g.ra()&&0==Object.keys(t.g.g.video).length){var i=t.i[n];if("function"!=typeof i)return i}return t.g.ra()?t.g.get("video",n):i="function"==typeof(i=t.i[n])?i.bind(t.i):i}}(l),set:function(e){return function(t){var n=e.Qb;a.g.ra()?a.g.set("video",n,t):a.i[n]=t}}(l)}),l={Qb:l.Qb};a.s={},gl(a,(function(e){Object.defineProperty(a.s,e,{configurable:!1,enumerable:!0,get:function(){var t=a,n=e;if("addEventListener"==(n=t.u.has(n)?t.u.get(n):n))return function(e,n,i){return t.o.addEventListener(e,n,i)};if("removeEventListener"==n)return function(e,n,i){return t.o.removeEventListener(e,n,i)};if("getMediaElement"==n)return function(){return t.l};if("getSharedConfiguration"==n)return t.g.get("player","getConfiguration");if("getNetworkingEngine"==n)return function(){return t.h.fc()};if("getDrmEngine"==n)return function(){return t.h.m};if("getAdManager"==n)return function(){return t.h.te()};if("setVideoContainer"==n)return function(e){return t.h.Ne(e)};if(t.g.ra()){if("getManifest"==n||"drmInfo"==n)return function(){return K(n+"() does not work while casting!"),null};if("attach"==n||"detach"==n)return function(){return K(n+"() does not work while casting!"),Promise.resolve()}}return t.g.ra()&&0==Object.keys(t.g.g.video).length&&Yu[n]||!t.g.ra()?t.h[n].bind(t.h):t.g.get("player",n)}})}));var d=a,h=new Map;gl(d,(function(e,t){var n;h.has(t)?(n=h.get(t),e.length<n.length?d.u.set(e,n):d.u.set(n,e)):h.set(t,e)})),a.j=new ci,a.j.Kc=a.l,a.o=new ci,a.o.Kc=a.s}function gl(e,t){function n(e){return"constructor"!=e&&"function"==typeof i[e]&&!r.has(e)}var i=e.h,r=new Set;for(a in i)n(a)&&(r.add(a),t(a,i[a]));for(var a=Object.getPrototypeOf(i),s=Object.getPrototypeOf({});a&&a!=s;){for(var o=u(Object.getOwnPropertyNames(a)),l=o.next();!l.done;l=o.next())n(l=l.value)&&(r.add(l),t(l,i[l]));a=Object.getPrototypeOf(a)}}function pl(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.h.wd(),startTime:null};e.i.pause();for(var n=u(zu),i=n.next();!i.done;i=n.next())i=i.value,t.video[i]=e.i[i];for(e.i.ended||(t.startTime=e.i.currentTime),i=(n=u(Qu)).next();!i.done;i=n.next()){i=(r=i.value)[1];var r=e.h[r[0]]();t.player[i]=r}for(i=(n=u($u)).next();!i.done;i=n.next())i=(r=i.value)[1],r=e.h[r[0]](),t.playerAfterLoad[i]=r;return t}function ml(e){var t=new oi("caststatuschanged");e.dispatchEvent(t)}function vl(e){var t=new oi(e.l.paused?"pause":"play");e.j.dispatchEvent(t)}function yl(e){for(var t=u(Qu),n=t.next();!n.done;n=t.next()){n=(i=n.value)[1];var i=e.g.get("player",i[0])();e.h[n](i)}var r=e.g.get("player","getAssetUri")(),a=(n=e.g.get("video","ended"),t=Promise.resolve(),e.i.autoplay),s=(i=null,n||(i=e.g.get("video","currentTime")),r&&(e.i.autoplay=!1,t=e.h.load(r,i)),{});for(i=(n=u(zu)).next();!i.done;i=n.next())i=i.value,s[i]=e.g.get("video",i);t.then((function(){if(e.i){for(var t=u(zu),n=t.next();!n.done;n=t.next())n=n.value,e.i[n]=s[n];for(n=(t=u($u)).next();!n.done;n=t.next()){n=(i=n.value)[1];var i=e.g.get("player",i[0])();e.h[n](i)}e.i.autoplay=a,r&&e.i.play()}}),(function(t){t=new oi("error",t=(new Map).set("detail",t)),e.h.dispatchEvent(t)}))}function bl(e,t,n){e.g.ra()&&("video"==t?e.j.dispatchEvent(n):"player"==t&&e.o.dispatchEvent(n))}function Al(e,t,n,i){ci.call(this);var r=this,a=(this.g=e,this.h=t,this.j=new Ci,this.I={video:e,player:t},this.D=n||function(){},this.L=i||function(e){return e},this.i=null,this.F=!1,this.o=!0,this.m=0,this.B=!1,this.u=!0,this.s=this.l=null,this.G=new rt((function(){Sl(r)})),this),s=cast.receiver.CastReceiverManager.getInstance();s.onSenderConnected=function(){return El(a)},s.onSenderDisconnected=function(){return El(a)},s.onSystemVolumeChanged=function(){var e=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();e&&Il(a,{type:"update",update:{video:{volume:e.level,muted:e.muted}}},a.l),Il(a,{type:"event",targetName:"video",event:{type:"volumechange"}},a.l)},a.s=s.getCastMessageBus("urn:x-cast:com.google.cast.media"),a.s.onMessage=function(e){var t=a,n=Vu(e.data);switch(n.type){case"PLAY":t.g.play(),Ll(t);break;case"PAUSE":t.g.pause(),Ll(t);break;case"SEEK":var i=n.currentTime,r=n.resumeState;null!=i&&(t.g.currentTime=Number(i)),r&&"PLAYBACK_START"==r?(t.g.play(),Ll(t)):r&&"PLAYBACK_PAUSE"==r&&(t.g.pause(),Ll(t));break;case"STOP":t.h.ge().then((function(){t.h&&Ll(t)}));break;case"GET_STATUS":xl(t,Number(n.requestId));break;case"VOLUME":i=(r=n.volume).level,r=r.muted;var s=t.g.volume,o=t.g.muted;null!=i&&(t.g.volume=Number(i)),null!=r&&(t.g.muted=r),s==t.g.volume&&o==t.g.muted||Ll(t);break;case"LOAD":t.m=0,t.B=!1,t.u=!1,i=n.media,r=n.currentTime,s=t.L(i.contentId),o=n.autoplay||!0,t.D(i.customData),o&&(t.g.autoplay=!0),t.h.load(s,r).then((function(){t.h&&xl(t)})).catch((function(e){var i="LOAD_FAILED";7==e.category&&7e3==e.code&&(i="LOAD_CANCELLED"),Il(t,{requestId:Number(n.requestId),type:i},t.s)}));break;default:Il(t,{requestId:Number(n.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},t.s)}},a.l=s.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),a.l.onMessage=function(e){var t=a,n=e,i=Vu(n.data);switch(i.type){case"init":t.m=0,t.B=!1,t.u=!0,function(e,t,n){var i,r,a,s,o,u,l,c;R((function(d){switch(d.g){case 1:for(i in t.player)r=t.player[i],e.h[i](r);return e.D(n),a=e.g.autoplay,t.manifest?(e.g.autoplay=!1,A(d,5),y(d,e.h.load(t.manifest,t.startTime),7)):y(d,Promise.resolve(),3);case 7:T(d,3);break;case 5:return s=w(d),s=new oi("error",s=(new Map).set("detail",s)),e.h&&e.h.dispatchEvent(s),d.return();case 3:if(!e.h)return d.return();for(o in t.video)u=t.video[o],e.g[o]=u;for(l in t.playerAfterLoad)c=t.playerAfterLoad[l],e.h[l](c);e.g.autoplay=a,t.manifest&&(e.g.play(),Ll(e)),b(d)}}))}(t,i.initState,i.appData),Sl(t);break;case"appData":t.D(i.appData);break;case"set":var r=i.targetName,s=i.property;if(i=i.value,"video"==r){var o=cast.receiver.CastReceiverManager.getInstance();if("volume"==s){o.setSystemVolumeLevel(i);break}if("muted"==s){o.setSystemVolumeMuted(i);break}}t.I[r][s]=i;break;case"call":(r=t.I[i.targetName])[i.methodName].apply(r,i.args);break;case"asyncCall":r=i.targetName,s=i.methodName,"player"==r&&"load"==s&&(t.m=0,t.B=!1);var u=i.id,l=n.senderId;i=(o=t.I[r])[s].apply(o,i.args),(i="player"==r&&"load"==s?i.then((function(){t.u=!0})):i).then((function(){return kl(t,l,u,null)}),(function(e){return kl(t,l,u,e)}))}},s.start();for(var o,l=(s=u(Ku)).next();!l.done;l=s.next())a.j.C(a.g,l.value,(function(e){return wl(a,"video",e)}));for(o in li)a.j.C(a.h,li[o],(function(e){return wl(a,"player",e)}));cast.__platform__&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?a.h.ae(3840,2160):a.h.ae(1920,1080),a.j.C(a.g,"loadeddata",(function(){a.B=!0})),a.j.C(a.h,"loading",(function(){a.o=!1,Tl(a)})),a.j.C(a.g,"playing",(function(){a.o=!1,Tl(a)})),a.j.C(a.g,"pause",(function(){Tl(a)})),a.j.C(a.h,"unloading",(function(){a.o=!0,Tl(a)})),a.j.C(a.g,"ended",(function(){new rt((function(){a.g&&a.g.ended&&(a.o=!0,Tl(a))})).R(Dl)}))}function El(e){e.m=0,e.u=!0,e.F=0!=cast.receiver.CastReceiverManager.getInstance().getSenders().length,Tl(e)}function Tl(e){var t;R((function(n){return 1==n.g?y(n,Promise.resolve(),2):e.h?(t=new oi("caststatuschanged"),e.dispatchEvent(t),Cl(e)||Ll(e),void b(n)):n.return()}))}function wl(e,t,n){e.h&&(Sl(e),Il(e,{type:"event",targetName:t,event:n},e.l))}function Sl(e){e.G.R(Rl);for(var t,n={video:{},player:{}},i=u(qu),r=i.next();!r.done;r=i.next())r=r.value,n.video[r]=e.g[r];if(e.h.V())for(var a in Xu)0==e.m%Xu[a]&&(n.player[a]=e.h[a]());for(t in Yu)0==e.m%Yu[t]&&(n.player[t]=e.h[t]());(i=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(n.video.volume=i.level,n.video.muted=i.muted),e.B&&(e.m+=1),Il(e,{type:"update",update:n},e.l),Cl(e)}function Cl(e){return e.u&&(e.g.duration||e.h.V())&&(xl(e),e.u=!1,1)}function xl(e,t){var n={contentId:e.h.wd(),streamType:e.h.V()?"LIVE":"BUFFERED",contentType:""};e.h.V()||(n.duration=e.g.duration),e.i&&(n.metadata=e.i),Ll(e,void 0===t?0:t,n)}function kl(e,t,n,i){e.h&&Il(e,{type:"asyncComplete",id:n,error:i},e.l,t)}function Il(e,t,n,i){e.F&&(e=Hu(t),i?n.getCastChannel(i).send(e):n.broadcast(e))}function Ll(e,t,n){n=void 0===n?null:n;var i={mediaSessionId:0,playbackRate:e.g.playbackRate,playerState:e.o?_l:e.h.xd()?Ol:e.g.paused?Pl:Ml,currentTime:e.g.currentTime,supportedMediaCommands:63,volume:{level:e.g.volume,muted:e.g.muted}};n&&(i.media=n),Il(e,{requestId:void 0===t?0:t,type:"MEDIA_STATUS",status:[i]},e.s)}g(fl,ci),(W=fl.prototype).destroy=function(e){return e&&this.g.yb(),this.m&&(this.m.release(),this.m=null),e=[],this.h&&(e.push(this.h.destroy()),this.h=null),this.g&&(e.push(this.g.destroy()),this.g=null),this.s=this.l=this.i=null,ci.prototype.release.call(this),Promise.all(e)},W.Ff=function(){return this.l},W.xf=function(){return this.s},W.Xe=function(){return this.g.m&&ll},W.ra=function(){return this.g.ra()},W.Sd=function(){return this.g.Sd()},W.cast=function(){var e,t=this;return R((function(n){return 1==n.g?(e=pl(t),y(n,t.g.cast(e),2)):t.h?y(n,t.h.ge(),0):n.return()}))},W.Zd=function(e){this.g.Zd(e)},W.ig=function(){var e,t;(e=this.g).h&&(t=e.L(),chrome.cast.requestSession((function(n){return tl(e,t,n)}),(function(t){return nl(e,t)})))},W.yb=function(){this.g.yb()},W.$e=function(e,t){t=void 0!==t&&t;var n=this;return R((function(i){if(1==i.g)return e==n.D&&t==n.B?i.return():(n.D=e,n.B=t,n.g.yb(),y(i,n.g.destroy(),2));n.g=null,n.g=new el(e,(function(){return ml(n)}),(function(){return vl(n)}),(function(e,t){return bl(n,e,t)}),(function(){return yl(n)}),(function(){return pl(n)}),t),n.g.init(),b(i)}))},F("shaka.cast.CastProxy",fl),fl.prototype.changeReceiverId=fl.prototype.$e,fl.prototype.forceDisconnect=fl.prototype.yb,fl.prototype.suggestDisconnect=fl.prototype.ig,fl.prototype.setAppData=fl.prototype.Zd,fl.prototype.receiverName=fl.prototype.Sd,fl.prototype.isCasting=fl.prototype.ra,fl.prototype.canCast=fl.prototype.Xe,fl.prototype.getPlayer=fl.prototype.xf,fl.prototype.getVideo=fl.prototype.Ff,g(Al,ci),(W=Al.prototype).isConnected=function(){return this.F},W.Jf=function(){return this.o},W.eg=function(e){this.i=e},W.cf=function(){this.i=null},W.fg=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.title=e},W.dg=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.images=[{url:e}]},W.cg=function(e){this.i||(this.i={}),this.i.artist=e,this.i.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},W.destroy=function(){var e,t=this;return R((function(n){if(1==n.g)return t.j&&(t.j.release(),t.j=null),e=[],t.h&&(e.push(t.h.destroy()),t.h=null),t.G&&(t.G.stop(),t.G=null),t.g=null,t.I=null,t.D=null,t.F=!1,t.o=!0,t.l=null,t.s=null,ci.prototype.release.call(t),y(n,Promise.all(e),2);cast.receiver.CastReceiverManager.getInstance().stop(),b(n)}))},F("shaka.cast.CastReceiver",Al),Al.prototype.setContentArtist=Al.prototype.cg,Al.prototype.setContentImage=Al.prototype.dg,Al.prototype.setContentTitle=Al.prototype.fg,Al.prototype.clearContentMetadata=Al.prototype.cf,Al.prototype.setContentMetadata=Al.prototype.eg,Al.prototype.isIdle=Al.prototype.Jf;var Rl=.5,Dl=5,_l="IDLE",Ml="PLAYING",Ol="BUFFERING",Pl="PAUSED";function Nl(e){var t=this;this.g=[],this.h=[],this.data=[],(new ur).box("moov",lr).U("pssh",(function(e){if(!(1<e.version)){var n=we(e.reader.S,-12,e.size);if(t.data.push(n),t.g.push(Lt(e.reader.Za(16))),0<e.version){n=e.reader.N();for(var i=0;i<n;i++){var r=Lt(e.reader.Za(16));t.h.push(r)}}}})).parse(e)}function Bl(e,t,n,i){var r=e.length,a=t.length+16+r,s=(0<i&&(a+=4+16*n.size),new Uint8Array(a)),o=Se(s),l=0;if(o.setUint32(l,a),o.setUint32(l+=4,1886614376),l+=4,i<1?o.setUint32(l,0):o.setUint32(l,16777216),s.set(t,l+=4),l+=t.length,0<i)for(o.setUint32(l,n.size),l+=4,n=(t=u(n)).next();!n.done;n=t.next())n=It(n.value),s.set(n,l),l+=n.length;return o.setUint32(l,r),s.set(e,l+4),s}function Fl(e,t){return 1!=(e=jl(e,t)).length?null:e[0]}function Ul(e,t,n){return 1!=(e=Gl(e,t,n)).length?null:e[0]}function jl(e,t){for(var n=[],i=u(e.childNodes),r=i.next();!r.done;r=i.next())(r=r.value)instanceof Element&&r.tagName==t&&n.push(r);return n}function Gl(e,t,n){for(var i=[],r=(e=u(e.childNodes)).next();!r.done;r=e.next())(r=r.value)instanceof Element&&r.localName==n&&r.namespaceURI==t&&i.push(r);return i}function Hl(e,t,n){return e.hasAttributeNS(t,n)?e.getAttributeNS(t,n):null}function Vl(e,t,n){for(var i=(t=u(t)).next();!i.done;i=t.next())if(i=i.value,e.hasAttributeNS(i,n))return e.getAttributeNS(i,n);return null}function Kl(e){return Array.from(e.childNodes).every(ql)?e.textContent.trim():null}function ql(e){return e.nodeType==Node.TEXT_NODE||e.nodeType==Node.CDATA_SECTION_NODE}function zl(e,t,n,i){i=void 0===i?null:i;var r=null;return null==(r=null!=(e=e.getAttribute(t))?n(e):r)?i:r}function Wl(e){return!e||(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e))?null:e/1e3}function Yl(e){return(e=e&&RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$").exec(e))&&(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e))?e:null}function Xl(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return t&&(e=Number(t[1]),isFinite(e))&&(t=Number(t[2]),isFinite(t))?{start:e,end:t}:null}function Ql(e){return 0==(e=Number(e))%1?e:null}function $l(e){return 0==(e=Number(e))%1&&0<e?e:null}function Zl(e){return 0==(e=Number(e))%1&&0<=e?e:null}function Jl(e){return e=Number(e),isNaN(e)?null:e}function ec(e){var t=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e);return isNaN(t)?null:t}function tc(e,t){var n=new DOMParser,i=null;try{i=n.parseFromString(e,"text/xml")}catch(e){return null}return!(n=i.documentElement)||n.getElementsByTagName("parsererror").length||i.documentElement.tagName!=t?null:n}function nc(e,t){try{return tc(yt(e),t)}catch(e){return null}}function ic(e,t,n){var i=function(e){for(var t=[],n=(e=u(e)).next();!n.done;n=e.next())(n=function(e){var t=e.getAttribute("schemeIdUri"),n=Hl(e,"urn:mpeg:cenc:2013","default_KID"),i=Gl(e,"urn:mpeg:cenc:2013","pssh").map(Kl);if(!t)return null;if(t=t.toLowerCase(),n&&(n=n.replace(/-/g,"").toLowerCase()).includes(" "))throw new Le(2,4,4009);var r=[];try{r=i.map((function(e){return{initDataType:"cenc",initData:kt(e),keyId:null}}))}catch(e){throw new Le(2,4,4007)}return{node:e,Wd:t,keyId:n,init:0<r.length?r:null}}(n.value))&&t.push(n);return t}(e),r=null,a=(e=[],[]),s=new Set(i.map((function(e){return e.keyId})));if(s.delete(null),1<s.size)throw new Le(2,4,4010);if(t||(a=i.filter((function(e){return"urn:mpeg:dash:mp4protection:2011"!=e.Wd||(r=e.init||r,!1)}))).length&&0==(e=function(e,t,n,i){for(var r,a=[],s=(t=u(t)).next();!s.done;s=t.next()){var o,l,c=n[(s=s.value).Wd];c&&(r=(r=Ul(s.node,"urn:microsoft:playready","pro"))?[{initData:Bl(r=kt(r.textContent),o=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),new Set,0),initDataType:"cenc",keyId:s.keyId}]:null,o=null,"urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e"===s.Wd&&(o=0==(o=i).size?null:(l=new Uint8Array([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75]),[{initData:Bl(new Uint8Array([]),l,o,1),initDataType:"cenc",keyId:s.keyId}])),r=Xe(c,s.init||e||r||o),(c=sc.get(c))&&(r.licenseServerUri=c(s)),a.push(r))}return a}(r,a,n,s)).length&&(e=[Xe("",r)]),i.length&&(t||!a.length))for(e=[],n=(t=u(Object.values(n))).next();!n.done;n=t.next())"org.w3.clearkey"!=(n=n.value)&&e.push(Xe(n,r));if(s=Array.from(s)[0]||null)for(n=(t=u(e)).next();!n.done;n=t.next())for(i=(n=u(n.value.initData)).next();!i.done;i=n.next())i.value.keyId=s;return{oe:s,Zg:r,drmInfos:e,se:!0}}function rc(e){if(e=(e=(e=Ul(e.node,"urn:microsoft:playready","pro"))&&function(e){var t,n=0,i=Se(e);if(i.getUint32(0,!0)!=e.byteLength)return[];e:{for(e=6,n=[];e<i.byteLength-1;){t=i.getUint16(e,!0),e+=2;var r=i.getUint16(e,!0);if(e+=2,0!=(1&r)||r+e>i.byteLength){i=[];break e}var a=we(i,e,r);n.push({type:t,value:a}),e+=r}i=n}return i}(e=kt(e.textContent)).filter((function(e){return e.type===ac}))[0])&&tc(e=bt(e.value,!0),"WRMHEADER"))for(var t=e,n=(t=u(t.getElementsByTagName("DATA"))).next();!n.done;n=t.next())for(var i=(n=u(n.value.childNodes)).next();!i.done;i=n.next())if((i=i.value)instanceof Element&&"LA_URL"==i.tagName)return i.textContent;return""}var ac=1,sc=(new Map).set("com.widevine.alpha",(function(e){return(e=Ul(e.node,"urn:microsoft","laurl"))&&e.getAttribute("licenseUrl")||""})).set("com.microsoft.playready",rc).set("com.microsoft.playready.recommendation",rc).set("com.microsoft.playready.software",rc).set("com.microsoft.playready.hardware",rc).set("org.w3.clearkey",(function(e){return(e=Ul(e.node,"http://dashif.org/guidelines/clearKey","Laurl"))&&"EME-1.0"===e.getAttribute("Lic_type")&&e.textContent?e.textContent:""}));function oc(t,n,i,r,a){var s={RepresentationID:n,Number:i,Bandwidth:r,Time:a};return t.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,(function(t,n,i,r){if("$$"==t)return"$";var a=s[n];if(null==a)return t;switch("RepresentationID"==n&&(i=i&&void 0),"Time"==n&&(a=Math.round(a)),r){case void 0:case"d":case"i":case"u":t=a.toString();break;case"o":t=a.toString(8);break;case"x":t=a.toString(16);break;case"X":t=a.toString(16).toUpperCase();break;default:t=a.toString()}return i=e.parseInt(i,10)||1,Array(Math.max(0,i-t.length)+1).join("0")+t}))}function uc(e,t){var n=1,i=((r=lc(e,t,"timescale"))&&(n=$l(r)||1),lc(e,t,"duration")),r=$l(i||""),a=((r="image"==e.H.contentType?Jl(i||""):r)&&(r/=n),lc(e,t,"startNumber")),s=(i=Number(lc(e,t,"presentationTimeOffset"))||0,Zl(a||"")),o=(null!=a&&null!=s||(s=1),cc(e,t,"SegmentTimeline"));if(a=null,o){a=n;for(var u=e.W.duration||1/0,l=(o=jl(o,"S"),[]),c=-i,d=0;d<o.length;++d){var h=o[d],f=o[d+1],g=zl(h,"t",Zl),p=zl(h,"d",Zl);h=zl(h,"r",Ql);if(null!=g&&(g-=i),!p)break;if(g=null!=g?g:c,(h=h||0)<0)if(f){if(null==(f=zl(f,"t",Zl)))break;if(f<=g)break;h=Math.ceil((f-g)/p)-1}else{if(1/0==u)break;if(u<=g/a)break;h=Math.ceil((u*a-g)/p)-1}for(0<l.length&&g!=c&&(l[l.length-1].end=g/a),f=0;f<=h;++f)l.push({start:g/a,end:(c=g+p)/a,mg:g}),g=c}a=l}return{timescale:n,ga:r,Kb:s,Sa:i/n||0,he:i,timeline:a}}function lc(e,t,n){return[t(e.H),t(e.ja),t(e.aa)].filter(We).map((function(e){return e.getAttribute(n)})).reduce((function(e,t){return e||t}))}function cc(e,t,n){return[t(e.H),t(e.ja),t(e.aa)].filter(We).map((function(e){return Fl(e,n)})).reduce((function(e,t){return e||t}))}function dc(e){this.h=Se(e),this.g=new ar(this.h,0)}function hc(e){var t=fc(e);if(7<t.length)throw new Le(2,3,3002);for(var n=0,i=(t=u(t)).next();!i.done;i=t.next())n=256*n+i.value;t=fc(e);e:{for(var r=(i=u(gc)).next();!r.done;r=i.next())if(Ae(t,new Uint8Array(r.value))){i=!0;break e}i=!1}if(i)t=e.h.byteLength-e.g.$();else{if(8==t.length&&224&t[1])throw new Le(2,3,3001);for(r=i=0;r<t.length;r++){var a=t[r];i=0==r?a&(1<<8-t.length)-1:256*i+a}t=i}return t=e.g.$()+t<=e.h.byteLength?t:e.h.byteLength-e.g.$(),i=Se(e.h,e.g.$(),t),e.g.skip(t),new pc(n,i)}function fc(e){var t=e.g.$(),n=e.g.Ra();if(0==n)throw new Le(2,3,3002);return n=8-Math.floor(Math.log2(n)),e.g.skip(n-1),we(e.h,t,n)}dc.prototype.ma=function(){return this.g.ma()};var gc=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function pc(e,t){this.id=e,this.g=t}function mc(e){if(8<e.g.byteLength)throw new Le(2,3,3002);if(8==e.g.byteLength&&224&e.g.getUint8(0))throw new Le(2,3,3001);for(var t=0,n=0;n<e.g.byteLength;n++)t=256*t+e.g.getUint8(n);return t}function vc(e,t){var n,i,r;return(t=cc(e,t,"Initialization"))?(n=e.H.wa,(i=t.getAttribute("sourceURL"))&&(n=Ye(e.H.wa,[i])),i=0,r=null,(t=zl(t,"range",Xl))&&(i=t.start,r=t.end),new Ta((function(){return n}),i,r,Tc(e))):null}function yc(e,t,n,i,r,a,s){var o,u,l,c,d,h,f,g,p,m,v,b;return R((function(A){if(1==A.g)return o=e.presentationTimeline,u=!e.Wa||!e.W.ze,l=e.W.start,c=e.W.duration,d=e.H.mimeType.split("/")[1],h=null,g=[(f=t)(i,r,a),"webm"==d?f(n.ya(),n.Ba,n.la):null],f=null,y(A,Promise.all(g),2);if(f=A.h,g=f[0],p=f[1]||null,m=l-s,v=l,b=c?l+c:1/0,"mp4"==d)var E=function(e,t,n,i,r,a,s){var o,u=(new ur).U("sidx",(function(e){o=function(e,t,n,i,r,a,s){var o,u,l=[],c=(s.reader.skip(4),s.reader.N());if(0==c)throw new Le(2,3,3005);u=0==s.version?(o=s.reader.N(),s.reader.N()):(o=s.reader.Jb(),s.reader.Jb()),s.reader.skip(2);var d=s.reader.Rd();for(e=e+s.size+u,u=0;u<d;u++){var h=s.reader.N(),f=(2147483648&h)>>>31,g=(h&=2147483647,s.reader.N());if(s.reader.skip(4),1==f)throw new Le(2,3,3006);l.push(new wa(o/c+n,(o+g)/c+n,(function(){return a}),e,e+h-1,t,n,i,r)),o+=g,e+=h}return s.parser.stop(),l}(t,i,r,a,s,n,e)}));if(e&&u.parse(e),o)return o;throw new Le(2,3,3004)}(g,r,i,n,m,v,b);else{if(440786851!=hc(E=new dc(p)).id)throw new Le(2,3,3008);if(408125543!=(T=hc(E)).id)throw new Le(2,3,3009);E=T.g.byteOffset;for(var T=new dc(T.g),w=null;T.ma();){var S=hc(T);if(357149030==S.id){w=S;break}}if(!w)throw new Le(2,3,3010);for(w=new dc(w.g),S=1e6,T=null;w.ma();){var C=hc(w);if(2807729==C.id)S=mc(C);else if(17545==C.id)if(4==C.g.byteLength)T=C.g.getFloat32(0);else{if(8!=C.g.byteLength)throw new Le(2,3,3003);T=C.g.getFloat64(0)}}if(null==T)throw new Le(2,3,3011);if(T*=w=S/1e9,475249515!=(S=hc(new dc(g))).id)throw new Le(2,3,3007);E=function(e,t,n,i,r,a,s,o,u){function l(){return r}var c=[];e=new dc(e.g);for(var d=null,h=null;e.ma();){var f,g=hc(e);187==g.id&&(f=function(e){var t=new dc(e.g);if(179!=(e=hc(t)).id)throw new Le(2,3,3013);if(e=mc(e),183!=(t=hc(t)).id)throw new Le(2,3,3012);t=new dc(t.g);for(var n=0;t.ma();){var i=hc(t);if(241==i.id){n=mc(i);break}}return{ng:e,Wf:n}}(g))&&(g=n*f.ng,f=t+f.Wf,null!=d&&c.push(new wa(d+s,g+s,l,h,f-1,a,s,o,u)),d=g,h=f)}return null!=d&&c.push(new wa(d+s,i+s,l,h,null,a,s,o,u)),c}(S,E,w,T,i,n,m,v,b)}return p=E,o.Gb(p),h=new gs(p),u&&h.Xa(v,b,!0),A.return(h)}))}function bc(e){return e.tc}function Ac(e){var t=cc(e,bc,"RepresentationIndex");return e=Xl((e=lc(e,bc,"indexRange"))||""),t?zl(t,"range",Xl,e):e}function Ec(e,t){var n=e.H.mimeType.split("/")[1];if(e.H.contentType!=Ze&&"mp4"!=n&&"webm"!=n)throw new Le(2,4,4006);if("webm"==n&&!t)throw new Le(2,4,4005)}function Tc(e){var t=e.H;return{bandwidth:e.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate||null,height:t.height||null,mimeType:t.mimeType,channelsCount:t.Uc,pixelAspectRatio:t.pixelAspectRatio||null,width:t.width||null}}function wc(e){return e.$a}function Sc(e){return e.uc}function Cc(){this.l=[],this.g=[],this.h=[],this.j=[],this.i=[],this.m=new Set}function xc(e){var t,n,i,r,a,s,o,l,c,d,h,f,g,p,m,v,b,A,E,T,w,S,C;return R((function(x){switch(x.g){case 1:if(t=Je,1==e.length)return x.return(e[0]);for(f=e.map((function(e){return e.filter((function(e){return e.type==t.bb}))})),n=e.map((function(e){return e.filter((function(e){return e.type==t.va}))})),i=e.map((function(e){return e.filter((function(e){return e.type==t.X}))})),r=e.map((function(e){return e.filter((function(e){return e.type==t.Ub}))})),a=u(i),s=a.next();!s.done;s=a.next())s.value.push(Hc(t.X));for(o=u(r),l=o.next();!l.done;l=o.next())l.value.push(Hc(t.Ub));return y(x,kc([],f,0,Dc,Mc),2);case 2:return c=x.h,y(x,kc([],n,0,Dc,Mc),3);case 3:return d=x.h,y(x,kc([],i,0,Dc,Mc),4);case 4:return h=x.h,y(x,kc([],r,0,Dc,Mc),5);case 5:if(f=x.h,g=0,d.length&&c.length)for(b=u(c),A=b.next();!A.done;A=b.next())for(E=A.value,T=u(d),w=T.next();!w.done;w=T.next())S=w.value,C=g++,S.variantIds.push(C),E.variantIds.push(C);else for(p=d.concat(c),m=u(p),v=m.next();!v.done;v=m.next())v.value.variantIds=[g++];return x.return(d.concat(c).concat(h).concat(f))}}))}function kc(e,t,n,i,r){var a,s,o,l,c,d,h,f,g,p,m,v,b,A,E,T,w,S;return R((function(C){switch(C.g){case 1:for(a=Je,s=[],o=0;o<t.length;o++)n<=o?s.push(new Set(t[o])):s.push(new Set);l=u(e),c=l.next();case 2:if(c.done){C.A(4);break}return d=c.value,y(C,(x=d,k=t,I=n,L=r,D=s,R((function(e){return 1==e.g?(Oc(k,x),x.matchedStreams?x.segmentIndex?y(e,Ic(x,I),2):e.A(2):e.return(!1)):(Lc(x,I,L,D),e.return(!0))}))),5);case 5:if(!C.h)throw new Le(2,4,4037);c=l.next(),C.A(2);break;case 4:for(h=u(s),f=h.next();!f.done;f=h.next())for(g=f.value,p=u(g),m=p.next();!m.done;m=p.next())(v=function(e,t,n,i,r){var a=n(e);return Oc(t,a),a.createSegmentIndex&&(a.createSegmentIndex=function(){return R((function(e){return a.segmentIndex?e.A(0):(a.segmentIndex=new vs,y(e,Ic(a,0),0))}))}),a.matchedStreams?(Lc(a,0,i,r),a):null}(v=m.value,t,i,r,s))&&e.push(v);for(b=u(s),f=b.next();!f.done;f=b.next())for(A=f.value,E={},T=u(A),m=T.next();!m.done;E={Va:E.Va},m=T.next())if(E.Va=m.value,w=E.Va.type==a.X&&!E.Va.language,S=E.Va.type==a.Ub&&!E.Va.tilesLayout,!w&&!S&&e.some(function(e){return function(t){return t.mimeType==e.Va.mimeType&&Ft(t.codecs)==Ft(e.Va.codecs)}}(E)))throw new Le(2,4,4037);return C.return(e)}var x,k,I,L,D}))}function Ic(e,t){var n,i,r,a,s,o,l;return R((function(c){if(1==c.g){for(n=[],i=e.matchedStreams,r=u(i),a=r.next();!a.done;a=r.next())s=a.value,n.push(s.createSegmentIndex()),s.trickModeVideo&&!s.trickModeVideo.segmentIndex&&n.push(s.trickModeVideo.createSegmentIndex());return y(c,Promise.all(n),2)}if(e.segmentIndex instanceof vs)for(o=0;o<i.length;o++)(l=i[o]).segmentIndex&&t<=o&&e.segmentIndex.j.push(l.segmentIndex);b(c)}))}function Lc(e,t,n,i){for(var r,a,s=e.matchedStreams,o=0;o<s.length;o++)t<=o&&(n(e,r=s[o]),a=!0,a=("audio"!=e.type||0!=$t(e.language,r.language))&&a)&&i[o].delete(r)}function Rc(e){var t=Object.assign({},e);return t.originalId=null,t.createSegmentIndex=function(){return Promise.resolve()},t.closeSegmentIndex=function(){if(t.segmentIndex&&(t.segmentIndex.release(),t.segmentIndex=null),t.matchedStreams)for(var e=u(t.matchedStreams),n=e.next();!n.done;n=e.next())(n=n.value).segmentIndex&&(n.segmentIndex.release(),n.segmentIndex=null)},t.segmentIndex=null,t.emsgSchemeIdUris=[],t.keyIds=new Set,t.closedCaptions=null,t.trickModeVideo=null,t}function Dc(e){return(e=Object.assign({},e)).keyIds=new Set,e.segments=[],e.variantIds=[],e.closedCaptions=null,e}function _c(e,t){e.roles=Array.from(new Set(e.roles.concat(t.roles))),t.emsgSchemeIdUris&&(e.emsgSchemeIdUris=Array.from(new Set(e.emsgSchemeIdUris.concat(t.emsgSchemeIdUris)))),e.keyIds=(n=e.keyIds,i=t.keyIds,new Set([].concat(l(n),l(i)))),null==e.originalId?e.originalId=t.originalId:e.originalId+=","+(t.originalId||"");var n,i,r=qi(e.drmInfos,t.drmInfos);if(t.drmInfos.length&&e.drmInfos.length&&!r.length)throw new Le(2,4,4038);if(e.drmInfos=r,e.encrypted=e.encrypted||t.encrypted,t.closedCaptions){e.closedCaptions||(e.closedCaptions=new Map);for(var a=(r=u(t.closedCaptions)).next();!a.done;a=r.next()){a=(s=u(a.value)).next().value;var s=s.next().value;e.closedCaptions.set(a,s)}}t.trickModeVideo?(e.trickModeVideo||(e.trickModeVideo=Rc(t.trickModeVideo),e.trickModeVideo.createSegmentIndex=function(){return e.trickModeVideo.segmentIndex=e.segmentIndex.clone(),Promise.resolve()}),_c(e.trickModeVideo,t.trickModeVideo)):e.trickModeVideo&&_c(e.trickModeVideo,t)}function Mc(e,t){e.roles=Array.from(new Set(e.roles.concat(t.roles)));var n=t.keyIds;if(n=new Set([].concat(l(e.keyIds),l(n))),e.keyIds=n,e.encrypted=e.encrypted&&t.encrypted,e.segments.push.apply(e.segments,l(t.segments)),t.closedCaptions){e.closedCaptions||(e.closedCaptions=new Map);for(var i=(n=u(t.closedCaptions)).next();!i.done;i=n.next()){i=(r=u(i.value)).next().value;var r=r.next().value;e.closedCaptions.set(i,r)}}}function Oc(e,t){for(var n=[],i=u(e),r=i.next();!r.done;r=i.next()){for(var a=t,s={audio:Pc,video:Pc,text:Nc,image:Bc}[a.type],o={audio:Fc,video:Uc,text:jc,image:Gc}[a.type],l=null,c=(r=u(r.value)).next();!c.done;c=r.next())!s(a,c=c.value)||l&&!o(a,l,c)||(l=c);if(!(a=l))return;n.push(a)}t.matchedStreams=n}function Pc(e,t){var n;return!(n=t.mimeType!=e.mimeType||Ft(t.codecs)!=Ft(e.codecs))&&(n=e.drmInfos)&&(n=e.drmInfos,e=t.drmInfos,n=!(!n.length||!e.length||0<qi(n,e).length)),!n}function Nc(e,t){return!!e.language&&(!t.language||0!=$t(e.language,t.language)&&t.kind==e.kind)}function Bc(e){return!!e.tilesLayout}function Fc(e,t,n){var i,r;return e.id==n.id||(i=$t(e.language,t.language))<(r=$t(e.language,n.language))||!(r<i||(t.primary||!n.primary)&&(t.primary&&!n.primary||(e.roles.length?(i=t.roles.filter((function(t){return e.roles.includes(t)})),!((r=n.roles.filter((function(t){return e.roles.includes(t)}))).length>i.length||!(r.length<i.length)&&n.roles.length<t.roles.length)):(n.roles.length||!t.roles.length)&&(n.roles.length&&!t.roles.length||(i=Kc(e.channelsCount,t.channelsCount,n.channelsCount))!=zc&&(i==Yc||(i=Kc(e.audioSamplingRate,t.audioSamplingRate,n.audioSamplingRate))!=zc&&(i==Yc||!e.bandwidth||qc(e.bandwidth,t.bandwidth,n.bandwidth)!=zc))))))}function Uc(e,t,n){if(e.id==n.id)return!0;var i=Kc(e.width*e.height,t.width*t.height,n.width*n.height);if(i==zc)return!0;if(i==Yc)return!1;if(e.frameRate){if((i=Kc(e.frameRate,t.frameRate,n.frameRate))==zc)return!0;if(i==Yc)return!1}return!(!e.bandwidth||qc(e.bandwidth,t.bandwidth,n.bandwidth)!=zc)}function jc(e,t,n){if(e.id==n.id)return!0;var i=$t(e.language,t.language),r=$t(e.language,n.language);if(i<r)return!0;if(r<i)return!1;if(!t.primary&&n.primary)return!0;if(t.primary&&!n.primary)return!1;if(e.roles.length){if(i=t.roles.filter((function(t){return e.roles.includes(t)})),(r=n.roles.filter((function(t){return e.roles.includes(t)}))).length>i.length)return!0;if(r.length<i.length)return!1}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return n.mimeType==e.mimeType&&n.codecs==e.codecs&&(t.mimeType!=e.mimeType||t.codecs!=e.codecs)}function Gc(e,t,n){return e.id==n.id||Kc(e.width*e.height,t.width*t.height,n.width*n.height)==zc}function Hc(e){return{id:0,originalId:"",primary:!1,type:e,mimeType:"",codecs:"",language:"",label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null}}function Vc(e){return{id:0,originalId:"",createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new gs([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",label:null,type:e,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null}}function Kc(e,t,n){if(t==e&&e!=n)return Yc;if(n==e&&e!=t)return zc;if(e<t){if(n<=e||n-e<t-e)return zc;if(t-e<n-e)return Yc}else{if(e<n)return Yc;if(e-n<e-t)return zc;if(e-t<e-n)return Yc}return Wc}function qc(e,t,n){return t=Math.abs(e-t),(e=Math.abs(e-n))<t?zc:t<e?Yc:Wc}Cc.prototype.release=function(){for(var e=u(this.g.concat(this.h,this.j,this.i)),t=e.next();!t.done;t=e.next())(t=t.value).segmentIndex&&t.segmentIndex.release();this.g=[],this.h=[],this.j=[],this.i=[],this.l=[]};var zc=1,Wc=0,Yc=-1;function Xc(){var e=this;this.h=this.g=null,this.m=[],this.i=null,this.G=1,this.l={},this.M={},this.j=new Cc,this.F=0,this.I=new U(5),this.D=new rt((function(){var t,n,i;t=e,R((function(e){switch(e.g){case 1:return n=0,A(e,2),y(e,Qc(t),4);case 4:n=e.h,T(e,3);break;case 2:i=w(e),t.h&&(i.severity=1,t.h.onError(i));case 3:if(!t.h)return e.return();ed(t,n),b(e)}}))})),this.o=new fi,this.s=null,this.L=[],this.u=1/0,this.B=!1}function Qc(e){var t,n,i,r;return R((function(a){var s,o,l,c,d;return 1==a.g?(i=vi(e.m,e.g.retryParameters),n=e.h.networkingEngine,e.h.modifyManifestRequest(i,{format:"d"}),t=Date.now(),i=n.request(0,i),gi(e.o,i),y(a,i.promise,2)):3!=a.g?(n=a.h,e.h?(n.uri&&!e.m.includes(n.uri)&&e.m.unshift(n.uri),y(a,(s=e,o=n.data,l=n.uri,R((function(e){if(1!=e.g)return d=e.h,e.return($c(s,d,l));if(d=nc(o,"MPD"))return s.g.dash.disableXlinkProcessing?e.return($c(s,d,l)):(c=s.g.dash.xlinkFailGracefully,c=function e(t,n,i,r,a,s){if(s=void 0===s?0:s,Hl(t,"http://www.w3.org/1999/xlink","href"))return o=function(t,n,i,r,a,s){for(var o,l=Hl(t,"http://www.w3.org/1999/xlink","href"),c=Hl(t,"http://www.w3.org/1999/xlink","actuate")||"onRequest",d=u(Array.from(t.attributes)),h=d.next();!h.done;h=d.next())"http://www.w3.org/1999/xlink"==(h=h.value).namespaceURI&&t.removeAttributeNS(h.namespaceURI,h.localName);return 5<=s?ni(new Le(2,4,4028)):"onLoad"!=c?ni(new Le(2,4,4027)):(o=Ye([r],[l]),a.request(0,vi(o,n)).Z((function(r){if(!(r=nc(r.data,t.tagName)))return ni(new Le(2,4,4001,l));for(;t.childNodes.length;)t.removeChild(t.childNodes[0]);for(;r.childNodes.length;){var c=r.childNodes[0];r.removeChild(c),t.appendChild(c)}for(c=(r=u(Array.from(r.attributes))).next();!c.done;c=r.next())t.setAttributeNode(c.value.cloneNode(!1));return e(t,n,i,o[0],a,s+1)})))}(t,n,i,r,a,s),i?o.Z(void 0,(function(){return e(t,n,i,r,a,s)})):o;for(var o=[],l=u(Array.from(t.childNodes)),c=l.next();!c.done;c=l.next())(c=c.value)instanceof Element&&("urn:mpeg:dash:resolve-to-zero:2013"==Hl(c,"http://www.w3.org/1999/xlink","href")?t.removeChild(c):"SegmentTimeline"!=c.tagName&&o.push(e(c,n,i,r,a,s)));return si(o).Z((function(){return t}))}(d,s.g.retryParameters,c,l,s.h.networkingEngine),gi(s.o,c),y(e,c.promise,2));throw new Le(2,4,4001,l)}))),3)):a.return(0)):(i=Date.now(),r=(i-t)/1e3,e.I.sample(1,r),a.return(r))}))}function $c(e,t,n){var i,r,a,s,o,c,d,h,f,g,p,m,v;return R((function(E){switch(E.g){case 1:if((i=e.g.dash.manifestPreprocessor)&&i(t),i=[n],0<(m=jl(t,"Location").map(Kl).filter(We)).length&&(m=Ye(i,m),i=e.m=m),m=jl(t,"BaseURL"),p=m.map(Kl),i=Ye(i,p),p=0,m&&m.length&&(p=zl(m[0],"availabilityTimeOffset",Jl)||0),m=e.g.dash.ignoreMinBufferTime,r=0,m||(r=zl(t,"minBufferTime",Yl)||0),e.F=zl(t,"minimumUpdatePeriod",Yl,-1),m=zl(t,"availabilityStartTime",Wl),g=zl(t,"timeShiftBufferDepth",Yl),v=e.g.dash.ignoreSuggestedPresentationDelay,h=null,v||(h=zl(t,"suggestedPresentationDelay",Yl)),v=e.g.dash.ignoreMaxSegmentDuration,a=null,v||(a=zl(t,"maxSegmentDuration",Yl)),v=t.getAttribute("type")||"static",e.i)for(s=e.i.presentationTimeline,o=u(Object.values(e.l)),c=o.next();!c.done;c=o.next())(d=c.value).segmentIndex&&d.segmentIndex.cb(s.Pa());else f=e.g.defaultPresentationDelay||1.5*r,s=new Ya(m,null!=h?h:f,e.g.dash.autoCorrectDrift);return s.vc("static"==v),null==(g=s.V()&&!isNaN(e.g.availabilityWindowOverride)?e.g.availabilityWindowOverride:g)&&(g=1/0),s.ce(g),m=t.getAttribute("profiles")||"",h={Wa:"static"!=v,presentationTimeline:s,aa:null,W:null,ja:null,H:null,bandwidth:0,xe:!1,xb:p,profiles:m.split(",")},f=function(e,t,n,i){var r=zl(i,"mediaPresentationDuration",Yl),a=[],s=0;i=jl(i,"Period");for(var o=0;o<i.length;o++){var c,d=i[o],h=i[o+1],f=zl(d,"start",Yl,s),g=d.id,p=zl(d,"duration",Yl),m=null;if(h?null!=(c=zl(h,"start",Yl))&&(m=c-f):null!=r&&(m=r-f),null==m&&(m=p),!(null!==e.s&&null!==g&&null!==f&&f<e.s)||e.L.includes(g)||o+1==i.length){if(null!==f&&(null===e.s||f>e.s)&&(e.s=f),s=function(e,t,n,i){t.aa=td(i.node,null,n),t.W=i,t.aa.xb=t.xb,t.aa.id||(t.aa.id="__shaka_period_"+i.start);var r=jl(i.node,"EventStream");n=t.presentationTimeline.Pa();for(var a=(r=u(r)).next();!a.done;a=r.next())!function(e,t,n,i,r){for(var a=i.getAttribute("schemeIdUri")||"",s=i.getAttribute("value")||"",o=zl(i,"timescale",Zl)||1,l=(i=u(jl(i,"Event"))).next();!l.done;l=i.next()){var c=zl(l=l.value,"presentationTime",Zl)||0,d=zl(l,"duration",Zl)||0;d=(c=c/o+t)+d/o,null!=n&&(c=Math.min(c,t+n),d=Math.min(d,t+n)),d<r||(l={schemeIdUri:a,value:s,startTime:c,endTime:d,id:l.getAttribute("id")||"",eventElement:l},e.h.onTimelineRegionAdded(l))}}(e,i.start,i.duration,a.value,n);if(n=jl(i.node,"AdaptationSet").map((function(n){var i=e,r=t;function a(e){switch(e){case 1:case 6:case 13:case 14:case 15:return"SDR";case 16:return"PQ";case 18:return"HLG"}}r.ja=td(n,r.aa,null);var s=!1,o=jl(n,"Role"),c=o.map((function(e){return e.getAttribute("value")})).filter(We),d=void 0,h=r.ja.contentType==Ze;h&&(d="subtitle");for(var f,g=(o=u(o)).next();!g.done;g=o.next()){var p=(g=g.value).getAttribute("schemeIdUri");if(null==p||"urn:mpeg:dash:role:2011"==p)switch(g=g.getAttribute("value"),g){case"main":s=!0;break;case"caption":case"subtitle":d=g}}o=null,g=!1;for(var m=(p=u(p=jl(n,"EssentialProperty"))).next();!m.done;m=p.next()){var v=(m=m.value).getAttribute("schemeIdUri");"http://dashif.org/guidelines/trickmode"==v?o=m.getAttribute("value"):"urn:mpeg:mpegB:cicp:TransferCharacteristics"==v?f=a(parseInt(m.getAttribute("value"),10)):g=!0}for(m=(p=u(p=jl(n,"SupplementalProperty"))).next();!m.done;m=p.next())"urn:mpeg:mpegB:cicp:TransferCharacteristics"==(m=m.value).getAttribute("schemeIdUri")&&(f=a(parseInt(m.getAttribute("value"),10)));p=jl(n,"Accessibility");var y=new Map;for(m=(p=u(p)).next();!m.done;m=p.next())if(m=(v=m.value).getAttribute("schemeIdUri"),v=v.getAttribute("value"),"urn:scte:dash:cc:cea-608:2015"==m)if(m=1,null!=v)for(var b=u(v=v.split(";")),A=b.next();!A.done;A=b.next()){var E=A.value,T=A=void 0;T=E.includes("=")?(A=(E=E.split("="))[0].startsWith("CC")?E[0]:"CC"+E[0],E[1]||"und"):(A="CC"+m,2==v.length?m+=2:m++,E),y.set(A,Qt(T))}else y.set("CC1","und");else if("urn:scte:dash:cc:cea-708:2015"==m)if(m=1,null!=v)for(A=(v=u(v.split(";"))).next();!A.done;A=v.next())E=b=void 0,E=(A=A.value).includes("=")?(b="svc"+(A=A.split("="))[0],A[1].split(",")[0].split(":").pop()):(b="svc"+m,m++,A),y.set(b,Qt(E));else y.set("svc1","und");else"urn:mpeg:dash:role:2011"==m&&null!=v&&(c.push(v),"captions"==v)&&(d="caption");if(g)return null;var w=ic(g=jl(n,"ContentProtection"),i.g.dash.ignoreDrmInfo,i.g.dash.keySystemsByURI),S=Qt(n.getAttribute("lang")||"und"),C=n.getAttribute("label");if((g=jl(n,"Label"))&&g.length&&(g=g[0]).textContent&&(C=g.textContent),0==(n=(g=jl(n,"Representation")).map((function(e){return(e=Jc(i,r,w,d,S,C,s,c,y,e))&&(e.hdr=e.hdr||f),e})).filter((function(e){return!!e}))).length){if(o="image"==r.ja.contentType,i.g.dash.ignoreEmptyAdaptationSet||h||o)return null;throw new Le(2,4,4003)}if(!r.ja.contentType||"application"==r.ja.contentType)for(r.ja.contentType=id(n[0].mimeType,n[0].codecs),p=(h=u(n)).next();!p.done;p=h.next())p.value.type=r.ja.contentType;for(p=(h=u(n)).next();!p.done;p=h.next())for(p=p.value,v=(m=u(w.drmInfos)).next();!v.done;v=m.next())(v=v.value).keyIds=v.keyIds&&p.keyIds?new Set([].concat(l(v.keyIds),l(p.keyIds))):v.keyIds||p.keyIds;return h=g.map((function(e){return e.getAttribute("id")})).filter(We),{id:r.ja.id||"__fake__"+i.G++,contentType:r.ja.contentType,language:S,$g:s,streams:n,drmInfos:w.drmInfos,fe:o,Zf:h}})).filter(We),t.Wa){for(i=[],a=(r=u(n)).next();!a.done;a=r.next())for(var s=(a=u(a.value.Zf)).next();!s.done;s=a.next())i.push(s.value);if(i.length!=new Set(i).size)throw new Le(2,4,4018)}for(i=n.filter((function(e){return!e.fe})),r=(n=u(n=n.filter((function(e){return e.fe})))).next();!r.done;r=n.next()){a=(r=r.value).fe.split(" ");for(var o=(s=u(i)).next();!o.done;o=s.next()){var c=o.value;if(a.includes(c.id)){o={};for(var d=(c=u(c.streams)).next();!d.done;o={Cc:o.Cc},d=c.next())o.Cc=d.value,o.Cc.trickModeVideo=r.streams.find(function(e){return function(t){return Ft(e.Cc.codecs)==Ft(t.codecs)}}(o))}}}if(r=e.g.disableAudio?[]:Zc(i,"audio"),s=e.g.disableVideo?[]:Zc(i,"video"),a=e.g.disableText?[]:Zc(i,Ze),n=e.g.disableThumbnails?[]:Zc(i,"image"),!s.length&&!r.length)throw new Le(2,4,4004);for(i=[],o=(r=u(r)).next();!o.done;o=r.next())i.push.apply(i,l(o.value.streams));for(r=[],o=(s=u(s)).next();!o.done;o=s.next())r.push.apply(r,l(o.value.streams));for(s=[],o=(a=u(a)).next();!o.done;o=a.next())s.push.apply(s,l(o.value.streams));for(a=[],o=(n=u(n)).next();!o.done;o=n.next())a.push.apply(a,l(o.value.streams));return{id:t.aa.id,Ec:i,cd:r,textStreams:s,imageStreams:a}}(e,t,n,{start:f,duration:m,node:d,ze:null==m||!h}),a.push(s),t.aa.id&&m&&(e.M[t.aa.id]=m),null==m){s=null;break}s=f+m}}return e.L=a.map((function(e){return e.id})),null!=r?{periods:a,duration:r,qe:!1}:{periods:a,duration:s,qe:!0}}(e,h,i,t),g=f.duration,p=f.periods,"static"!=v&&f.qe||s.Ia(g||1/0),e.u&&!e.B&&e.h.isAutoLowLatencyMode()&&(e.h.enableLowLatencyMode(),e.B=e.h.isLowLatencyMode()),e.B?s.Ke(e.u):e.u&&K("Low-latency DASH live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details."),s.Ld(a||1),y(E,function(e,t,n){var i,r,a,s,o,l,c,d,h,f,g,p,m,v,A,E,T,w,S,C,x,k,I,L,D,_,M;return R((function(R){switch(R.g){case 1:i=Je;for(var O=t,P=(O=u(O)).next();!P.done;P=O.next()){for(var N=[],B=u((P=P.value).Ec),F=B.next();!F.done;F=B.next()){F=F.value;for(var U=!1,j=u(N),G=j.next();!G.done;G=j.next())G=G.value,F.id!=G.id&&F.channelsCount==G.channelsCount&&F.language==G.language&&F.bandwidth==G.bandwidth&&F.label==G.label&&F.codecs==G.codecs&&F.mimeType==G.mimeType&&$(F.roles,G.roles)&&F.audioSamplingRate==G.audioSamplingRate&&F.primary==G.primary&&(U=!0);U||N.push(F)}P.Ec=N}for(var H=t,V=(H=u(H)).next();!V.done;V=H.next()){for(var K=[],q=u((V=V.value).cd),z=q.next();!z.done;z=q.next()){z=z.value;for(var W=!1,Y=u(K),X=Y.next();!X.done;X=Y.next())X=X.value,z.id!=X.id&&z.width==X.width&&z.frameRate==X.frameRate&&z.codecs==X.codecs&&z.mimeType==X.mimeType&&z.label==X.label&&$(z.roles,X.roles)&&function(e,t){if(!e&&!t)return 1;if(!(e&&!t||t&&!e)&&e.size==t.size){for(var n=u(e),i=n.next();!i.done;i=n.next()){i=(r=u(i.value)).next().value;var r=r.next().value;if(!t.has(i))return;if((i=t.get(i))!=r||null==i)return}return 1}}(z.closedCaptions,X.closedCaptions)&&z.bandwidth==X.bandwidth&&(W=!0);W||K.push(z)}V.cd=K}for(var Q=t,Z=(Q=u(Q)).next();!Z.done;Z=Q.next()){for(var J=[],ee=u((Z=Z.value).textStreams),te=ee.next();!te.done;te=ee.next()){te=te.value;for(var ne=!1,ie=u(J),re=ie.next();!re.done;re=ie.next())re=re.value,te.id!=re.id&&te.language==re.language&&te.label==re.label&&te.codecs==re.codecs&&te.mimeType==re.mimeType&&te.bandwidth==re.bandwidth&&$(te.roles,re.roles)&&(ne=!0);ne||J.push(te)}Z.textStreams=J}for(var ae=t,se=(ae=u(ae)).next();!se.done;se=ae.next()){for(var oe=[],ue=u((se=se.value).imageStreams),le=ue.next();!le.done;le=ue.next()){le=le.value;for(var ce=!1,de=u(oe),he=de.next();!he.done;he=de.next())he=he.value,le.id!=he.id&&le.width==he.width&&le.codecs==he.codecs&&le.mimeType==he.mimeType&&(ce=!0);ce||oe.push(le)}se.imageStreams=oe}if(!n&&1==t.length){o=t[0],e.g=o.Ec,e.h=o.cd,e.j=o.textStreams,e.i=o.imageStreams,R.A(2);break}for(r=-1,a=0;a<t.length;a++)s=t[a],e.m.has(s.id)||(e.m.add(s.id),-1==r&&(r=a));if(-1==r)return R.return();for(o=t.map((function(e){return e.Ec})),l=t.map((function(e){return e.cd})),c=t.map((function(e){return e.textStreams})),d=t.map((function(e){return e.imageStreams})),h=u(c),f=h.next();!f.done;f=h.next())f.value.push(Vc(i.X));for(g=u(d),p=g.next();!p.done;p=g.next())p.value.push(Vc(i.Ub));return y(R,kc(e.g,o,r,Rc,_c),3);case 3:return y(R,kc(e.h,l,r,Rc,_c),4);case 4:return y(R,kc(e.j,c,r,Rc,_c),5);case 5:return y(R,kc(e.i,d,r,Rc,_c),2);case 2:if(m=0,v=[],e.h.length&&e.g.length)for(C=u(e.g),x=C.next();!x.done;x=C.next())for(k=x.value,I=u(e.h),L=I.next();!L.done;L=I.next())D=L.value,_=qi(k.drmInfos,D.drmInfos),k.drmInfos.length&&D.drmInfos.length&&!_.length||(M=m++,v.push({id:M,language:k.language,primary:k.primary,audio:k,video:D,bandwidth:(k.bandwidth||0)+(D.bandwidth||0),drmInfos:_,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for(A=e.h.concat(e.g),E=u(A),T=E.next();!T.done;T=E.next())w=T.value,S=m++,v.push({id:S,language:w.language,primary:w.primary,audio:w.type==i.bb?w:null,video:w.type==i.va?w:null,bandwidth:w.bandwidth||0,drmInfos:w.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});e.l=v,b(R)}}))}(e.j,p,h.Wa),2);case 2:if(e.i)e.i.variants=e.j.l,e.i.textStreams=e.j.j.slice(),e.i.imageStreams=e.j.i,e.h.filter(e.i),E.A(3);else{if(e.i={presentationTimeline:s,variants:e.j.l,textStreams:e.j.j.slice(),imageStreams:e.j.i,offlineSessionIds:[],minBufferTime:r||0,sequenceMode:!1},s.Pe())return m=jl(t,"UTCTiming"),y(E,(S=e,C=i,x=m,R((function(e){switch(e.g){case 1:I=x.map((function(e){return{scheme:e.getAttribute("schemeIdUri"),value:e.getAttribute("value")}})),k=S.g.dash.clockSyncUri,!I.length&&k&&I.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:k}),k=u(I),I=k.next();case 2:if(I.done)e.A(4);else{switch(L=I.value,A(e,5),D=L.scheme,_=L.value,D){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return e.A(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return e.A(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return M=Date.parse(_),e.return(isNaN(M)?0:M-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":K("NTP UTCTiming scheme is not supported");break;default:K("Unrecognized scheme in UTCTiming element",D)}e.A(9)}break;case 7:return y(e,nd(S,C,_,"HEAD"),10);case 10:return e.return(e.h);case 8:return y(e,nd(S,C,_,"GET"),11);case 11:return e.return(e.h);case 9:T(e,3);break;case 5:w(e);case 3:I=k.next(),e.A(2);break;case 4:return K("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),e.return(0)}}))),5);E.A(4)}break;case 5:if(v=E.h,!e.h)return E.return();s.Le(v);case 4:s.Fd();case 3:e.h.makeTextStreamsForClosedCaptions(e.i),b(E)}var S,C,x,k,I,L,D,_,M}))}function Zc(e,t){return e.filter((function(e){return e.contentType==t}))}function Jc(e,t,n,i,r,a,s,o,l,c){if(t.H=td(c,t.ja,null),e.u=Math.min(e.u,t.H.xb),f=(h=t.H).tc?1:0,!(0==(f=(f+=h.$a?1:0)+(h.uc?1:0))?h.contentType==Ze||"application"==h.contentType:(1!=f&&(h.tc&&(h.$a=null),h.uc=null),1)))return null;var d=t.W.start;t.bandwidth=zl(c,"bandwidth",$l)||0;var h=(f=t.H.contentType)==Ze||"application"==f,f="image"==f;try{var g,p,m,v=function(t,n,i){return r=e,a=t,s=n,o=i,R((function(e){return 1==e.g?(l=Ai,c=Ls(a,s,o,r.g.retryParameters),u=r.h.networkingEngine,l=u.request(l,c),gi(r.o,l),y(e,l.promise,2)):(c=e.h,e.return(c.data))}));var r,a,s,o,u,l,c};m=t.H.tc?function(e,t){var n,i=Number(lc(e,bc,"presentationTimeOffset"))||0,r=lc(e,bc,"timescale"),a=1,s=i/(a=r?$l(r)||1:a)||0,o=vc(e,bc);if(Ec(i=e,o),Ac(i))return n=hi(e),{zb:function(){var e=cc(n,bc,"RepresentationIndex"),i=n.H.wa;return(e=e&&e.getAttribute("sourceURL"))&&(i=Ye(n.H.wa,[e])),e=Ac(n),yc(n,t,o,i,e.start,e.end,s)}};throw new Le(2,4,4002)}(t,v):t.H.$a?function(e,t){var n,i,r=vc(e,wc),a=(i=function(e){return[e.H.$a,e.ja.$a,e.aa.$a].filter(We).map((function(e){return jl(e,"SegmentURL")})).reduce((function(e,t){return 0<e.length?e:t})).map((function(t){return t.getAttribute("indexRange")&&!e.xe&&(e.xe=!0),{Nf:t.getAttribute("media"),start:(t=zl(t,"mediaRange",Xl,{start:0,end:null})).start,end:t.end}}))}(n=e),0==(o=(n=uc(n,wc)).Kb)&&(o=1),a=0,n.ga?a=n.ga*(o-1):n.timeline&&0<n.timeline.length&&(a=n.timeline[0].start),{ga:n.ga,startTime:a,Kb:o,Sa:n.Sa,timeline:n.timeline,Eb:i});if(!a.ga&&!a.timeline&&1<a.Eb.length)throw new Le(2,4,4002);if(!a.ga&&!e.W.duration&&!a.timeline&&1==a.Eb.length)throw new Le(2,4,4002);if(a.timeline&&0==a.timeline.length)throw new Le(2,4,4002);var s=null,o=null,u=(e.aa.id&&e.H.id&&(o=t[e.aa.id+","+e.H.id])&&(s=o.segmentIndex),function(e,t,n,i,r){var a=i.Eb.length;i.timeline&&i.timeline.length!=i.Eb.length&&(a=Math.min(i.timeline.length,i.Eb.length));for(var s=e-i.Sa,o=t?e+t:1/0,u=[],l=i.startTime,c={},d=0;d<a;c={kd:c.kd},d++){var h=i.Eb[d],f=c.kd=Ye(n,[h.Nf]);f=null!=i.ga?l+i.ga:i.timeline?i.timeline[d].end:l+t,u.push(new wa(e+l,e+f,function(e){return function(){return e.kd}}(c),h.start,h.end,r,s,e,o)),l=f}return u}(e.W.start,e.W.duration,e.H.wa,a,r));return r=!s,s?s.Fb(u,e.presentationTimeline.Pa()):s=new gs(u),e.presentationTimeline.Gb(u),e.Wa&&e.W.ze||s.Xa(e.W.start,e.W.duration?e.W.start+e.W.duration:1/0,r),o&&(o.segmentIndex=s),{zb:function(){return s&&0!=s.J.length||s.mc(u),Promise.resolve(s)}}}(t,e.l):t.H.uc?function(e,t,n,i,r,a){var s,o,l,c,d,h,f,g,p=(c=lc(g=e,Sc,"initialization"))?(s=g.H.id,o=g.bandwidth||null,l=g.H.wa,new Ta((function(){var e=oc(c,s,null,o,null);return Ye(l,[e])}),0,null,Tc(g))):null,m=(v=uc(g=e,Sc),y=lc(g,Sc,"media"),g=lc(g,Sc,"index"),{ga:v.ga,timescale:v.timescale,Kb:v.Kb,Sa:v.Sa,he:v.he,timeline:v.timeline,Jd:y,kc:g}),v=m,y=v.kc?1:0;if(0!=(y=(y+=v.timeline?1:0)+(v.ga?1:0))&&(1!=y&&(v.kc&&(v.timeline=null),v.ga=null),v.kc||v.Jd))return d=hi(e),m.kc?(Ec(e,p),{zb:function(){var e=oc(m.kc,d.H.id,null,d.bandwidth||null,null);e=Ye(d.H.wa,[e]);return yc(d,t,p,e,0,null,m.Sa)}}):m.ga?(i||(e.presentationTimeline.Ld(m.ga),e.presentationTimeline.Md(e.W.start)),{zb:function(){var e=d,t=m,n=r,i=p,s=a;function o(e){var n=(a=(e-b)*y)+t.Sa,r=a+f,a=r+y;return(r=new wa(r,Math.min(a,c()),(function(){var t=oc(E,w,e,T,n*A);return Ye(S,[t])}),0,null,i,C,f,c())).j=a,r}function l(){var e=[Math.max(h.Pa(),f),Math.min(h.fb(),c())].map((function(e){return e-f}));return[Math.ceil(e[0]/y),Math.ceil(e[1]/y)-1].map((function(e){return e+b}))}function c(){var e=null!=g&&s[g]||v;return e?f+e:1/0}var h=e.presentationTimeline,f=e.W.start,g=e.aa.id,v=e.W.duration,y=t.ga,b=t.Kb,A=t.timescale,E=t.Jd,T=e.bandwidth||null,w=e.H.id,S=e.H.wa,C=f-t.Sa,x=l();e=e.Wa?Math.max(x[0],x[1]-n+1):x[0],x=x[1],n=[];for(var k=e;k<=x;++k){var I=o(k);n.push(I)}var L,R=new gs(n);return n=h.fb()<c(),k=h.V(),(n||k)&&(L=Math.max(e,x+1),R.ad(y,(function(){var e=h.Pa();R.cb(e),(t=u(l())).next();for(var t=t.next().value,n=[];L<=t;){var i=o(L);n.push(i),L++}return e>c()&&!n.length?null:n}))),Promise.resolve(R)}}):(i=h=null,e.aa.id&&e.H.id&&(i=n[i=e.aa.id+","+e.H.id])&&(h=i.segmentIndex),f=function(e,t,n){var i=e.W.start,r=e.W.duration,a=i-t.Sa;r=r?i+r:1/0;for(var s=[],o={},u=0;u<t.timeline.length;o={jd:o.jd,nd:o.nd,qd:o.qd,fd:o.fd,sd:o.sd,gd:o.gd},u++){var l=t.timeline[u],c=l.start,d=l.mg;l=l.end,o.qd=u+t.Kb,o.sd=d+t.he,o.nd=e.H.id,o.fd=e.bandwidth||null,o.jd=t.Jd,o.gd=e.H.wa,s.push(new wa(i+c,i+l,function(e){return function(){var t=oc(e.jd,e.nd,e.qd,e.fd||null,e.sd);return Ye(e.gd,[t]).map((function(e){return e.toString()}))}}(o),0,null,n,a,i,r))}return s}(d,m,p),n=e.W.start,y=1/0!=(g=e.W.duration?e.W.start+e.W.duration:1/0),h?(y&&new gs(f).Xa(n,g,!0),h.Fb(f,e.presentationTimeline.Pa())):h=new gs(f),e.presentationTimeline.Gb(f),y&&h.Xa(n,g),i&&e.Wa&&(i.segmentIndex=h),{zb:function(){return h&&0!=h.J.length||h.mc(f),Promise.resolve(h)}});throw new Le(2,4,4002)}(t,v,e.l,!!e.i,e.g.dash.initialSegmentLimit,e.M):(g=t.H.wa,p=t.W.duration||0,{zb:function(){return Promise.resolve(ps(d,p,g))}})}catch(e){if((h||f)&&4002==e.code)return null;throw e}v=function(e,t,n,i){var r=ic(e,n,i);if(t.se)e=1==t.drmInfos.length&&!t.drmInfos[0].keySystem,n=0==r.drmInfos.length,(0==t.drmInfos.length||e&&!n)&&(t.drmInfos=r.drmInfos),t.se=!1;else if(0<r.drmInfos.length&&(t.drmInfos=t.drmInfos.filter((function(e){return r.drmInfos.some((function(t){return t.keySystem==e.keySystem}))})),0==t.drmInfos.length))throw new Le(2,4,4008);return r.oe||t.oe}(v=jl(c,"ContentProtection"),n,e.g.dash.ignoreDrmInfo,e.g.dash.keySystemsByURI);v=new Set(v?[v]:[]);var A,E,T=!1,w=(jl(c,"SupplementalProperty").some((function(e){return"tag:dolby.com,2018:dash:EC3_ExtensionType:2018"==e.getAttribute("schemeIdUri")&&"JOC"==e.getAttribute("value")}))&&(T=!0),!1);if(h&&(w=o.includes("forced_subtitle")||o.includes("forced-subtitle")),f&&!(A=(c=jl(c,"EssentialProperty").find((function(e){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(e.getAttribute("schemeIdUri"))})))?c.getAttribute("value"):A))return null;c=t.H.codecs,t.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(c.includes("hvc1.2.4.L153.B0")||c.includes("hev1.2.4.L153.B0"))&&(E="PQ");var S=t.H.id?t.aa.id+","+t.H.id:"",C={id:e.G++,originalId:t.H.id,createSegmentIndex:function(){var n,i;return R((function(r){if(1==r.g)return(n=S&&t.Wa&&e.l[S]?e.l[S]:C).segmentIndex?r.A(0):(i=n,y(r,m.zb(),3));i.segmentIndex=r.h,b(r)}))},closeSegmentIndex:function(){C.segmentIndex&&(C.segmentIndex.release(),C.segmentIndex=null)},segmentIndex:null,mimeType:t.H.mimeType,codecs:t.H.codecs,frameRate:t.H.frameRate,pixelAspectRatio:t.H.pixelAspectRatio,bandwidth:t.bandwidth,width:t.H.width,height:t.H.height,kind:i,encrypted:0<n.drmInfos.length,drmInfos:n.drmInfos,keyIds:v,language:r,label:a,type:t.ja.contentType,primary:s,trickModeVideo:null,emsgSchemeIdUris:t.H.emsgSchemeIdUris,roles:o,forced:w,channelsCount:t.H.Uc,audioSamplingRate:t.H.audioSamplingRate,spatialAudio:T,closedCaptions:l,hdr:E,tilesLayout:A,matchedStreams:[]};return S&&t.Wa&&!e.l[S]&&(e.l[S]=C),C}function ed(e,t){e.F<0||e.D.R(Math.max(3,e.F-t,j(e.I)))}function td(e,t,n){t=t||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,Uc:null,audioSamplingRate:null,xb:0},n=n||t.wa;for(var i=(v=jl(e,"BaseURL")).map(Kl),r=e.getAttribute("contentType")||t.contentType,a=e.getAttribute("mimeType")||t.mimeType,s=e.getAttribute("codecs")||t.codecs,o=zl(e,"frameRate",ec)||t.frameRate,l=e.getAttribute("sar")||t.pixelAspectRatio,c=jl(e,"InbandEventStream"),d=t.emsgSchemeIdUris.slice(),h=(c=u(c)).next();!h.done;h=c.next())h=h.value.getAttribute("schemeIdUri"),d.includes(h)||d.push(h);c=function(e){for(var t=(e=u(e)).next();!t.done;t=e.next()){var n=t.value;if((t=n.getAttribute("schemeIdUri"))&&(n=n.getAttribute("value")))switch(t){case"urn:mpeg:dash:outputChannelPositionList:2012":return n.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(t=parseInt(n,10))return t;continue;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(!(t=parseInt(n,16)))continue;for(e=0;t;)1&t&&++e,t>>=1;return e;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":if(t=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],(n=parseInt(n,10))&&0<n&&n<t.length)return t[n]}}return null}(c=jl(e,"AudioChannelConfiguration"))||t.Uc;h=zl(e,"audioSamplingRate",Zl)||t.audioSamplingRate,r=r||id(a,s);var f=Fl(e,"SegmentBase"),g=Fl(e,"SegmentTemplate"),p=f&&zl(f,"availabilityTimeOffset",Jl)||0,m=g&&zl(g,"availabilityTimeOffset",Jl)||0,v=v&&v.length&&zl(v[0],"availabilityTimeOffset",Jl)||0;return v=t.xb+v+p+m,{wa:Ye(n,i),tc:f||t.tc,$a:Fl(e,"SegmentList")||t.$a,uc:g||t.uc,width:zl(e,"width",Zl)||t.width,height:zl(e,"height",Zl)||t.height,contentType:r,mimeType:a,codecs:s,frameRate:o,pixelAspectRatio:l,emsgSchemeIdUris:d,id:e.getAttribute("id"),Uc:c,audioSamplingRate:h,xb:v}}function nd(e,t,n,i){var r,a,s;return R((function(o){if(1==o.g)return(r=vi(r=Ye(t,[n]),e.g.retryParameters)).method=i,r=e.h.networkingEngine.request(4,r),gi(e.o,r),y(o,r.promise,2);if(r=o.h,"HEAD"==i){if(!r.headers||!r.headers.date)return o.return(0);a=r.headers.date}else a=yt(r.data);return s=Date.parse(a),isNaN(s)?o.return(0):o.return(s-Date.now())}))}function id(e,t){return Ht(Nt(e,t))?Ze:e.split("/")[0]}function rd(e,t,n,i){this.h=e,this.type=t,this.g=n,this.segments=i||null}function ad(e,t,n,i){this.id=e,this.name=t,this.g=n,this.value=void 0===i?null:i}function sd(e,t,n){return(e=e.getAttribute(t))?e.value:n||null}function od(e,t){if(e=e.getAttribute(t))return e.value;throw new Le(2,4,4023,t)}function ud(e,t,n){n=void 0===n?[]:n,this.g=t,this.i=e,this.h=n}function ld(e,t){this.name=e,this.value=t}function cd(e,t){return e.filter((function(e){return e.name==t}))}function dd(e,t){return e.filter((function(e){return od(e,"TYPE")==t}))}function hd(e,t){return(e=cd(e,t)).length?e[0]:null}function fd(e){return(e=hd(e,"EXT-X-MEDIA-SEQUENCE"))?Number(e.value):0}function gd(e,t){return Ye([e],[t])[0]}function pd(e){this.h=e,this.g=0}function md(e){vd(e,/[ \t]+/gm)}function vd(e,t){return t.lastIndex=e.g,t=null==(t=t.exec(e.h))?null:{position:t.index,length:t[0].length,results:t},e.g==e.h.length||null==t||t.position!=e.g?null:(e.g+=t.length,t.results)}function yd(e){return e.g!=e.h.length&&(e=vd(e,/[^ \t\n]*/gm))?e[0]:null}function bd(){this.g=0}function Ad(e,t,n){var i=(t=(t=yt(t)).replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim()).split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(i[0]))throw new Le(2,4,4015);for(var r=!(t=0),a=u(i),s=a.next();!s.done;s=a.next())if(s=s.value,/^#(?!EXT)/m.test(s)||r)r=!1;else{if(s=Ed(e,s),--e.g,Td.includes(s.name)){t=1;break}"EXT-X-STREAM-INF"==s.name&&(r=!0)}for(a=[],r=!0,s=0;s<i.length;s++){var o=i[s],l=i[s+1];if(/^#(?!EXT)/m.test(o)||r)r=!1;else{if(o=Ed(e,o),wd.includes(o.name)){if(1!=t)throw new Le(2,4,4017);for(var c=i.splice(s,i.length-s),d=(i=n,r=[],s=[],l=[],o=null,(c=u(c)).next());!d.done;d=c.next())d=d.value,/^(#EXT)/.test(d)?(d=Ed(e,d),Td.includes(d.name)?a.push(d):"EXT-X-MAP"==d.name?o=d:"EXT-X-PART"==d.name?l.push(d):"EXT-X-PRELOAD-HINT"==d.name?"PART"==sd(d,"TYPE")?l.push(d):"MAP"==sd(d,"TYPE")&&(d.name="EXT-X-MAP",o=d):s.push(d)):/^#(?!EXT)/m.test(d)||(d=gd(i,d.trim()),o&&s.push(o),r.push(new ud(d,s,l)),s=[],l=[]);return l.length&&(o&&s.push(o),r.push(new ud("",s,l))),new rd(n,t,a,r)}a.push(o),"EXT-X-STREAM-INF"==o.name&&(o.g.push(new ld("URI",l)),r=!0)}}return new rd(n,t,a)}function Ed(e,t){if(e=e.g++,!(a=t.match(/^#(EXT[^:]*)(?::(.*))?$/)))throw new Le(2,4,4016,t);t=a[1];var n,i,r=a[2],a=[];if(r){(i=vd(r=new pd(r),/^([^,=]+)(?:,|$)/g))&&(n=i[1]);for(var s=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;i=vd(r,s);)a.push(new ld(i[1],i[2]||i[3])),md(r)}return new ad(e,t,a,n)}(W=Xc.prototype).configure=function(e){this.g=e},W.start=function(e,t){var n,i=this;return R((function(r){if(1==r.g)return i.B=t.isLowLatencyMode(),i.m=[e],i.h=t,y(r,Qc(i),2);if(n=r.h,i.h&&ed(i,n),i.h)return r.return(i.i);throw new Le(2,7,7001)}))},W.stop=function(){for(var e=u(Object.values(this.l)),t=e.next();!t.done;t=e.next())(t=t.value).segmentIndex&&t.segmentIndex.release();return this.j&&this.j.release(),this.g=this.h=null,this.m=[],this.i=null,this.l={},(this.j=null)!=this.D&&(this.D.stop(),this.D=null),this.o.destroy()},W.update=function(){var e,t=this;return R((function(n){return 1==n.g?(A(n,2),y(n,Qc(t),4)):2!=n.g?T(n,0):(e=w(n),t.h&&e?(t.h.onError(e),void b(n)):n.return())}))},W.onExpirationUpdated=function(){},F("shaka.dash.DashParser",Xc),rr.mpd=function(){return new Xc},ir["application/dash+xml"]=function(){return new Xc},ir["video/vnd.mpeg.dash.mpd"]=function(){return new Xc},ad.prototype.toString=function(){var e="#"+this.name,t=this.g?this.g.map((function(e){return e.name+"="+(isNaN(Number(e.value))?'"'+e.value+'"':e.value)})):[];return this.value&&t.unshift(this.value),0<t.length&&(e+=":"+t.join(",")),e},ad.prototype.getAttribute=function(e){var t=this.g.filter((function(t){return t.name==e}));return t.length?t[0]:null};var Td="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP".split(" "),wd="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP".split(" ");function Sd(){}function Cd(t){var n=t.split(":");if(n.length<2||"data"!=n[0])throw new Le(2,1,1004,t);if((n=n.slice(1).join(":").split(",")).length<2)throw new Le(2,1,1004,t);var i=n[0],r=(t=e.decodeURIComponent(n.slice(1).join(",")),i=(n=i.split(";"))[0],!1);return 1<n.length&&"base64"==n[n.length-1]&&(r=!0,n.pop()),{data:(r?kt:Et)(t),contentType:i}}function xd(){var e=this;this.h=this.j=null,this.La=1,this.o=new Map,this.u=new Map,this.ua=new Set,this.g=new Map,this.i=null,this.L="",this.ca=new bd,this.ia=0,this.T=!1,this.M=null,this.B=new rt((function(){var t,n;t=e,R((function(e){return 1==e.g?t.j?(A(e,2),y(e,t.update(),4)):e.return():2!=e.g?(n=t.ia,t.B.R(n),T(e,0)):(n=w(e),t.j?(n.severity=1,t.j.onError(n),t.B.R(.1),void b(e)):e.return())}))})),this.m=Kd,this.G=null,this.ea=0,this.F=1/0,this.Y=this.ha=0,this.D=new fi,this.O=[],this.I=new Map,this.s=new Map,this.da=new Map,this.l=!1}function kd(e,t){var n,i,r,a,s,o;return R((function(u){if(1==u.g)return n=Wd,i=new De(i=t.Te),e.l&&t.Ye&&Oe(i,new Ve("_HLS_skip=YES")),y(u,Ud(e,i.toString()),2);if(i=u.h,1!=(r=Ad(e.ca,i.data,i.uri)).type)throw new Le(2,4,4017);s=cd(r.g,"EXT-X-DEFINE"),s=Ld(e,s),a=t.stream,s=Bd(e,r,a.type,t.lc,s),a.segmentIndex.Fb(s,e.i.Pa()),s.length&&(o=fd(r.g),o=t.lc.get(o),a.segmentIndex.cb(o)),o=s[s.length-1],hd(r.g,"EXT-X-ENDLIST")&&(jd(e,n.Se),e.i.Ia(o.endTime)),b(u)}))}function Id(e,t){e.stream.segmentIndex.offset(t),e.Hd+=t;for(var n=u(e.lc),i=n.next();!i.done;i=n.next()){i=(r=u(i.value)).next().value;var r=r.next().value;e.lc.set(i,r+t)}}function Ld(e,t){for(var n=new Map,i=u(t),r=i.next();!r.done;r=i.next()){r=sd(s=r.value,"NAME");var a=sd(s,"VALUE"),s=sd(s,"IMPORT");r&&a&&n.set(r,a),s&&(r=e.o.get(s))&&n.set(s,r)}return n}function Rd(e,t){for(var n=[],i=(e.h.disableVideo||n.push(e.h.hls.defaultVideoCodec),e.h.disableAudio||n.push(e.h.hls.defaultAudioCodec),sd(t,"CODECS",n.join(",")).split(/\s*,\s*/)),r=(n=new Set,[]),a=(i=u(i)).next();!a.done;a=i.next()){var s=jt(a=a.value)[0];n.has(s)||(r.push(a),n.add(s))}return r}function Dd(e){return Qt(e=sd(e,"LANGUAGE")||"und")}function _d(e,t){var n,i,r,a,s,o,u,l,c,d,h;return R((function(f){var g;return 1==f.g?(n=od(t,"GROUP-ID"),h="",g=od(t,"TYPE").toLowerCase(),(i=g="subtitles"==g?Ze:g)!=Ze&&n&&e.s.has(n)&&(h=e.s.get(n)),r=Fd(od(t,"URI"),e.o),e.g.has(r)?f.return(e.g.get(r)):(a=Dd(t),s=sd(t,"NAME"),o="YES"==(o=sd(t,"DEFAULT")),g="audio"==i&&(g=sd(t,"CHANNELS"))?parseInt(g.split("/")[0],10):null,u=g,g="audio"==i&&!!(g=sd(t,"CHANNELS"))&&g.includes("/JOC"),l=g,c=sd(t,"CHARACTERISTICS"),d=sd(t,"FORCED"),y(f,Md(e,r,h,i,a,o,s,u,null,c,"YES"==d,l),2))):(h=f.h,e.u.has(n)?e.u.get(n).push(h):e.u.set(n,[h]),e.g.has(r)?f.return(e.g.get(r)):(e.g.set(r,h),f.return(h)))}))}function Md(e,t,n,i,r,a,s,o,u,l,c,d){var h,f;return R((function(g){return 1==g.g?(h=gd(e.L,t),y(g,Ud(e,h),2)):(f=g.h,h=f.uri,f=Ad(e.ca,f.data,h),g.return(Od(e,f,t,h,n,i,r,a,s,o,u,l,c,d)))}))}function Od(e,t,n,i,r,a,s,o,c,d,h,f,g,p,m){var v,b,A,E,T,w,S,C,x,k,I,L,D,_,M,O,P,N,B,F,U,j,G,H,V;return R((function(K){if(1==K.g){if(1!=t.type)throw new Le(2,4,4017);v=cd(t.g,"EXT-X-DEFINE"),v=Ld(e,v);var q=e,z=t,W=hd(z.g,"EXT-X-PLAYLIST-TYPE"),Y=hd(z.g,"EXT-X-ENDLIST");if(Y=W&&"VOD"==W.value||Y,W=W&&"EVENT"==W.value&&!Y,W=!Y&&!W,Y)jd(q,Kd);else{if(jd(q,W?zd:qd),!(Y=hd(z.g,"EXT-X-TARGETDURATION")))throw new Le(2,4,4024,"EXT-X-TARGETDURATION");Y=Number(Y.value),W=hd(z.g,"EXT-X-PART-INF"),q.l&&W?(q.ha=Number(od(W,"PART-TARGET")),q.F=Math.min(q.ha,q.F),W=hd(z.g,"EXT-X-SERVER-CONTROL"),q.Y=W?Number(od(W,"PART-HOLD-BACK")):0):q.F=Math.min(Y,q.F),q.ea=Math.max(Y,q.ea)}return m?K.A(2):y(K,(X=e,Q=a,$=r,Z=t,J=v,R((function(e){if(1!=e.g)return(re=(re=e.h).headers["content-type"])?e.return(re.split(";")[0]):Q==ee.X?e.return("text/vtt"):(re=ne.mp4,e.return(re));if(ee=Je,re=Ai,te=Math.trunc((Z.segments.length-1)/2),te=Fd(Z.segments[te].i,J),ie=(ie=new De(te)).ta.split(".").pop(),ne=Hd[Q],ie=ne[ie])return e.return(ie);if(Q==ee.X){if("vtt"==$||"wvtt"==$)return e.return("text/vtt");if($&&""!==$)return e.return("application/mp4")}return Q!=ee.Ub||$&&"jpeg"!=$?((ie=vi([te],X.h.retryParameters)).method="HEAD",y(e,Gd(X,ie,re),2)):e.return("image/jpeg")}))),3)}var X,Q,$,Z,J,ee,te,ne,ie,re;if(2!=K.g&&(m=K.h),b=[],t.segments)for(A=u(t.segments),E=A.next();!E.done;E=A.next())T=cd((T=E.value).g,"EXT-X-KEY"),b.push.apply(b,l(T));for(S=w=!1,C=[],x=new Set,k=u(b),I=k.next();!I.done;I=k.next())if(D=I.value,"NONE"!=(L=od(D,"METHOD")))if(w=!0,"AES-128"==L)S=!0;else if(L=od(D,"KEYFORMAT"),D=(L=Vd[L])?L(D,m):null){if(D.keyIds)for(_=u(D.keyIds),M=_.next();!M.done;M=_.next())O=M.value,x.add(O);C.push(D)}if(w&&!C.length&&!S)throw new Le(2,4,4026);if(Wa.includes(m)&&(r=""),P=new Map,V=Bd(e,t,a,P,v),N=V[V.length-1].endTime,V=new gs(V),B=a==Ze?"subtitle":void 0,F=[],f)for(U=u(f.split(",")),j=U.next();!j.done;j=U.next())G=j.value,F.push(G);return H=!!(H=hd(t.g,"EXT-X-SERVER-CONTROL"))&&null!=H.getAttribute("CAN-SKIP-UNTIL"),V={id:e.La++,originalId:c,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:V,mimeType:m,codecs:r,kind:B,encrypted:w,drmInfos:C,keyIds:x,language:s,label:c,type:a,primary:o,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:F,forced:g,channelsCount:d,audioSamplingRate:null,spatialAudio:p,closedCaptions:h,hdr:void 0,tilesLayout:void 0},K.return({stream:V,bd:n,Te:i,Hd:N,lc:P,Ye:H})}))}function Pd(e,t,n,i){var r,a,s;return(n=hd(n,"EXT-X-MAP"))?(t=[i=Fd(gd(t,od(n,"URI")),i),sd(n,"BYTERANGE","")].join("-"),e.da.has(t)||(r=i,i=0,s=null,(a=sd(a=n,"BYTERANGE"))&&(i=a.split("@"),s=Number(i[0]),s=(i=Number(i[1]))+s-1),n=new Ta((function(){return[r]}),i,s),e.da.set(t,n)),e.da.get(t)):null}function Nd(e,t){var n=0,i=null;return t&&(n=t.split("@"),i=Number(n[0]),i=(n=n[1]?Number(n[1]):e.la+1)+i-1),[n,i]}function Bd(t,n,i,r,a){var s=n.segments,o=void 0,l=fd(n.g),c=hd(n.g,"EXT-X-SKIP"),d=l+(c=c?Number(sd(c,"SKIPPED-SEGMENTS")):0),h=0;t.m!=Kd&&r.has(d)&&(h=r.get(d));for(var f=[],g=null,p=0;p<s.length;p++){for(var m=s[p],v=0==p?h:g.endTime,A=(d=l+c+p,u(m.g)),E=A.next();!E.done;E=A.next())"EXT-X-KEY"==(E=E.value).name&&"AES-128"==od(E,"METHOD")&&(o=function(t,n,i){if(!e.crypto||!e.crypto.subtle)throw K("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new Le(2,4,4042);var r=0,a=sd(n,"IV","");if(a){var s=It(a.substr(2));if(16!=s.byteLength)throw new Le(2,4,4043)}else r=fd(i.g);var o=vi([n=gd(i.h,od(n,"URI"))],t.h.retryParameters),u={method:"AES-128",iv:s,firstMediaSequenceNumber:r,fetchKey:function(){var n,i;return R((function(r){if(1==r.g)return y(r,Gd(t,o,6),2);if(3!=r.g){if((n=r.h).data&&16==n.data.byteLength)return i=u,y(r,e.crypto.subtle.importKey("raw",n.data,"AES-CBC",!0,["decrypt"]),3);throw new Le(2,4,4044)}i.cryptoKey=r.h,u.fetchKey=void 0,b(r)}))}};return u}(t,E,n));r.set(d,v),A=Pd(t,n.h,m.g,a),!t.l&&t.j.isAutoLowLatencyMode()&&(t.j.enableLowLatencyMode(),t.l=t.j.isLowLatencyMode()),!(g=m=function(e,t,n,i,r,a,s,o,l){var c,d=i.g,h=Fd(i.i,a),f=hd(d,"EXTINF"),g=a=0,p=null,m=(i.h.length&&!e.l&&K("Low-latency HLS live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details."),null);if(e.h.hls.ignoreManifestProgramDateTime||(c=hd(d,"EXT-X-PROGRAM-DATE-TIME"))&&c.value&&(m=Wl(c.value)),c=Sa,hd(d,"EXT-X-GAP")&&(c=2),!f){if(0==i.h.length)throw new Le(2,4,4024,"EXTINF");if(!e.l)return null}var v=[];if(e.l)for(var y={},b=0;b<i.h.length;y={ld:y.ld},b++){var A,E,T=i.h[b],w=0==b?n:v[v.length-1],S=0==b?r:w.endTime,C=Number(sd(T,"DURATION"))||e.ha;C&&(C=S+C,A=0,E=null,"EXT-X-PRELOAD-HINT"==T.name?A=(A=sd(T,"BYTERANGE-START"))?Number(A):0:(A=(E=u(Nd(w,A=sd(T,"BYTERANGE")))).next().value,E=E.next().value),w=sd(T,"URI"))&&(y.ld=gd(s,w),w=Sa,"YES"==sd(T,"GAP")&&(w=2),v.push(new wa(S,C,function(e){return function(){return[e.ld]}}(y),A,E,t,0,0,1/0,[],"",null,null,w)))}return a=f?r+Number(f.value.split(",")[0]):v[v.length-1].endTime,(e=hd(d,"EXT-X-BYTERANGE"))?(g=(p=u(Nd(n,e.value))).next().value,p=p.next().value):v.length&&(g=v[0].Ba,p=v[v.length-1].la),n="",e=null,"image"==o&&(n="1x1",o=hd(d,"EXT-X-TILES"))&&(n=od(o,"LAYOUT"),(o=sd(o,"DURATION"))&&(e=Number(o))),new wa(r,a,(function(){return h.length?[h]:[]}),g,p,t,0,0,1/0,v,n,e,m,c,l)}(t,A,g,m,v,a,n.h,i,o))||t.h.hls.ignoreManifestProgramDateTime&&null!=t.M&&d<t.M||f.push(m)}if(t=f.some((function(e){return null!=e.g})))for(n={},i=0;i<f.length;n={Pb:n.Pb,Ob:n.Ob,xc:n.xc,Ta:n.Ta,Nb:n.Nb},i++)if(n.Ta=f[i],null==n.Ta.g)for(n.Ob=0,n.Pb=i,r=function(e){return function(){var t=f[e.Pb];if(t){if(null!=t.g)return t.g+e.Ob;e.Ob-=t.endTime-t.startTime,e.Pb+=1}return null}}(n),n.Nb=0,n.xc=i,a=function(e){return function(){var t=f[e.xc];if(t){if(t!=e.Ta&&(e.Nb+=t.endTime-t.startTime),null!=t.g)return t.g+e.Nb;--e.xc}return null}}(n);null==n.Ta.g;)n.Ta.g=a(),null==n.Ta.g&&(n.Ta.g=r());if(t)for(n=(t=u(f)).next();!n.done;n=t.next())for(n=(i=n.value).g,r=(i=u(i.h)).next();!r.done;r=i.next())(r=r.value).g=n,n+=r.endTime-r.startTime;return f}function Fd(e,t){var n=String(e).replace(/%7B/g,"{").replace(/%7D/g,"}"),i=n.match(/{\$\w*}/g);if(i)for(var r=(i=u(i)).next();!r.done;r=i.next()){var a=(r=r.value).slice(2,r.length-1),s=t.get(a);if(!s)throw new Le(2,4,4039,a);n=n.replace(r,s)}return n}function Ud(e,t){return t=vi([t],e.h.retryParameters),e.j.modifyManifestRequest(t,{format:"h"}),Gd(e,t,0)}function jd(e,t){e.m=t,e.i&&e.i.vc(e.m==Kd),e.m==Kd&&e.B.stop()}function Gd(e,t,n){if(e.D)return t=e.j.networkingEngine.request(n,t),gi(e.D,t),t.promise;throw new Le(2,7,7001)}F("shaka.net.DataUriPlugin",Sd),mi("data",Sd.parse=function(e){try{var t=Cd(e);return ri({uri:e,Ce:e,data:t.data,headers:{"content-type":t.contentType}})}catch(e){return ni(e)}}),(W=xd.prototype).configure=function(e){this.h=e},W.start=function(e,t){var n,i=this;return R((function(r){var a,s,o,l,c,d,h,f,g,p,m,v,E,T,S,C,x,k,I,L,D,_,M,O,P,N,B,F,U,j,G,H;return 1==r.g?(i.j=t,i.l=t.isLowLatencyMode(),y(r,Ud(i,e),2)):3!=r.g?(n=r.h,i.L=n.uri,y(r,(a=i,s=n.data,o=e,R((function(e){switch(e.g){case 1:x=Ad(a.ca,s,a.L),l=cd(x.g,"EXT-X-DEFINE");for(var t=a,n=u(l),i=n.next();!i.done;i=n.next()){var r=i.value;i=sd(r,"NAME"),r=sd(r,"VALUE"),i&&r&&(t.o.has(i)||t.o.set(i,r))}if(l=[],c=[],d=[],1==x.type)return S=a.h.hls.mediaPlaylistFullMimeType,E=S.split(";")[0],T=E.split("/")[0],S=Ut(S),C=new Map,y(e,Od(a,x,o,o,S,T,"",!0,"Media Playlist",null,C,null,!1,!1,E),8);S=cd(x.g,"EXT-X-MEDIA"),C=cd(x.g,"EXT-X-STREAM-INF"),E=cd(x.g,"EXT-X-IMAGE-STREAM-INF");for(var K=a,q=u(C),z=q.next();!z.done;z=q.next()){var W,Y=z.value,X=sd(Y,"AUDIO"),$=(z=sd(Y,"VIDEO"),sd(Y,"SUBTITLES"));Y=Rd(K,Y),$&&(W=$e(Ze,Y),K.s.set($,W),Q(Y,W)),X&&($=Qe("audio",Y),K.s.set(X,$)),z&&(X=Qe("video",Y),K.s.set(z,X))}for(x=cd(x.g,"EXT-X-SESSION-DATA"),h=u(x),f=h.next();!f.done;f=h.next())p=f.value,m=sd(p,"DATA-ID"),v=sd(p,"URI"),g=sd(p,"LANGUAGE"),p=sd(p,"VALUE"),m=(new Map).set("id",m),v&&m.set("uri",gd(a.L,v)),g&&m.set("language",g),p&&m.set("value",p),v=new oi("sessiondata",m),a.j&&a.j.onEvent(v);return y(e,(Se=a,Ce=S,R((function(e){return Ce=Ce.filter((function(e){var t=sd(e,"URI")||"";return"SUBTITLES"!=sd(e,"TYPE")&&""!=t})),xe=Ce.map((function(e){return _d(Se,e)})),y(e,Promise.all(xe),0)}))),4);case 4:for(var Z=a,J=dd(S,"CLOSED-CAPTIONS"),ee=(J=u(J)).next();!ee.done;ee=J.next()){var te=ee.value,ne=(ee=Dd(te),od(te,"GROUP-ID"));te=od(te,"INSTREAM-ID"),Z.I.get(ne)||Z.I.set(ne,new Map),Z.I.get(ne).set(te,ee)}return y(e,(Ae=a,Ee=C,R((function(e){return 1==e.g?(Te=Ee.map((function(e){var t,n,i,r,a,s;return R((function(o){if(1==o.g)return t=sd(e,"FRAME-RATE"),n=Number(sd(e,"AVERAGE-BANDWIDTH"))||Number(od(e,"BANDWIDTH")),s=u((s=sd(e,"RESOLUTION"))?s.split("x"):[null,null]),i=s.next().value,r=s.next().value,a=sd(e,"VIDEO-RANGE"),y(o,(l=Ae,c=e,R((function(e){if(1==e.g)return d=Je,h=Rd(l,c),f=sd(c,"AUDIO"),p=sd(c,"VIDEO"),E=(E=f||p)&&l.u.has(E)?l.u.get(E):[],p=!(f={audio:f?E:[],video:p?E:[]}),m=od(c,"URI"),v=f.audio.find((function(e){return e&&e.bd==m})),b=$e(d.va,h),(A=$e(d.bb,h))&&!b?g=d.bb:!E.length&&A&&b?(g=d.va,h=[[b,A].join()]):f.audio.length&&v?(g=d.bb,p=!0):g=f.video.length?d.bb:d.va,p?e.A(2):y(e,(t=l,n=c,i=h,r=g,R((function(e){var u;return 1==e.g?(a=Fd(od(n,"URI"),t.o),t.g.has(a)?e.return(t.g.get(a)):(u=sd(n,"CLOSED-CAPTIONS"),s="video"==r&&u&&"NONE"!=u?t.I.get(u):null,o=Qe(r,i),y(e,Md(t,a,o,r,"und",!1,null,null,s,null,!1,!1),2))):(o=e.h,t.g.has(a)?e.return(t.g.get(a)):(t.g.set(a,o),e.return(o)))}))),3);2!=e.g&&(E=e.h,f[E.stream.type]=[E]);for(var t,n,i,r,a,s,o,T,w=f,S=(w=u(w.audio.concat(w.video))).next();!S.done;S=w.next())(S=S.value)&&(T=(T=S.stream.codecs.split(",")).filter((function(e){return"mp4a.40.34"!=e})),S.stream.codecs=T.join(","));return e.return(f)}))),2);var l,c,d,h,f,g,p,m,v,b,A,E;s=o.h;for(var T=o.return,w=s.audio,S=s.video,C=u(S),x=C.next();!x.done;x=C.next())(x=x.value.stream)&&(x.width=Number(i)||void 0,x.height=Number(r)||void 0,x.frameRate=Number(t)||void 0,x.hdr=a||void 0);for(C=Ae.h.disableAudio,w.length&&!C||(w=[null]),C=Ae.h.disableVideo,S.length&&!C||(S=[null]),C=[],x=(w=u(w)).next();!x.done;x=w.next()){x=x.value;for(var k=u(S),I=k.next();!I.done;I=k.next()){var L=I.value,D=(I=x?x.stream:null,L?L.stream:null),_=x?x.stream.drmInfos:null,M=L?L.stream.drmInfos:null;L=(L?L.bd:"")+" - "+(x?x.bd:"");I&&D&&_.length&&M.length&&!(0<qi(_,M).length)||Ae.ua.has(L)||(I={id:Ae.La++,language:I?I.language:"und",primary:!!I&&I.primary||!!D&&D.primary,audio:I,video:D,bandwidth:n,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},C.push(I),Ae.ua.add(L))}}return T.call(o,C)}))})),y(e,Promise.all(Te),2)):(Te=e.h,we=(we=Te.reduce(qe,[])).filter((function(e){return null!=e})),e.return(we))}))),5);case 5:return l=e.h,y(e,(le=a,ce=S,R((function(e){if(1==e.g)return de=dd(ce,"SUBTITLES"),he=de.map((function(e){var t;return R((function(n){if(1==n.g)return le.h.disableText?n.return(null):(A(n,2),y(n,_d(le,e),4));if(2!=n.g)return t=n.h,n.return(t.stream);if(t=w(n),le.h.hls.ignoreTextStreamFailures)return n.return(null);throw t}))})),y(e,Promise.all(he),2);for(he=e.h,fe=u(de),ge=fe.next();!ge.done;ge=fe.next())if(pe=od(pe=ge.value,"GROUP-ID"),(me=le.s.get(pe))&&(ve=le.u.get(pe)))for(ye=u(ve),be=ye.next();!be.done;be=ye.next())be.value.stream.codecs=me;return e.return(he.filter((function(e){return e})))}))),6);case 6:return c=e.h,y(e,(se=a,oe=E,R((function(e){return 1==e.g?(ue=oe.map((function(e){var t;return R((function(n){if(1==n.g)return se.h.disableThumbnails?n.return(null):(A(n,2),y(n,(i=se,r=e,R((function(e){return 1==e.g?(a=Fd(od(r,"URI"),i.o),s=sd(r,"CODECS","jpeg")||"",i.g.has(a)?e.return(i.g.get(a)):(o=Dd(r),u=sd(r,"NAME"),l=sd(r,"CHARACTERISTICS"),y(e,Md(i,a,s,"image",o,!1,u,null,null,l,!1,!1),2))):(s=e.h,i.g.has(a)?e.return(i.g.get(a)):((o=sd(r,"RESOLUTION"))&&(u=s.stream.segmentIndex.get(0),l=u.tilesLayout)&&(s.stream.width=Number(o.split("x")[0])*Number(l.split("x")[0]),s.stream.height=Number(o.split("x")[1])*Number(l.split("x")[1])),(c=sd(r,"BANDWIDTH"))&&(s.stream.bandwidth=Number(c)),i.g.set(a,s),e.return(s)))}))),4));var i,r,a,s,o,u,l,c;if(2!=n.g)return t=n.h,n.return(t.stream);if(t=w(n),se.h.hls.ignoreImageStreamFailures)return n.return(null);throw t}))})),y(e,Promise.all(ue),2)):(ue=e.h,e.return(ue.filter((function(e){return e}))))}))),7);case 7:d=e.h,e.A(3);break;case 8:x=e.h,a.g.set(o,x),l.push({id:0,language:"und",disabledUntilTime:0,primary:!0,audio:"audio"==T?x.stream:null,video:"video"==T?x.stream:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});case 3:if(!a.j)throw new Le(2,7,7001);for((a.h.hls.ignoreManifestProgramDateTime?function(e){if(!e.T){for(var t=-1,n=new Map,i=u(e.g.values()),r=i.next();!r.done;r=i.next()){var a=(r=r.value).stream.segmentIndex;if(a=a&&(a.J[0]||null))for(var s=u(r.lc),o=s.next();!o.done;o=s.next()){var l=(o=u(o.value)).next().value;if(o.next().value==a.startTime){n.set(r,l),t=Math.max(t,l);break}}}if(!(t<0)){for(e.M=t,r=(t=u(e.g.values())).next();!r.done;r=t.next())(r=(i=r.value).stream.segmentIndex)&&(a=e.M-n.get(i),r.J.splice(0,a),r=r.J[0]||null)&&Id(i,-r.startTime);e.T=!0}}}:function(e){if(!e.T){for(var t=1/0,n=u(e.g.values()),i=n.next();!i.done;i=n.next())(i=i.value.stream.segmentIndex)&&null!=(i=i.J[0]||null)&&null!=i.g&&(t=Math.min(t,i.g));if(1/0!=t){for(i=(n=u(e.g.values())).next();!i.done;i=n.next()){var r=(i=i.value).stream.segmentIndex;null!=r&&(null==(r=r.J[0]||null).g?V("Missing EXT-X-PROGRAM-DATE-TIME for stream",i.bd,"Expect AV sync issues!"):Id(i,r.g-t-r.startTime))}e.T=!0}}})(a),k=1/0,I=u(a.g.values()),L=I.next();!L.done;L=I.next())"text"!=(D=L.value).stream.type&&(k=Math.min(k,D.Hd));if(a.m!=Kd?(a.i=new Ya(0,a.h.defaultPresentationDelay||a.Y||3*a.ea),a.i.vc(!1)):(a.i=new Ya(null,0),a.i.vc(!0)),a.m!=Kd)a.ia=a.F,a.m==Wd.Re&&(_=a.i.Zc,isNaN(a.h.availabilityWindowOverride)||(_=a.h.availabilityWindowOverride),a.i.ce(_));else for(a.i.Ia(k),M=u(a.g.values()),L=M.next();!L.done;L=M.next())L.value.stream.segmentIndex.Xa(0,k);for(a.O=[],O=[],P=u(l),N=P.next();!N.done;N=P.next())for(B=N.value,F=u([B.video,B.audio]),U=F.next();!U.done;U=F.next())(j=U.value)&&O.push(j);return y(e,Promise.all(O.map((function(e){return R((function(t){return y(t,e.createSegmentIndex(),0)}))}))),9);case 9:for(G=u(O),U=G.next();!U.done;U=G.next())H=U.value,a.O.push(H.segmentIndex.J);var ie=a;if(ie.i){for(var re=u(ie.O),ae=re.next();!ae.done;ae=re.next())ie.i.Gb(ae.value);ie.O=[]}a.i.Fd(),a.G={presentationTimeline:a.i,variants:l,textStreams:c,imageStreams:d,offlineSessionIds:[],minBufferTime:0,sequenceMode:!0},a.j.makeTextStreamsForClosedCaptions(a.G),b(e)}var se,oe,ue,le,ce,de,he,fe,ge,pe,me,ve,ye,be,Ae,Ee,Te,we,Se,Ce,xe}))),3)):(0<(n=i.ia)&&i.B.R(n),r.return(i.G))}))},W.stop=function(){this.B&&(this.B.stop(),this.B=null);var e=[];return this.D&&(e.push(this.D.destroy()),this.D=null),this.h=this.j=null,this.ua.clear(),this.G=null,this.g.clear(),this.u.clear(),this.s.clear(),this.o.clear(),Promise.all(e)},W.update=function(){var e,t,n,i=this;return R((function(r){if(1==r.g)return i.m==Kd?r.return():(e=[],(t=Array.from(i.g.values())).length?y(r,kd(i,t[0]),2):r.A(2));for(n=1;n<t.length;n++)e.push(kd(i,t[n]));return y(r,Promise.all(e),0)}))},W.onExpirationUpdated=function(){},F("shaka.hls.HlsParser",xd);var Hd={audio:{mp4:"audio/mp4",mp4a:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",m4f:"audio/mp4",cmfa:"audio/mp4",ts:"video/mp2t",aac:"audio/aac",ac3:"audio/ac3",ec3:"audio/ec3",mp3:"audio/mpeg"},video:{mp4:"video/mp4",mp4v:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",m4f:"video/mp4",cmfv:"video/mp4",ts:"video/mp2t"},text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",m4f:"application/mp4",cmft:"application/mp4",vtt:"text/vtt",ttml:"application/ttml+xml"},image:{jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml",webp:"image/webp",avif:"image/avif"}},Vd={"com.apple.streamingkeydelivery":function(t,n){if("video/mp2t"==n)throw new Le(2,4,4040);if(e.shakaMediaKeysPolyfill)throw new Le(2,4,4041);return Xe("com.apple.fps",[{initDataType:"sinf",initData:new Uint8Array(0)}])},"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(e){var t=od(e,"METHOD");return["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t)?(t=Xe("com.widevine.alpha",[{initDataType:"cenc",initData:t=we((t=Cd(t=od(e,"URI"))).data)}]),(e=sd(e,"KEYID"))&&(t.keyIds=new Set([e.toLowerCase().substr(2)])),t):null},"com.microsoft.playready":function(e){var t=od(e,"METHOD");return["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t)?Xe("com.microsoft.playready",[{initDataType:"cenc",initData:e=Bl(e=we((e=Cd(e=od(e,"URI"))).data),new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),new Set,0)}]):null}},Kd="VOD",qd="EVENT",zd="LIVE",Wd={Se:Kd,yg:qd,Re:zd};function Yd(e,t,n,i,r,a){if(200<=n&&n<=299&&202!=n)return{uri:r||i,Ce:i,data:t,status:n,headers:e,fromCache:!!e["x-shaka-from-cache"]};r=null;try{r=At(t)}catch(e){}throw new Le(401==n||403==n?2:1,1,1001,i,n,r,e,a)}function Xd(){}function Qd(e,t,n,i,r){var a,s,o,u,l,c,d,h,f,g,p,m,v,E,S,C,x,k,I=new nh,L=(Li(t.headers).forEach((function(e,t){I.append(t,e)})),new eh),D={le:!1,Oe:!1};return a=e,s=n,o={body:t.body||void 0,headers:I,method:t.method,signal:L.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},u=D,l=i,c=r,d=t.streamDataCallback,e=new ti(e=R((function(e){switch(e.g){case 1:return S=Jd,h=th,m=p=0,v=Date.now(),A(e,2),y(e,S(a,o),4);case 4:return f=e.h,c($d(f.headers)),E=f.clone().body.getReader(),C=(S=f.headers.get("Content-Length"))?parseInt(S,10):0,new h({start:function(e){!function t(){var n,i;R((function(r){switch(r.g){case 1:return A(r,2),y(r,E.read(),4);case 4:n=r.h,T(r,3);break;case 2:return w(r),r.return();case 3:if(!n.done&&(p+=n.value.byteLength,d))return y(r,d(n.value),5);r.A(5);break;case 5:(100<(i=Date.now())-v||n.done)&&(l(i-v,p-m,C-p),m=p,v=i),n.done?e.close():(e.enqueue(n.value),t()),b(r)}}))}()}}),y(e,f.arrayBuffer(),5);case 5:g=e.h,T(e,3);break;case 2:if(x=w(e),u.le)throw new Le(1,1,7001,a,s);if(u.Oe)throw new Le(1,1,1003,a,s);throw new Le(1,1,1002,a,x,s);case 3:return x=$d(f.headers),e.return(Yd(x,g,f.status,a,f.url,s))}})),(function(){return D.le=!0,L.abort(),Promise.resolve()})),(t=t.retryParameters.timeout)&&((k=new rt((function(){D.Oe=!0,L.abort()}))).R(t/1e3),e.finally((function(){k.stop()}))),e}function $d(e){var t={};return e.forEach((function(e,n){t[n.trim()]=e})),t}function Zd(){if(!e.ReadableStream)return!1;try{new ReadableStream({})}catch(e){return!1}return!(!e.fetch||!e.AbortController)}ft("Tizen 3")||ft("Tizen 2")||lt()||(rr.m3u8=function(){return new xd},ir["application/x-mpegurl"]=function(){return new xd},ir["application/vnd.apple.mpegurl"]=function(){return new xd}),F("shaka.net.HttpFetchPlugin",Xd),Xd.isSupported=Zd,Xd.parse=Qd;var Jd=e.fetch,eh=e.AbortController,th=e.ReadableStream,nh=e.Headers;function ih(){}function rh(e,t,n,i,r){var a=new sh,s=Date.now(),o=0;return new ti(new Promise((function(u,l){a.open(t.method,e,!0),a.responseType="arraybuffer",a.timeout=t.retryParameters.timeout,a.withCredentials=t.allowCrossSiteCredentials;var c,d=!(a.onabort=function(){l(new Le(1,1,7001,e,n))});for(c in a.onreadystatechange=function(){var e;2!=a.readyState||d||(e=ah(a),r(e),d=!0)},a.onload=function(){var t=ah(a),i=a.response;try{var r=Yd(t,i,a.status,e,a.responseURL,n);u(r)}catch(e){l(e)}},a.onerror=function(t){l(new Le(1,1,1002,e,t,n))},a.ontimeout=function(){l(new Le(1,1,1003,e,n))},a.onprogress=function(e){var t=Date.now();(100<t-s||e.lengthComputable&&e.loaded==e.total)&&(i(t-s,e.loaded-o,e.total-e.loaded),o=e.loaded,s=t)},t.headers)a.setRequestHeader(c.toLowerCase(),t.headers[c]);a.send(t.body)})),(function(){return a.abort(),Promise.resolve()}))}function ah(e){var t=e.getAllResponseHeaders().trim().split("\r\n");e={};for(var n=(t=u(t)).next();!n.done;n=t.next())e[(n=n.value.split(": "))[0].toLowerCase()]=n.slice(1).join(": ");return e}Zd()&&(mi("http",Qd,2,!0),mi("https",Qd,2,!0),mi("blob",Qd,2,!0)),F("shaka.net.HttpXHRPlugin",ih);var sh=e.XMLHttpRequest;function oh(e,t,n,i){this.g=e,this.i=t,this.groupId=n,this.h=i}function uh(e){return e.ya().map((function(e){return"{"+encodeURI(e)+"}"})).join("")+":"+e.Ba+":"+e.la}function lh(){this.h=this.j=this.i=0,this.g=new Map,this.l=0}function ch(e,t){e.i+=t;var n=e.l;return e.l++,e.g.set(n,t),n}function dh(e){var t=this;this.o=e,this.j=new Map,this.i=new wi((function(){return hh(t).catch((function(){}))})),this.h=[],this.m=function(){},this.l=function(){},this.g=new lh}function hh(e){var t=e.h.map((function(e){return e()}));return e.h=[],Promise.all(t)}function fh(e,t,n,i,r,a){Si(e.i);var s=(e.j.get(t)||Promise.resolve()).then((function(){var t,s,o,u,l,c;return R((function(d){if(1==d.g)return y(d,(h=e,f=n,R((function(e){return 1==e.g?(g=h.o.request(Ai,f),p=function(){return g.abort()},h.h.push(p),y(e,g.promise,2)):(m=e.h,Q(h.h,p),e.return(m.data))}))),2);var h,f,g,p,m;if(t=d.h,e.i.g)throw new Le(2,9,7001);if(r)for(u in s=we(t),(o=new Nl(s)).data)c=Number(u),l=o.data[c],c=o.g[c],e.l(l,c);e.g.close(i,t.byteLength);var v=e.g;return e.m(0==v.i?0:v.j/v.i,e.g.h),d.return(a(t))}))}));e.j.set(t,s)}function gh(e,t){var n=this;this.i=e,this.h=e.objectStore(t),this.g=new tt,e.onabort=function(e){e.preventDefault(),n.g.reject()},e.onerror=function(e){e.preventDefault(),n.g.reject()},e.oncomplete=function(){n.g.resolve()}}function ph(e,t){return new Promise((function(n,i){var r=e.h.openCursor();r.onerror=i,r.onsuccess=function(){var e;return R((function(i){if(1==i.g)return null==r.result?(n(),i.return()):(e=r.result,y(i,t(e.key,e.value,e),2));e.continue(),b(i)}))}}))}function mh(e){this.h=e,this.g=[]}function vh(e,t){return yh(e,t,"readwrite")}function yh(e,t,n){var i=new gh(n=e.h.transaction([t],n),t);return e.g.push(i),i.promise().then((function(){Q(e.g,i)}),(function(){Q(e.g,i)})),i}function bh(e,t,n){this.h=new mh(e),this.i=t,this.g=n}function Ah(e){return Promise.reject(new Le(2,9,9011,"Cannot add new value to "+e))}function Eh(e,t,n,i){t=(e=vh(e.h,t)).store();for(var r={},a=(n=u(n)).next();!a.done;r={Ac:r.Ac},a=n.next())r.Ac=a.value,t.delete(r.Ac).onsuccess=function(e){return function(){return i(e.Ac)}}(r);return e.promise()}function Th(e,t,n){var i,r,a,s,o,l,c;return R((function(d){if(1==d.g){for(i=yh(e.h,t,"readonly"),r=i.store(),a={},s=[],o={},l=u(n),c=l.next();!c.done;o={Tb:o.Tb,Rb:o.Rb},c=l.next())o.Rb=c.value,o.Tb=r.get(o.Rb),o.Tb.onsuccess=function(e){return function(){null==e.Tb.result&&s.push(e.Rb),a[e.Rb]=e.Tb.result}}(o);return y(d,i.promise(),2)}if(s.length)throw new Le(2,9,9012,"Could not find values for "+s);return d.return(n.map((function(e){return a[e]})))}))}function wh(e){this.g=new mh(e)}function Sh(){this.g=new Map}function Ch(e){var t=null;if(e.g.forEach((function(e,n){e.getCells().forEach((function(e,i){e.hasFixedKeySpace()||(t=t||{path:{Aa:n,ka:i},ka:e})}))})),t)return t;throw new Le(2,9,9013,"Could not find a cell that supports add-operations")}function xh(e,t,n){if(!(e=e.g.get(t)))throw new Le(2,9,9013,"Could not find mechanism with name "+t);if(t=e.getCells().get(n))return t;throw new Le(2,9,9013,"Could not find cell with name "+n)}function kh(e,t){Ih.set(e,t)}mi("http",ih.parse=rh,1,!0),mi("https",rh,1,!0),mi("blob",rh,1,!0),lh.prototype.close=function(e,t){var n;this.g.has(e)&&(n=this.g.get(e),this.g.delete(e),this.j+=n,this.h+=t)},dh.prototype.destroy=function(){return this.i.destroy()},gh.prototype.abort=function(){var e=this;return R((function(t){if(1==t.g){try{e.i.abort()}catch(e){}return A(t,2),y(t,e.g,4)}if(2!=t.g)return T(t,0);w(t),b(t)}))},gh.prototype.store=function(){return this.h},gh.prototype.promise=function(){return this.g},mh.prototype.destroy=function(){return Promise.all(this.g.map((function(e){return e.abort()})))},(W=bh.prototype).destroy=function(){return this.h.destroy()},W.hasFixedKeySpace=function(){return!0},W.addSegments=function(){return Ah(this.i)},W.removeSegments=function(e,t){return Eh(this,this.i,e,t)},W.getSegments=function(e){var t,n=this;return R((function(i){return 1==i.g?y(i,Th(n,n.i,e),2):(t=i.h,i.return(t.map((function(e){return n.me(e)}))))}))},W.addManifests=function(){return Ah(this.g)},W.updateManifest=function(){return Promise.reject(new Le(2,9,9016,"Cannot modify values in "+this.g))},W.updateManifestExpiration=function(e,t){var n=vh(this.h,this.g),i=n.store();return i.get(e).onsuccess=function(n){(n=n.target.result)&&(n.expiration=t,i.put(n,e))},n.promise()},W.removeManifests=function(e,t){return Eh(this,this.g,e,t)},W.getManifests=function(e){var t,n=this;return R((function(i){return 1==i.g?y(i,Th(n,n.g,e),2):(t=i.h,i.return(Promise.all(t.map((function(e){return n.bc(e)})))))}))},W.getAllManifests=function(){var e,t,n=this;return R((function(i){return 1==i.g?(e=yh(n.h,n.g,"readonly"),t=new Map,y(i,ph(e,(function(e,i){var r;return R((function(a){if(1==a.g)return y(a,n.bc(i),2);r=a.h,t.set(e,r),b(a)}))})),2)):3!=i.g?y(i,e.promise(),3):i.return(t)}))},W.me=function(e){return e},W.bc=function(e){return Promise.resolve(e)},W.add=function(e,t){var n,i,r,a,s,o,l,c=this;return R((function(d){if(1!=d.g)return d.return(r);for(n=vh(c.h,e),i=n.store(),r=[],a={},s=u(t),o=s.next();!o.done;a={Bc:a.Bc},o=s.next())l=o.value,a.Bc=i.add(l),a.Bc.onsuccess=function(e){return function(){r.push(e.Bc.result)}}(a);return y(d,n.promise(),2)}))},wh.prototype.destroy=function(){return this.g.destroy()},wh.prototype.getAll=function(){var e,t,n=this;return R((function(i){return 1==i.g?(e=yh(n.g,"session-ids","readonly"),t=[],y(i,ph(e,(function(e,n){t.push(n)})),2)):3!=i.g?y(i,e.promise(),3):i.return(t)}))},wh.prototype.add=function(e){for(var t=vh(this.g,"session-ids"),n=t.store(),i=(e=u(e)).next();!i.done;i=e.next())n.add(i.value);return t.promise()},wh.prototype.remove=function(e){var t,n=this;return R((function(i){return 1==i.g?y(i,ph(t=vh(n.g,"session-ids"),(function(t,n,i){e.includes(n.sessionId)&&i.delete()})),2):y(i,t.promise(),0)}))},Sh.prototype.destroy=function(){for(var e=[],t=u(this.g.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.g.clear(),Promise.all(e)},Sh.prototype.init=function(){var e=this;Ih.forEach((function(t,n){(t=t())&&e.g.set(n,t)}));for(var t=[],n=u(this.g.values()),i=n.next();!i.done;i=n.next())t.push(i.value.init());return Promise.all(t)},F("shaka.offline.StorageMuxer",Sh),Sh.unregister=function(e){Ih.delete(e)},Sh.register=kh;var Ih=new Map;function Lh(){bh.apply(this,arguments)}function Rh(e){var t;if(t=(t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||/^offline:segment\/([0-9]+)$/.exec(e))return Number(t[1]);throw new Le(2,9,9004,"Could not parse uri "+e)}function Dh(){bh.apply(this,arguments)}function _h(){bh.apply(this,arguments)}function Mh(){this.m=this.j=this.i=this.h=this.g=this.l=null}function Oh(e,t,n,i){this.g=e,this.i=t,this.h=n,this.l=i,this.j=["offline:",e,"/",t,"/",n,"/",i].join("")}function Ph(e){var t,n,i;return null!=(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e))&&("manifest"==(t=e[1])||"segment"==t)&&(n=e[2])&&(i=e[3])&&null!=t?new Oh(t,n,i,Number(e[4])):null}function Nh(e,t){this.h=e,this.g=t}function Bh(e,t){var n=new Ya(null,0),i=(n.Ia(t.duration),t.streams.filter((function(e){return"audio"==e.type}))),r=t.streams.filter((function(e){return"video"==e.type})),a=(i=function(e,t,n,i){for(var r=new Set,a=u(t),s=a.next();!s.done;s=a.next()){var o=u(s.value.variantIds);for(s=o.next();!s.done;s=o.next())r.add(s.value)}for(s=(a=u(n)).next();!s.done;s=a.next())for(s=(o=u(s.value.variantIds)).next();!s.done;s=o.next())r.add(s.value);for(a=new Map,s=(r=u(r)).next();!s.done;s=r.next())s=s.value,a.set(s,{id:s,language:"",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});for(r=(t=u(t)).next();!r.done;r=t.next())for(s=Fh(e,r=r.value,i),r=(o=u(r.variantIds)).next();!r.done;r=o.next())(r=a.get(r.value)).language=s.language,r.primary=r.primary||s.primary,r.audio=s;for(t=(n=u(n)).next();!t.done;t=n.next())for(t=Fh(e,r=t.value,i),r=(s=u(r.variantIds)).next();!r.done;r=s.next())(r=a.get(r.value)).primary=r.primary||t.primary,r.video=t;return a}(e,i,r,n),r=t.streams.filter((function(e){return e.type==Ze})).map((function(t){return Fh(e,t,n)})),t.streams.filter((function(e){return"image"==e.type})).map((function(t){return Fh(e,t,n)}))),s=t.drmInfo?[t.drmInfo]:[];if(t.drmInfo)for(var o=u(i.values()),l=o.next();!l.done;l=o.next())(l=l.value).audio&&l.audio.encrypted&&(l.audio.drmInfos=s),l.video&&l.video.encrypted&&(l.video.drmInfos=s);return{presentationTimeline:n,minBufferTime:2,offlineSessionIds:t.sessionIds,variants:Array.from(i.values()),textStreams:r,imageStreams:a,sequenceMode:t.sequenceMode||!1}}function Fh(e,t,n){var i=t.segments.map((function(t){return t=t,i=new Oh("segment",(n=e).h,n.g,t.dataKey),new wa(t.startTime,t.endTime,(function(){return[i.toString()]}),0,null,null!=t.initSegmentKey?function(e,t){var n=new Oh("segment",e.h,e.g,t);return new Ta((function(){return[n.toString()]}),0,null)}(n,t.initSegmentKey):null,t.timestampOffset,t.appendWindowStart,t.appendWindowEnd,[],t.tilesLayout||"");var n,i}));return n.Gb(i),{id:t.id,originalId:t.originalId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new gs(i),mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate,pixelAspectRatio:t.pixelAspectRatio,hdr:t.hdr,kind:t.kind,encrypted:t.encrypted,drmInfos:[],keyIds:t.keyIds,language:t.language,label:t.label,type:t.type,primary:t.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:t.roles,forced:t.forced,channelsCount:t.channelsCount,audioSamplingRate:t.audioSamplingRate,spatialAudio:t.spatialAudio,closedCaptions:t.closedCaptions,tilesLayout:t.tilesLayout}}function Uh(){this.g=null}function jh(){}function Gh(e,t,n){var i,r,a,s;return R((function(o){switch(o.g){case 1:i=[];for(var l=[],c=u(n),d=c.next();!d.done;d=c.next()){d=d.value;for(var h=!1,f=u(l),g=f.next();!g.done;g=f.next())if(x=d,k=function(e,t){return e.robustness==t.robustness&&e.contentType==t.contentType},(C=(g=g.value).info).keySystem==x.keySystem&&C.licenseUri==x.licenseUri&&$(C.audioCapabilities,x.audioCapabilities,k)&&$(C.videoCapabilities,x.videoCapabilities,k)){g.sessionIds.push(d.sessionId),h=!0;break}h||l.push({info:d,sessionIds:[d.sessionId]})}r=u(l),a=r.next();case 2:if(a.done){o.A(4);break}return s=a.value,p=e,m=t,v=s,s=R((function(e){switch(e.g){case 1:return E=new Di({jb:m,onError:function(){},Wc:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),A(e,2),E.configure(p),y(e,(t=E,n=v.info.keySystem,i=v.info.licenseUri,r=v.info.serverCertificate,a=v.info.audioCapabilities,s=v.info.videoCapabilities,o=new Map,(a={audioCapabilities:a,videoCapabilities:s,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:n}).drmInfos=[{keySystem:n,licenseServerUri:i,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:r,serverCertificateUri:"",initData:null,keyIds:null}],o.set(n,a),ji(t,o,[])),4);case 4:T(e,3);break;case 2:return w(e),y(e,E.destroy(),5);case 5:return e.return([]);case 3:return A(e,6),y(e,Pi(E),8);case 8:T(e,7);break;case 6:return w(e),y(e,E.destroy(),9);case 9:return e.return([]);case 7:return S=[],y(e,Promise.all(v.sessionIds.map((function(e){return R((function(t){var n,i,r,a,s;return 1==t.g?(A(t,2),y(t,(n=E,i=e,R((function(e){return 1==e.g?y(e,Gi(n,i),2):3!=e.g?(r=e.h)?(a=[],(s=n.i.get(r))&&(s.Ja=new tt,a.push(s.Ja)),a.push(r.remove()),y(e,Promise.all(a),3)):e.return():(n.i.delete(r),void b(e))}))),4)):2!=t.g?(S.push(e),T(t,0)):(w(t),void b(t))}))}))),10);case 10:return y(e,E.destroy(),11);case 11:return e.return(S)}var t,n,i,r,a,s,o})),y(o,s,5);case 5:s=o.h,i=i.concat(s),a=r.next(),o.A(2);break;case 4:return o.return(i)}var p,m,v,E,S,C,x,k}))}function Hh(e,t){var n=Bh(new Nh(e.Aa(),e.ka()),t),i=t.appMetadata||{};n=Vh(n);return{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:i,isIncomplete:t.isIncomplete||!1}}function Vh(e){for(var t=[],n=e.variants.filter(Tn),i=(n=u(n)).next();!i.done;i=n.next())t.push(pn(i.value));for(n=(e=u(e.textStreams)).next();!n.done;n=e.next())t.push(mn(n.value));return t}function Kh(){this.g={}}function qh(e,t){return null==(t=e.g[t])?0:t}function zh(e){var t=this;if(e&&e.constructor!=Lo)throw new Le(2,9,9008);this.g=this.h=null,e?(this.h=e.h,this.g=e.fc()):(this.h=Eo(),this.g=new pi),this.i=[],this.j=[];var n=!e;this.l=new wi((function(){var e,i,r,a,s;return R((function(o){switch(o.g){case 1:return y(o,Promise.all(t.j.map(hh)),2);case 2:for(e=function(){},i=[],r=u(t.i),a=r.next();!a.done;a=r.next())s=a.value,i.push(s.then(e,e));return y(o,Promise.all(i),3);case 3:if(n)return y(o,t.g.destroy(),4);o.A(4);break;case 4:t.h=null,t.g=null,b(o)}}))}))}function Wh(){if(at())e:{for(var e=u(Ih.values()),t=e.next();!t.done;t=e.next())if(t=(t=t.value)()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}function Yh(e){var t,n;return R((function(i){switch(i.g){case 1:return y(i,(t=new Sh).init(),2);case 2:return y(i,Ch(t),3);case 3:return n=new Oh("manifest",(n=i.h).path.Aa,n.path.ka,e),y(i,t.destroy(),4);case 4:return y(i,(new zh).remove(n.toString()),0)}}))}function Xh(e,t,n,i,r,a){var s,o,l,c,d,h,f,g,p,m,v;return R((function(b){switch(b.g){case 1:for(s=!1,A(b,2),o=!0,l=u(n.streams),c=l.next();!c.done;c=l.next())for(d=c.value,h=u(d.segments),f=h.next();!f.done;f=h.next())g=f.value,null!=(p=g.pendingSegmentRefId?i[g.pendingSegmentRefId]:null)&&(g.dataKey=p,g.pendingSegmentRefId=void 0),null!=(p=g.pendingInitSegmentRefId?i[g.pendingInitSegmentRefId]:null)&&(g.initSegmentKey=p,g.pendingInitSegmentRefId=void 0),g.pendingSegmentRefId&&(o=!1),g.pendingInitSegmentRefId&&(o=!1);return n.size+=r,o&&(n.isIncomplete=!1),y(b,e.updateManifest(t,n),4);case 4:s=!0,a(),T(b,0);break;case 2:return m=w(b),y(b,Yh(t),5);case 5:if(s){b.A(6);break}return v=Object.values(i),y(b,e.removeSegments(v,(function(){})),6);case 6:throw m}}))}function Qh(e){return e.variants.some((function(e){var t=e.audio&&e.audio.encrypted;return e.video&&e.video.encrypted||t}))}function $h(e){return e.variants.some((function(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]).some((function(e){return e.initData&&e.initData.length}))}))}function Zh(e,t){for(var n=[],i=u(e.streams),r=i.next();!r.done;r=i.next())r=r.value,t&&"video"==r.type?n.push({contentType:Nt(r.mimeType,r.codecs),robustness:e.drmInfo.videoRobustness}):t||"audio"!=r.type||n.push({contentType:Nt(r.mimeType,r.codecs),robustness:e.drmInfo.audioRobustness});return n}function Jh(e){if(e.l.g)throw new Le(2,9,7001)}function ef(){if(!Wh())throw new Le(2,9,9e3)}function tf(e,t){return R((function(n){return 1==n.g?(e.i.push(t),E(n),y(n,t,4)):2!=n.g?n.return(n.h):(S(n),Q(e.i,t),C(n,0))}))}function nf(e){for(var t=new Set,n=u(e.textStreams),i=n.next();!i.done;i=n.next())t.add(i.value);for(i=(n=u(e.imageStreams)).next();!i.done;i=n.next())t.add(i.value);for(n=(e=u(e.variants)).next();!n.done;n=e.next())(n=n.value).audio&&t.add(n.audio),n.video&&t.add(n.video);return t}g(Lh,bh),Lh.prototype.updateManifestExpiration=function(e,t){var n,i,r,a=this;return R((function(s){return n=vh(a.h,a.g),i=n.store(),r=new tt,i.get(e).onsuccess=function(n){(n=n.target.result)?(n.expiration=t,i.put(n),r.resolve()):r.reject(new Le(2,9,9012,"Could not find values for "+e))},y(s,Promise.all([n.promise(),r]),0)}))},Lh.prototype.bc=function(e){var t,n,i,r;return R((function(a){if(1!=a.g)return r=a.h,a.return({creationTime:0,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:null==e.expiration?1/0:e.expiration,streams:r,sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata,sequenceMode:!1});for(t=[],n=0;n<e.periods.length;++n)i=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,i-=e.periods[n].startTime,i=function(e,t){!function(e){var t=e.streams.filter((function(e){return"audio"==e.contentType}));if(e=e.streams.filter((function(e){return"video"==e.contentType})),!t.every((function(e){return e.variantIds}))||!e.every((function(e){return e.variantIds}))){for(var n=u(t),i=n.next();!i.done;i=n.next())i.value.variantIds=[];for(i=(n=u(e)).next();!i.done;i=n.next())i.value.variantIds=[];if(n=0,e.length&&!t.length){var r=n++,a=u(e);for(i=a.next();!i.done;i=a.next())i.value.variantIds.push(r)}if(!e.length&&t.length)for(r=n++,i=(a=u(t)).next();!i.done;i=a.next())i.value.variantIds.push(r);if(e.length&&t.length)for(i=(t=u(t)).next();!i.done;i=t.next())for(i=i.value,a=(r=u(e)).next();!a.done;a=r.next()){a=a.value;var s=n++;i.variantIds.push(s),a.variantIds.push(s)}}}(e);for(var n=u(e.streams),i=n.next();!i.done;i=n.next());return e.streams.map((function(n){return n=n,i=e.startTime,r=t,a=n.initSegmentUri?Rh(n.initSegmentUri):null,s=i+n.presentationTimeOffset,o=i+r,{id:n.id,originalId:null,primary:n.primary,type:n.contentType,mimeType:n.mimeType,codecs:n.codecs,frameRate:n.frameRate,pixelAspectRatio:void 0,hdr:void 0,kind:n.kind,language:n.language,label:n.label,width:n.width,height:n.height,initSegmentKey:a,encrypted:n.encrypted,keyIds:new Set([n.keyId]),segments:n.segments.map((function(e){var t=Rh(e.uri);return{startTime:i+e.startTime,endTime:i+e.endTime,dataKey:t,initSegmentKey:a,appendWindowStart:i,appendWindowEnd:o,timestampOffset:s,tilesLayout:""}})),variantIds:n.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0};var i,r,a,s,o}))}(e.periods[n],i),t.push(i);return y(a,xc(t),2)}))},Lh.prototype.me=function(e){return{data:e.data}},g(Dh,bh),Dh.prototype.bc=function(e){var t,n,i,r,a;return R((function(s){if(1!=s.g)return a=s.h,s.return({appMetadata:e.appMetadata,creationTime:0,drmInfo:e.drmInfo,duration:e.duration,expiration:null==e.expiration?1/0:e.expiration,originalManifestUri:e.originalManifestUri,sessionIds:e.sessionIds,size:e.size,streams:a,sequenceMode:!1});for(t=[],n=0;n<e.periods.length;++n){i=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,r=i-e.periods[n].startTime;for(var o=e.periods[n],l=[],c=u(o.streams),d=c.next();!d.done;d=c.next())0!=(d=d.value).variantIds.length&&l.push(function(e,t,n){return{id:e.id,originalId:e.originalId,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:e.pixelAspectRatio,hdr:void 0,kind:e.kind,language:e.language,label:e.label,width:e.width,height:e.height,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map((function(i){return{startTime:t+i.startTime,endTime:t+i.endTime,initSegmentKey:e.initSegmentKey,appendWindowStart:t,appendWindowEnd:n,timestampOffset:t-e.presentationTimeOffset,dataKey:i.dataKey,tilesLayout:""}})),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0}}(d,o.startTime,o.startTime+r));t.push(l)}return y(s,xc(t),2)}))},g(_h,bh),(W=_h.prototype).hasFixedKeySpace=function(){return!1},W.addSegments=function(e){return this.add(this.i,e)},W.addManifests=function(e){return this.add(this.g,e)},W.updateManifest=function(e,t){return n=e,i=t,(r=(e=vh((e=this).h,e.g)).store()).get(n).onsuccess=function(){r.put(i,n)},e.promise();var n,i,r},W.bc=function(e){return null==e.expiration&&(e.expiration=1/0),Promise.resolve(e)},(W=Mh.prototype).init=function(){var t=this,n=new tt,i=e.indexedDB.open("shaka_offline_db",5);return i.onsuccess=function(){var e=i.result,r=(r=(t.l=e).objectStoreNames).contains("manifest")&&r.contains("segment")?new Lh(e,"segment","manifest"):null;t.g=r,r=(r=e.objectStoreNames).contains("manifest-v2")&&r.contains("segment-v2")?new Dh(e,"segment-v2","manifest-v2"):null,t.h=r,r=(r=e.objectStoreNames).contains("manifest-v3")&&r.contains("segment-v3")?new Dh(e,"segment-v3","manifest-v3"):null,t.i=r,r=(r=e.objectStoreNames).contains("manifest-v5")&&r.contains("segment-v5")?new _h(e,"segment-v5","manifest-v5"):null,t.j=r,e=e.objectStoreNames.contains("session-ids")?new wh(e):null,t.m=e,n.resolve()},i.onupgradeneeded=function(){for(var e=i.result,t=u(["segment-v5","manifest-v5","session-ids"]),n=t.next();!n.done;n=t.next())n=n.value,e.objectStoreNames.contains(n)||e.createObjectStore(n,{autoIncrement:!0})},i.onerror=function(e){n.reject(new Le(2,9,9001,i.error)),e.preventDefault()},n},W.destroy=function(){var e=this;return R((function(t){switch(t.g){case 1:if(e.g)return y(t,e.g.destroy(),2);t.A(2);break;case 2:if(e.h)return y(t,e.h.destroy(),4);t.A(4);break;case 4:if(e.i)return y(t,e.i.destroy(),6);t.A(6);break;case 6:if(e.j)return y(t,e.j.destroy(),8);t.A(8);break;case 8:if(e.m)return y(t,e.m.destroy(),10);t.A(10);break;case 10:e.l&&e.l.close(),b(t)}}))},W.getCells=function(){var e=new Map;return this.g&&e.set("v1",this.g),this.h&&e.set("v2",this.h),this.i&&e.set("v3",this.i),this.j&&e.set("v5",this.j),e},W.getEmeSessionCell=function(){return this.m},W.erase=function(){var t=this;return R((function(n){switch(n.g){case 1:if(t.g)return y(n,t.g.destroy(),2);n.A(2);break;case 2:if(t.h)return y(n,t.h.destroy(),4);n.A(4);break;case 4:if(t.i)return y(n,t.i.destroy(),6);n.A(6);break;case 6:if(t.j)return y(n,t.j.destroy(),8);n.A(8);break;case 8:return t.l&&t.l.close(),y(n,(i=new tt,(r=e.indexedDB.deleteDatabase("shaka_offline_db")).onblocked=function(){},r.onsuccess=function(){i.resolve()},r.onerror=function(e){i.reject(new Le(2,9,9001,r.error)),e.preventDefault()},i),10);case 10:return t.l=null,t.g=null,t.h=null,t.i=null,t.j=null,y(n,t.init(),0)}var i,r}))},kh("idb",(function(){return ft("CrKey")||ot()||!e.indexedDB?null:new Mh})),Oh.prototype.Aa=function(){return this.i},Oh.prototype.ka=function(){return this.h},Oh.prototype.key=function(){return this.l},Oh.prototype.toString=function(){return this.j},(W=Uh.prototype).configure=function(){},W.start=function(e,t){var n,i,r,a,s=this;return R((function(o){switch(o.g){case 1:if(n=Ph(e),null==(s.g=n)||"manifest"!=n.g)throw new Le(2,1,9004,e);return i=new Sh,E(o),y(o,i.init(),4);case 4:return y(o,xh(i,n.Aa(),n.ka()),5);case 5:return y(o,o.h.getManifests([n.key()]),6);case 6:return r=(r=o.h)[0],a=Bh(a=new Nh(n.Aa(),n.ka()),r),t.makeTextStreamsForClosedCaptions(a),o.return(a);case 2:return S(o),y(o,i.destroy(),7);case 7:C(o,0)}}))},W.stop=function(){return Promise.resolve()},W.update=function(){},W.onExpirationUpdated=function(e,t){var n,i,r,a,s,o=this;return R((function(u){switch(u.g){case 1:return n=o.g,i=new Sh,A(u,2,3),y(u,i.init(),5);case 5:return y(u,xh(i,n.Aa(),n.ka()),6);case 6:return y(u,(r=u.h).getManifests([n.key()]),7);case 7:if(s=(s=u.h)[0],a=s.sessionIds.includes(e),s=null==s.expiration||s.expiration>t,a&&s)return y(u,r.updateManifestExpiration(n.key(),t),3);u.A(3);break;case 3:return S(u),y(u,i.destroy(),10);case 10:C(u,0);break;case 2:w(u),u.A(3)}}))},ir["application/x-offline-manifest"]=function(){return new Uh},F("shaka.offline.OfflineScheme",jh),mi("offline",jh.plugin=function(e){var t,n,i=Ph(e);return i&&"manifest"==i.g?ri(e={uri:e,Ce:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}}):i&&"segment"==i.g?(i.key(),t=i,n=new Sh,ri(void 0).Z((function(){return n.init()})).Z((function(){return xh(n,t.Aa(),t.ka())})).Z((function(e){return e.getSegments([t.key()])})).Z((function(e){return{uri:t,data:e[0].data,headers:{}}})).finally((function(){return n.destroy()}))):ni(new Le(2,1,9004,e))}),(W=zh.prototype).destroy=function(){return this.l.destroy()},W.configure=function(e,t){return 2==arguments.length&&"string"==typeof e&&(e=bo(e,t)),To(this.h,e)},W.getConfiguration=function(){var e=Eo();return To(e,this.h,Eo()),e},W.fc=function(){return this.g},W.store=function(e,t,n){var i,r,a,s,o,l,c,d,h,f,g,p,m,v,E,x,k,I,L,D=this,_=this.getConfiguration(),M=new dh(this.g);return this.j.push(M),i=this,r=e,a=t||{},s=function(){var t;return R((function(i){return 1==i.g?y(i,er(e,D.g,_.manifest.retryParameters,n||null),2):(t=i.h,i.return(t()))}))},o=_,l=M,(t=new ti(t=R((function(e){switch(e.g){case 1:return ef(),d=c=null,h=new Sh,p=g=f=null,A(e,2,3),y(e,s(),5);case 5:return c=e.h,y(e,(Te=i,we=r,Se=c,Ce=o,R((function(e){if(1==e.g)return xe=null,Ie={networkingEngine:Ie=Te.g,modifyManifestRequest:function(){},modifySegmentRequest:function(){},filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(e){xe=e},isLowLatencyMode:function(){return!1},isAutoLowLatencyMode:function(){return!1},enableLowLatencyMode:function(){}},Se.configure(Ce.manifest),Jh(Te),y(e,Se.start(we,Ie),2);if(3!=e.g)return ke=e.h,Jh(Te),Ie=nf(ke),y(e,Promise.all(Ii(Ie,(function(e){return e.createSegmentIndex()}))),3);if(Jh(Te),xe)throw xe;return e.return(ke)}))),6);case 6:if(m=e.h,Jh(i),!m.presentationTimeline.V()&&!m.presentationTimeline.ib())return y(e,(ve=i,ye=m,be=function(e){p=p||e},Ae=o,R((function(e){switch(e.g){case 1:return(Ee=new Di({jb:ve.g,onError:be,Wc:function(){},onExpirationUpdated:function(){},onEvent:function(){}})).configure(Ae.drm),y(e,(t=Ee,n=ye.variants,i=Ae.offline.usePersistentLicense,t.ha=!0,t.B=[],t.M=i,Mi(t,n)),2);case 2:return y(e,Pi(Ee),3);case 3:return y(e,Ni(Ee),4);case 4:return e.return(Ee)}var t,n,i}))),7);throw new Le(2,9,9005,r);case 7:if(d=e.h,Jh(i),p)throw p;return y(e,(K=m,q=o,R((function(e){switch(e.g){case 1:return W={width:1/0,height:1/0},s=q.restrictions,o=W,K.variants=K.variants.filter((function(e){return on(e,s,o)})),y(e,ln(K,q.offline.usePersistentLicense),2);case 2:for(z=[],W=q.preferredAudioChannelCount,Y=q.preferredDecodingAttributes,de=q.preferredVideoCodecs,X=q.preferredAudioCodecs,an(K,de,X,W,Y),Q=u(K.variants),$=Q.next();!$.done;$=Q.next())Z=$.value,z.push(pn(Z));for(J=u(K.textStreams),ee=J.next();!ee.done;ee=J.next())te=ee.value,z.push(mn(te));for(ne=u(K.imageStreams),ie=ne.next();!ie.done;ie=ne.next())re=ie.value,z.push(vn(re));return y(e,q.offline.trackSelectionCallback(z),3);case 3:for(ae=e.h,se=K.presentationTimeline.getDuration(),oe=0,ue=u(ae),le=ue.next();!le.done;le=ue.next())ce=(ce=le.value).bandwidth*se/8,oe+=ce;return A(e,4),y(e,q.offline.downloadSizeCallback(oe),6);case 6:if(!e.h)throw new Le(2,9,9014);T(e,5);break;case 4:if((de=w(e))instanceof Le)throw de;throw new Le(2,9,9015);case 5:for(he=new Set,fe=new Set,ge=new Set,pe=u(ae),le=pe.next();!le.done;le=pe.next())"variant"==(me=le.value).type&&he.add(me.id),"text"==me.type&&fe.add(me.id),"image"==me.type&&ge.add(me.id);K.variants=K.variants.filter((function(e){return he.has(e.id)})),K.textStreams=K.textStreams.filter((function(e){return fe.has(e.id)})),K.imageStreams=K.imageStreams.filter((function(e){return ge.has(e.id)}));var t=K,n=(t.variants.map((function(e){return e.video})),new Set(t.variants.map((function(e){return e.audio}))));t=t.textStreams;for(var i=u(n),r=i.next();!r.done;r=i.next())for(var a=(r=u(n)).next();!a.done;a=r.next());for(i=(n=u(t)).next();!i.done;i=n.next())for(r=(i=u(t)).next();!r.done;r=i.next());b(e)}var s,o}))),8);case 8:return y(e,h.init(),9);case 9:return Jh(i),y(e,Ch(h),10);case 10:return f=e.h,Jh(i),E=function(e,t,n,i,r,a){var s=function(e,t,n){return{offlineUri:null,originalManifestUri:e,duration:t.presentationTimeline.getDuration(),size:0,expiration:1/0,tracks:t=Vh(t),appMetadata:n,isIncomplete:!1}}(n,t,i),o=r.offline.progressCallback,l=(function(e,t,n){e.m=function(e,t){s.size=t,o(s,e)},e.l=n}(a,0,(function(t,n){l&&r.offline.usePersistentLicense&&c==n&&Bi(e,"cenc",t)})),Qh(t)&&!$h(t)),c=null;l&&(c=rf.get(e.g.keySystem));for(var d=new Kh,h=u(t.textStreams),f=h.next();!f.done;f=h.next())d.g[f.value.id]=52;for(f=(h=u(t.imageStreams)).next();!f.done;f=h.next())!function(e,t){e.g[t.id]=t.bandwidth||2048}(d,f.value);for(h=(f=u(t.variants)).next();!h.done;h=f.next())!function(e,t){var n,i,r=t.audio,a=t.video;r&&!a&&(e.g[r.id]=r.bandwidth||t.bandwidth),!r&&a&&(e.g[a.id]=a.bandwidth||t.bandwidth),r&&a&&(n=r.bandwidth||393216,(i=a.bandwidth||t.bandwidth-n)<=0&&(i=t.bandwidth),e.g[r.id]=n,e.g[a.id]=i)}(d,h.value);return d=function(e,t,n,i){for(var r=new Map,a=nf(n),s=new Map,o=(a=u(a)).next();!o.done;o=a.next()){var l=function(e,t,n,i,r,a){var s={id:i.id,originalId:i.originalId,primary:i.primary,type:i.type,mimeType:i.mimeType,codecs:i.codecs,frameRate:i.frameRate,pixelAspectRatio:i.pixelAspectRatio,hdr:i.hdr,kind:i.kind,language:i.language,label:i.label,width:i.width||null,height:i.height||null,encrypted:i.encrypted,keyIds:i.keyIds,segments:[],variantIds:[],roles:i.roles,forced:i.forced,channelsCount:i.channelsCount,audioSamplingRate:i.audioSamplingRate,spatialAudio:i.spatialAudio,closedCaptions:i.closedCaptions,tilesLayout:i.tilesLayout},o=r.offline.numberOfParallelDownloads,u=0;return function(e,t,n){if(null!=(t=e.segmentIndex.find(t)))for(var i=e.segmentIndex.get(t);i;)n(i),i=e.segmentIndex.get(++t)}(i,n.presentationTimeline.Pa(),(function(n){var r,l=uh(n),c=void 0;a.has(l)||(r=n.endTime-n.startTime,r=qh(t,i.id)*r,r=ch(e.g,r),a.set(l,new oh(n,r,u,!1))),n.i&&(c=uh(n.i),a.has(c)||(r=.5*qh(t,i.id),r=ch(e.g,r),a.set(c,new oh(n.i,r,u,!0)))),s.segments.push({pendingInitSegmentRefId:c,initSegmentKey:c?0:null,startTime:n.startTime,endTime:n.endTime,appendWindowStart:n.appendWindowStart,appendWindowEnd:n.appendWindowEnd,timestampOffset:n.timestampOffset,tilesLayout:n.tilesLayout,pendingSegmentRefId:l,dataKey:0}),u=(u+1)%o})),s}(e,t,n,o=o.value,i,r);s.set(o.id,l)}for(t=(e=u(n.variants)).next();!t.done;t=e.next())(t=t.value).audio&&s.get(t.audio.id).variantIds.push(t.id),t.video&&s.get(t.video.id).variantIds.push(t.id);return{streams:Array.from(s.values()),ee:Array.from(r.values())}}(a,d,t,r),a=d.streams,d=d.ee,f=e.g,h=r.offline.usePersistentLicense,f&&h&&(f.initData=[]),{Kf:{creationTime:Date.now(),originalManifestUri:n,duration:t.presentationTimeline.getDuration(),size:0,expiration:e.ec(),streams:a,sessionIds:h?Ui(e):[],drmInfo:f,appMetadata:i,isIncomplete:!0,sequenceMode:t.sequenceMode},ee:d}}(d,m,r,a,o,l),v=E.Kf,E=E.ee,y(e,f.ka.addManifests([v]),11);case 11:if(x=e.h,Jh(i),g=x[0],Jh(i),p)throw p;return y(e,(t=i,n=E,I=g,L=v,D=l,_=o,M=f.ka,O=m,P=d,R((function(e){switch(e.g){case 1:if(N={},B=0,U=!(F=function(e,n){var i,r,a,s,o,l,c;return R((function(d){if(1==d.g){for(i={},r=u(e),a=r.next();!a.done;i={ab:i.ab},a=r.next())i.ab=a.value,f=i.ab,g=_,s=Ls(f.g.ya(),f.g.Ba,f.g.la,g.streaming.retryParameters),o=i.ab.i,l=i.ab.h,c=function(e){return function(n){var i,r;return R((function(a){if(1==a.g)return y(a,M.addSegments([{data:n}]),2);i=a.h,Jh(t),r=uh(r=e.ab.g),N[r]=i[0],B+=n.byteLength,b(a)}))}}(i),fh(D,i.ab.groupId,s,o,l,c);return y(d,(h=D,R((function(e){return 1==e.g?y(e,Promise.all(h.j.values()),2):e.return(h.g.h)}))),2)}var h,f,g;if(!n)return d.A(0);Jh(t);var p=O,m=L,v=P,A=_;if(m.expiration=v.ec(),v=Ui(v),m.sessionIds=A.offline.usePersistentLicense?v:[],Qh(p)&&A.offline.usePersistentLicense&&!v.length)throw new Le(2,9,9007);return y(d,M.updateManifest(I,L),0)}))}),A(e,2),Qh(O)&&U&&!$h(O))return y(e,F(n.filter((function(e){return e.h})),!0),5);e.A(4);break;case 5:return Jh(t),n=n.filter((function(e){return!e.h})),j=N,G=B,N={},B=0,y(e,Xh(M,I,L,j,G,(function(){Jh(t)})),6);case 6:Jh(t);case 4:if(U){e.A(7);break}return y(e,F(n,!1),8);case 8:return Jh(t),j=N,G=B,N={},B=0,y(e,Xh(M,I,L,j,G,(function(){Jh(t)})),9);case 9:Jh(t);case 7:T(e,0);break;case 2:return H=w(e),V=Object.values(N),y(e,M.removeSegments(V,(function(){})),10);case 10:throw H}}))),12);case 12:return Jh(i),x=new Oh("manifest",f.path.Aa,f.path.ka,g),e.return(Hh(x,v));case 3:return S(e),y(e,h.destroy(),13);case 13:if(c)return y(e,c.stop(),14);e.A(14);break;case 14:if(d)return y(e,d.destroy(),16);e.A(16);break;case 16:C(e,0);break;case 2:if(k=w(e),null!=g)return y(e,Yh(g),18);e.A(18);break;case 18:throw p||k}var t,n,I,L,D,_,M,O,P,N,B,F,U,j,G,H,V,K,q,z,W,Y,X,Q,$,Z,J,ee,te,ne,ie,re,ae,se,oe,ue,le,ce,de,he,fe,ge,pe,me,ve,ye,be,Ae,Ee,Te,we,Se,Ce,xe,ke,Ie})),(function(){return hh(M)}))).finally((function(){Q(D.j,M)})),I=this,L=(t=t).promise,I.i.push(L),t.finally((function(){Q(I.i,L)}))},W.remove=function(e){return tf(this,(t=this,n=e,R((function(e){switch(e.g){case 1:if(ef(),null==(i=Ph(n))||"manifest"!=i.g)throw new Le(2,9,9004,n);return i=i,r=new Sh,E(e),y(e,r.init(),4);case 4:return y(e,xh(r,i.Aa(),i.ka()),5);case 5:return y(e,(a=e.h).getManifests([i.key()]),6);case 6:return s=(s=e.h)[0],y(e,Promise.all([(f=t,g=s,p=r,R((function(e){return y(e,(t=f.g,n=f.h.drm,i=p,r=g,R((function(e){return 1==e.g?r.drmInfo?(a=function(e){var t=Array.from(e.g.keys());if(t.length)return e.g.get(t[0]).getEmeSessionCell();throw new Le(2,9,9e3,"No supported storage mechanisms found")}(i),s=r.sessionIds.map((function(e){return{sessionId:e,keySystem:r.drmInfo.keySystem,licenseUri:r.drmInfo.licenseServerUri,serverCertificate:r.drmInfo.serverCertificate,audioCapabilities:Zh(r,!1),videoCapabilities:Zh(r,!0)}})),y(e,Gh(n,t,s),2)):e.return():3!=e.g?(o=e.h,y(e,a.remove(o),3)):y(e,a.add(s.filter((function(e){return!o.includes(e.sessionId)}))),0)}))),0);var t,n,i,r,a,s,o}))),(l=a,c=i,h=function(e){for(var t=new Set,n=(e=u(e.streams)).next();!n.done;n=e.next())for(var i=(n=u(n.value.segments)).next();!i.done;i=n.next())null!=(i=i.value).initSegmentKey&&t.add(i.initSegmentKey),t.add(i.dataKey);return Array.from(t)}(d=s),Hh(c,d),Promise.all([l.removeSegments(h,o),l.removeManifests([c.key()],o)]))]),2);case 2:return S(e),y(e,r.destroy(),8);case 8:C(e,0)}function o(){}var l,c,d,h,f,g,p}))));var t,n,i,r,a,s},W.Yf=function(){return tf(this,(e=this,R((function(h){switch(h.g){case 1:return ef(),t=e.g,n=e.h.drm,i=new Sh,r=!1,E(h),y(h,i.init(),4);case 4:a=[],f=function(e){a.push(e)},i.g.forEach((function(e){f(e.getEmeSessionCell())})),s=u(a),o=s.next();case 5:if(o.done){h.A(2);break}return y(h,(l=o.value).getAll(),8);case 8:return c=h.h,y(h,Gh(n,t,c),9);case 9:return d=h.h,y(h,l.remove(d),10);case 10:d.length!=c.length&&(r=!0),o=s.next(),h.A(5);break;case 2:return S(h),y(h,i.destroy(),11);case 11:C(h,3);break;case 3:return h.return(!r)}var f}))));var e,t,n,i,r,a,s,o,l,c,d},W.list=function(){return tf(this,R((function(i){switch(i.g){case 1:return ef(),e=[],t=new Sh,E(i),y(i,t.init(),4);case 4:return n=Promise.resolve(),r=function(t,i){n=n.then((function(){return R((function(n){if(1==n.g)return y(n,i.getAllManifests(),2);n.h.forEach((function(n,i){i=Hh(new Oh("manifest",t.Aa,t.ka,i),n),e.push(i)})),b(n)}))}))},t.g.forEach((function(e,t){e.getCells().forEach((function(e,n){r({Aa:t,ka:n},e)}))})),y(i,n,2);case 2:return S(i),y(i,t.destroy(),6);case 6:C(i,3);break;case 3:return i.return(e)}var r})));var e,t,n},F("shaka.offline.Storage",zh),zh.deleteAll=function(){var e;return R((function(t){return 1==t.g?(e=new Sh,E(t),y(t,(n=e,R((function(e){return 1==e.g?(i=Array.from(n.g.values()),(r=0<i.length)||Ih.forEach((function(e){(e=e())&&i.push(e)})),y(e,Promise.all(i.map((function(e){return e.erase()}))),2)):r?e.A(0):y(e,Promise.all(i.map((function(e){return e.destroy()}))),0)}))),2)):5!=t.g?(S(t),y(t,e.destroy(),5)):C(t,0);var n,i,r}))},zh.prototype.removeEmeSessions=zh.prototype.Yf,zh.prototype.getNetworkingEngine=zh.prototype.fc,zh.support=Wh;var rf=(new Map).set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95").set("com.adobe.primetime","f239e769efa348509c16a903c6932efb");function af(){}function sf(e,t){for(var n={priority:t||0,We:e},i=0;i<of.length;i++)if(of[i].priority<n.priority)return void of.splice(i,0,n);of.push(n)}Iu.offline=Wh,F("shaka.polyfill",af),af.register=sf,af.installAll=function(){for(var e=u(of),t=e.next();!t.done;t=e.next()){t=t.value;try{t.We()}catch(e){K("Error installing polyfill!",e)}}};var of=[];function uf(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),n=document.createEvent("Event");n.initEvent(t,e.bubbles,e.cancelable),e.target.dispatchEvent(n)}function lf(){}function cf(){var e=!0;(ct()||ft("PlayStation 5")||dt()||ft("Web0S")||ut()||ft("CrKey"))&&(e=!1),(e=!(!ft("CrKey")||!ft("Android"))||e)&&navigator.mediaCapabilities||(navigator.mediaCapabilities||(navigator.mediaCapabilities={}),hf=navigator.mediaCapabilities,navigator.mediaCapabilities.decodingInfo=df)}function df(e){var t,n,i,r,a,s,o,u;return R((function(l){switch(l.g){case 1:if(t={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:e},!e)return l.return(t);if("media-source"==e.type){if(!at()||e.video&&(n=e.video.contentType,!MediaSource.isTypeSupported(n))||e.audio&&(n=e.audio.contentType,!MediaSource.isTypeSupported(n)))return l.return(t)}else{if("file"!=e.type)return l.return(t);if(e.video&&!st(e.video.contentType)||e.audio&&!st(e.audio.contentType))return l.return(t)}return e.keySystemConfiguration?(i=e.keySystemConfiguration,r=[],a=[],i.audio&&(s={robustness:i.audio.robustness||"",contentType:e.audio.contentType},r.push(s)),i.video&&(s={robustness:i.video.robustness||"",contentType:e.video.contentType},a.push(s)),o={initDataTypes:[i.initDataType],distinctiveIdentifier:i.distinctiveIdentifier,persistentState:i.persistentState,sessionTypes:i.sessionTypes},r.length&&(o.audioCapabilities=r),a.length&&(o.videoCapabilities=a),A(l,3),y(l,navigator.requestMediaKeySystemAccess(i.keySystem,[o]),5)):(t.supported=!0,l.return(Promise.resolve(t)));case 5:u=l.h,T(l,4);break;case 3:w(l);case 4:u&&(t.supported=!0,t.keySystemAccess=u);case 2:return l.return(t)}}))}sf((af.Aria=function(){}).install=function(){if(!Object.getOwnPropertyDescriptor(Element.prototype,"ariaHidden"))for(var e=u(["ariaHidden","ariaLabel","ariaPressed","ariaSelected"]),t=e.next();!t.done;t=e.next())!function(e){var t="aria-"+e.toLowerCase().replace(/^aria/,"");Object.defineProperty(Element.prototype,e,{get:function(){return this.getAttribute(t)},set:function(e){null==e?this.removeAttribute(t):this.setAttribute(t,e)}})}(t.value)}),sf((af.EncryptionScheme=function(){}).install=function(){gp()},-2),sf((af.Fullscreen=function(){}).install=function(){var t;e.Document&&((t=Element.prototype).requestFullscreen=t.requestFullscreen||t.mozRequestFullScreen||t.msRequestFullscreen||t.webkitRequestFullscreen,(t=Document.prototype).exitFullscreen=t.exitFullscreen||t.mozCancelFullScreen||t.msExitFullscreen||t.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",uf),document.addEventListener("webkitfullscreenerror",uf),document.addEventListener("mozfullscreenchange",uf),document.addEventListener("mozfullscreenerror",uf),document.addEventListener("MSFullscreenChange",uf),document.addEventListener("MSFullscreenError",uf))}),(af.MediaCapabilities=lf).install=cf;var hf=null;function ff(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var t=e.apply(this,D.apply(0,arguments));return t.abort=function(){},t}}function gf(){function t(){switch(e.orientation){case-90:n.type="landscape-secondary",n.angle=270;break;case 0:n.type="portrait-primary",n.angle=0;break;case 90:n.type="landscape-primary",n.angle=90;break;case 180:n.type="portrait-secondary",n.angle=180}}var n;screen.orientation||null!=e.orientation&&(n=new pf,screen.orientation=n,t(),e.addEventListener("orientationchange",(function(){t();var e=new oi("change");n.dispatchEvent(e)})))}function pf(){ci.call(this),this.type="",this.angle=0}function mf(e,t){try{var n=new bf(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function vf(e){var t=this.mediaKeys;return t&&t!=e&&Ef(t,null),delete this.mediaKeys,(this.mediaKeys=e)?Ef(e,this):Promise.resolve()}function yf(e){if(Se(e=we(e.initData)).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=Et(e=bt(e.subarray(4),!0));var t=new Event("encrypted");t.initDataType="skd",t.initData=Te(e),this.dispatchEvent(t)}function bf(e,t){if((this.keySystem=e).startsWith("com.apple.fps"))for(var n=u(t),i=n.next();!i.done;i=n.next()){var r=i.value;if("required"==r.persistentState)i=null;else{i={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:r.initDataTypes,sessionTypes:["temporary"],label:r.label};var a=!1,s=!1;if(r.audioCapabilities)for(var o=u(r.audioCapabilities),l=o.next();!l.done;l=o.next())(l=l.value).contentType&&(a=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,l.contentType.split(";")[0]))&&(i.audioCapabilities.push(l),s=!0);if(r.videoCapabilities)for(l=(r=u(r.videoCapabilities)).next();!l.done;l=r.next())(o=l.value).contentType&&(a=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,o.contentType.split(";")[0]))&&(i.videoCapabilities.push(o),s=!0);i=(s=a?s:WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4"))?i:null}if(i)return void(this.g=i)}throw(n=Error("Unsupported keySystem")).name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function Af(e){this.h=new WebKitMediaKeys(e),this.g=new Ci}function Ef(e,t){if(e.g.lb(),!t)return Promise.resolve();e.g.C(t,"webkitneedkey",yf);try{return es(t,HTMLMediaElement.HAVE_METADATA,e.g,(function(){t.webkitSetMediaKeys(e.h)})),Promise.resolve()}catch(e){return Promise.reject(e)}}function Tf(e){ci.call(this),this.i=null,this.l=e,this.g=this.h=null,this.j=new Ci,this.sessionId="",this.expiration=NaN,this.closed=new tt,this.keyStatuses=new Sf}function wf(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.g=t,n=new oi("keystatuseschange"),e.dispatchEvent(n)}function Sf(){this.size=0,this.g=void 0}function Cf(){!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(navigator.requestMediaKeySystemAccess=xf,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=kf,e.MediaKeys=If,e.MediaKeySystemAccess=Lf,e.shakaMediaKeysPolyfill=!0)}function xf(){return Promise.reject(Error("The key system specified is not supported."))}function kf(e){return null==e?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}function If(){throw new TypeError("Illegal constructor.")}function Lf(){throw this.keySystem="",new TypeError("Illegal constructor.")}function Rf(){if(!(!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)Hf="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=_f,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Mf,e.MediaKeys=Pf,e.MediaKeySystemAccess=Of,e.shakaMediaKeysPolyfill=!0}}function Df(e){return Hf?Hf+e.charAt(0).toUpperCase()+e.slice(1):e}function _f(e,t){try{var n=new Of(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function Mf(e){var t=this.mediaKeys;return t&&t!=e&&Nf(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&Nf(e,this),Promise.resolve()}function Of(e,t){for(var n=!1,i=("org.w3.clearkey"==(this.g=this.keySystem=e)&&(n=!(this.g="webkit-org.w3.clearkey")),!1),r=(r=document.getElementsByTagName("video")).length?r[0]:document.createElement("video"),a=u(t),s=a.next();!s.done;s=a.next()){var o={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:(s=s.value).initDataTypes,sessionTypes:["temporary"],label:s.label},l=!1;if(s.audioCapabilities)for(var c=u(s.audioCapabilities),d=c.next();!d.done;d=c.next())(d=d.value).contentType&&(l=!0,r.canPlayType(d.contentType.split(";")[0],this.g))&&(o.audioCapabilities.push(d),i=!0);if(s.videoCapabilities)for(d=(c=u(s.videoCapabilities)).next();!d.done;d=c.next())(d=d.value).contentType&&(l=!0,r.canPlayType(d.contentType,this.g))&&(o.videoCapabilities.push(d),i=!0);if(l||(i=r.canPlayType("video/mp4",this.g)||r.canPlayType("video/webm",this.g)),"required"==s.persistentState&&(n?(o.persistentState="required",o.sessionTypes=["persistent-license"]):i=!1),i)return void(this.h=o)}throw n="org.w3.clearkey"!=e&&"com.widevine.alpha"!=e?"Unsupported keySystem":"None of the requested configurations were supported.",(n=Error(n)).name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function Pf(e){this.l=e,this.h=null,this.g=new Ci,this.i=[],this.j=new Map}function Nf(e,t){e.h=t,e.g.lb();var n=Hf;t&&(e.g.C(t,n+"needkey",(function(t){var n=new CustomEvent("encrypted");n.initDataType="cenc",n.initData=Te(t.initData),e.h.dispatchEvent(n)})),e.g.C(t,n+"keymessage",(function(t){var n=Bf(e,t.sessionId);n&&(t=new oi("message",t=(new Map).set("messageType",null==n.keyStatuses.Cb()?"licenserequest":"licenserenewal").set("message",t.message)),n.h&&(n.h.resolve(),n.h=null),n.dispatchEvent(t))})),e.g.C(t,n+"keyadded",(function(t){(t=Bf(e,t.sessionId))&&(jf(t,"usable"),t.g&&t.g.resolve(),t.g=null)})),e.g.C(t,n+"keyerror",(function(t){var n=Bf(e,t.sessionId);n&&n.handleError(t)})))}function Bf(e,t){var n=e.j.get(t);return n||((n=e.i.shift())?(n.sessionId=t,e.j.set(t,n),n):null)}function Ff(e,t,n){ci.call(this),this.j=e,this.m=!1,this.g=this.h=null,this.i=t,this.l=n,this.sessionId="",this.expiration=NaN,this.closed=new tt,this.keyStatuses=new Gf}function Uf(e,t,n){if(e.m)return Promise.reject(Error("The session is already initialized."));e.m=!0;try{var i;i="persistent-license"==e.l?n?we(Et("LOAD_SESSION|"+n)):Rt(Et("PERSISTENT|"),t):we(t)}catch(e){return Promise.reject(e)}e.h=new tt;var r=Df("generateKeyRequest");try{e.j[r](e.i,i)}catch(t){if("InvalidStateError"!=t.name)return e.h=null,Promise.reject(t);new rt((function(){try{e.j[r](e.i,i)}catch(t){e.h.reject(t),e.h=null}})).R(.01)}return e.h}function jf(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.g=t,n=new oi("keystatuseschange"),e.dispatchEvent(n)}function Gf(){this.size=0,this.g=void 0}lf.originalMcap=hf,sf(cf,-1),sf((af.MediaSource=function(){}).install=function(){var t,n,i,r,a=ht();e.MediaSource&&(e.cast&&cast.__platform__&&cast.__platform__.canDisplayType?(i=MediaSource.isTypeSupported,MediaSource.isTypeSupported=function(e){var t=e.split(/ *; */);return t.shift(),t.some((function(e){return e.startsWith("codecs=")}))?cast.__platform__.canDisplayType(e):i(e)}):a?a<=12?(ff(),n=SourceBuffer.prototype.remove,SourceBuffer.prototype.remove=function(e,t){return n.call(this,e,t-.001)}):ff():(ft("Tizen 2")||ft("Tizen 3")||ft("Tizen 4"))&&(t=MediaSource.isTypeSupported,MediaSource.isTypeSupported=function(e){return"opus"!=jt(e)[0]&&t(e)})),e.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&(r=MediaSource.isTypeSupported,ft("Web0S")||(MediaSource.isTypeSupported=function(e){var t,n,i=e.split(/ *; */),a=i.findIndex((function(e){return e.startsWith("codecs=")}));return a<0||0<=(n=(t=i[a].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/)).findIndex((function(e){return e.startsWith("vp09")})))&&(t[n]="vp9",i[a]='codecs="'+t.join(",")+'"',e=i.join("; ")),r(e)}))}),(af.Orientation=function(){}).install=gf,g(pf,ci),pf.prototype.lock=function(e){function t(e){return screen.lockOrientation?screen.lockOrientation(e):screen.mozLockOrientation?screen.mozLockOrientation(e):!!screen.msLockOrientation&&screen.msLockOrientation(e)}var n=!1;switch(e){case"natural":n=t("default");break;case"any":n=!0,this.unlock();break;default:n=t(e)}return n?Promise.resolve():((e=Error("screen.orientation.lock() is not available on this device")).name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,Promise.reject(e))},pf.prototype.unlock=function(){screen.unlockOrientation?screen.unlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()},sf(gf),(af.PatchedMediaKeysApple=function(){}).install=function(){e.HTMLVideoElement&&e.WebKitMediaKeys&&(delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=vf,e.MediaKeys=Af,e.MediaKeySystemAccess=bf,navigator.requestMediaKeySystemAccess=mf,e.shakaMediaKeysPolyfill=!0)},bf.prototype.createMediaKeys=function(){var e=new Af(this.keySystem);return Promise.resolve(e)},bf.prototype.getConfiguration=function(){return this.g},Af.prototype.createSession=function(e){if("temporary"!=(e=e||"temporary"))throw new TypeError("Session type "+e+" is unsupported on this platform.");return new Tf(this.h)},Af.prototype.setServerCertificate=function(){return Promise.resolve(!1)},g(Tf,ci),(W=Tf.prototype).generateRequest=function(e,t){var n=this;this.h=new tt;try{var i=this.l.createSession("video/mp4",we(t));this.i=i,this.sessionId=i.sessionId||"",this.j.C(this.i,"webkitkeymessage",(function(e){n.h&&(n.h.resolve(),n.h=null),e=new oi("message",e=(new Map).set("messageType",null==n.keyStatuses.Cb()?"license-request":"license-renewal").set("message",Te(e.message))),n.dispatchEvent(e)})),this.j.C(i,"webkitkeyadded",(function(){n.g&&(wf(n,"usable"),n.g.resolve(),n.g=null)})),this.j.C(i,"webkitkeyerror",(function(){var e=Error("EME PatchedMediaKeysApple key error");if(e.errorCode=n.i.error,null!=n.h)n.h.reject(e),n.h=null;else if(null!=n.g)n.g.reject(e),n.g=null;else switch(n.i.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:wf(n,"output-not-allowed");break;default:wf(n,"internal-error")}})),wf(this,"status-pending")}catch(e){this.h.reject(e)}return this.h},W.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},W.update=function(e){this.g=new tt;try{this.i.update(we(e))}catch(e){this.g.reject(e)}return this.g},W.close=function(){try{this.i.close(),this.closed.resolve(),this.j.lb()}catch(e){this.closed.reject(e)}return this.closed},W.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},(W=Sf.prototype).Cb=function(){return this.g},W.forEach=function(e){this.g&&e(this.g,Zi.value())},W.get=function(e){if(this.has(e))return this.g},W.has=function(e){var t=Zi.value();return!(!this.g||!Ae(e,t))},W.entries=function(){},W.keys=function(){},W.values=function(){},(af.PatchedMediaKeysNop=function(){}).install=Cf,If.prototype.createSession=function(){},If.prototype.setServerCertificate=function(){},Lf.prototype.getConfiguration=function(){},Lf.prototype.createMediaKeys=function(){},sf(Cf,-10),(af.PatchedMediaKeysWebkit=function(){}).install=Rf,Of.prototype.createMediaKeys=function(){var e=new Pf(this.g);return Promise.resolve(e)},Of.prototype.getConfiguration=function(){return this.h},Pf.prototype.createSession=function(e){if("temporary"!=(e=e||"temporary")&&"persistent-license"!=e)throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.h||document.createElement("video");return t.src||(t.src="about:blank"),e=new Ff(t,this.l,e),this.i.push(e),e},Pf.prototype.setServerCertificate=function(){return Promise.resolve(!1)},g(Ff,ci),(W=Ff.prototype).handleError=function(e){var t=Error("EME v0.1b key error"),n=e.errorCode;n.systemCode=e.systemCode,t.errorCode=n,!e.sessionId&&this.h?(45==e.systemCode&&(t.message="Unsupported session type."),this.h.reject(t),this.h=null):e.sessionId&&this.g?(this.g.reject(t),this.g=null):(t=e.systemCode,e.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?jf(this,"output-restricted"):jf(this,1==t?"expired":"internal-error"))},W.generateRequest=function(e,t){return Uf(this,t,null)},W.load=function(e){return"persistent-license"==this.l?Uf(this,null,e):Promise.reject(Error("Not a persistent session."))},W.update=function(e){var t=new tt;return function e(t,n,i){if(t.g)t.g.then((function(){return e(t,n,i)})).catch((function(){return e(t,n,i)}));else{t.g=n,a="webkit-org.w3.clearkey"==t.i?(r=yt(i),"oct"!=(a=JSON.parse(r)).keys[0].kty&&(t.g.reject(Error("Response is not a valid JSON Web Key Set.")),t.g=null),r=kt(a.keys[0].k),kt(a.keys[0].kid)):(r=we(i),null);var r,a,s=Df("addKey");try{t.j[s](t.i,r,a,t.sessionId)}catch(e){t.g.reject(e),t.g=null}}}(this,t,e),t},W.close=function(){if("persistent-license"!=this.l){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=Df("cancelKeyRequest");try{this.j[e](this.i,this.sessionId)}catch(e){}}return this.closed.resolve(),this.closed},W.remove=function(){return"persistent-license"!=this.l?Promise.reject(Error("Not a persistent session.")):this.close()},(W=Gf.prototype).Cb=function(){return this.g},W.forEach=function(e){this.g&&e(this.g,Zi.value())},W.get=function(e){if(this.has(e))return this.g},W.has=function(e){var t=Zi.value();return!(!this.g||!Ae(e,t))},W.entries=function(){},W.keys=function(){},W.values=function(){};var Hf="";function Vf(e){var t="picture-in-picture"==(e=e.target).webkitPresentationMode?(document.pictureInPictureElement=e,new Event("enterpictureinpicture")):(document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),new Event("leavepictureinpicture"));e.dispatchEvent(t)}function Kf(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function qf(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function zf(){return!!this.hasAttribute("disablePictureInPicture")||!this.webkitSupportsPresentationMode("picture-in-picture")}function Wf(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}function Yf(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.substr(t.lastIndexOf("/")+1)}function Xf(){return new Promise((function(e,t){navigator.webkitTemporaryStorage.queryUsageAndQuota((function(t,n){e({usage:t,quota:n})}),t)}))}function Qf(){var e=/\((.*)\)/.exec(this.toString());return e?e[1]:void 0}function $f(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}function Zf(t,n,i){return new e.TextTrackCue(t,n,i)}function Jf(t,n,i){return new e.TextTrackCue(t+"-"+n+"-"+i,t,n,i)}function eg(){}sf(Rf),sf((af.PiPWebkit=function(){}).install=function(){var t;!e.HTMLVideoElement||(t=HTMLVideoElement.prototype).requestPictureInPicture&&document.exitPictureInPicture||!t.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,t.requestPictureInPicture=Kf,Object.defineProperty(t,"disablePictureInPicture",{get:zf,set:Wf,enumerable:!0,configurable:!0}),document.exitPictureInPicture=qf,document.addEventListener("webkitpresentationmodechanged",Vf,!0))}),sf((af.RandomUUID=function(){}).install=function(){!e.crypto||"randomUUID"in e.crypto||(e.crypto.randomUUID=Yf)}),sf((af.StorageEstimate=function(){}).install=function(){navigator.storage&&navigator.storage.estimate||!navigator.webkitTemporaryStorage||!navigator.webkitTemporaryStorage.queryUsageAndQuota||("storage"in navigator||(navigator.storage={}),navigator.storage.estimate=Xf)}),sf((af.Symbol=function(){}).install=function(){var e=Symbol.prototype;"description"in e||Object.defineProperty(e,"description",{get:Qf})}),sf((af.VideoPlayPromise=function(){}).install=function(){var t;e.HTMLMediaElement&&(t=HTMLMediaElement.prototype.play,HTMLMediaElement.prototype.play=function(){var e=t.apply(this);return e&&e.catch((function(){})),e})}),sf((af.VideoPlaybackQuality=function(){}).install=function(){var t;e.HTMLVideoElement&&!(t=HTMLVideoElement.prototype).getVideoPlaybackQuality&&("webkitDroppedFrameCount"in t||lt())&&(t.getVideoPlaybackQuality=$f)}),sf((af.VTTCue=function(){}).install=function(){if(!e.VTTCue&&e.TextTrackCue){var t=null,n=TextTrackCue.length;if(3==n)t=Zf;else if(6==n)t=Jf;else{try{var i=!!Zf(1,2,"")}catch(e){i=!1}i&&(t=Zf)}t&&(e.VTTCue=function(e,n,i){return t(e,n,i)})}}),eg.prototype.parseInit=function(){},eg.prototype.setSequenceMode=function(){},eg.prototype.parseMedia=function(e,t){for(var n,i=null,r=[],a=yt(e).split(/\r?\n/),s=(a=u(a)).next();!s.done;s=a.next())(s=s.value)&&!/^\s+$/.test(s)&&(s=tg.exec(s))&&(n=ng.exec(s[1]),s=new J(n=60*parseInt(n[1],10)+parseFloat(n[2].replace(",",".")),t.segmentEnd||n+2,s[2]),i&&(i.endTime=n,r.push(i)),i=s);return i&&r.push(i),r},F("shaka.text.LrcTextParser",eg);var tg=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,ng=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;function ig(){}function rg(e,t){for(var n=u(t.split(" ")),i=n.next();!i.done;i=n.next())switch(i.value){case"underline":e.textDecoration.includes("underline")||e.textDecoration.push("underline");break;case"noUnderline":e.textDecoration.includes("underline")&&Q(e.textDecoration,"underline");break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&Q(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&Q(e.textDecoration,"overline")}}function ag(e,t,n,i,r){return r=void 0===r||r,(e=og(e,n,i))||(r?sg(t,n,i):null)}function sg(e,t,n){return e?Vl(e,Ig,n)||ug(e,t,n):null}function og(e,t,n){return Vl(e,Ig,n)||ug(e,t,n)}function ug(e,t,n){e=lg(e,"style",t,"");for(var i=null,r=0;r<e.length;r++){var a=Hl(e[r],"urn:ebu:tt:style",n);(a=(a=a||Vl(e[r],Ig,n))||og(e[r],t,n))&&(i=a)}return i}function lg(e,t,n,i,r){var a=[];if(e&&!(n.length<1)){var s=e;for(e=null;s&&!(e=r?Hl(s,r,t):s.getAttribute(t))&&(s=s.parentNode)instanceof Element;);if(t=e)for(r=(t=u(t.split(" "))).next();!r.done;r=t.next())for(r=r.value,s=(e=u(n)).next();!s.done;s=e.next())if(i+(s=s.value).getAttribute("xml:id")==r){a.push(s);break}}return a}function cg(e,t,n,i){return e=dg(e,t),null==n?n=e.start:null!=e.start&&(n+=e.start),null==i?i=e.end:null!=e.start&&(i+=e.start),{start:n,end:i}}function dg(e,t){var n=hg(e.getAttribute("begin"),t),i=hg(e.getAttribute("end"),t);e=hg(e.getAttribute("dur"),t);return{start:n,end:i=null==i&&null!=e?n+e:i}}function hg(e,t){var n=null;if(bg.test(e)){n=bg.exec(e);var i=Number(n[1]),r=Number(n[2]),a=Number(n[3]),s=Number(n[4]);n=(a+=(s+=(Number(n[5])||0)/t.h)/t.frameRate)+60*r+3600*i}else if(Ag.test(e))n=fg(Ag,e);else if(Eg.test(e))n=fg(Eg,e);else if(Tg.test(e))n=Tg.exec(e),n=Number(n[1])/t.frameRate;else if(wg.test(e))n=wg.exec(e),n=Number(n[1])/t.g;else if(Sg.test(e))n=fg(Sg,e);else if(e)throw new Le(2,2,2001,"Could not parse cue time range in TTML");return n}function fg(e,t){return null==(t=e.exec(t))||""==t[0]?null:(Number(t[4])||0)/1e3+(Number(t[3])||0)+60*(Number(t[2])||0)+3600*(Number(t[1])||0)}function gg(e,t,n,i){this.frameRate=Number(e)||30,this.h=Number(t)||1,this.g=Number(i),0==this.g&&(this.g=e?this.frameRate*this.h:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}qt["application/x-subtitle-lrc"]=function(){return new eg},ig.prototype.parseInit=function(){},ig.prototype.setSequenceMode=function(){},ig.prototype.parseMedia=function(e,t){e=yt(e);var n=[],i=new DOMParser,r=null;if(""!=e){try{r=i.parseFromString(e,"text/xml")}catch(e){throw new Le(2,2,2005,"Failed to parse TTML.")}if(r){if(e=r.getElementsByTagName("parsererror")[0])throw new Le(2,2,2005,e.textContent);var a=r.getElementsByTagName("tt")[0];if(!a)throw new Le(2,2,2005,"TTML does not contain <tt> tag.");if(!(r=a.getElementsByTagName("body")[0]))return[];var s=Vl(a,kg,"frameRate"),o=Vl(a,kg,"subFrameRate"),l=Vl(a,kg,"frameRateMultiplier"),c=Vl(a,kg,"tickRate"),d=Vl(a,kg,"cellResolution");e=a.getAttribute("xml:space")||"default",i=Vl(a,Ig,"extent");if("default"!=e&&"preserve"!=e)throw new Le(2,2,2005,"Invalid xml:space value: "+e);e="default"==e;s=new gg(s,o,l,c),d=(d=d&&/^(\d+) (\d+)$/.exec(d))?{columns:parseInt(d[1],10),rows:parseInt(d[2],10)}:null,o=(o=a.getElementsByTagName("metadata")[0])?Array.from(o.childNodes).filter((function(e){return e instanceof Element})):[],l=Array.from(a.getElementsByTagName("style")),c=[];for(var h=u(a=Array.from(a.getElementsByTagName("region"))),f=h.next();!f.done;f=h.next()){var g,p,m,v=f.value,y=(f=new me,v.getAttribute("xml:id"));y?(f.id=y,m=null,y=(m=i?pg.exec(i)||yg.exec(i):m)?Number(m[1]):null,m=m?Number(m[2]):null,(g=sg(v,l,"extent"))&&null!=(g=(p=pg.exec(g))||yg.exec(g))&&(f.width=Number(g[1]),f.height=Number(g[2]),p||(null!=y&&(f.width=100*f.width/y),null!=m&&(f.height=100*f.height/m)),f.widthUnits=p||null!=y?ve:0,f.heightUnits=p||null!=m?ve:0),(v=sg(v,l,"origin"))&&null!=(g=(p=pg.exec(v))||yg.exec(v))&&(f.viewportAnchorX=Number(g[1]),f.viewportAnchorY=Number(g[2]),p||(null!=m&&(f.viewportAnchorY=100*f.viewportAnchorY/m),null!=y&&(f.viewportAnchorX=100*f.viewportAnchorX/y)),f.viewportAnchorUnits=p||null!=y?ve:0)):f=null,f&&c.push(f)}if(jl(r,"p").length)throw new Le(2,2,2001,"<p> can only be inside <div> in TTML");for(h=(i=u(jl(r,"div"))).next();!h.done;h=i.next())if(jl(h.value,"span").length)throw new Le(2,2,2001,"<span> can only be inside <p> in TTML");(r=function e(t,n,i,r,a,s,o,l,c,d,h){var f=t.parentNode;if(t.nodeType==Node.COMMENT_NODE)return null;if(t.nodeType==Node.TEXT_NODE){if(!h)return null;var g=document.createElement("span");g.textContent=t.textContent}else g=t;for(var p=null,m=u(Lg),v=m.next();!v.done&&!(p=lg(g,"backgroundImage",r,"#",v.value)[0]);v=m.next());if(m=h,"p"!=t.nodeName&&!p||(h=!0),l="default"==(g.getAttribute("xml:space")||(l?"default":"preserve")),v=Array.from(g.childNodes).every((function(e){return e.nodeType==Node.TEXT_NODE})),t=[],!v)for(var y=u(g.childNodes),b=y.next();!b.done;b=y.next())(b=e(b.value,n,i,r,a,s,o,l,c,g,h))&&t.push(b);r=null!=d,y=/\S/.test(g.textContent);var A,E=g.hasAttribute("begin")||g.hasAttribute("end")||g.hasAttribute("dur");if(!(E||y||"br"==g.tagName||0!=t.length||r&&!l))return null;for(y=(b=dg(g,i)).start,b=b.end;f&&f.nodeType==Node.ELEMENT_NODE&&"tt"!=f.tagName;)y=(b=cg(f,i,y,b)).start,b=b.end,f=f.parentNode;if(null==y&&(y=0),y+=n,b=null==b?1/0:b+n,!E&&0<t.length)for(y=1/0,b=0,i=(n=u(t)).next();!i.done;i=n.next())i=i.value,y=Math.min(y,i.startTime),b=Math.max(b,i.endTime);return"br"==g.tagName?((a=new J(y,b,"")).lineBreak=!0,a):(n="",v&&(n=g.textContent,l)&&(n=(n=n.trim()).replace(/\s+/g," ")),(n=new J(y,b,n)).nestedCues=t,h||(n.isContainer=!0),c&&(n.cellResolution=c),c=lg(g,"region",s,"")[0],g.hasAttribute("region")&&c&&c.getAttribute("xml:id")&&(A=c.getAttribute("xml:id"),n.region=o.filter((function(e){return e.id==A}))[0]),o=c,d&&r&&!g.getAttribute("region")&&!g.getAttribute("style")&&(o=lg(d,"region",s,"")[0]),function(e,t,n,i,r,a,s){var o;"rtl"==ag(t,n,r,"direction",a=a||s)&&(e.direction="rtl"),"tb"==(s=ag(t,n,r,"writingMode",a))||"tblr"==s?e.writingMode="vertical-lr":"tbrl"==s?e.writingMode="vertical-rl":"rltb"==s||"rl"==s?e.direction="rtl":s&&(e.direction=se),(s=ag(t,n,r,"textAlign",!0))?(e.positionAlign=xg[s],e.lineAlign=Cg[s],e.textAlign=ie[s.toUpperCase()]):e.textAlign=ne,(s=ag(t,n,r,"displayAlign",!0))&&(e.displayAlign=ae[s.toUpperCase()]),(s=ag(t,n,r,"color",a))&&(e.color=s),(s=ag(t,n,r,"backgroundColor",a))&&(e.backgroundColor=s),(s=ag(t,n,r,"border",a))&&(e.border=s),(s=ag(t,n,r,"fontFamily",a))&&(e.fontFamily=s),(s=ag(t,n,r,"fontWeight",a))&&"bold"==s&&(e.fontWeight=700),s=ag(t,n,r,"wrapOption",a),e.wrapLine=!s||"noWrap"!=s,(s=ag(t,n,r,"lineHeight",a))&&s.match(vg)&&(e.lineHeight=s),(s=ag(t,n,r,"fontSize",a))&&(s.match(vg)||s.match(mg))&&(e.fontSize=s),(s=ag(t,n,r,"fontStyle",a))&&(e.fontStyle=pe[s.toUpperCase()]),i&&(s=i.getAttribute("imageType")||i.getAttribute("imagetype"),o=i.getAttribute("encoding"),i=i.textContent.trim(),"PNG"==s)&&"Base64"==o&&i&&(e.backgroundImage="data:image/png;base64,"+i),(i=ag(t,n,r,"textOutline",a))&&((i=i.split(" "))[0].match(vg)?e.textStrokeColor=e.color:(e.textStrokeColor=i[0],i.shift()),i[0]&&i[0].match(vg)?e.textStrokeWidth=i[0]:e.textStrokeColor=""),(i=ag(t,n,r,"letterSpacing",a))&&i.match(vg)&&(e.letterSpacing=i),(i=ag(t,n,r,"linePadding",a))&&i.match(vg)&&(e.linePadding=i),(a=ag(t,n,r,"opacity",a))&&(e.opacity=parseFloat(a)),(n=sg(n,r,"textDecoration"))&&rg(e,n),(t=og(t,r,"textDecoration"))&&rg(e,t)}(n,g,o,p,a,m,0==t.length),n)}(r,t.periodStart,s,o,l,a,c,e,d,null,!1))&&n.push(r)}}return n},F("shaka.text.TtmlTextParser",ig);var pg=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,mg=/^(\d{1,2}(?:\.\d+)?|100)%$/,vg=/^(\d+px|\d+em|\d*\.?\d+c)$/,yg=/^(\d+)px (\d+)px$/,bg=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,Ag=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,Eg=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,Tg=/^(\d*(?:\.\d*)?)f$/,wg=/^(\d*(?:\.\d*)?)t$/,Sg=RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"),Cg={left:le,center:"center",right:"end",start:le,end:"end"},xg={left:"line-left",center:"center",right:"line-right"},kg=["http://www.w3.org/ns/ttml#parameter","http://www.w3.org/2006/10/ttaf1#parameter"],Ig=["http://www.w3.org/ns/ttml#styling","http://www.w3.org/2006/10/ttaf1#styling"],Lg=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];function Rg(){this.g=new ig}function Dg(){this.g=!1}function _g(e){for(var t=u(Object.entries(de)),n=t.next();!n.done;n=t.next()){n=(i=u(n.value)).next().value;var i=i.next().value,r=new J(0,0,"");r.color=i,e.set(n,r)}for(n=(t=u(Object.entries(he))).next();!n.done;n=t.next())n=(i=u(n.value)).next().value,i=i.next().value,(r=new J(0,0,"")).backgroundColor=i,e.set(n,r)}function Mg(e,t,n){0===n.size&&_g(n),e=function(e){for(var t=[],n=-1,i="",r=0;r<e.length;r++)if("/"===e[r]){var a=e.indexOf(">",r);if(a<=r)return e;a=e.substring(r+1,a);var s=t.pop();if(!a||!s)return e;if(s===a)i+="/"+a+">";else{if(!s.startsWith("c.")||"c"!==a)return e;i+="/"+s+">"}r+=a.length+1}else"<"===e[r]?n=r+1:">"===e[r]&&0<n&&(t.push(e.substr(n,r-n)),n=-1),i+=e[r];return i}(e);for(var i=[],r=-1,a=0;a<e.length;a++)"<"===e[a]?r=a+1:">"===e[a]&&0<r&&((r=e.substr(r,a-r)).match(Bg)&&i.push(r),r=-1);for(a=(i=u(i)).next();!a.done;a=i.next())a=a.value,e=e.replace("<"+a+">",'<div time="'+a+'">'),e+="</div>";if(a=tc("<span>"+e+"</span>","span"))if(i=[],1!=(a=a.childNodes).length||(r=a[0]).nodeType!=Node.TEXT_NODE&&r.nodeType!=Node.CDATA_SECTION_NODE){for(a=(e=u(a)).next();!a.done;a=e.next())!function e(t,n,i,r){var a=n.clone();if(t.nodeType===Node.ELEMENT_NODE&&t.nodeName)for(var s=u(t.nodeName.split(/[ .]+/)),o=s.next();!o.done;o=s.next()){var l;switch(o=o.value,r.has(o)&&(l=r.get(o))&&(a.backgroundColor=Og(l.backgroundColor,a.backgroundColor),a.color=Og(l.color,a.color),a.fontFamily=Og(l.fontFamily,a.fontFamily),a.fontSize=Og(l.fontSize,a.fontSize),a.fontWeight=l.fontWeight,a.fontStyle=l.fontStyle,a.opacity=l.opacity,a.wrapLine=l.wrapLine),o){case"b":a.fontWeight=700;break;case"i":a.fontStyle="italic";break;case"u":a.textDecoration.push("underline");break;case"div":(o=(o=t.getAttribute("time"))&&Ng(new pd(o)))&&(a.startTime=o)}}if(ql(t))for(s=!0,r=u(t.textContent.split("\n")),t=r.next();!t.done;t=r.next())t=t.value,s||((s=n.clone()).lineBreak=!0,i.push(s)),0<t.length&&((s=a.clone()).payload=t,i.push(s)),s=!1;else for(t=(n=u(t.childNodes)).next();!t.done;t=n.next())e(t.value,a,i,r)}(a.value,t,i,n);t.nestedCues=i}else t.payload=e;else t.payload=e}function Og(e,t){return e&&0<e.length?e:t}function Pg(e,t,n){var i;(i=/^align:(start|middle|center|end|left|right)$/.exec(t))?(t=i[1],e.textAlign="middle"==t?ne:ie[t.toUpperCase()]):(i=/^vertical:(lr|rl)$/.exec(t))?e.writingMode="lr"==i[1]?"vertical-lr":"vertical-rl":(i=/^size:([\d.]+)%$/.exec(t))?e.size=Number(i[1]):(i=/^position:([\d.]+)%(?:,(line-left|line-right|center|start|end))?$/.exec(t))?(e.position=Number(i[1]),i[2]&&(t=i[2],e.positionAlign="line-left"==t||"start"==t?"line-left":"line-right"==t||"end"==t?"line-right":"center")):(i=/^region:(.*)$/.exec(t))?(t=function(e,t){return(e=e.filter((function(e){return e.id==t}))).length?e[0]:null}(n,i[1]))&&(e.region=t):(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))?(e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=ce[n[2].toUpperCase()])):(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))&&(e.lineInterpretation=ue,e.line=Number(n[1]),n[2])&&(e.lineAlign=ce[n[2].toUpperCase()])}function Ng(e){var t,n;return null==(e=vd(e,Bg))||(t=Number(e[2]),n=Number(e[3]),59<t)||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}qt["application/ttml+xml"]=function(){return new ig},Rg.prototype.parseInit=function(e){var t=!1;if((new ur).box("moov",lr).box("trak",lr).box("mdia",lr).box("minf",lr).box("stbl",lr).U("stsd",cr).box("stpp",(function(e){t=!0,e.parser.stop()})).parse(e),!t)throw new Le(2,2,2007)},Rg.prototype.setSequenceMode=function(){},Rg.prototype.parseMedia=function(e,t){var n=this,i=!1,r=[];if((new ur).box("mdat",dr((function(e){i=!0,r=r.concat(n.g.parseMedia(e,t))}))).parse(e,!1),i)return r;throw new Le(2,2,2007)},F("shaka.text.Mp4TtmlParser",Rg),qt['application/mp4; codecs="stpp"']=function(){return new Rg},qt['application/mp4; codecs="stpp.ttml"']=function(){return new Rg},qt['application/mp4; codecs="stpp.ttml.im1t"']=function(){return new Rg},qt['application/mp4; codecs="stpp.TTML.im1t"']=function(){return new Rg},Dg.prototype.parseInit=function(){},Dg.prototype.setSequenceMode=function(e){this.g=e},Dg.prototype.parseMedia=function(e,t){var n=yt(e),i=(n=n.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n")).split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(i[0]))throw new Le(2,2,2e3);if(n=t.vttOffset,i[0].includes("X-TIMESTAMP-MAP")&&this.g){var r=i[0].match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),a=i[0].match(/MPEGTS:(\d+)/m);if(r&&a){if(null==(n=Ng(new pd(r[1]))))throw new Le(2,2,2e3);for(a=Number(a[1]),r=t.segmentStart;95443.7176888889<=r;)r-=95443.7176888889,a+=8589934592;n=t.periodStart+a/9e4-n}}a=[];for(var s=(r=u(i[0].split("\n"))).next();!s.done;s=r.next())if(s=s.value,/^Region:/.test(s)){s=new pd(s);var o=new me;yd(s),md(s);for(var l=yd(s);l;){var c=o;(l=/^id=(.*)$/.exec(d=l))?c.id=l[1]:(l=/^width=(\d{1,2}|100)%$/.exec(d))?c.width=Number(l[1]):(l=/^lines=(\d+)$/.exec(d))?(c.height=Number(l[1]),c.heightUnits=2):(l=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(d))?(c.regionAnchorX=Number(l[1]),c.regionAnchorY=Number(l[2])):(l=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(d))?(c.viewportAnchorX=Number(l[1]),c.viewportAnchorY=Number(l[2])):/^scroll=up$/.exec(d)&&(c.scroll="up"),md(s),l=yd(s)}a.push(o)}for(_g(r=new Map),s=[],o=(i=u(i.slice(1))).next();!o.done;o=i.next()){if((1!=(o=o.value.split("\n")).length||o[0])&&!/^NOTE($|[ \t])/.test(o[0])&&"STYLE"==o[0]&&o[1].includes("::cue")){c="global",(l=o[1].match(/\((.*)\)/))&&(c=l.pop()),l=o.slice(2,-1),o[1].includes("}")&&(d=/\{(.*?)\}/.exec(o[1]))&&(l=d[1].split(";"));for(var d=new J(0,0,""),h=!1,f=0;f<l.length;f++){var g=/^\s*([^:]+):\s*(.*)/.exec(l[f]);if(g){var p=g[2].trim().replace(";","");switch(g[1].trim()){case"background-color":h=!0,d.backgroundColor=p;break;case"color":h=!0,d.color=p;break;case"font-family":h=!0,d.fontFamily=p;break;case"font-size":h=!0,d.fontSize=p;break;case"font-weight":700<=parseInt(p,10)&&(h=!0,d.fontWeight=700);break;case"font-style":switch(p){case"normal":h=!0,d.fontStyle=ge;break;case"italic":h=!0,d.fontStyle="italic";break;case"oblique":h=!0,d.fontStyle="oblique"}break;case"opacity":h=!0,d.opacity=parseFloat(p);break;case"text-shadow":h=!0,d.textShadow=p;break;case"white-space":h=!0,d.wrapLine="noWrap"!=p}}}h&&r.set(c,d)}if(f=n,1==o.length&&!o[0]||/^NOTE($|[ \t])/.test(o[0])||"STYLE"==o[0])o=null;else{if(c=null,o[0].includes("--\x3e")||(c=o[0],o.splice(0,1)),d=Ng(l=new pd(o[0])),g=vd(l,/[ \t]+--\x3e[ \t]+/g),h=Ng(l),null==d||null==g||null==h)throw new Le(2,2,2001,"Could not parse cue time range in WebVTT");for(d+=f,h+=f,f=o.slice(1).join("\n").trim(),r.has("global")?((o=r.get("global").clone()).startTime=d,o.endTime=h,o.payload=""):o=new J(d,h,""),Mg(f,o,r),md(l),d=yd(l);d;)Pg(o,d,a),md(l),d=yd(l);null!=c&&(o.id=c)}o&&s.push(o)}return s},F("shaka.text.VttTextParser",Dg);var Bg=/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;function Fg(){this.g=null}function Ug(){}function jg(e){var t,n;return null==(e=vd(e,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g))||(t=Number(e[2]),n=Number(e[3]),59<t)||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}function Gg(){this.g=new Dg}function Hg(e){var t="WEBVTT\n\n";if(""!=e)for(var n=(e=u((e=(e=e.replace(/\r+/g,"")).trim()).split("\n\n"))).next();!n.done;n=e.next())(n=n.value.split(/\n/))[0].match(/\d+/)&&n.shift(),n[0]=n[0].replace(/,/g,"."),t+=n.join("\n")+"\n\n";return t}function Vg(){}function Kg(e){return 0<=(e=parseInt(e.replace("&H",""),16))?"rgba("+(255&e)+","+(e>>8&255)+","+(e>>16&255)+","+(e>>24&255^255)/255+")":null}function qg(e){return 3600*((e=$g.exec(e))[1]?parseInt(e[1].replace(":",""),10):0)+60*parseInt(e[2],10)+parseFloat(e[3])}qt["text/vtt"]=function(){return new Dg},qt['text/vtt; codecs="vtt"']=function(){return new Dg},qt['text/vtt; codecs="wvtt"']=function(){return new Dg},Fg.prototype.parseInit=function(e){var t=this,n=!1;if((new ur).box("moov",lr).box("trak",lr).box("mdia",lr).U("mdhd",(function(e){e=ya(e.reader,e.version),t.g=e.timescale})).box("minf",lr).box("stbl",lr).U("stsd",cr).box("wvtt",(function(){n=!0})).parse(e),!this.g)throw new Le(2,2,2008);if(!n)throw new Le(2,2,2008)},Fg.prototype.setSequenceMode=function(){},Fg.prototype.parseMedia=function(e,t){if(!this.g)throw new Le(2,2,2008);var n,i=0,r=[],a=[],s=!1,o=!1,l=!1,c=null;if((new ur).box("moof",lr).box("traf",lr).U("tfdt",(function(e){s=!0,i=va(e.reader,e.version).ke})).U("tfhd",(function(e){c=ma(e.reader,e.flags).pe})).U("trun",(function(e){o=!0,r=ba(e.reader,e.version,e.flags).He})).box("mdat",dr((function(e){l=!0,n=e}))).parse(e,!1),!l&&!s&&!o)throw new Le(2,2,2008);for(var d=i,h=new ar(n,0),f=u(r),g=f.next();!g.done;g=f.next()){var p=(g=g.value).Vd||c,m=g.$c?i+g.$c:d,v=(d=m+(p||0),0);do{var y=h.N();v+=y;var b=null;"vttc"==fr(h.N())?8<y&&(b=h.Za(y-8)):h.skip(y-8),p&&b&&(y=function(e,t,n){var i,r,a;return(new ur).box("payl",dr((function(e){i=yt(e)}))).box("iden",dr((function(e){r=yt(e)}))).box("sttg",dr((function(e){a=yt(e)}))).parse(e),i?function(e,t,n,i,r){if(Mg(e,i=new J(i,r,""),new Map),t&&(i.id=t),n)for(t=yd(e=new pd(n));t;)Pg(i,t,[]),md(e),t=yd(e);return i}(i,r,a,t,n):null}(b,t.periodStart+m/this.g,t.periodStart+d/this.g),a.push(y))}while(g.sampleSize&&v<g.sampleSize)}return a.filter(We)},F("shaka.text.Mp4VttParser",Fg),qt['application/mp4; codecs="wvtt"']=function(){return new Fg},Ug.prototype.parseInit=function(){},Ug.prototype.setSequenceMode=function(){},Ug.prototype.parseMedia=function(e){var t=yt(e).replace(/\r+/g,"");if(e=[],""!=(t=t.trim()))for(var n=(t=u(t.split("\n\n"))).next();!n.done;n=t.next()){var i=jg(a=new pd((n=n.value.split("\n"))[0])),r=vd(a,/,/g),a=jg(a);if(null==i||null==r||null==a)throw new Le(2,2,2001,"Could not parse cue time range in SubViewer");e.push(new J(i,a,n.slice(1).join("\n").trim()))}return e},F("shaka.text.SbvTextParser",Ug),qt["text/x-subviewer"]=function(){return new Ug},Gg.prototype.parseInit=function(){},Gg.prototype.setSequenceMode=function(){},Gg.prototype.parseMedia=function(e,t){return e=we(Et(Hg(yt(e)))),this.g.parseMedia(e,t)},F("shaka.text.SrtTextParser",Gg),Gg.srt2webvtt=Hg,qt["text/srt"]=function(){return new Gg},Vg.prototype.parseInit=function(){},Vg.prototype.setSequenceMode=function(){},Vg.prototype.parseMedia=function(e){for(var t="",n="",i=(e=u(e=yt(e).split(/\r?\n\s*\r?\n/))).next();!i.done;i=e.next()){(a=Yg.exec(i.value))&&(i=a[1],a=a[2],"V4 Styles"==i||"V4+ Styles"==i?t=a:"Events"==i&&(n=a))}e=[];i=null;for(var r=(t=u(t.split(/\r?\n/))).next();!r.done;r=t.next())if(a=r.value,!/^\s*;/.test(a)&&(r=Xg.exec(a)))if(a=r[1].trim(),r=r[2].trim(),"Format"==a)i=r.split(Qg);else if("Style"==a){for(var a=r.split(Qg),s=(r={},0);s<i.length&&s<a.length;s++)r[i[s]]=a[s];e.push(r)}for(i=[],t=null,a={},r=(n=u(n.split(/\r?\n/))).next();!r.done;a={rd:a.rd},r=n.next())if(r=r.value,!/^\s*;/.test(r)&&(s=Xg.exec(r)))if(r=s[1].trim(),s=s[2].trim(),"Format"==r)t=s.split(Qg);else if("Dialogue"==r){s=s.split(Qg),r={};for(var o=0;o<t.length&&o<s.length;o++)r[t[o]]=s[o];if(s=new J(o=qg(r.Start),qg(r.End),s.slice(t.length-1).join(",").replace(/\\N/g,"\n").replace(/\{[^}]+\}/g,"")),a.rd=r.Style,r=e.find(function(e){return function(t){return t.Name==e.rd}}(a))){l=void 0,void 0,d=void 0;var l=s,c=r,d=c.Fontname;if(d&&(l.fontFamily=d),(d=c.Fontsize)&&(l.fontSize=d+"px"),(d=(d=c.PrimaryColour)&&Kg(d))&&(l.color=d),(d=(d=c.BackColour)&&Kg(d))&&(l.backgroundColor=d),c.Bold&&(l.fontWeight=700),c.Italic&&(l.fontStyle="italic"),c.Underline&&l.textDecoration.push("underline"),(d=c.Spacing)&&(l.letterSpacing=d+"px"),d=c.Alignment)switch(parseInt(d,10)){case 1:l.displayAlign=re,l.textAlign="start";break;case 2:l.displayAlign=re,l.textAlign=ne;break;case 3:l.displayAlign=re,l.textAlign="end";break;case 5:l.displayAlign="before",l.textAlign="start";break;case 6:l.displayAlign="before",l.textAlign=ne;break;case 7:l.displayAlign="before",l.textAlign="end";break;case 9:l.displayAlign="center",l.textAlign="start";break;case 10:l.displayAlign="center",l.textAlign=ne;break;case 11:l.displayAlign="center",l.textAlign="end"}(d=c.AlphaLevel)&&(l.opacity=parseFloat(d))}i.push(s)}return i},F("shaka.text.SsaTextParser",Vg);var zg,Wg,Yg=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,Xg=/^\s*([^:]+):\s*(.*)/,Qg=/\s*,\s*/,$g=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;function Zg(){}function Jg(e,t,n){function i(e){Se(r).setUint32(a,e.byteLength,!0),a+=4,r.set(we(e),a),a+=e.byteLength}var r,a;if(n&&n.byteLength)return t="string"==typeof t?Tt(t,!0):t,e=Tt(e=At(e),!0),r=new Uint8Array(12+e.byteLength+t.byteLength+n.byteLength),a=0,i(e),i(t),i(n),r;throw new Le(2,6,6015)}
/*
       @license
       EME Encryption Scheme Polyfill
       Copyright 2019 Google LLC
       SPDX-License-Identifier: Apache-2.0
       */function ep(){}function tp(){zg?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(zg=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=np):console.debug("EmeEncryptionSchemePolyfill: EME not found")}function np(e,t){var n,i=this;return R((function(r){return 1==r.g?(console.assert(i==navigator,'bad "this" for requestMediaKeySystemAccess'),y(r,zg.call(i,e,t),2)):hp(n=r.h)?(console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=zg,r.return(n)):(console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.requestMediaKeySystemAccess=ip,r.return(ip.call(i,e,t)))}))}function ip(e,t){var n,i,r,a,s,o,l,c,d=this;return R((function(h){if(1!=h.g)return c=h.h,h.return(new cp(c,n));for(console.assert(d==navigator,'bad "this" for requestMediaKeySystemAccess'),n=dp(e),i=[],r=u(t),a=r.next();!a.done;a=r.next())l=a.value,s=rp(l.videoCapabilities,n),o=rp(l.audioCapabilities,n),l.videoCapabilities&&l.videoCapabilities.length&&!s.length||l.audioCapabilities&&l.audioCapabilities.length&&!o.length||((l=Object.assign({},l)).videoCapabilities=s,l.audioCapabilities=o,i.push(l));if(i.length)return y(h,zg.call(d,e,i),2);throw(c=Error("Unsupported keySystem or supportedConfigurations.")).name="NotSupportedError",c.code=DOMException.NOT_SUPPORTED_ERR,c}))}function rp(e,t){return e&&e.filter((function(e){return!e.encryptionScheme||e.encryptionScheme==t}))}function ap(){}function sp(){Wg?console.debug("McEncryptionSchemePolyfill: Already installed."):navigator.mediaCapabilities?(Wg=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=op):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}function op(e){var t,n,i=this;return R((function(r){switch(r.g){case 1:return console.assert(i==navigator.mediaCapabilities,'bad "this" for decodingInfo'),y(r,Wg.call(i,e),2);case 2:if(t=r.h,!e.keySystemConfiguration)return r.return(t);if((n=t.keySystemAccess)&&hp(n))return console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=Wg,r.return(t);if(console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=up,n){r.A(3);break}return n=t,y(r,lp(e),4);case 4:return n.keySystemAccess=r.h,r.return(t);case 3:return r.return(up.call(i,e))}}))}function up(e){var t,n,i,r,a,s,o=this;return R((function(u){switch(u.g){case 1:return console.assert(o==navigator.mediaCapabilities,'bad "this" for decodingInfo'),t=null,e.keySystemConfiguration&&(i=e.keySystemConfiguration,r=i.keySystem,n=i.audio&&i.audio.encryptionScheme,i=i.video&&i.video.encryptionScheme,t=dp(r),r={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},n&&n!=t||i&&i!=t)?u.return(r):y(u,Wg.call(o,e),2);case 2:if((a=u.h).keySystemAccess)a.keySystemAccess=new cp(a.keySystemAccess,t);else if(e.keySystemConfiguration)return s=a,y(u,lp(e),5);u.A(3);break;case 5:s.keySystemAccess=u.h;case 3:return u.return(a)}}))}function lp(e){var t;return R((function(n){var i,r,a;return 1==n.g?(r=[],a=[],(i=e.keySystemConfiguration).audio&&r.push({robustness:i.audio.robustness||"",contentType:e.audio.contentType}),i.video&&a.push({robustness:i.video.robustness||"",contentType:e.video.contentType}),i={initDataTypes:i.initDataType?[i.initDataType]:[],distinctiveIdentifier:i.distinctiveIdentifier,persistentState:i.persistentState,sessionTypes:i.sessionTypes},r.length&&(i.audioCapabilities=r),a.length&&(i.videoCapabilities=a),t=i,y(n,navigator.requestMediaKeySystemAccess(e.keySystemConfiguration.keySystem,[t]),2)):(t=n.h,n.return(t))}))}function cp(e,t){this.h=e,this.g=t,this.keySystem=e.keySystem}function dp(e){return e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.chromecast")||e.startsWith("com.adobe")||e.startsWith("org.w3")?"cenc":e.startsWith("com.apple")?"cbcs-1-9":(console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function hp(e){var t=(e=e.getConfiguration()).audioCapabilities&&e.audioCapabilities[0];return!(!(e=e.videoCapabilities&&e.videoCapabilities[0]||t)||void 0===e.encryptionScheme)}function fp(){}function gp(){tp(),sp()}qt["text/x-ssa"]=function(){return new Vg},F("shaka.util.FairPlayUtils",Zg),Zg.commonFairPlayResponse=function(e,t){if(2===e){try{var n=yt(t.data)}catch(e){return}e=!1,"<ckc>"===(n=n.trim()).substr(0,5)&&"</ckc>"===n.substr(-6)&&(n=n.slice(5,-6),e=!0);try{var i=JSON.parse(n);i.ckc&&(n=i.ckc,e=!0),i.CkcMessage&&(n=i.CkcMessage,e=!0),i.License&&(n=i.License,e=!0)}catch(e){}e&&(t.data=Te(kt(n)))}},Zg.conaxFairPlayRequest=function(e,t){2===e&&(t.headers["Content-Type"]="application/octet-stream")},Zg.ezdrmFairPlayRequest=function(e,t){2===e&&(t.headers["Content-Type"]="application/octet-stream")},Zg.verimatrixFairPlayRequest=function(e,t){2===e&&(e=xt(e=we(t.body)),t.headers["Content-Type"]="application/x-www-form-urlencoded",t.body=Et("spc="+e))},Zg.conaxInitDataTransform=function(t,n,i){if("skd"!==n)return t;n=i.serverCertificate,i=At(t).split("skd://").pop().split("?").shift(),i=e.atob(i);for(var r=new ArrayBuffer(2*i.length),a=(r=new Uint16Array(r),0),s=i.length;a<s;a++)r[a]=i.charCodeAt(a);return Jg(t,r,n)},Zg.ezdrmInitDataTransform=function(e,t,n){return"skd"!==t?e:(t=n.serverCertificate,Jg(e,n=At(e).split(";").pop(),t))},Zg.verimatrixInitDataTransform=function(e,t,n){return"skd"!==t?e:(t=n.serverCertificate,Jg(e,n=At(e).split("skd://").pop(),t))},Zg.initDataTransform=Jg,Zg.defaultGetContentId=function(e){return new De(e=At(e)).Fa},Zg.isFairPlaySupported=function(){var e;return R((function(t){return 1==t.g?(e={initDataTypes:["cenc","sinf","skd"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]},A(t,2),y(t,navigator.requestMediaKeySystemAccess("com.apple.fps",[e]),4)):2!=t.g?t.return(!0):(w(t),t.return(!1))}))},F("EmeEncryptionSchemePolyfill",ep),ep.install=tp,F("McEncryptionSchemePolyfill",ap),ap.install=sp,cp.prototype.getConfiguration=function(){var e=this.h.getConfiguration();if(e.videoCapabilities)for(var t=u(e.videoCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.g;if(e.audioCapabilities)for(n=(t=u(e.audioCapabilities)).next();!n.done;n=t.next())n.value.encryptionScheme=this.g;return e},cp.prototype.createMediaKeys=function(){return this.h.createMediaKeys()},F("EncryptionSchemePolyfills",fp),fp.install=gp,void 0!==n&&n.exports&&(n.exports=fp)}.call(i,e,e,void 0),i.shaka)t[n]=i.shaka[n]}).call(this,n(7))},function(e,t,n){"use strict";var i=n(4),r=(i=n.n(i),n(5));(r=n.n(r)()(i.a)).push([e.i,'/* Reset CSS */\r\n* {\r\n  margin: 0;\r\n  padding: 0;\r\n  border: 0;\r\n  font-size: 100%;\r\n}\r\n\r\n/* Main CSS */\r\n.main__video {\r\n  width: 100%;\r\n}\r\n\r\n.video__wrapper {\r\n  position: relative;\r\n  display: flex;\r\n  width: 100%;\r\n  height: 100%;\r\n  transition: height 250ms ease-in-out, transform 250ms ease-in-out;\r\n  background: black;\r\n}\r\n\r\n.video__wrapper.quiz {\r\n  width: 100%;\r\n  height: calc((100 - var(--size, 20)) * 1%);\r\n  margin-bottom: auto;\r\n  justify-content: center;\r\n  overflow: hidden;\r\n}\r\n\r\n.title__wrapper {\r\n  position: absolute;\r\n  top: 0;\r\n  width: 100%;\r\n  z-index: 2;\r\n  background: linear-gradient(180deg, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0.6) 100%);\r\n}\r\n\r\n.title__inner {\r\n  margin: 0 2.938rem 0 2.938rem;\r\n  padding-top: 2.875rem;\r\n}\r\n\r\n.title {\r\n  font-size: 1.5rem;\r\n  line-height: 2.25rem;\r\n  color: rgba(255, 255, 255, 0.87);\r\n  margin-bottom: 0.375rem;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n}\r\n\r\n.date {\r\n  font-size: 1rem;\r\n  line-height: 1.5rem;\r\n  color: rgba(255, 255, 255, 0.38);\r\n  margin-bottom: 0.875rem;\r\n}\r\n\r\n.controls__wrapper {\r\n  position: absolute;\r\n  bottom: 0;\r\n  width: 100%;\r\n  z-index: 2;\r\n  background: linear-gradient(180deg, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0.6) 100%);\r\n  border-radius: 0 0 0.5rem 0.5rem;\r\n}\r\n\r\n.controls {\r\n  margin-bottom: 1.5rem;\r\n}\r\n\r\n.icon__wrapper {\r\n  position: absolute;\r\n  left: 50%;\r\n  top: 50%;\r\n  color: rgba(255, 255, 255, 0.87);\r\n  background-color: rgba(0, 14, 43, 0.5);\r\n  border-radius: 50%;\r\n  height: 6.25rem;\r\n  width: 6.25rem;\r\n  display: none;\r\n  transform: translateX(-50%) translateY(-50%);\r\n  align-items: center;\r\n  justify-content: center;\r\n  animation: ytp-bezel-fadeout 0.5s linear 1 normal forwards;\r\n}\r\n\r\n.icon__inner {\r\n  width: -moz-fit-content;\r\n  width: fit-content;\r\n}\r\n\r\n.mask {\r\n  position: absolute;\r\n  top: 0;\r\n  bottom: 0;\r\n  background: rgba(0, 0, 0, 0.6);\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  border-radius: 0.5rem;\r\n}\r\n\r\n.mask svg {\r\n  cursor: pointer;\r\n}\r\n\r\n.loading__mask {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  height: 100%;\r\n  width: 100%;\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  background-color: #000E2B;\r\n  border-radius: 0.5rem;\r\n  z-index: 100;\r\n}\r\n\r\n.loading__mask.transparent {\r\n  background-color: transparent;\r\n}\r\n\r\n.loading__spinner {\r\n  border: 0.5rem solid #fcfcfd86;\r\n  border-top: 0.5rem solid #FCFCFD;\r\n  border-radius: 100%;\r\n  width: 4.167rem;\r\n  height: 4.167rem;\r\n  animation: spin 2s linear infinite;\r\n}\r\n\r\n.progress__wrapper {\r\n  width: 94%;\r\n  margin: auto;\r\n}\r\n\r\n.progress__bar {\r\n  width: 100% !important;\r\n  margin: auto;\r\n  background: linear-gradient(to right, #EF4035 0%, #EF4035 calc(var(--progress-percent, 0) * 1%), rgba(255, 255, 255, 0.87) 0%, rgba(255, 255, 255, 0.87) calc(var(--buffered-percent, 0) * 1%), rgba(255, 255, 255, 0.43) 0%, rgba(255, 255, 255, 0.43) 100%) !important;\r\n  appearance: none;\r\n  height: 0.25rem;\r\n  background-repeat: no-repeat;\r\n}\r\n\r\n.progress__bar.live {\r\n  pointer-events: none;\r\n  background: linear-gradient(to right, #EF4035 0%, #EF4035 100%, rgba(255, 255, 255, 0.87) 0%, rgba(255, 255, 255, 0.87) 0%, rgba(255, 255, 255, 0.43) 0%, rgba(255, 255, 255, 0.43) 100%) !important;\r\n}\r\n\r\n.control__btns {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  width: 94%;\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n  margin-top: 0.5rem;\r\n}\r\n\r\n.control__btns__leftside {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.75rem;\r\n}\r\n\r\n.button {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  cursor: pointer;\r\n}\r\n\r\n.volume__wrapper {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.control__volume__slider {\r\n  width: 0.0001px;\r\n  transform: scaleX(0);\r\n  transform-origin: left;\r\n  transition: width 150ms ease-in-out, transform 150ms ease-in-out;\r\n  margin-left: 0.125rem;\r\n  appearance: none;\r\n  height: 0.25rem;\r\n  background: rgba(255, 255, 255, 0.43);\r\n  background-image: linear-gradient(rgba(255, 255, 255, 0.87), rgba(255, 255, 255, 0.87));\r\n  background-size: calc(var(--volume, 1) * 100%) 100%;\r\n  background-repeat: no-repeat;\r\n}\r\n\r\n.hide {\r\n  display: none !important;\r\n}\r\n\r\n.video__timer {\r\n  color: #fff;\r\n  font-size: 0.875rem;\r\n  line-height: 1.25rem;\r\n}\r\n\r\n.view__count {\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: center;\r\n  align-items: center;\r\n  gap: 0.25rem;\r\n  position: absolute;\r\n  width: 3.375rem;\r\n  height: 1.375rem;\r\n  right: 1.5rem;\r\n  bottom: 1.5rem;\r\n  background: rgba(0, 14, 43, 0.5);\r\n  border-radius: 0.25rem;\r\n}\r\n\r\n.views {\r\n  font-weight: 600;\r\n  font-size: 0.75rem;\r\n  line-height: 1.125rem;\r\n  color: white;\r\n}\r\n\r\n/* Interactive CSS */\r\n.interactive__quiz {\r\n  width: 100%;\r\n  height: calc(var(--size, 20) * 1%);\r\n  transition: height 250ms ease-in-out, transform 250ms ease-in-out;\r\n}\r\n\r\n.interactive__quiz.hidden {\r\n  height: 0;\r\n}\r\n\r\n/* Ads CSS */\r\n.ads__video {\r\n  width: 100%;\r\n  height: 100%;\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n}\r\n\r\n.ad__container {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  z-index: 1000;\r\n}\r\n\r\n.skip__ad {\r\n  position: absolute;\r\n  bottom: 2rem;\r\n  right: 2rem;\r\n  padding: 0.75rem 1.25rem;\r\n  border-radius: 0.625rem;\r\n  background: rgba(0, 14, 43, 0.7);\r\n  color: rgba(255, 255, 255, 0.87);\r\n  z-index: 1001;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  gap: 0.25rem;\r\n}\r\n\r\n.skip__ad.active {\r\n  background: rgba(255, 255, 255, 0.87);\r\n  color: rgba(0, 14, 43, 1);\r\n}\r\n\r\n.skip__text {\r\n  font-size: 0.813rem;\r\n  font-weight: 600;\r\n  line-height: 1.25rem;\r\n}\r\n\r\n/* Fingerprint CSS */\r\n.fingerprint {\r\n  position: absolute;\r\n  font-weight: 600;\r\n  font-size: 0.75rem;\r\n  line-height: 1.125rem;\r\n  color: rgba(255, 255, 255, 0.6);\r\n  pointer-events: none;\r\n  z-index: 99;\r\n}\r\n\r\n.pos-1 {\r\n  top: 20%;\r\n  left: 5%;\r\n}\r\n\r\n.pos-2 {\r\n  top: 20%;\r\n  left: 45%;\r\n}\r\n\r\n.pos-3 {\r\n  top: 20%;\r\n  right: 5%;\r\n}\r\n\r\n.pos-4 {\r\n  top: 50%;\r\n  left: 5%;\r\n}\r\n\r\n.pos-5 {\r\n  top: 50%;\r\n  left: 45%;\r\n}\r\n\r\n.pos-6 {\r\n  top: 50%;\r\n  right: 5%;\r\n}\r\n\r\n.pos-7 {\r\n  bottom: 20%;\r\n  left: 5%;\r\n}\r\n\r\n.pos-8 {\r\n  bottom: 20%;\r\n  left: 45%;\r\n}\r\n\r\n.pos-9 {\r\n  bottom: 20%;\r\n  right: 5%;\r\n}\r\n\r\n.control__btns__rightside {\r\n  position: relative;\r\n  display: flex;\r\n  gap: 0.75rem;\r\n  align-items: center;\r\n}\r\n\r\n.fa-solid {\r\n  cursor: pointer;\r\n  color: white;\r\n}\r\n\r\n.setting__box {\r\n  position: absolute;\r\n  bottom: 4rem;\r\n  right: 0.3rem;\r\n  width: 250px;\r\n  background: rgba(28,28,28,.9);\r\n  color: white;\r\n  padding: 12px;\r\n}\r\n\r\n.switch__track, .switch__quality {\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding: 12px;\r\n}\r\n\r\n.switch__track, .switch__quality > * {\r\n  padding: 12px 0;\r\n  cursor: pointer;\r\n}\r\n\r\n/* Input Range CSS */\r\ninput[type="range"]:hover {\r\n  cursor: pointer;\r\n}\r\n\r\n/* Input Thumb */\r\ninput[type="range"]::-webkit-slider-thumb {\r\n  appearance: none;\r\n  height: 0.75rem;\r\n  width: 0.75rem;\r\n  border-radius: 50%;\r\n  background: rgba(255, 255, 255);\r\n  cursor: pointer;\r\n  box-shadow: 0 0 0.125rem 0 #555;\r\n  transition: background .3s ease-in-out;\r\n}\r\n\r\ninput[type="range"]::-moz-range-thumb {\r\n  appearance: none;\r\n  height: 0.75rem;\r\n  width: 0.75rem;\r\n  border-radius: 50%;\r\n  background: rgba(255, 255, 255);\r\n  cursor: pointer;\r\n  box-shadow: 0 0 0.125rem 0 #555;\r\n  transition: background .3s ease-in-out;\r\n}\r\n\r\ninput[type="range"]::-ms-thumb {\r\n  appearance: none;\r\n  height: 0.75rem;\r\n  width: 0.75rem;\r\n  border-radius: 50%;\r\n  background: rgba(255, 255, 255);\r\n  cursor: pointer;\r\n  box-shadow: 0 0 0.125rem 0 #555;\r\n  transition: background .3s ease-in-out;\r\n}\r\n\r\ninput[type="range"]::-webkit-slider-thumb:hover {\r\n  background: rgba(255, 255, 255);\r\n}\r\n\r\ninput[type="range"]::-moz-range-thumb:hover {\r\n  background: rgba(255, 255, 255);\r\n}\r\n\r\ninput[type="range"]::-ms-thumb:hover {\r\n  background: rgba(255, 255, 255);\r\n}\r\n\r\n/* Input Track */\r\ninput[type=range]::-webkit-slider-runnable-track  {\r\n  appearance: none;\r\n  box-shadow: none;\r\n  border: none;\r\n  background: transparent;\r\n}\r\n\r\ninput[type=range]::-moz-range-track {\r\n  appearance: none;\r\n  box-shadow: none;\r\n  border: none;\r\n  background: transparent;\r\n}\r\n\r\ninput[type="range"]::-ms-track {\r\n  appearance: none;\r\n  box-shadow: none;\r\n  border: none;\r\n  background: transparent;\r\n}\r\n\r\n/* Animation */\r\n@keyframes ytp-bezel-fadeout {\r\n  from {\r\n    opacity: 1;\r\n    -webkit-transform: translate(-50%, -50%) scale(1);\r\n    transform: translate(-50%, -50%) scale(1);\r\n    transform-origin: center;\r\n  }\r\n  to {\r\n    opacity: 0;\r\n    -webkit-transform: translate(-50%, -50%) scale(2);\r\n    transform: translate(-50%, -50%) scale(2);\r\n    transform-origin: center;\r\n  }\r\n}\r\n\r\n\r\n@keyframes spin {\r\n  from {\r\n    transform: rotate(0);\r\n  }\r\n  to {\r\n    transform: rotate(360deg);\r\n  }\r\n}',"",{version:3,sources:["webpack://./../src/css/index.css"],names:[],mappings:"AAAA,cAAc;AACd;EACE,SAAS;EACT,UAAU;EACV,SAAS;EACT,eAAe;AACjB;;AAEA,aAAa;AACb;EACE,WAAW;AACb;;AAEA;EACE,kBAAkB;EAClB,aAAa;EACb,WAAW;EACX,YAAY;EACZ,iEAAiE;EACjE,iBAAiB;AACnB;;AAEA;EACE,WAAW;EACX,0CAA0C;EAC1C,mBAAmB;EACnB,uBAAuB;EACvB,gBAAgB;AAClB;;AAEA;EACE,kBAAkB;EAClB,MAAM;EACN,WAAW;EACX,UAAU;EACV,iFAAiF;AACnF;;AAEA;EACE,6BAA6B;EAC7B,qBAAqB;AACvB;;AAEA;EACE,iBAAiB;EACjB,oBAAoB;EACpB,gCAAgC;EAChC,uBAAuB;EACvB,mBAAmB;EACnB,gBAAgB;EAChB,uBAAuB;AACzB;;AAEA;EACE,eAAe;EACf,mBAAmB;EACnB,gCAAgC;EAChC,uBAAuB;AACzB;;AAEA;EACE,kBAAkB;EAClB,SAAS;EACT,WAAW;EACX,UAAU;EACV,iFAAiF;EACjF,gCAAgC;AAClC;;AAEA;EACE,qBAAqB;AACvB;;AAEA;EACE,kBAAkB;EAClB,SAAS;EACT,QAAQ;EACR,gCAAgC;EAChC,sCAAsC;EACtC,kBAAkB;EAClB,eAAe;EACf,cAAc;EACd,aAAa;EACb,4CAA4C;EAC5C,mBAAmB;EACnB,uBAAuB;EACvB,0DAA0D;AAC5D;;AAEA;EACE,uBAAuB;EACvB,kBAAkB;AACpB;;AAEA;EACE,kBAAkB;EAClB,MAAM;EACN,SAAS;EACT,8BAA8B;EAC9B,WAAW;EACX,YAAY;EACZ,aAAa;EACb,uBAAuB;EACvB,mBAAmB;EACnB,qBAAqB;AACvB;;AAEA;EACE,eAAe;AACjB;;AAEA;EACE,aAAa;EACb,uBAAuB;EACvB,mBAAmB;EACnB,YAAY;EACZ,WAAW;EACX,kBAAkB;EAClB,MAAM;EACN,OAAO;EACP,yBAAyB;EACzB,qBAAqB;EACrB,YAAY;AACd;;AAEA;EACE,6BAA6B;AAC/B;;AAEA;EACE,8BAA8B;EAC9B,gCAAgC;EAChC,mBAAmB;EACnB,eAAe;EACf,gBAAgB;EAChB,kCAAkC;AACpC;;AAEA;EACE,UAAU;EACV,YAAY;AACd;;AAEA;EACE,sBAAsB;EACtB,YAAY;EACZ,wQAAwQ;EACxQ,gBAAgB;EAChB,eAAe;EACf,4BAA4B;AAC9B;;AAEA;EACE,oBAAoB;EACpB,oMAAoM;AACtM;;AAEA;EACE,aAAa;EACb,8BAA8B;EAC9B,UAAU;EACV,iBAAiB;EACjB,kBAAkB;EAClB,kBAAkB;AACpB;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,YAAY;AACd;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,uBAAuB;EACvB,eAAe;AACjB;;AAEA;EACE,aAAa;EACb,mBAAmB;AACrB;;AAEA;EACE,eAAe;EACf,oBAAoB;EACpB,sBAAsB;EACtB,gEAAgE;EAChE,qBAAqB;EACrB,gBAAgB;EAChB,eAAe;EACf,qCAAqC;EACrC,uFAAuF;EACvF,mDAAmD;EACnD,4BAA4B;AAC9B;;AAEA;EACE,wBAAwB;AAC1B;;AAEA;EACE,WAAW;EACX,mBAAmB;EACnB,oBAAoB;AACtB;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,uBAAuB;EACvB,mBAAmB;EACnB,YAAY;EACZ,kBAAkB;EAClB,eAAe;EACf,gBAAgB;EAChB,aAAa;EACb,cAAc;EACd,gCAAgC;EAChC,sBAAsB;AACxB;;AAEA;EACE,gBAAgB;EAChB,kBAAkB;EAClB,qBAAqB;EACrB,YAAY;AACd;;AAEA,oBAAoB;AACpB;EACE,WAAW;EACX,kCAAkC;EAClC,iEAAiE;AACnE;;AAEA;EACE,SAAS;AACX;;AAEA,YAAY;AACZ;EACE,WAAW;EACX,YAAY;EACZ,kBAAkB;EAClB,MAAM;EACN,OAAO;AACT;;AAEA;EACE,kBAAkB;EAClB,MAAM;EACN,OAAO;EACP,WAAW;EACX,aAAa;AACf;;AAEA;EACE,kBAAkB;EAClB,YAAY;EACZ,WAAW;EACX,wBAAwB;EACxB,uBAAuB;EACvB,gCAAgC;EAChC,gCAAgC;EAChC,aAAa;EACb,aAAa;EACb,uBAAuB;EACvB,mBAAmB;EACnB,YAAY;AACd;;AAEA;EACE,qCAAqC;EACrC,yBAAyB;AAC3B;;AAEA;EACE,mBAAmB;EACnB,gBAAgB;EAChB,oBAAoB;AACtB;;AAEA,oBAAoB;AACpB;EACE,kBAAkB;EAClB,gBAAgB;EAChB,kBAAkB;EAClB,qBAAqB;EACrB,+BAA+B;EAC/B,oBAAoB;EACpB,WAAW;AACb;;AAEA;EACE,QAAQ;EACR,QAAQ;AACV;;AAEA;EACE,QAAQ;EACR,SAAS;AACX;;AAEA;EACE,QAAQ;EACR,SAAS;AACX;;AAEA;EACE,QAAQ;EACR,QAAQ;AACV;;AAEA;EACE,QAAQ;EACR,SAAS;AACX;;AAEA;EACE,QAAQ;EACR,SAAS;AACX;;AAEA;EACE,WAAW;EACX,QAAQ;AACV;;AAEA;EACE,WAAW;EACX,SAAS;AACX;;AAEA;EACE,WAAW;EACX,SAAS;AACX;;AAEA;EACE,kBAAkB;EAClB,aAAa;EACb,YAAY;EACZ,mBAAmB;AACrB;;AAEA;EACE,eAAe;EACf,YAAY;AACd;;AAEA;EACE,kBAAkB;EAClB,YAAY;EACZ,aAAa;EACb,YAAY;EACZ,6BAA6B;EAC7B,YAAY;EACZ,aAAa;AACf;;AAEA;EACE,aAAa;EACb,sBAAsB;EACtB,aAAa;AACf;;AAEA;EACE,eAAe;EACf,eAAe;AACjB;;AAEA,oBAAoB;AACpB;EACE,eAAe;AACjB;;AAEA,gBAAgB;AAChB;EACE,gBAAgB;EAChB,eAAe;EACf,cAAc;EACd,kBAAkB;EAClB,+BAA+B;EAC/B,eAAe;EACf,+BAA+B;EAC/B,sCAAsC;AACxC;;AAEA;EACE,gBAAgB;EAChB,eAAe;EACf,cAAc;EACd,kBAAkB;EAClB,+BAA+B;EAC/B,eAAe;EACf,+BAA+B;EAC/B,sCAAsC;AACxC;;AAEA;EACE,gBAAgB;EAChB,eAAe;EACf,cAAc;EACd,kBAAkB;EAClB,+BAA+B;EAC/B,eAAe;EACf,+BAA+B;EAC/B,sCAAsC;AACxC;;AAEA;EACE,+BAA+B;AACjC;;AAEA;EACE,+BAA+B;AACjC;;AAEA;EACE,+BAA+B;AACjC;;AAEA,gBAAgB;AAChB;EACE,gBAAgB;EAChB,gBAAgB;EAChB,YAAY;EACZ,uBAAuB;AACzB;;AAEA;EACE,gBAAgB;EAChB,gBAAgB;EAChB,YAAY;EACZ,uBAAuB;AACzB;;AAEA;EACE,gBAAgB;EAChB,gBAAgB;EAChB,YAAY;EACZ,uBAAuB;AACzB;;AAEA,cAAc;AACd;EACE;IACE,UAAU;IACV,iDAAiD;IACjD,yCAAyC;IACzC,wBAAwB;EAC1B;EACA;IACE,UAAU;IACV,iDAAiD;IACjD,yCAAyC;IACzC,wBAAwB;EAC1B;AACF;;;AAGA;EACE;IACE,oBAAoB;EACtB;EACA;IACE,yBAAyB;EAC3B;AACF",sourcesContent:['/* Reset CSS */\r\n* {\r\n  margin: 0;\r\n  padding: 0;\r\n  border: 0;\r\n  font-size: 100%;\r\n}\r\n\r\n/* Main CSS */\r\n.main__video {\r\n  width: 100%;\r\n}\r\n\r\n.video__wrapper {\r\n  position: relative;\r\n  display: flex;\r\n  width: 100%;\r\n  height: 100%;\r\n  transition: height 250ms ease-in-out, transform 250ms ease-in-out;\r\n  background: black;\r\n}\r\n\r\n.video__wrapper.quiz {\r\n  width: 100%;\r\n  height: calc((100 - var(--size, 20)) * 1%);\r\n  margin-bottom: auto;\r\n  justify-content: center;\r\n  overflow: hidden;\r\n}\r\n\r\n.title__wrapper {\r\n  position: absolute;\r\n  top: 0;\r\n  width: 100%;\r\n  z-index: 2;\r\n  background: linear-gradient(180deg, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0.6) 100%);\r\n}\r\n\r\n.title__inner {\r\n  margin: 0 2.938rem 0 2.938rem;\r\n  padding-top: 2.875rem;\r\n}\r\n\r\n.title {\r\n  font-size: 1.5rem;\r\n  line-height: 2.25rem;\r\n  color: rgba(255, 255, 255, 0.87);\r\n  margin-bottom: 0.375rem;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n}\r\n\r\n.date {\r\n  font-size: 1rem;\r\n  line-height: 1.5rem;\r\n  color: rgba(255, 255, 255, 0.38);\r\n  margin-bottom: 0.875rem;\r\n}\r\n\r\n.controls__wrapper {\r\n  position: absolute;\r\n  bottom: 0;\r\n  width: 100%;\r\n  z-index: 2;\r\n  background: linear-gradient(180deg, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0.6) 100%);\r\n  border-radius: 0 0 0.5rem 0.5rem;\r\n}\r\n\r\n.controls {\r\n  margin-bottom: 1.5rem;\r\n}\r\n\r\n.icon__wrapper {\r\n  position: absolute;\r\n  left: 50%;\r\n  top: 50%;\r\n  color: rgba(255, 255, 255, 0.87);\r\n  background-color: rgba(0, 14, 43, 0.5);\r\n  border-radius: 50%;\r\n  height: 6.25rem;\r\n  width: 6.25rem;\r\n  display: none;\r\n  transform: translateX(-50%) translateY(-50%);\r\n  align-items: center;\r\n  justify-content: center;\r\n  animation: ytp-bezel-fadeout 0.5s linear 1 normal forwards;\r\n}\r\n\r\n.icon__inner {\r\n  width: -moz-fit-content;\r\n  width: fit-content;\r\n}\r\n\r\n.mask {\r\n  position: absolute;\r\n  top: 0;\r\n  bottom: 0;\r\n  background: rgba(0, 0, 0, 0.6);\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  border-radius: 0.5rem;\r\n}\r\n\r\n.mask svg {\r\n  cursor: pointer;\r\n}\r\n\r\n.loading__mask {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  height: 100%;\r\n  width: 100%;\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  background-color: #000E2B;\r\n  border-radius: 0.5rem;\r\n  z-index: 100;\r\n}\r\n\r\n.loading__mask.transparent {\r\n  background-color: transparent;\r\n}\r\n\r\n.loading__spinner {\r\n  border: 0.5rem solid #fcfcfd86;\r\n  border-top: 0.5rem solid #FCFCFD;\r\n  border-radius: 100%;\r\n  width: 4.167rem;\r\n  height: 4.167rem;\r\n  animation: spin 2s linear infinite;\r\n}\r\n\r\n.progress__wrapper {\r\n  width: 94%;\r\n  margin: auto;\r\n}\r\n\r\n.progress__bar {\r\n  width: 100% !important;\r\n  margin: auto;\r\n  background: linear-gradient(to right, #EF4035 0%, #EF4035 calc(var(--progress-percent, 0) * 1%), rgba(255, 255, 255, 0.87) 0%, rgba(255, 255, 255, 0.87) calc(var(--buffered-percent, 0) * 1%), rgba(255, 255, 255, 0.43) 0%, rgba(255, 255, 255, 0.43) 100%) !important;\r\n  appearance: none;\r\n  height: 0.25rem;\r\n  background-repeat: no-repeat;\r\n}\r\n\r\n.progress__bar.live {\r\n  pointer-events: none;\r\n  background: linear-gradient(to right, #EF4035 0%, #EF4035 100%, rgba(255, 255, 255, 0.87) 0%, rgba(255, 255, 255, 0.87) 0%, rgba(255, 255, 255, 0.43) 0%, rgba(255, 255, 255, 0.43) 100%) !important;\r\n}\r\n\r\n.control__btns {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  width: 94%;\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n  margin-top: 0.5rem;\r\n}\r\n\r\n.control__btns__leftside {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.75rem;\r\n}\r\n\r\n.button {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  cursor: pointer;\r\n}\r\n\r\n.volume__wrapper {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.control__volume__slider {\r\n  width: 0.0001px;\r\n  transform: scaleX(0);\r\n  transform-origin: left;\r\n  transition: width 150ms ease-in-out, transform 150ms ease-in-out;\r\n  margin-left: 0.125rem;\r\n  appearance: none;\r\n  height: 0.25rem;\r\n  background: rgba(255, 255, 255, 0.43);\r\n  background-image: linear-gradient(rgba(255, 255, 255, 0.87), rgba(255, 255, 255, 0.87));\r\n  background-size: calc(var(--volume, 1) * 100%) 100%;\r\n  background-repeat: no-repeat;\r\n}\r\n\r\n.hide {\r\n  display: none !important;\r\n}\r\n\r\n.video__timer {\r\n  color: #fff;\r\n  font-size: 0.875rem;\r\n  line-height: 1.25rem;\r\n}\r\n\r\n.view__count {\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: center;\r\n  align-items: center;\r\n  gap: 0.25rem;\r\n  position: absolute;\r\n  width: 3.375rem;\r\n  height: 1.375rem;\r\n  right: 1.5rem;\r\n  bottom: 1.5rem;\r\n  background: rgba(0, 14, 43, 0.5);\r\n  border-radius: 0.25rem;\r\n}\r\n\r\n.views {\r\n  font-weight: 600;\r\n  font-size: 0.75rem;\r\n  line-height: 1.125rem;\r\n  color: white;\r\n}\r\n\r\n/* Interactive CSS */\r\n.interactive__quiz {\r\n  width: 100%;\r\n  height: calc(var(--size, 20) * 1%);\r\n  transition: height 250ms ease-in-out, transform 250ms ease-in-out;\r\n}\r\n\r\n.interactive__quiz.hidden {\r\n  height: 0;\r\n}\r\n\r\n/* Ads CSS */\r\n.ads__video {\r\n  width: 100%;\r\n  height: 100%;\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n}\r\n\r\n.ad__container {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  z-index: 1000;\r\n}\r\n\r\n.skip__ad {\r\n  position: absolute;\r\n  bottom: 2rem;\r\n  right: 2rem;\r\n  padding: 0.75rem 1.25rem;\r\n  border-radius: 0.625rem;\r\n  background: rgba(0, 14, 43, 0.7);\r\n  color: rgba(255, 255, 255, 0.87);\r\n  z-index: 1001;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  gap: 0.25rem;\r\n}\r\n\r\n.skip__ad.active {\r\n  background: rgba(255, 255, 255, 0.87);\r\n  color: rgba(0, 14, 43, 1);\r\n}\r\n\r\n.skip__text {\r\n  font-size: 0.813rem;\r\n  font-weight: 600;\r\n  line-height: 1.25rem;\r\n}\r\n\r\n/* Fingerprint CSS */\r\n.fingerprint {\r\n  position: absolute;\r\n  font-weight: 600;\r\n  font-size: 0.75rem;\r\n  line-height: 1.125rem;\r\n  color: rgba(255, 255, 255, 0.6);\r\n  pointer-events: none;\r\n  z-index: 99;\r\n}\r\n\r\n.pos-1 {\r\n  top: 20%;\r\n  left: 5%;\r\n}\r\n\r\n.pos-2 {\r\n  top: 20%;\r\n  left: 45%;\r\n}\r\n\r\n.pos-3 {\r\n  top: 20%;\r\n  right: 5%;\r\n}\r\n\r\n.pos-4 {\r\n  top: 50%;\r\n  left: 5%;\r\n}\r\n\r\n.pos-5 {\r\n  top: 50%;\r\n  left: 45%;\r\n}\r\n\r\n.pos-6 {\r\n  top: 50%;\r\n  right: 5%;\r\n}\r\n\r\n.pos-7 {\r\n  bottom: 20%;\r\n  left: 5%;\r\n}\r\n\r\n.pos-8 {\r\n  bottom: 20%;\r\n  left: 45%;\r\n}\r\n\r\n.pos-9 {\r\n  bottom: 20%;\r\n  right: 5%;\r\n}\r\n\r\n.control__btns__rightside {\r\n  position: relative;\r\n  display: flex;\r\n  gap: 0.75rem;\r\n  align-items: center;\r\n}\r\n\r\n.fa-solid {\r\n  cursor: pointer;\r\n  color: white;\r\n}\r\n\r\n.setting__box {\r\n  position: absolute;\r\n  bottom: 4rem;\r\n  right: 0.3rem;\r\n  width: 250px;\r\n  background: rgba(28,28,28,.9);\r\n  color: white;\r\n  padding: 12px;\r\n}\r\n\r\n.switch__track, .switch__quality {\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding: 12px;\r\n}\r\n\r\n.switch__track, .switch__quality > * {\r\n  padding: 12px 0;\r\n  cursor: pointer;\r\n}\r\n\r\n/* Input Range CSS */\r\ninput[type="range"]:hover {\r\n  cursor: pointer;\r\n}\r\n\r\n/* Input Thumb */\r\ninput[type="range"]::-webkit-slider-thumb {\r\n  appearance: none;\r\n  height: 0.75rem;\r\n  width: 0.75rem;\r\n  border-radius: 50%;\r\n  background: rgba(255, 255, 255);\r\n  cursor: pointer;\r\n  box-shadow: 0 0 0.125rem 0 #555;\r\n  transition: background .3s ease-in-out;\r\n}\r\n\r\ninput[type="range"]::-moz-range-thumb {\r\n  appearance: none;\r\n  height: 0.75rem;\r\n  width: 0.75rem;\r\n  border-radius: 50%;\r\n  background: rgba(255, 255, 255);\r\n  cursor: pointer;\r\n  box-shadow: 0 0 0.125rem 0 #555;\r\n  transition: background .3s ease-in-out;\r\n}\r\n\r\ninput[type="range"]::-ms-thumb {\r\n  appearance: none;\r\n  height: 0.75rem;\r\n  width: 0.75rem;\r\n  border-radius: 50%;\r\n  background: rgba(255, 255, 255);\r\n  cursor: pointer;\r\n  box-shadow: 0 0 0.125rem 0 #555;\r\n  transition: background .3s ease-in-out;\r\n}\r\n\r\ninput[type="range"]::-webkit-slider-thumb:hover {\r\n  background: rgba(255, 255, 255);\r\n}\r\n\r\ninput[type="range"]::-moz-range-thumb:hover {\r\n  background: rgba(255, 255, 255);\r\n}\r\n\r\ninput[type="range"]::-ms-thumb:hover {\r\n  background: rgba(255, 255, 255);\r\n}\r\n\r\n/* Input Track */\r\ninput[type=range]::-webkit-slider-runnable-track  {\r\n  appearance: none;\r\n  box-shadow: none;\r\n  border: none;\r\n  background: transparent;\r\n}\r\n\r\ninput[type=range]::-moz-range-track {\r\n  appearance: none;\r\n  box-shadow: none;\r\n  border: none;\r\n  background: transparent;\r\n}\r\n\r\ninput[type="range"]::-ms-track {\r\n  appearance: none;\r\n  box-shadow: none;\r\n  border: none;\r\n  background: transparent;\r\n}\r\n\r\n/* Animation */\r\n@keyframes ytp-bezel-fadeout {\r\n  from {\r\n    opacity: 1;\r\n    -webkit-transform: translate(-50%, -50%) scale(1);\r\n    transform: translate(-50%, -50%) scale(1);\r\n    transform-origin: center;\r\n  }\r\n  to {\r\n    opacity: 0;\r\n    -webkit-transform: translate(-50%, -50%) scale(2);\r\n    transform: translate(-50%, -50%) scale(2);\r\n    transform-origin: center;\r\n  }\r\n}\r\n\r\n\r\n@keyframes spin {\r\n  from {\r\n    transform: rotate(0);\r\n  }\r\n  to {\r\n    transform: rotate(360deg);\r\n  }\r\n}'],sourceRoot:""}]),t.a=r},function(e,t,n){"use strict";var i=function(){var e;return function(){return e=void 0===e?Boolean(window&&document&&document.all&&!window.atob):e}}(),r=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),a=[];function s(e){for(var t=-1,n=0;n<a.length;n++)if(a[n].identifier===e){t=n;break}return t}function o(e,t){for(var n={},i=[],r=0;r<e.length;r++){var o=e[r],l=n[g=t.base?o[0]+t.base:o[0]]||0,f="".concat(g," ").concat(l),g=(n[g]=l+1,s(f));l={css:o[1],media:o[2],sourceMap:o[3]};-1!==g?(a[g].references++,a[g].updater(l)):a.push({identifier:f,updater:function(e,t){var n,i,r,a;return r=t.singleton?(a=h++,n=d=d||u(t),i=c.bind(null,n,a,!1),c.bind(null,n,a,!0)):(n=u(t),i=function(e,t,n){var i=n.css,r=n.media;n=n.sourceMap;if(r?e.setAttribute("media",r):e.removeAttribute("media"),n&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(n))))," */")),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}.bind(null,n,t),function(){var e=n;null!==e.parentNode&&e.parentNode.removeChild(e)}),i(e),function(t){t?t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap||i(e=t):r()}}(l,t),references:1}),i.push(f)}return i}function u(e){var t=document.createElement("style"),i=e.attributes||{};if(void 0===i.nonce&&(a=n.nc)&&(i.nonce=a),Object.keys(i).forEach((function(e){t.setAttribute(e,i[e])})),"function"==typeof e.insert)e.insert(t);else{var a=r(e.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(t)}return t}var l=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}();function c(e,t,n,i){n=n?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;e.styleSheet?e.styleSheet.cssText=l(t,n):(i=document.createTextNode(n),(n=e.childNodes)[t]&&e.removeChild(n[t]),n.length?e.insertBefore(i,n[t]):e.appendChild(i))}var d=null,h=0;e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=i());var n=o(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var i=0;i<n.length;i++){var r=s(n[i]);a[r].references--}e=o(e,t);for(var u=0;u<n.length;u++){var l=s(n[u]);0===a[l].references&&(a[l].updater(),a.splice(l,1))}n=e}}}},function(e,t,n){"use strict";function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var i,r,a=[],s=!0,o=!1;try{for(n=n.call(e);!(s=(i=n.next()).done)&&(a.push(i.value),!t||a.length!==t);s=!0);}catch(e){o=!0,r=e}finally{try{s||null==n.return||n.return()}finally{if(o)throw r}}return a}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?r(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}e.exports=function(e){var t,n=(e=i(e,4))[1],r=e[3];return r?("function"==typeof btoa?(e=btoa(unescape(encodeURIComponent(JSON.stringify(r)))),e="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(e),e="/*# ".concat(e," */"),t=r.sources.map((function(e){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(e," */")})),[n].concat(t).concat([e])):[n]).join("\n"):n}},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,i){"string"==typeof e&&(e=[[null,e,""]]);var r={};if(i)for(var a=0;a<this.length;a++){var s=this[a][0];null!=s&&(r[s]=!0)}for(var o=0;o<e.length;o++){var u=[].concat(e[o]);i&&r[u[0]]||(n&&(u[2]?u[2]="".concat(n," and ").concat(u[2]):u[2]=n),t.push(u))}},t}},function(e,t,n){e.exports=n(8)},function(e,t){var n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";n.r(t),n.d(t,"VinasportsPlayer",(function(){return F}));const i=(e,t)=>{e.className=t},r=(e,t)=>{for(var n in t)i=t[n=n],e.style[n]=i;var i},a=(e,t)=>{for(var n in t)i=t[n=n],e.setAttribute(n,i);var i};t=n(3),t=n.n(t);var s=n(2),o={insert:"head",singleton:!1},u=(t=(t()(s.a,o),s.a.locals,n(0)),n.n(t)),l=(e,t,n)=>{if(u.a.isSupported()){let r=new u.a({backBufferLength:90,lowLatencyMode:!1});console.log("HLS version: ",u.a.version),r.attachMedia(e),r.on(u.a.Events.MEDIA_ATTACHED,()=>{r.loadSource(t.src)}),r.on(u.a.Events.MANIFEST_PARSED,(t,n)=>{e.play()}),r.on(u.a.Events.LEVEL_SWITCHING,(e,t)=>{}),r.on(u.a.Events.SUBTITLE_FRAG_PROCESSED,()=>{}),r.on(u.a.Events.BUFFER_CREATED,()=>{window.hls=r,window.hls.audioTracks.forEach((e,t)=>{var n=document.createElement("div");n.innerText=e.name,i(n,"track-"+t),0===e.id&&n.classList.add("active"),n.addEventListener("click",t=>{window.hls.audioTrack=e.id,document.querySelectorAll("[class^='track']").forEach(e=>{e.classList.remove("active")}),t.target.classList.add("active")}),window.divSwitchTrack.appendChild(n)}),window.hls.levels.forEach((e,t)=>{var n=document.createElement("div");n.innerText=e.height+"p",i(n,"level-"+t),n.addEventListener("click",e=>{window.hls.currentLevel=t,document.querySelectorAll("[class^='level']").forEach(e=>{e.classList.remove("active")}),e.target.classList.add("active")}),window.divSwitchQuality.appendChild(n)})}),r.on(u.a.Events.ERROR,(e,t)=>{var i=null==t||null==(i=t.response)?void 0:i.code;void 0!==i&&(401==i?n({errorCode:i,errorMessage:"expired or invalid sign key!"}):403==i?n({errorCode:i,errorMessage:"copyright violated user"}):0==i?t.fatal?n({errorCode:404,errorMessage:"link error!"}):n({errorCode:i,errorMessage:"user using VPN"}):n({errorCode:i,errorMessage:"link error!"}))})}else e.canPlayType("application/vnd.apple.mpegurl")?(e.src=t.src,e.setAttribute("playsinline",!0),e.play()):n({errorMessage:"Hls is not supported"})},c=(o=n(1),n.n(o)),d=(e,t,n)=>{var{src:r,drm:a}=t;if(c.a.polyfill.installAll(),c.a.Player.isBrowserSupported()){let s=new c.a.Player(e);if(s.addEventListener("error",e=>{var t=null==e||null==(t=e.detail)||null==(t=t.data)||null==(t=t[0])||null==(t=t.data)?void 0:t[1];e=null==e||null==(e=e.detail)?void 0:e.code;401===t?(s.unload(),n({errorCode:t,errorMessage:"expired or invalid sign key!"})):403==t?(clearTimeout(window.fingerprintTimeout),n({errorCode:t,errorMessage:"copyright violated user"})):n(0==t?{errorCode:t,errorMessage:"user using VPN"}:null==t?{errorCode:e}:{errorCode:t,errorMessage:"link error!"})}),s.addEventListener("loaded",()=>{s.getAudioLanguagesAndRoles().forEach((e,t)=>{var n=document.createElement("div");n.innerText=e.language,i(n,"track-"+t),"main"===e.role&&n.classList.add("active"),n.addEventListener("click",t=>{window.playerShaka.selectAudioLanguage(e),window.settingBox.classList.add("hide"),document.querySelectorAll("[class^='track']").forEach(e=>{e.classList.remove("active")}),t.target.classList.add("active")}),window.settingBox.appendChild(n)})}),r){if(a){a=s;const{licenseServer:e,contentId:n,signKey:i}=t;a.configure({drm:{servers:{"com.widevine.alpha":e},advanced:{"com.widevine.alpha":{videoRobustness:"SW_SECURE_CRYPTO",audioRobustness:"SW_SECURE_CRYPTO"}},retryParameters:{timeout:1e4,maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5}},streaming:{rebufferingGoal:0,bufferingGoal:24,bufferBehind:10,retryParameters:{timeout:1e4,maxAttempts:3,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5},alwaysStreamText:!0},manifest:{retryParameters:{timeout:1e4,maxAttempts:3,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5},dash:{ignoreMinBufferTime:!0}},abr:{defaultBandwidthEstimate:25e4}}),a.getNetworkingEngine().registerRequestFilter((e,t)=>{e===c.a.net.NetworkingEngine.RequestType.LICENSE&&(t.uris[0]+="?content_id="+n,t.headers.Token=i)}),a.getNetworkingEngine().registerResponseFilter((e,t)=>{const n=c.a.util.StringUtils,i=c.a.util.Uint8ArrayUtils;if(e==c.a.net.NetworkingEngine.RequestType.LICENSE){const e=n.fromUTF8(t.data),r=JSON.parse(e),a=r.data;t.data=i.fromBase64(a),console.log(r),window.fingerprints.forEach(e=>{e.innerHTML=r.app_user_info.visual_code}),sessionStorage.setItem("app-user-id",r.app_user_info.app_user_id)}})}else s.configure({streaming:{rebufferingGoal:0,bufferingGoal:24,bufferBehind:10,retryParameters:{timeout:1e4,maxAttempts:3,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5},alwaysStreamText:!0},manifest:{retryParameters:{timeout:1e4,maxAttempts:3,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5},dash:{ignoreMinBufferTime:!0}},abr:{defaultBandwidthEstimate:25e4}});s.load(r).then(()=>{e.play()}).catch(e=>{void 0!==(e=e.code)&&n(1002==e?{errorCode:0,errorMessage:"user using VPN"}:{errorCode:e})})}else n({errorCode:400,errorMessage:"link error!"});window.playerShaka=s}else n({errorMessage:"shaka-player is not supported"})};const h=(e,t,n,i,r,a)=>{if(e.paused||e.ended){t&&0<e.buffered.length&&(e.currentTime=e.buffered.end(0)),e.play();var s=n;(t=i).hasChildNodes()&&t.removeChild(t.firstChild),t.appendChild(r),s.style.display="flex",setTimeout(()=>{s.style.display="none"},500)}else{e.pause();var o=n;t=a;(r=i).hasChildNodes()&&r.removeChild(r.firstChild),r.appendChild(t),o.style.display="flex",setTimeout(()=>{o.style.display="none"},500)}};let f,g,p,m=!1,v=6;function y(e,t,n,i,r,a,s){var o;function u(e){e=e.getError(),console.log(e),1005==e.j.errorCode&&s({errorCode:410,errorMessage:"user using adblock!"}),p&&p.destroy()}function l(){n.classList.remove("hide"),t.classList.remove("hide"),i.classList.remove("hide");let s=setInterval(()=>{v-=1,r.innerText=v?`Bỏ qua quảng cáo trong (${v}s)`:"Bỏ qua quảng cáo",0===v&&(clearInterval(s),i.addEventListener("click",c),i.style.cursor="pointer",i.classList.add("active"),a.classList.remove("hide"))},1e3);e.pause()}function c(){console.log("end ads"),p.destroy(),n.classList.add("hide"),t.classList.add("hide"),i.classList.add("hide"),i.classList.remove("active"),a.classList.add("hide"),e.play()}function d(t){t.getAd().isLinear()||e.play()}window.google?(console.log("initializing IMA"),f=new google.ima.AdDisplayContainer(n,t),(g=new google.ima.AdsLoader(f)).addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,(function(e){(p=e.getAdsManager(t)).addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,u),p.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,l),p.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,c),p.addEventListener(google.ima.AdEvent.Type.LOADED,d)}),!1),g.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,u,!1),e.addEventListener("ended",(function(){g.contentComplete()})),(o=new google.ima.AdsRequest).adTagUrl="https://search.spotxchange.com/vast/2.0/323774?VPI[]=MP4&player_width=200&player_height=200&app[bundle]=com.vtvcab.onsports&media_transcoding=low&omidpn=Google&omidpv=1",o.linearAdSlotWidth=e.clientWidth,o.linearAdSlotHeight=e.clientHeight,o.nonLinearAdSlotWidth=e.clientWidth,o.nonLinearAdSlotHeight=e.clientHeight/3,g.requestAds(o)):s({errorCode:410,errorMessage:"user using adblock!"})}let b=!1,A=400;window.fingerprintTimeout=void 0;const E=(e,t,n,i)=>{fetch("https://ondrmstt.vtvcab.vn/license-api/v1/drm/fp/fp-health-check?content_id="+e).then(e=>e.json()).then(e=>{if(b=e.fingerprint_setting.is_fingerprint_enabled,A=1e3*e.fingerprint_setting.advance.heartbeat_interval_in_seconds,console.log("call fingerprint API"),b){var r,a=Math.floor(9*Math.random()),s=(n[a].classList.remove("hide"),a=(a=t).split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),a=decodeURIComponent(window.atob(a).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join("")),JSON.parse(a).app_name);let o;for(let t=0;t<(null==(r=e.recent_blocked_users)?void 0:r.length);t++)e.recent_blocked_users[t].app_name===s&&(o=e.recent_blocked_users[t]);null!=(a=o)&&a.user_ids.includes(sessionStorage.getItem("app-user-id"))&&(i({errorCode:403,errorMessage:"copyright violated user"}),clearTimeout(window.fingerprintTimeout)),setTimeout(()=>{n.forEach(e=>{e.classList.add("hide")})},1e3*e.fingerprint_setting.advance.display_duration_in_seconds)}}),window.fingerprintTimeout=setTimeout(()=>E(e,t,n,i),A)};s=document.createElementNS("http://www.w3.org/2000/svg","svg"),t=document.createElementNS("http://www.w3.org/2000/svg","path");var T=(s.setAttribute("fill","none"),s.setAttribute("width","32"),s.setAttribute("height","32"),s.setAttribute("viewBox","0 0 32 32"),t.setAttribute("d","M12.1707 7.03083C10.3069 5.97638 8 7.32138 8 9.46141L8 23.0248C8 25.1648 10.3084 26.5106 12.1715 25.4553L24.1424 18.6705C26.0318 17.6009 26.031 14.8789 24.1424 13.8093L12.1699 7.03083H12.1707Z"),t.setAttribute("fill","white"),t.setAttribute("fillOpacity","0.87"),s.appendChild(t),s),w=(o=document.createElementNS("http://www.w3.org/2000/svg","svg"),n=document.createElementNS("http://www.w3.org/2000/svg","path"),t=document.createElementNS("http://www.w3.org/2000/svg","path"),s=document.createElementNS("http://www.w3.org/2000/svg","path"),document.createElementNS("http://www.w3.org/2000/svg","path")),S=(o.setAttribute("fill","none"),o.setAttribute("width","32"),o.setAttribute("height","32"),o.setAttribute("viewBox","0 0 32 32"),n.setAttribute("d","M8.7407 9.77517C8.7407 9.50013 8.84996 9.23636 9.04444 9.04188C9.23892 8.8474 9.5027 8.73814 9.77774 8.73814H11.8518C12.1269 8.73814 12.3906 8.62888 12.5851 8.4344C12.7796 8.23991 12.8888 7.97614 12.8888 7.7011C12.8888 7.42606 12.7796 7.16229 12.5851 6.9678C12.3906 6.77332 12.1269 6.66406 11.8518 6.66406H9.77774C8.95262 6.66406 8.1613 6.99184 7.57785 7.57529C6.9944 8.15873 6.66663 8.95006 6.66663 9.77517V11.8492C6.66663 12.1243 6.77588 12.3881 6.97037 12.5825C7.16485 12.777 7.42862 12.8863 7.70366 12.8863C7.9787 12.8863 8.24248 12.777 8.43696 12.5825C8.63144 12.3881 8.7407 12.1243 8.7407 11.8492V9.77517Z"),n.setAttribute("fill","white"),n.setAttribute("fillOpacity","0.87"),o.appendChild(n),t.setAttribute("d","M8.7407 22.2205C8.7407 22.4955 8.84996 22.7593 9.04444 22.9538C9.23892 23.1483 9.5027 23.2575 9.77774 23.2575H11.8518C12.1269 23.2575 12.3906 23.3668 12.5851 23.5613C12.7796 23.7557 12.8888 24.0195 12.8888 24.2946C12.8888 24.5696 12.7796 24.8334 12.5851 25.0279C12.3906 25.2223 12.1269 25.3316 11.8518 25.3316H9.77774C8.95262 25.3316 8.1613 25.0038 7.57785 24.4204C6.9944 23.8369 6.66663 23.0456 6.66663 22.2205V20.1464C6.66663 19.8714 6.77588 19.6076 6.97037 19.4131C7.16485 19.2186 7.42862 19.1094 7.70366 19.1094C7.9787 19.1094 8.24248 19.2186 8.43696 19.4131C8.63144 19.6076 8.7407 19.8714 8.7407 20.1464V22.2205Z"),t.setAttribute("fill","white"),t.setAttribute("fillOpacity","0.87"),o.appendChild(t),s.setAttribute("d","M22.2222 8.73814C22.4972 8.73814 22.761 8.8474 22.9555 9.04188C23.15 9.23636 23.2592 9.50013 23.2592 9.77517V11.8492C23.2592 12.1243 23.3685 12.3881 23.563 12.5825C23.7575 12.777 24.0212 12.8863 24.2963 12.8863C24.5713 12.8863 24.8351 12.777 25.0296 12.5825C25.224 12.3881 25.3333 12.1243 25.3333 11.8492V9.77517C25.3333 8.95006 25.0055 8.15873 24.4221 7.57529C23.8386 6.99184 23.0473 6.66406 22.2222 6.66406H20.1481C19.8731 6.66406 19.6093 6.77332 19.4148 6.9678C19.2203 7.16229 19.1111 7.42606 19.1111 7.7011C19.1111 7.97614 19.2203 8.23991 19.4148 8.4344C19.6093 8.62888 19.8731 8.73814 20.1481 8.73814H22.2222Z"),s.setAttribute("fill","white"),s.setAttribute("fillOpacity","0.87"),o.appendChild(s),w.setAttribute("d","M23.2592 22.2205C23.2592 22.4955 23.15 22.7593 22.9555 22.9538C22.761 23.1483 22.4972 23.2575 22.2222 23.2575H20.1481C19.8731 23.2575 19.6093 23.3668 19.4148 23.5613C19.2203 23.7557 19.1111 24.0195 19.1111 24.2946C19.1111 24.5696 19.2203 24.8334 19.4148 25.0279C19.6093 25.2223 19.8731 25.3316 20.1481 25.3316H22.2222C23.0473 25.3316 23.8386 25.0038 24.4221 24.4204C25.0055 23.8369 25.3333 23.0456 25.3333 22.2205V20.1464C25.3333 19.8714 25.224 19.6076 25.0296 19.4131C24.8351 19.2186 24.5713 19.1094 24.2963 19.1094C24.0212 19.1094 23.7575 19.2186 23.563 19.4131C23.3685 19.6076 23.2592 19.8714 23.2592 20.1464V22.2205Z"),w.setAttribute("fill","white"),w.setAttribute("fillOpacity","0.87"),o.appendChild(w),o),C=(n=document.createElementNS("http://www.w3.org/2000/svg","svg"),t=document.createElementNS("http://www.w3.org/2000/svg","path"),s=document.createElementNS("http://www.w3.org/2000/svg","circle"),n.setAttribute("fill","none"),n.setAttribute("width","53"),n.setAttribute("height","24"),n.setAttribute("viewBox","0 0 53 24"),s.setAttribute("cx","9"),s.setAttribute("cy","12"),s.setAttribute("r","3"),s.setAttribute("fill","#EF4035"),n.appendChild(s),t.setAttribute("d","M17.0043 17V6.81818H18.8487V15.4538H23.3331V17H17.0043ZM26.7784 6.81818V17H24.9339V6.81818H26.7784ZM30.138 6.81818L32.7878 14.8324H32.8922L35.5371 6.81818H37.5655L33.976 17H31.699L28.1145 6.81818H30.138ZM38.9066 17V6.81818H45.5288V8.36435H40.7511V11.1286H45.1857V12.6747H40.7511V15.4538H45.5685V17H38.9066Z"),t.setAttribute("fill","white"),t.setAttribute("fillOpacity","0.87"),n.appendChild(t),n),x=(w=document.createElementNS("http://www.w3.org/2000/svg","svg"),o=document.createElementNS("http://www.w3.org/2000/svg","path"),s=document.createElementNS("http://www.w3.org/2000/svg","path"),t=document.createElementNS("http://www.w3.org/2000/svg","path"),n=document.createElementNS("http://www.w3.org/2000/svg","path"),w.setAttribute("fill","none"),w.setAttribute("width","32"),w.setAttribute("height","32"),w.setAttribute("viewBox","0 0 32 32"),o.setAttribute("d","M12 5.33333C12 4.97971 11.8595 4.64057 11.6095 4.39052C11.3594 4.14048 11.0203 4 10.6667 4C10.313 4 9.97391 4.14048 9.72386 4.39052C9.47381 4.64057 9.33333 4.97971 9.33333 5.33333V8.66667C9.33333 8.84348 9.2631 9.01305 9.13807 9.13807C9.01305 9.2631 8.84348 9.33333 8.66667 9.33333H5.33333C4.97971 9.33333 4.64057 9.47381 4.39052 9.72386C4.14048 9.97391 4 10.313 4 10.6667C4 11.0203 4.14048 11.3594 4.39052 11.6095C4.64057 11.8595 4.97971 12 5.33333 12H8.66667C9.55072 12 10.3986 11.6488 11.0237 11.0237C11.6488 10.3986 12 9.55072 12 8.66667V5.33333Z"),o.setAttribute("fill","white"),o.setAttribute("fillOpacity","0.87"),w.appendChild(o),s.setAttribute("d","M12 26.6667C12 27.0203 11.8595 27.3594 11.6095 27.6095C11.3594 27.8595 11.0203 28 10.6667 28C10.313 28 9.97391 27.8595 9.72386 27.6095C9.47381 27.3594 9.33333 27.0203 9.33333 26.6667V23.3333C9.33333 23.1565 9.2631 22.987 9.13807 22.8619C9.01305 22.7369 8.84348 22.6667 8.66667 22.6667H5.33333C4.97971 22.6667 4.64057 22.5262 4.39052 22.2761C4.14048 22.0261 4 21.687 4 21.3333C4 20.9797 4.14048 20.6406 4.39052 20.3905C4.64057 20.1405 4.97971 20 5.33333 20H8.66667C9.55072 20 10.3986 20.3512 11.0237 20.9763C11.6488 21.6014 12 22.4493 12 23.3333V26.6667Z"),s.setAttribute("fill","white"),s.setAttribute("fillOpacity","0.87"),w.appendChild(s),t.setAttribute("d","M21.3333 4C20.9797 4 20.6406 4.14048 20.3905 4.39052C20.1405 4.64057 20 4.97971 20 5.33333V8.66667C20 9.55072 20.3512 10.3986 20.9763 11.0237C21.6014 11.6488 22.4493 12 23.3333 12H26.6667C27.0203 12 27.3594 11.8595 27.6095 11.6095C27.8595 11.3594 28 11.0203 28 10.6667C28 10.313 27.8595 9.97391 27.6095 9.72386C27.3594 9.47381 27.0203 9.33333 26.6667 9.33333H23.3333C23.1565 9.33333 22.987 9.2631 22.8619 9.13807C22.7369 9.01305 22.6667 8.84348 22.6667 8.66667V5.33333C22.6667 4.97971 22.5262 4.64057 22.2761 4.39052C22.0261 4.14048 21.687 4 21.3333 4Z"),t.setAttribute("fill","white"),t.setAttribute("fillOpacity","0.87"),w.appendChild(t),n.setAttribute("d","M20 26.6667C20 27.0203 20.1405 27.3594 20.3905 27.6095C20.6406 27.8595 20.9797 28 21.3333 28C21.687 28 22.0261 27.8595 22.2761 27.6095C22.5262 27.3594 22.6667 27.0203 22.6667 26.6667V23.3333C22.6667 23.1565 22.7369 22.987 22.8619 22.8619C22.987 22.7369 23.1565 22.6667 23.3333 22.6667H26.6667C27.0203 22.6667 27.3594 22.5262 27.6095 22.2761C27.8595 22.0261 28 21.687 28 21.3333C28 20.9797 27.8595 20.6406 27.6095 20.3905C27.3594 20.1405 27.0203 20 26.6667 20H23.3333C22.4493 20 21.6014 20.3512 20.9763 20.9763C20.3512 21.6014 20 22.4493 20 23.3333V26.6667Z"),n.setAttribute("fill","white"),n.setAttribute("fillOpacity","0.87"),w.appendChild(n),w),k=(o=document.createElementNS("http://www.w3.org/2000/svg","svg"),s=document.createElementNS("http://www.w3.org/2000/svg","path"),t=document.createElementNS("http://www.w3.org/2000/svg","path"),o.setAttribute("fill","none"),o.setAttribute("width","32"),o.setAttribute("height","32"),o.setAttribute("viewBox","0 0 32 32"),s.setAttribute("d","M15.9599 6.76323C16.1915 6.85925 16.3894 7.02178 16.5286 7.23026C16.6678 7.43875 16.7421 7.68383 16.742 7.93452V23.1461C16.742 23.3967 16.6676 23.6418 16.5283 23.8502C16.389 24.0586 16.1911 24.221 15.9595 24.3169C15.7279 24.4129 15.473 24.438 15.2272 24.3891C14.9813 24.3402 14.7555 24.2195 14.5782 24.0423L9.87909 19.3432H6.601C6.26481 19.3432 5.94238 19.2096 5.70465 18.9719C5.46693 18.7342 5.33337 18.4117 5.33337 18.0755V13.005C5.33337 12.6688 5.46693 12.3464 5.70465 12.1087C5.94238 11.871 6.26481 11.7374 6.601 11.7374H9.87909L14.5782 7.03831C14.7555 6.86093 14.9814 6.74011 15.2273 6.69115C15.4733 6.64218 15.7282 6.66727 15.9599 6.76323Z"),s.setAttribute("fill","white"),s.setAttribute("fillOpacity","0.87"),o.appendChild(s),t.setAttribute("d","M19.6487 12.1089C19.8864 11.8713 20.2088 11.7378 20.5449 11.7378C20.8811 11.7378 21.2034 11.8713 21.4412 12.1089L23.0802 13.748L24.7192 12.1089C24.8362 11.9878 24.9761 11.8913 25.1307 11.8248C25.2854 11.7584 25.4517 11.7234 25.62 11.722C25.7883 11.7205 25.9553 11.7526 26.111 11.8163C26.2668 11.8801 26.4084 11.9742 26.5274 12.0932C26.6464 12.2122 26.7405 12.3538 26.8043 12.5095C26.868 12.6653 26.9001 12.8323 26.8986 13.0006C26.8972 13.1689 26.8622 13.3352 26.7957 13.4899C26.7293 13.6445 26.6327 13.7844 26.5117 13.9013L24.8726 15.5404L26.5117 17.1794C26.7426 17.4185 26.8703 17.7387 26.8675 18.0711C26.8646 18.4034 26.7313 18.7214 26.4962 18.9564C26.2612 19.1914 25.9433 19.3248 25.6109 19.3276C25.2785 19.3305 24.9583 19.2028 24.7192 18.9719L23.0802 17.3328L21.4412 18.9719C21.2021 19.2028 20.8819 19.3305 20.5495 19.3276C20.2171 19.3248 19.8992 19.1914 19.6642 18.9564C19.4291 18.7214 19.2958 18.4034 19.2929 18.0711C19.2901 17.7387 19.4178 17.4185 19.6487 17.1794L21.2878 15.5404L19.6487 13.9013C19.4111 13.6636 19.2776 13.3413 19.2776 13.0051C19.2776 12.669 19.4111 12.3466 19.6487 12.1089Z"),t.setAttribute("fill","white"),t.setAttribute("fillOpacity","0.87"),o.appendChild(t),o),I=(n=document.createElementNS("http://www.w3.org/2000/svg","svg"),w=document.createElementNS("http://www.w3.org/2000/svg","path"),s=document.createElementNS("http://www.w3.org/2000/svg","path"),n.setAttribute("fill","none"),n.setAttribute("width","32"),n.setAttribute("height","32"),n.setAttribute("viewBox","0 0 32 32"),w.setAttribute("d","M9.51318 6.66406C9.03186 6.66406 8.57025 6.85527 8.22991 7.19561C7.88957 7.53595 7.69836 7.99756 7.69836 8.47888L7.69836 23.5159C7.69836 24.5177 8.5114 25.3307 9.51318 25.3307H13.1428C13.6241 25.3307 14.0857 25.1395 14.4261 24.7992C14.7664 24.4588 14.9576 23.9972 14.9576 23.5159L14.9576 8.47888C14.9576 7.99756 14.7664 7.53595 14.4261 7.19561C14.0857 6.85527 13.6241 6.66406 13.1428 6.66406L9.51318 6.66406Z"),w.setAttribute("fill","white"),w.setAttribute("fillOpacity","0.87"),n.appendChild(w),s.setAttribute("d","M18.8465 6.66406C18.3652 6.66406 17.9036 6.85527 17.5632 7.19561C17.2229 7.53595 17.0317 7.99756 17.0317 8.47888L17.0317 23.5159C17.0317 24.5177 17.8447 25.3307 18.8465 25.3307H22.4761C22.9574 25.3307 23.419 25.1395 23.7594 24.7992C24.0997 24.4588 24.2909 23.9972 24.2909 23.5159L24.2909 8.47888C24.2909 8.24055 24.244 8.00456 24.1528 7.78438C24.0616 7.56419 23.9279 7.36413 23.7594 7.19561C23.5909 7.02709 23.3908 6.89341 23.1706 6.80221C22.9504 6.711 22.7144 6.66406 22.4761 6.66406L18.8465 6.66406Z"),s.setAttribute("fill","white"),s.setAttribute("fillOpacity","0.87"),n.appendChild(s),n),L=(t=document.createElementNS("http://www.w3.org/2000/svg","svg"),o=document.createElementNS("http://www.w3.org/2000/svg","path"),w=document.createElementNS("http://www.w3.org/2000/svg","circle"),t.setAttribute("fill","none"),t.setAttribute("width","120"),t.setAttribute("height","120"),t.setAttribute("viewBox","0 0 120 120"),w.setAttribute("cx","60"),w.setAttribute("cy","60"),w.setAttribute("r","50"),w.setAttribute("fill","#05173A"),w.setAttribute("opacity","0.8"),t.appendChild(w),o.setAttribute("d","M65.8333 80.4193H77.5V39.5859H65.8333V80.4193ZM42.5 80.4193H54.1667V39.5859H42.5V80.4193Z"),o.setAttribute("fill","#52B5F9"),t.appendChild(o),t),R=(s=document.createElementNS("http://www.w3.org/2000/svg","svg"),n=document.createElementNS("http://www.w3.org/2000/svg","path"),w=document.createElementNS("http://www.w3.org/2000/svg","circle"),s.setAttribute("fill","none"),s.setAttribute("width","120"),s.setAttribute("height","120"),s.setAttribute("viewBox","0 0 120 120"),w.setAttribute("cx","60"),w.setAttribute("cy","60"),w.setAttribute("r","50"),w.setAttribute("fill","#05173A"),w.setAttribute("opacity","0.8"),s.appendChild(w),n.setAttribute("d","M49.8702 40.9702C49.2045 40.5466 48.3333 41.0248 48.3333 41.8139V79.0039C48.3333 79.7929 49.2045 80.2712 49.8702 79.8475L79.0909 61.2525C79.7084 60.8596 79.7084 59.9582 79.0909 59.5652L49.8702 40.9702Z"),n.setAttribute("fill","#52B5F9"),s.appendChild(n),s),D=(o=document.createElementNS("http://www.w3.org/2000/svg","svg"),t=document.createElementNS("http://www.w3.org/2000/svg","path"),o.setAttribute("fill","none"),o.setAttribute("width","32"),o.setAttribute("height","32"),o.setAttribute("viewBox","0 0 32 32"),t.setAttribute("d","M4.80012 10.3968V5.59676C4.80012 5.38459 4.8844 5.18111 5.03443 5.03108C5.18446 4.88105 5.38794 4.79676 5.60012 4.79676C5.81229 4.79676 6.01577 4.88105 6.1658 5.03108C6.31583 5.18111 6.40012 5.38459 6.40012 5.59676V7.52796C8.60943 5.01844 11.7152 3.47591 15.0497 3.23196C16.4092 3.1286 17.7765 3.24421 19.0993 3.57436C21.6268 4.20586 23.9015 5.59328 25.6199 7.55141C27.3382 9.50955 28.4184 11.9452 28.7163 14.5333C29.0141 17.1214 28.5154 19.7388 27.2868 22.0361C26.0582 24.3334 24.1581 26.2012 21.8401 27.3904C20.2752 28.1938 18.5607 28.6639 16.8049 28.7712C13.8685 28.9629 10.9565 28.1305 8.56492 26.416C7.14319 25.4045 5.94397 24.1122 5.04132 22.619C4.13868 21.1258 3.55179 19.4633 3.31692 17.7344C3.19986 16.8842 3.16823 16.0244 3.22252 15.168C3.22924 15.0631 3.25655 14.9606 3.30288 14.8663C3.34922 14.772 3.41367 14.6878 3.49257 14.6184C3.57146 14.549 3.66325 14.4959 3.76269 14.4619C3.86212 14.428 3.96727 14.414 4.07212 14.4208C4.17696 14.4275 4.27946 14.4548 4.37375 14.5011C4.46805 14.5475 4.55229 14.6119 4.62167 14.6908C4.69106 14.7697 4.74422 14.8615 4.77814 14.9609C4.81205 15.0604 4.82604 15.1655 4.81932 15.2704C4.80503 15.5122 4.79863 15.7545 4.80012 15.9968C4.80012 20.9568 8.02412 25.1648 12.4929 26.6368C14.1116 27.1694 15.8304 27.3253 17.5185 27.0928C18.819 26.9163 20.0782 26.5123 21.2385 25.8992C23.5095 24.6938 25.2969 22.7441 26.3009 20.3772C27.3048 18.0102 27.4642 15.37 26.7523 12.8995C26.0404 10.429 24.5005 8.27842 22.391 6.80863C20.2815 5.33884 17.7307 4.63922 15.1665 4.82716C14.1147 4.90735 13.0792 5.13352 12.0897 5.49916C9.95412 6.29734 8.11198 7.72652 6.80812 9.59676H9.60012C9.81229 9.59676 10.0158 9.68105 10.1658 9.83108C10.3158 9.98111 10.4001 10.1846 10.4001 10.3968C10.4001 10.6089 10.3158 10.8124 10.1658 10.9624C10.0158 11.1125 9.81229 11.1968 9.60012 11.1968H5.60012C5.3882 11.1959 5.18521 11.1114 5.03536 10.9615C4.88552 10.8117 4.80096 10.6087 4.80012 10.3968ZM12.0001 12.744C12.0001 11.256 13.5681 10.288 14.8993 10.9568L21.3633 14.2096C22.8305 14.9488 22.8305 17.0448 21.3633 17.784L14.8993 21.0352C14.5946 21.1885 14.2557 21.2614 13.9148 21.2469C13.574 21.2323 13.2425 21.1308 12.952 20.9521C12.6614 20.7733 12.4214 20.5231 12.2548 20.2254C12.0882 19.9277 12.0005 19.5923 12.0001 19.2512V12.744Z"),t.setAttribute("fill","white"),t.setAttribute("fillOpacity","0.87"),o.appendChild(t),o),_=(w=document.createElementNS("http://www.w3.org/2000/svg","svg"),n=document.createElementNS("http://www.w3.org/2000/svg","path"),w.setAttribute("fill","none"),w.setAttribute("width","32"),w.setAttribute("height","32"),w.setAttribute("viewBox","0 0 32 32"),n.setAttribute("d","M4.99998 17.9976C4.44769 17.9976 3.99564 18.4461 4.04161 18.9965C4.21043 21.0177 4.88949 22.969 6.02234 24.6645C7.34092 26.6379 9.21506 28.1759 11.4078 29.0842C13.6005 29.9924 16.0133 30.2301 18.3411 29.767C20.6688 29.304 22.807 28.1611 24.4853 26.4829C26.1635 24.8047 27.3064 22.6665 27.7694 20.3387C28.2324 18.0109 27.9948 15.5981 27.0865 13.4054C26.1783 11.2127 24.6402 9.33856 22.6668 8.01998C20.6934 6.7014 18.3734 5.99762 16 5.99762H12.4C12.1791 5.99762 12 5.81853 12 5.59762V1.9633C12 1.60694 11.5691 1.42847 11.3171 1.68046L6.28282 6.71478C6.12661 6.87098 6.12661 7.12425 6.28282 7.28046L11.3171 12.3148C11.5691 12.5668 12 12.3883 12 12.0319L12 8.39762C12 8.1767 12.1791 7.99762 12.4 7.99762H16C17.9778 7.99762 19.9112 8.58411 21.5557 9.68292C23.2002 10.7817 24.4819 12.3435 25.2388 14.1708C25.9956 15.998 26.1937 18.0087 25.8078 19.9485C25.422 21.8883 24.4696 23.6702 23.071 25.0687C21.6725 26.4672 19.8907 27.4196 17.9509 27.8055C16.0111 28.1913 14.0004 27.9933 12.1731 27.2364C10.3459 26.4795 8.78409 25.1978 7.68528 23.5533C6.77228 22.1869 6.21298 20.6211 6.04993 18.996C5.99479 18.4465 5.55226 17.9976 4.99998 17.9976ZM19.63 22.1276C19.1881 22.1384 18.7498 22.046 18.35 21.8576C17.9949 21.6774 17.6894 21.413 17.46 21.0876C17.2085 20.7079 17.032 20.2836 16.94 19.8376C16.8218 19.2855 16.7648 18.7221 16.77 18.1576C16.7659 17.5931 16.8229 17.0298 16.94 16.4776C17.0339 16.0321 17.2102 15.6082 17.46 15.2276C17.6894 14.9022 17.9949 14.6378 18.35 14.4576C18.7498 14.2692 19.1881 14.1768 19.63 14.1876C20.0455 14.156 20.4621 14.2313 20.8402 14.4063C21.2183 14.5814 21.5453 14.8504 21.79 15.1876C22.3056 16.0745 22.5491 17.0934 22.49 18.1176C22.5491 19.1418 22.3056 20.1607 21.79 21.0476C21.5546 21.3996 21.2317 21.6842 20.853 21.8736C20.4743 22.0629 20.0528 22.1505 19.63 22.1276ZM19.63 20.9076C19.8316 20.9196 20.0325 20.8744 20.2094 20.777C20.3864 20.6797 20.5322 20.5343 20.63 20.3576C20.869 19.8898 20.9957 19.3728 21 18.8476V17.4676C21.0216 16.9518 20.9223 16.4381 20.71 15.9676C20.5982 15.7963 20.4455 15.6556 20.2656 15.5583C20.0858 15.4609 19.8845 15.4099 19.68 15.4099C19.4755 15.4099 19.2742 15.4609 19.0943 15.5583C18.9145 15.6556 18.7618 15.7963 18.65 15.9676C18.4377 16.4381 18.3384 16.9518 18.36 17.4676L18.36 18.8476C18.3394 19.3665 18.4386 19.8832 18.65 20.3576C18.7454 20.5319 18.8878 20.6759 19.0611 20.7732C19.2344 20.8704 19.4315 20.917 19.63 20.9076ZM10.63 20.8176V21.9976L15.78 21.9976V20.7676L14 20.7676L14 14.2676H12.54L10.22 15.5676L10.77 16.6276L12.63 15.6276L12.63 20.8176H10.63Z"),n.setAttribute("fill","white"),n.setAttribute("fillRule","evenodd"),n.setAttribute("clipRule","evenodd"),n.setAttribute("fillOpacity","0.87"),w.appendChild(n),w),M=(s=document.createElementNS("http://www.w3.org/2000/svg","svg"),t=document.createElementNS("http://www.w3.org/2000/svg","path"),o=document.createElementNS("http://www.w3.org/2000/svg","path"),s.setAttribute("fill","none"),s.setAttribute("width","32"),s.setAttribute("height","32"),s.setAttribute("viewBox","0 0 32 32"),t.setAttribute("d","M15.2182 7.22145C15.4497 7.31744 15.6475 7.4799 15.7867 7.68832C15.9259 7.89673 16.0001 8.14173 16 8.39234V23.5986C16 23.8492 15.9256 24.0942 15.7864 24.3025C15.6472 24.5108 15.4493 24.6732 15.2178 24.7691C14.9862 24.865 14.7315 24.8901 14.4857 24.8412C14.2399 24.7923 14.0142 24.6717 13.837 24.4945L9.13948 19.7971H5.86253C5.52645 19.7971 5.20413 19.6635 4.96649 19.4259C4.72884 19.1883 4.59534 18.8659 4.59534 18.5299V13.4611C4.59534 13.125 4.72884 12.8027 4.96649 12.5651C5.20413 12.3274 5.52645 12.1939 5.86253 12.1939H9.13948L13.837 7.49643C14.0142 7.31911 14.24 7.19834 14.4859 7.14939C14.7317 7.10044 14.9866 7.12552 15.2182 7.22145Z"),t.setAttribute("fill","white"),t.setAttribute("fillOpacity","0.87"),s.appendChild(t),o.setAttribute("d","M21.9014 7.03508C22.139 6.79752 22.4612 6.66406 22.7973 6.66406C23.1333 6.66406 23.4555 6.79752 23.6932 7.03508C24.8714 8.21059 25.8059 9.60729 26.4428 11.145C27.0798 12.6826 27.4067 14.331 27.4048 15.9954C27.4067 17.6598 27.0798 19.3081 26.4428 20.8458C25.8059 22.3835 24.8714 23.7802 23.6932 24.9557C23.4542 25.1865 23.1341 25.3142 22.8018 25.3114C22.4696 25.3085 22.1517 25.1752 21.9168 24.9403C21.6818 24.7053 21.5486 24.3875 21.5457 24.0552C21.5428 23.723 21.6705 23.4029 21.9014 23.1639C22.8443 22.2237 23.5921 21.1063 24.1016 19.8761C24.6112 18.6458 24.8724 17.327 24.8704 15.9954C24.8704 13.1949 23.7375 10.663 21.9014 8.82689C21.6638 8.58925 21.5303 8.267 21.5303 7.93098C21.5303 7.59497 21.6638 7.27271 21.9014 7.03508ZM18.3165 10.6187C18.4342 10.5009 18.5739 10.4074 18.7278 10.3436C18.8816 10.2799 19.0465 10.247 19.213 10.247C19.3795 10.247 19.5444 10.2799 19.6983 10.3436C19.8521 10.4074 19.9919 10.5009 20.1095 10.6187C20.8165 11.3241 21.3771 12.1622 21.7592 13.0849C22.1413 14.0076 22.3373 14.9967 22.336 15.9954C22.3372 16.9941 22.1412 17.9831 21.7591 18.9058C21.377 19.8285 20.8164 20.6666 20.1095 21.3721C19.8718 21.6098 19.5493 21.7434 19.213 21.7434C18.8767 21.7434 18.5543 21.6098 18.3165 21.3721C18.0787 21.1343 17.9451 20.8118 17.9451 20.4755C17.9451 20.1393 18.0787 19.8168 18.3165 19.579C18.7881 19.1091 19.1621 18.5506 19.417 17.9355C19.6719 17.3205 19.8026 16.6611 19.8016 15.9954C19.8027 15.3296 19.672 14.6702 19.4171 14.0552C19.1622 13.4402 18.7881 12.8816 18.3165 12.4118C18.1987 12.2941 18.1052 12.1543 18.0414 12.0005C17.9776 11.8467 17.9448 11.6818 17.9448 11.5152C17.9448 11.3487 17.9776 11.1838 18.0414 11.03C18.1052 10.8761 18.1987 10.7364 18.3165 10.6187Z"),o.setAttribute("fill","white"),o.setAttribute("fillOpacity","0.87"),s.appendChild(o),s),O=(n=document.createElementNS("http://www.w3.org/2000/svg","svg"),w=document.createElementNS("http://www.w3.org/2000/svg","path"),n.setAttribute("fill","none"),n.setAttribute("width","32"),n.setAttribute("height","32"),n.setAttribute("viewBox","0 0 32 32"),w.setAttribute("d","M27 17.9976C26.4477 17.9976 26.0052 18.4465 25.9501 18.996C25.787 20.6211 25.2277 22.1869 24.3147 23.5533C23.2159 25.1978 21.6541 26.4795 19.8268 27.2364C17.9996 27.9933 15.9889 28.1913 14.0491 27.8055C12.1093 27.4196 10.3275 26.4672 8.92894 25.0687C7.53041 23.6702 6.57801 21.8883 6.19215 19.9485C5.8063 18.0087 6.00433 15.998 6.76121 14.1708C7.51809 12.3435 8.79981 10.7817 10.4443 9.68292C12.0888 8.58411 14.0222 7.99762 16 7.99762L19.6 7.99762C19.8209 7.99762 20 8.1767 20 8.39762V12.0319C20 12.3883 20.4309 12.5668 20.6828 12.3148L25.7172 7.28046C25.8734 7.12425 25.8734 6.87098 25.7172 6.71478L20.6828 1.68046C20.4309 1.42847 20 1.60694 20 1.9633V5.59762C20 5.81853 19.8209 5.99762 19.6 5.99762L16 5.99762C13.6266 5.99762 11.3066 6.70141 9.33316 8.01998C7.35977 9.33856 5.8217 11.2127 4.91345 13.4054C4.0052 15.5981 3.76756 18.0109 4.23058 20.3387C4.6936 22.6665 5.83649 24.8047 7.51472 26.4829C9.19296 28.1611 11.3312 29.304 13.6589 29.767C15.9867 30.2301 18.3995 29.9924 20.5922 29.0842C22.7849 28.1759 24.6591 26.6379 25.9776 24.6645C27.1105 22.969 27.7896 21.0177 27.9584 18.9965C28.0043 18.4461 27.5523 17.9976 27 17.9976ZM19.63 22.1276C19.1882 22.1384 18.7499 22.046 18.35 21.8576C17.995 21.6774 17.6894 21.413 17.46 21.0876C17.2085 20.7079 17.032 20.2836 16.94 19.8376C16.8219 19.2855 16.7648 18.7221 16.77 18.1576C16.766 17.5931 16.823 17.0298 16.94 16.4776C17.0339 16.0321 17.2102 15.6082 17.46 15.2276C17.6894 14.9022 17.995 14.6378 18.35 14.4576C18.7499 14.2692 19.1882 14.1768 19.63 14.1876C20.0455 14.156 20.4621 14.2313 20.8402 14.4063C21.2183 14.5814 21.5453 14.8504 21.79 15.1876C22.3057 16.0745 22.5491 17.0934 22.49 18.1176C22.5491 19.1418 22.3057 20.1607 21.79 21.0476C21.5546 21.3996 21.2317 21.6842 20.853 21.8736C20.4743 22.0629 20.0528 22.1505 19.63 22.1276ZM19.63 20.9076C19.8316 20.9196 20.0325 20.8744 20.2095 20.777C20.3864 20.6797 20.5322 20.5343 20.63 20.3576C20.869 19.8898 20.9957 19.3728 21 18.8476V17.4676C21.0216 16.9518 20.9223 16.4381 20.71 15.9676C20.5982 15.7963 20.4455 15.6556 20.2657 15.5583C20.0858 15.4609 19.8845 15.4099 19.68 15.4099C19.4755 15.4099 19.2742 15.4609 19.0944 15.5583C18.9145 15.6556 18.7618 15.7963 18.65 15.9676C18.4377 16.4381 18.3384 16.9518 18.36 17.4676L18.36 18.8476C18.3394 19.3665 18.4386 19.8832 18.65 20.3576C18.7454 20.5319 18.8879 20.6759 19.0611 20.7732C19.2344 20.8704 19.4315 20.917 19.63 20.9076ZM10.6299 20.8176V21.9976L15.7799 21.9976V20.7676L13.9999 20.7676L13.9999 14.2676H12.5399L10.2199 15.5676L10.7699 16.6276L12.6299 15.6276L12.6299 20.8176H10.6299Z"),w.setAttribute("fill","white"),w.setAttribute("fillRule","evenodd"),w.setAttribute("clipRule","evenodd"),w.setAttribute("fillOpacity","0.87"),n.appendChild(w),n),P=(t=document.createElementNS("http://www.w3.org/2000/svg","svg"),o=document.createElementNS("http://www.w3.org/2000/svg","path"),s=document.createElementNS("http://www.w3.org/2000/svg","circle"),t.setAttribute("fill","none"),t.setAttribute("width","120"),t.setAttribute("height","120"),t.setAttribute("viewBox","0 0 120 120"),s.setAttribute("cx","60"),s.setAttribute("cy","60"),s.setAttribute("r","50"),s.setAttribute("fill","#05173A"),s.setAttribute("opacity","0.8"),t.appendChild(s),o.setAttribute("d","M35.5 47.7532V37.2532C35.5 36.789 35.6844 36.3439 36.0125 36.0157C36.3407 35.6875 36.7859 35.5032 37.25 35.5032C37.7141 35.5032 38.1592 35.6875 38.4874 36.0157C38.8156 36.3439 39 36.789 39 37.2532V41.4777C43.8328 35.9881 50.6266 32.6138 57.921 32.0802C60.8949 31.8541 63.8858 32.107 66.7795 32.8292C72.3084 34.2106 77.2844 37.2456 81.0432 41.529C84.8021 45.8124 87.165 51.1404 87.8166 56.8019C88.4681 62.4634 87.3773 68.1889 84.6896 73.2142C82.002 78.2395 77.8455 82.3255 72.775 84.9267C69.3518 86.6841 65.6013 87.7126 61.7605 87.9472C55.3371 88.3665 48.967 86.5458 43.7355 82.7952C40.6255 80.5825 38.0022 77.7556 36.0276 74.4892C34.0531 71.2228 32.7693 67.5863 32.2555 63.8042C31.9994 61.9444 31.9302 60.0637 32.049 58.1902C32.0637 57.9608 32.1234 57.7366 32.2248 57.5303C32.3261 57.3241 32.4671 57.1398 32.6397 56.988C32.8123 56.8362 33.0131 56.7199 33.2306 56.6458C33.4481 56.5716 33.6781 56.541 33.9075 56.5557C34.1368 56.5704 34.361 56.6301 34.5673 56.7315C34.7736 56.8328 34.9579 56.9738 35.1096 57.1464C35.2614 57.319 35.3777 57.5198 35.4519 57.7373C35.5261 57.9548 35.5567 58.1848 35.542 58.4142C35.5107 58.9432 35.4967 59.4732 35.5 60.0032C35.5 70.8532 42.5525 80.0582 52.328 83.2782C55.8688 84.4432 59.6288 84.7844 63.3215 84.2757C66.1662 83.8897 68.9208 83.0059 71.459 81.6647C76.4268 79.028 80.3368 74.763 82.5329 69.5854C84.729 64.4077 85.0776 58.6322 83.5204 53.2279C81.9631 47.8236 78.5946 43.1193 73.9801 39.9041C69.3655 36.689 63.7856 35.1586 58.1765 35.5697C55.8757 35.7451 53.6104 36.2398 51.446 37.0397C46.7744 38.7857 42.7447 41.912 39.8925 46.0032H46C46.4641 46.0032 46.9092 46.1875 47.2374 46.5157C47.5656 46.8439 47.75 47.289 47.75 47.7532C47.75 48.2173 47.5656 48.6624 47.2374 48.9906C46.9092 49.3188 46.4641 49.5032 46 49.5032H37.25C36.7864 49.5013 36.3424 49.3164 36.0146 48.9886C35.6868 48.6608 35.5018 48.2167 35.5 47.7532ZM51.25 52.8877C51.25 49.6327 54.68 47.5152 57.592 48.9782L71.732 56.0937C74.9415 57.7107 74.9415 62.2957 71.732 63.9127L57.592 71.0247C56.9254 71.3602 56.184 71.5196 55.4384 71.4878C54.6928 71.456 53.9678 71.234 53.3322 70.8429C52.6966 70.4518 52.1716 69.9046 51.8072 69.2533C51.4427 68.6021 51.2509 67.8685 51.25 67.1222V52.8877Z"),o.setAttribute("fill","#52B5F9"),t.appendChild(o),t),N=(w=document.createElementNS("http://www.w3.org/2000/svg","svg"),n=document.createElementNS("http://www.w3.org/2000/svg","path"),w.setAttribute("fill","none"),w.setAttribute("width","12"),w.setAttribute("height","12"),w.setAttribute("viewBox","0 0 12 12"),n.setAttribute("d","M6 4.5C5.60218 4.5 5.22064 4.65804 4.93934 4.93934C4.65804 5.22064 4.5 5.60218 4.5 6C4.5 6.39782 4.65804 6.77936 4.93934 7.06066C5.22064 7.34196 5.60218 7.5 6 7.5C6.39782 7.5 6.77936 7.34196 7.06066 7.06066C7.34196 6.77936 7.5 6.39782 7.5 6C7.5 5.60218 7.34196 5.22064 7.06066 4.93934C6.77936 4.65804 6.39782 4.5 6 4.5ZM6 8.5C5.33696 8.5 4.70107 8.23661 4.23223 7.76777C3.76339 7.29893 3.5 6.66304 3.5 6C3.5 5.33696 3.76339 4.70107 4.23223 4.23223C4.70107 3.76339 5.33696 3.5 6 3.5C6.66304 3.5 7.29893 3.76339 7.76777 4.23223C8.23661 4.70107 8.5 5.33696 8.5 6C8.5 6.66304 8.23661 7.29893 7.76777 7.76777C7.29893 8.23661 6.66304 8.5 6 8.5ZM6 2.25C3.5 2.25 1.365 3.805 0.5 6C1.365 8.195 3.5 9.75 6 9.75C8.5 9.75 10.635 8.195 11.5 6C10.635 3.805 8.5 2.25 6 2.25Z"),n.setAttribute("fill","white"),w.appendChild(n),w),B=(s=document.createElementNS("http://www.w3.org/2000/svg","svg"),o=document.createElementNS("http://www.w3.org/2000/svg","path"),s.setAttribute("fill","none"),s.setAttribute("width","20"),s.setAttribute("height","20"),s.setAttribute("viewBox","0 0 20 20"),o.setAttribute("d","M14.6 5.83594C14.8209 5.83594 15 6.01502 15 6.23594L15 13.7693C15 13.9902 14.8209 14.1693 14.6 14.1693H12.9C12.6791 14.1693 12.5 13.9902 12.5 13.7693V6.23594C12.5 6.01502 12.6791 5.83594 12.9 5.83594L14.6 5.83594ZM5.612 13.7868C5.34558 13.9533 5 13.7617 5 13.4476L5 6.55764C5 6.24346 5.34558 6.05193 5.612 6.21844L11.1239 9.6634C11.3746 9.82007 11.3746 10.1851 11.1239 10.3418L5.612 13.7868Z"),o.setAttribute("fill","#000E2B"),o.setAttribute("fillRule","evenodd"),o.setAttribute("clipRule","evenodd"),s.appendChild(o),s);class F{constructor(e,t,n,i,r){this.container=e,this.options=t,this.cbError=n,this.cbFs=i,this.cbExitFs=r}initialize(){let e=this.options.isLive;var t=this.options.isAdOn;let n=function(){let e=!1;var t;return t=navigator.userAgent||navigator.vendor||window.opera,!(!/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)&&!/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))||e}(),s=!1,o=-1<navigator.userAgent.toLowerCase().indexOf("safari/");console.log("is mobile: ",n),r(container,{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",borderRadius:"0.5rem",overflow:"hidden",aspectRatio:"16/9"});var u=document.createElement("div");i(u,"video__wrapper");const c=document.createElement("video"),g=(i(c,"main__video"),document.createElement("video"));let v;i(g,"ads__video hide"),c.muted=!!n,c.volume=this.options.volume||1,c.addEventListener("click",()=>{n?(G.classList.toggle("hide"),w.classList.toggle("hide")):h(c,e,H,V,R,L)}),c.addEventListener("timeupdate",()=>{var t=c,n=z,i=T,r=I,a=D,s=K,o=e;if(!(t.currentTime<0))if(o)i.classList.toggle("hide",!t.paused),r.classList.toggle("hide",t.paused),a.classList.add("hide");else{var u=Math.round(t.duration)||0,l=Math.round(t.currentTime);o=l/u*100;n.style.setProperty("--progress-percent",o),n.value=o;for(let e=0;e<t.buffered.length;e++)if(t.buffered.start(t.buffered.length-1-e)<l){var d=100*t.buffered.end(t.buffered.length-1-e)/u;n.style.setProperty("--buffered-percent",d);break}l===u?(i.classList.add("hide"),r.classList.add("hide"),a.classList.remove("hide"),s.classList.remove("hide")):(i.classList.toggle("hide",!t.paused),r.classList.toggle("hide",t.paused),a.classList.add("hide"),s.classList.add("hide"))}{o=c,i=ne;let e=(r=Math.floor(o.currentTime))%60,t=Math.floor(r/60),n=(r=Math.floor(o.duration))%60,a=Math.floor(r/60);t<10&&(t="0"+t),e<10&&(e="0"+e),a<10&&(a="0"+a),n<10&&(n="0"+n),i.textContent=t+":"+e+" / "+a+":"+n}q.classList.add("hide")}),c.addEventListener("waiting",()=>{q.classList.remove("hide")}),c.addEventListener("seeking",()=>{q.classList.remove("hide")}),c.addEventListener("seeked",()=>{q.classList.add("hide")}),c.addEventListener("playing",()=>{q.classList.add("hide"),q.classList.add("transparent"),K.classList.add("hide")}),n&&(c.onplay=()=>{setTimeout(()=>{G.classList.add("hide"),w.classList.add("hide")},3e3)}),window.timeout=v;var b=()=>{c.paused||n||(G.classList.remove("hide"),e&&oe.classList.add("hide"),(document.fullscreenElement||document.webkitFullScreenElement)&&w.classList.remove("hide"),clearTimeout(v),v=setTimeout(()=>{G.classList.add("hide"),re.classList.add("hide"),e&&oe.classList.remove("hide"),(document.fullscreenElement||document.webkitFullscreenElement)&&w.classList.add("hide")},3e3))},A=(container.addEventListener("mousemove",b),container.addEventListener("click",b),()=>{!n&&(clearTimeout(v),G.classList.remove("hide"),e&&oe.classList.add("hide"),document.fullscreenElement||document.webkitFullScreenElement)&&w.classList.remove("hide")});c.addEventListener("pause",A),this.container.addEventListener("mouseleave",b);const w=document.createElement("div");i(w,"title__wrapper hide");var F=document.createElement("div"),U=(i(F,"title__inner"),document.createElement("div")),j=(i(U,"title"),U.innerHTML=this.options.name,document.createElement("div"));i(j,"date"),j.innerHTML=(e=>{if(!e)return"";e=new Date(new Date(e).getTime()+252e5).toUTCString().replace(/ GMT$/,"");let t=""+(e=new Date(e)).getDate(),n=""+(e.getMonth()+1),i=""+e.getHours(),r=""+e.getMinutes();return t.length<2&&(t="0"+t),n.length<2&&(n="0"+n),i.length<2&&(i="0"+i),r.length<2&&(r="0"+r),i+":"+r+" | "+t+"/"+n})(this.options.startTime),F.appendChild(U),F.appendChild(j),w.appendChild(F);const G=document.createElement("div");i(G,"controls__wrapper"),U=document.createElement("div"),i(U,"controls"),G.appendChild(U);const H=document.createElement("div"),V=(i(H,"icon__wrapper"),document.createElement("div")),K=(i(V,"icon__inner"),H.appendChild(V),document.createElement("div")),q=(i(K,"mask hide"),K.appendChild(P),document.createElement("div"));i(q,"loading__mask hide"),j=document.createElement("div"),i(j,"loading__spinner"),q.appendChild(j),P.addEventListener("click",e=>{e.stopPropagation(),c.play()}),F=document.createElement("div"),i(F,"progress__wrapper");const z=document.createElement("input");i(z,"progress__bar "+(e?"live":"")),a(z,{type:"range",name:"volume",min:"0",max:"100",step:"any",value:""+(e?100:0)}),F.appendChild(z),z.addEventListener("input",e=>{e.preventDefault();e=z.min;var t=z.max,n=z.value;z.style.setProperty("--progress-percent",100*(n-e)/(t-e)),c.currentTime=n*c.duration/100});j=document.createElement("div");var W=(i(j,"control__btns"),document.createElement("div")),Y=(i(W,"control__btns__leftside "+(e?"live":"")),document.createElement("div")),X=(i(Y,"control__btns__rightside"),document.createElement("div")),Q=(i(X,"button"),I.setAttribute("class","hide"),D.setAttribute("class","hide"),X.appendChild(T),X.appendChild(I),X.appendChild(D),X.addEventListener("click",t=>{t.stopPropagation(),h(c,e,H,V,R,L)}),document.createElement("div")),$=(i(Q,"button "+(e?"hide":"")),Q.appendChild(_),Q.addEventListener("click",e=>{e.stopPropagation(),c.currentTime=c.currentTime-10}),document.createElement("div")),Z=(i($,"button "+(e?"hide":"")),$.appendChild(O),$.addEventListener("click",e=>{e.stopPropagation(),c.currentTime=c.currentTime+10}),document.createElement("div")),J=(i(Z,"volume__wrapper"),document.createElement("div")),ee=(i(J,"button toggle__volume"),J.appendChild(M),J.appendChild(k),M.setAttribute("class",c.muted?"hide":""),k.setAttribute("class",c.muted?"":"hide"),Z.appendChild(J),this.options.volume);const te=document.createElement("input"),ne=(i(te,"control__volume__slider "+(e?"live":"")),a(te,{type:"range",name:"volume",min:"0",max:"1",step:"0.05",value:""+(ee||1)}),te.style.setProperty("--volume",ee),Z.appendChild(te),te.addEventListener("input",e=>{var t=te.min,n=te.max,i=te.value;te.style.backgroundSize=100*(i-t)/(n-t)+"% 100%",c.muted=!1,i=e,t=M,e=k,(n=c).volume=i.target.value,0==i.target.value?(n.muted=!0,t.classList.add("hide"),e.classList.remove("hide")):(n.muted=!1,t.classList.remove("hide"),e.classList.add("hide"))}),Z.addEventListener("mouseover",()=>{r(te,{width:"5rem",transform:"scaleX(1)"})}),Z.addEventListener("mouseout",()=>{r(te,{width:"0.0001px",transform:"scaleX(0)"})}),J.addEventListener("click",e=>{e.stopPropagation(),e=c.volume,!0===c.muted?(0==e?(te.value=.4,c.volume=.4):te.value=e,te.style.backgroundSize=100*te.value+"% 100%",c.muted=!1,M.classList.remove("hide"),k.classList.add("hide")):(te.value=0,te.style.backgroundSize="0% 100%",c.muted=!0,M.classList.add("hide"),k.classList.remove("hide"))}),document.createElement("div"));i(ne,"video__timer "+(e?"hide":""));ee=document.createElement("div"),i(ee,"button__live "+(e?"":"hide")),ee.appendChild(C),J=document.createElement("div");var ie=(i(J,"switch__track"),document.createElement("i"));i(ie,"fa-solid fa-gear"),J.appendChild(ie);const re=document.createElement("div");i(re,"setting__box hide");var ae=((ie=document.createElement("div")).innerText="Luồng tiếng bình luận",i(ie,"switch__track"),re.appendChild(ie),document.createElement("div")),se=(J=(ae.innerText="Chất lượng hình ảnh",i(ae,"switch__quality"),re.appendChild(ae),Y.appendChild(re),J.addEventListener("click",e=>{e.stopPropagation(),e.preventDefault(),re.classList.toggle("hide")}),document.createElement("div")),J=(i(J,"button toggle"),x.setAttribute("class","hide"),J.appendChild(S),J.appendChild(x),Y.appendChild(J),J.addEventListener("click",e=>{var t=c.getAttribute("playsinline");e.stopPropagation(),t?(s?pe:ge)():document.fullscreenElement||document.webkitFullscreenElement?o?document.exitFullscreen():document.webkitExitFullScreen():o?this.container.webkitRequestFullscreen():this.container.requestFullscreen()}),o?document.onwebkitfullscreenchange=()=>{x.classList.toggle("hide",!document.webkitFullscreenElement),S.classList.toggle("hide",document.webkitFullscreenElement),w.classList.toggle("hide",!document.webkitFullscreenElement)}:document.onfullscreenchange=()=>{x.classList.toggle("hide",!document.fullscreenElement),S.classList.toggle("hide",document.fullscreenElement),w.classList.toggle("hide",!document.fullscreenElement)},document.createElement("div")),i(J,"interactive__quiz top hidden"),document.createElement("div"));i(se,"interactive__quiz bottom hidden");const oe=document.createElement("div");i(oe,"view__count hide");var ue=document.createElement("div"),le=(i(ue,"views"),oe.appendChild(N),oe.appendChild(ue),document.createElement("div")),ce=(i(le,"ad__container"),document.createElement("div")),de=(i(ce,"skip__ad hide"),document.createElement("p"));i(de,"skip__text"),B.setAttribute("class","hide"),ce.appendChild(de),ce.appendChild(B),this.container.appendChild(ce);let he=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0];he=he.map((e,t)=>(e=document.createElement("div"),i(e,`fingerprint pos-${t+1} hide`),this.container.appendChild(e),e)),window.video=c,window.quizTop=J,window.quizBottom=se,window.videoWrapper=u,window.controllerWrapper=G,window.progressBar=z,window.views=ue,window.isFocusVideo=!1,window.handleHideController=b,window.handleShowController=A,window.fingerprints=he,window.divSwitchTrack=ie,window.divSwitchQuality=ae,W.appendChild(X),W.appendChild(Q),W.appendChild($),W.appendChild(Z),W.appendChild(ne),W.appendChild(ee),j.appendChild(W),j.appendChild(Y),U.appendChild(F),U.appendChild(j),u.appendChild(c),u.appendChild(g),u.appendChild(G),u.appendChild(H),u.appendChild(w),u.appendChild(K),u.appendChild(q),this.container.appendChild(J),this.container.appendChild(u),this.container.appendChild(le),this.container.appendChild(se);const fe=e=>{this.cbError(e)},ge=()=>{this.cbFs(),s=!0,x.classList.remove("hide"),S.classList.add("hide"),console.log("fake fullscreen")},pe=()=>{this.cbExitFs(),s=!1,x.classList.add("hide"),S.classList.remove("hide"),console.log("exit fake fullscreen")};switch(t&&(ue=()=>{setTimeout(()=>{var e=c,t=g;if(window.google&&!m){m=!0,console.log("loading ads"),t.load(),f.initialize(),t=e.clientWidth,e=e.clientHeight;try{p.init(t,e,google.ima.ViewMode.NORMAL),p.start()}catch(e){console.log("AdsManager could not be started")}}},1e3)},window.loadAdsEvent=ue,c.addEventListener("play",ue),y(c,g,le,ce,de,B,fe)),A=(b=this.options.src)?(b=b.toString()).includes(".m3u8")||b.includes(".M3U8")?"hls":b.includes(".mpd")||b.includes(".MPD")?"dash":"unknown":"unknown"){case"dash":d(c,this.options,fe);break;case"hls":l(c,this.options,fe);break;default:fe({errorCode:400,errorMessage:"link error!"})}e&&this.options.drm&&E(this.options.contentId,this.options.signKey,he,fe),console.log("ver.2.8.0")}destroy(){window.quizTop.remove(),window.quizBottom.remove(),window.videoWrapper.remove(),window.fingerprints.forEach(e=>{e.remove()}),window.video.removeEventListener("play",window.loadAdsEvent),clearTimeout(window.fingerprintTimeout),window.hls&&(window.hls.detachMedia(),window.hls.destroy(),window.hls=void 0,console.log("destroy hls")),window.video&&(window.video.src=""),window.playerShaka&&(window.playerShaka.unload(),window.playerShaka.destroy(),window.playerShaka=void 0,console.log("destroy shaka"))}showViews(e,t){window.views.innerText=t?t<e?e:t:100<e?e:100}showQuizTop(e){window.quizTop.style.setProperty("--size",e),window.quizTop.classList.remove("hidden"),window.videoWrapper.classList.add("quiz"),window.videoWrapper.style.setProperty("--size",e)}showQuizBottom(e){window.quizBottom.style.setProperty("--size",e),window.quizBottom.classList.remove("hidden"),window.videoWrapper.classList.add("quiz"),window.videoWrapper.style.setProperty("--size",e)}hideQuiz(){window.quizTop.classList.add("hidden"),window.quizBottom.classList.add("hidden"),window.videoWrapper.classList.remove("quiz")}removeFocusVideo(){window.controllerWrapper.classList.add("hide"),container.removeEventListener("mousemove",window.handleHideController),container.removeEventListener("click",window.handleHideController),container.removeEventListener("mouseleave",window.handleHideController),window.video.removeEventListener("pause",window.handleShowController),window.isFocusVideo=!1,console.log("remove focus")}focusVideo(){window.controllerWrapper.classList.remove("hide"),container.addEventListener("mousemove",window.handleHideController),container.addEventListener("click",window.handleHideController),window.video.addEventListener("pause",window.handleShowController),this.container.addEventListener("mouseleave",window.handleHideController),window.isFocusVideo=!0,console.log("add focus")}isFocusVideo(){return window.isFocusVideo}toggleSeekbar(){window.progressBar.classList.toggle("hide")}}}],n={},e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:i})},e.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var r in t)e.d(i,r,function(e){return t[e]}.bind(null,r));return i},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e.p="",e(e.s=6);function e(i){var r;return(n[i]||(r=n[i]={i:i,l:!1,exports:{}},t[i].call(r.exports,r,r.exports,e),r.l=!0,r)).exports}var t,n}));